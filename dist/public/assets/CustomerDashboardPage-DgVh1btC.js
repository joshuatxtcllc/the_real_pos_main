import{c as I,a as N,u as T,r,j as e,L as S,B as L,T as k,i as w,k as o,l as c,m as O,C as l,b as i,d,e as u,f as m,n as P}from"./index-DbzYNAbt.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=I("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function E(){const[,a]=N(),{toast:t}=T(),[s,h]=r.useState(null),[x,f]=r.useState(""),[g,j]=r.useState(!0),[p,v]=r.useState("dashboard");r.useEffect(()=>{const C=localStorage.getItem("customerAuthToken"),n=localStorage.getItem("customerId"),y=localStorage.getItem("customerName");if(!C||!n){t({title:"Authentication required",description:"Please log in to access your dashboard",variant:"destructive"}),a("/customer-portal");return}h(parseInt(n,10)),f(y||"Customer"),j(!1)},[a,t]);const b=()=>{localStorage.removeItem("customerAuthToken"),localStorage.removeItem("customerEmail"),localStorage.removeItem("customerName"),localStorage.removeItem("customerId"),t({title:"Logged out",description:"You have been logged out successfully"}),a("/customer-portal")};return g?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(S,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",x]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your framing orders and preferences"})]}),e.jsxs(L,{variant:"outline",onClick:b,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),e.jsxs(k,{defaultValue:"dashboard",value:p,onValueChange:v,className:"space-y-6",children:[e.jsxs(w,{className:"grid grid-cols-3 w-full max-w-md",children:[e.jsx(o,{value:"dashboard",children:"Dashboard"}),e.jsx(o,{value:"orders",children:"Orders"}),e.jsx(o,{value:"preferences",children:"Preferences"})]}),e.jsx(c,{value:"dashboard",children:s&&e.jsx(O,{customerId:s})}),e.jsx(c,{value:"orders",children:e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Your Orders"}),e.jsx(u,{children:"Track the status of your framing orders"})]}),e.jsx(m,{children:s&&e.jsx(P,{customerId:s})})]})}),e.jsx(c,{value:"preferences",children:s&&e.jsxs(l,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Your Preferences"}),e.jsx(u,{children:"Manage your notification settings and framing preferences"})]}),e.jsx(m,{children:e.jsx("iframe",{src:`/customer-preferences-iframe?customerId=${s}`,className:"w-full min-h-[500px] border-0",title:"Customer Preferences"})})]})})]})]})}export{E as default};
