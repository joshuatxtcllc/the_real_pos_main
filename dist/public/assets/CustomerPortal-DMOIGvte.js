import{c as f,r as i,u as g,a as j,j as e,C as N,b as v,d as y,e as I,f as w,M as C,I as d,B as S,g as E,h as b}from"./index-VskqibOw.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=f("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function D(){const[a,m]=i.useState(""),[o,u]=i.useState(""),[r,n]=i.useState(!1),{toast:c}=g(),[,x]=j(),h=async s=>{s.preventDefault(),n(!0);try{if(!a.trim())throw new Error("Email is required");if(!o.trim())throw new Error("Order ID is required");const t=await b("POST","/api/customer-portal/login",{email:a,orderId:parseInt(o,10)});if(!t.ok){const p=await t.json();throw new Error(p.message||"Invalid login details")}const l=await t.json();localStorage.setItem("customerAuthToken",l.token),localStorage.setItem("customerEmail",a),localStorage.setItem("customerName",l.customerName||""),localStorage.setItem("customerId",l.customerId.toString()),c({title:"Login successful",description:"Welcome to your customer portal"}),x("/customer-dashboard")}catch(t){c({title:"Login failed",description:t instanceof Error?t.message:"Invalid credentials",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"container flex items-center justify-center min-h-screen py-12",children:e.jsxs(N,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"space-y-1",children:[e.jsx(y,{className:"text-2xl text-center",children:"Customer Portal"}),e.jsx(I,{className:"text-center",children:"Sign in to track your framing orders"})]}),e.jsx(w,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"email",placeholder:"Email address",value:a,onChange:s=>m(s.target.value),className:"pl-10",disabled:r})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(d,{type:"text",placeholder:"Order ID",value:o,onChange:s=>u(s.target.value),className:"pl-10",disabled:r})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the order ID provided in your confirmation email"})]}),e.jsx(S,{type:"submit",className:"w-full",disabled:r,children:r?"Signing in...":"Sign In"})]})}),e.jsx(E,{className:"flex flex-col",children:e.jsx("p",{className:"text-sm text-center text-muted-foreground mt-2",children:"Need help? Contact us at support@jaysframes.com"})})]})})}export{D as default};
