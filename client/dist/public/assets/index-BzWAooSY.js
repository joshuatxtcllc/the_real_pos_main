const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CustomerPortal-_fiLKhx1.js","assets/ui-O3Y4hNsB.js","assets/vendor--0RGCJ5T.js","assets/icons-BKUwqfHe.js","assets/query-DSGfYlti.js","assets/utils-CJ8RBMVN.js","assets/charts-zhNjaY9P.js","assets/forms-BphQ7k6W.js","assets/CustomerDashboardPage-Bf48wOqq.js"])))=>i.map(i=>d[i]);
var s2=Object.defineProperty;var r2=(s,t,r)=>t in s?s2(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var R=(s,t,r)=>r2(s,typeof t!="symbol"?t+"":t,r);import{j as e,V as Ey,R as Dy,A as Ay,C as Iy,T as _y,D as Ry,P as n2,S as gl,c as Vi,a as fs,u as We,b as On,d as ms,e as Se,f as mr,g as as,h as ge,i as Oy,k as ds,l as Ss,m as vl,n as a2,o as uh,p as yl,q as jl,r as My,I as Fy,s as Ta,t as bl,v as Ly,w as $y,x as By,F as Vy,y as nu,z as au,B as Uy,E as iu,O as Ui,G as Hi,H as Pa,J as qi,K as zi,L as ou,M as lu,N as cu,Q as i2,U as Hy,W as qy,X as o2,Y as zy,Z as Wy,_ as Ky,$ as Gy,a0 as Qy,a1 as Zy,a2 as Yy,a3 as l2,a4 as c2,a5 as Xy,a6 as d2,a7 as Jy}from"./ui-O3Y4hNsB.js";import{a as du,r as p,c as u2,b as m2,R as Pe,g as h2}from"./vendor--0RGCJ5T.js";import{Q as p2,u as ue,a as Ae,b as ss,c as f2}from"./query-DSGfYlti.js";import{t as x2,c as g2,f as lr,s as oo,i as mh}from"./utils-CJ8RBMVN.js";import{X as Mn,C as ns,S as Wc,M as ej,a as wl,b as tj,c as ls,L as Ye,d as Fn,R as nr,e as sj,E as v2,f as hi,Z as y2,g as j2,h as rj,i as hh,U as Mr,j as nj,I as pi,A as ph,k as b2,l as Fo,D as Nl,W as w2,H as N2,m as uu,n as S2,o as Nt,G as mu,p as Ks,q as $t,r as aj,s as fi,t as kn,u as Ln,F as Sl,v as ni,P as Lo,w as Sr,x as ma,T as $o,y as C2,z as ij,B as Cl,J as Ea,K as Fr,N as oj,O as k2,Q as T2,V as Vr,Y as Gs,_ as Gr,$ as xi,a0 as P2,a1 as E2,a2 as D2,a3 as Tn,a4 as hu,a5 as Us,a6 as gi,a7 as mn,a8 as lj,a9 as A2,aa as Dt,ab as vi,ac as cj,ad as I2,ae as _2,af as Kc,ag as Hs,ah as R2,ai as fh,aj as ha,ak as O2,al as dj,am as Gc,an as M2,ao as F2,ap as No,aq as L2,ar as pu,as as uj,at as mj,au as qa,av as $2,aw as hj,ax as B2,ay as V2,az as U2,aA as H2,aB as lo,aC as q2,aD as z2,aE as Qc,aF as W2,aG as K2,aH as G2,aI as on,aJ as Bo,aK as Q2,aL as Z2,aM as Y2,aN as hn,aO as xh,aP as X2}from"./icons-BKUwqfHe.js";import{p as pj,R as _r,L as fj,C as ai,X as ii,Y as Zn,T as Rr,a as xj,b as oi,B as Zc,c as Yc,P as Xc,d as Jc,e as Vo,f as yt}from"./charts-zhNjaY9P.js";import{o as J2,r as eP,a as tP,u as sP,F as rP,C as nP,b as gj}from"./forms-BphQ7k6W.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var ed={},gh=du;ed.createRoot=gh.createRoot,ed.hydrateRoot=gh.hydrateRoot;const aP="modulepreload",iP=function(s){return"/"+s},vh={},yh=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=iP(c),c in vh)return;vh[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":aP,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function oP(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var r,n,a,i,o=[],l="",c=s.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~n?n:~i?i:a.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var vj={exports:{}},yj={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=p;function lP(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var cP=typeof Object.is=="function"?Object.is:lP,dP=pa.useState,uP=pa.useEffect,mP=pa.useLayoutEffect,hP=pa.useDebugValue;function pP(s,t){var r=t(),n=dP({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return mP(function(){a.value=r,a.getSnapshot=t,fc(a)&&i({inst:a})},[s,r,t]),uP(function(){return fc(a)&&i({inst:a}),s(function(){fc(a)&&i({inst:a})})},[s]),hP(r),r}function fc(s){var t=s.getSnapshot;s=s.value;try{var r=t();return!cP(s,r)}catch{return!0}}function fP(s,t){return t()}var xP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fP:pP;yj.useSyncExternalStore=pa.useSyncExternalStore!==void 0?pa.useSyncExternalStore:xP;vj.exports=yj;var gP=vj.exports;const vP=u2.useInsertionEffect,yP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jP=yP?p.useLayoutEffect:p.useEffect,bP=vP||jP,jj=s=>{const t=p.useRef([s,(...r)=>t[0](...r)]).current;return bP(()=>{t[0]=s}),t[1]},wP="popstate",fu="pushState",xu="replaceState",NP="hashchange",jh=[wP,fu,xu,NP],SP=s=>{for(const t of jh)addEventListener(t,s);return()=>{for(const t of jh)removeEventListener(t,s)}},bj=(s,t)=>gP.useSyncExternalStore(SP,s,t),CP=()=>location.search,kP=({ssrSearch:s=""}={})=>bj(CP,()=>s),bh=()=>location.pathname,TP=({ssrPath:s}={})=>bj(bh,s?()=>s:bh),PP=(s,{replace:t=!1,state:r=null}={})=>history[t?xu:fu](r,"",s),EP=(s={})=>[TP(s),PP],wh=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[wh]>"u"){for(const s of[fu,xu]){const t=history[s];history[s]=function(){const r=t.apply(this,arguments),n=new Event(s);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,wh,{value:!0})}const DP=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",wj=(s="")=>s==="/"?"":s,AP=(s,t)=>s[0]==="~"?s.slice(1):wj(t)+s,IP=(s="",t)=>DP(Nh(wj(s)),Nh(t)),Nh=s=>{try{return decodeURI(s)}catch{return s}},Nj={hook:EP,searchHook:kP,parser:oP,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:s=>s},Sj=p.createContext(Nj),Da=()=>p.useContext(Sj),Cj={},kj=p.createContext(Cj),kl=()=>p.useContext(kj),Tl=s=>{const[t,r]=s.hook(s);return[IP(s.base,t),jj((n,a)=>r(AP(n,s.base),a))]},Cs=()=>Tl(Da()),gu=(s,t,r,n)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",n),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((h,m)=>[h,c[m]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[l]:[]]:[!1,null]},_P=s=>gu(Da().parser,s,Cs()[0]),RP=({children:s,...t})=>{var u,h;const r=Da(),n=t.hook?Nj:r;let a=n;const[i,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=p.useRef({}),c=l.current,d=c;for(let m in n){const x=m==="base"?n[m]+(t[m]||""):t[m]||n[m];c===d&&x!==d[m]&&(l.current=d={...d}),d[m]=x,x!==n[m]&&(a=d)}return p.createElement(Sj.Provider,{value:a,children:s})},Sh=({children:s,component:t},r)=>t?p.createElement(t,{params:r}):typeof s=="function"?s(r):s,OP=s=>{let t=p.useRef(Cj),r=t.current;for(const n in s)s[n]!==r[n]&&(r=s);return Object.keys(s).length===0&&(r=s),t.current=r},Ze=({path:s,nest:t,match:r,...n})=>{const a=Da(),[i]=Tl(a),[o,l,c]=r??gu(a.parser,s,i,t),d=OP({...kl(),...l});if(!o)return null;const u=c?p.createElement(RP,{base:c},Sh(n,d)):Sh(n,d);return p.createElement(kj.Provider,{value:d,children:u})},Rt=p.forwardRef((s,t)=>{const r=Da(),[n,a]=Tl(r),{to:i="",href:o=i,onClick:l,asChild:c,children:d,className:u,replace:h,state:m,...x}=s,g=jj(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l==null||l(v),v.defaultPrevented||(v.preventDefault(),a(o,s)))}),f=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&p.isValidElement(d)?p.cloneElement(d,{onClick:g,href:f}):p.createElement("a",{...x,onClick:g,href:f,className:u!=null&&u.call?u(n===o):u,children:d,ref:t})}),Tj=s=>Array.isArray(s)?s.flatMap(t=>Tj(t&&t.type===p.Fragment?t.props.children:t)):[s],MP=({children:s,location:t})=>{const r=Da(),[n]=Tl(r);for(const a of Tj(s)){let i=0;if(p.isValidElement(a)&&(i=gu(r.parser,a.props.path,t||n,a.props.nest))[0])return p.cloneElement(a,{match:i})}return null};async function FP(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function le(s,t,r){const a={method:s,headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"};r&&(a.body=JSON.stringify(r));const i=await fetch(t,a),o=i.headers.get("content-type");if(o&&o.includes("application/json"))return i;if(!i.ok){const l=await i.text();return console.error("Non-JSON response:",l.substring(0,500)),new Response(JSON.stringify({message:`Server returned non-JSON response with status ${i.status}`}),{status:i.status,headers:{"Content-Type":"application/json"}})}return i}const LP=({on401:s})=>async({queryKey:t})=>{const r=await fetch(t[0],{credentials:"include"});return s==="returnNull"&&r.status===401?null:(await FP(r),await r.json())},ut=new p2({defaultOptions:{queries:{queryFn:LP({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:1,retryDelay:1e3,onError:s=>{console.error("Query error:",s)}},mutations:{retry:1,retryDelay:1e3,onError:s=>{console.error("Mutation error:",s)}}}}),$P=5,BP=1e3,yr={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let xc=0;function VP(){return xc=(xc+1)%Number.MAX_VALUE,xc.toString()}const gc=new Map,UP=(s,t)=>{switch(t.type){case yr.ADD_TOAST:return{...s,toasts:[t.toast,...s.toasts].slice(0,$P)};case yr.UPDATE_TOAST:return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case yr.DISMISS_TOAST:{const{toastId:r}=t;return r?Ch(r):s.toasts.forEach(n=>{Ch(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case yr.REMOVE_TOAST:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},So=[];let Co={toasts:[]};function Za(s){Co=UP(Co,s),So.forEach(t=>{t(Co)})}function Ch(s){if(gc.has(s))return;const t=setTimeout(()=>{gc.delete(s),Za({type:yr.REMOVE_TOAST,toastId:s})},BP);gc.set(s,t)}function vu(){const[s,t]=p.useState(Co);return p.useEffect(()=>(So.push(t),()=>{const r=So.indexOf(t);r>-1&&So.splice(r,1)}),[s]),{...s,toast:r=>{const n=VP(),a=o=>Za({type:yr.UPDATE_TOAST,toast:{...o,id:n}}),i=()=>Za({type:yr.DISMISS_TOAST,toastId:n});return Za({type:yr.ADD_TOAST,toast:{...r,id:n,open:!0,onOpenChange:o=>{o||i()}}}),{id:n,dismiss:i,update:a}},dismiss:r=>Za({type:yr.DISMISS_TOAST,toastId:r})}}const Be=vu,js=s=>{const{toast:t}=vu();return t(s)};function Pj(s){var t,r,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(r=Pj(s[t]))&&(n&&(n+=" "),n+=r);else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function HP(){for(var s,t,r=0,n="";r<arguments.length;)(s=arguments[r++])&&(t=Pj(s))&&(n&&(n+=" "),n+=t);return n}const kh=s=>typeof s=="boolean"?"".concat(s):s===0?"0":s,Th=HP,$n=(s,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Th(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=i==null?void 0:i[d];if(u===null)return null;const m=kh(u)||kh(h);return a[d][m]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,m]=u;return m===void 0||(d[h]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:m,...x}=u;return Object.entries(x).every(g=>{let[f,v]=g;return Array.isArray(v)?v.includes({...i,...l}[f]):{...i,...l}[f]===v})?[...d,h,m]:d},[]);return Th(s,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};function J(...s){return x2(g2(s))}function Pn(s){const t=typeof s=="string"?parseFloat(s):s;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function qP(s){return`order-${s}`}const zP=n2,Ej=p.forwardRef(({className:s,...t},r)=>e.jsx(Ey,{ref:r,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Ej.displayName=Ey.displayName;const WP=$n("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Dj=p.forwardRef(({className:s,variant:t,...r},n)=>e.jsx(Dy,{ref:n,className:J(WP({variant:t}),s),...r}));Dj.displayName=Dy.displayName;const KP=p.forwardRef(({className:s,...t},r)=>e.jsx(Ay,{ref:r,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));KP.displayName=Ay.displayName;const Aj=p.forwardRef(({className:s,...t},r)=>e.jsx(Iy,{ref:r,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(Mn,{className:"h-4 w-4"})}));Aj.displayName=Iy.displayName;const Ij=p.forwardRef(({className:s,...t},r)=>e.jsx(_y,{ref:r,className:J("text-sm font-semibold",s),...t}));Ij.displayName=_y.displayName;const _j=p.forwardRef(({className:s,...t},r)=>e.jsx(Ry,{ref:r,className:J("text-sm opacity-90",s),...t}));_j.displayName=Ry.displayName;function GP(){const{toasts:s}=Be();return e.jsxs(zP,{children:[s.map(function({id:t,title:r,description:n,action:a,...i}){return e.jsxs(Dj,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Ij,{children:r}),n&&e.jsx(_j,{children:n})]}),a,e.jsx(Aj,{})]},t)}),e.jsx(Ej,{})]})}const yu=$n("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=p.forwardRef(({className:s,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?gl:"button";return e.jsx(o,{className:J(yu({variant:t,size:r,className:s})),ref:i,...a})});P.displayName="Button";function Aa(s){const t=p.useRef({value:s,previous:s});return p.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var Ia="NavigationMenu",[ju,Rj,QP]=Vi(Ia),[td,ZP,YP]=Vi(Ia),[bu,W8]=fs(Ia,[QP,YP]),[XP,Ms]=bu(Ia),[JP,eE]=bu(Ia),Oj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:a,defaultValue:i,delayDuration:o=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:d,...u}=s,[h,m]=p.useState(null),x=We(t,E=>m(E)),g=On(d),f=p.useRef(0),v=p.useRef(0),y=p.useRef(0),[j,b]=p.useState(!0),[k="",S]=ms({prop:n,onChange:E=>{const I=E!=="",w=l>0;I?(window.clearTimeout(y.current),w&&b(!1)):(window.clearTimeout(y.current),y.current=window.setTimeout(()=>b(!0),l)),a==null||a(E)},defaultProp:i}),D=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>S(""),150)},[S]),T=p.useCallback(E=>{window.clearTimeout(v.current),S(E)},[S]),C=p.useCallback(E=>{k===E?window.clearTimeout(v.current):f.current=window.setTimeout(()=>{window.clearTimeout(v.current),S(E)},o)},[k,S,o]);return p.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(v.current),window.clearTimeout(y.current)},[]),e.jsx(Fj,{scope:r,isRootMenu:!0,value:k,dir:g,orientation:c,rootNavigationMenu:h,onTriggerEnter:E=>{window.clearTimeout(f.current),j?C(E):T(E)},onTriggerLeave:()=>{window.clearTimeout(f.current),D()},onContentEnter:()=>window.clearTimeout(v.current),onContentLeave:D,onItemSelect:E=>{S(I=>I===E?"":E)},onItemDismiss:()=>S(""),children:e.jsx(Se.nav,{"aria-label":"Main","data-orientation":c,dir:g,...u,ref:x})})});Oj.displayName=Ia;var Mj="NavigationMenuSub",tE=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",...l}=s,c=Ms(Mj,r),[d="",u]=ms({prop:n,onChange:a,defaultProp:i});return e.jsx(Fj,{scope:r,isRootMenu:!1,value:d,dir:c.dir,orientation:o,rootNavigationMenu:c.rootNavigationMenu,onTriggerEnter:h=>u(h),onItemSelect:h=>u(h),onItemDismiss:()=>u(""),children:e.jsx(Se.div,{"data-orientation":o,...l,ref:t})})});tE.displayName=Mj;var Fj=s=>{const{scope:t,isRootMenu:r,rootNavigationMenu:n,dir:a,orientation:i,children:o,value:l,onItemSelect:c,onItemDismiss:d,onTriggerEnter:u,onTriggerLeave:h,onContentEnter:m,onContentLeave:x}=s,[g,f]=p.useState(null),[v,y]=p.useState(new Map),[j,b]=p.useState(null);return e.jsx(XP,{scope:t,isRootMenu:r,rootNavigationMenu:n,value:l,previousValue:Aa(l),baseId:mr(),dir:a,orientation:i,viewport:g,onViewportChange:f,indicatorTrack:j,onIndicatorTrackChange:b,onTriggerEnter:as(u),onTriggerLeave:as(h),onContentEnter:as(m),onContentLeave:as(x),onItemSelect:as(c),onItemDismiss:as(d),onViewportContentChange:p.useCallback((k,S)=>{y(D=>(D.set(k,S),new Map(D)))},[]),onViewportContentRemove:p.useCallback(k=>{y(S=>S.has(k)?(S.delete(k),new Map(S)):S)},[]),children:e.jsx(ju.Provider,{scope:t,children:e.jsx(JP,{scope:t,items:v,children:o})})})},Lj="NavigationMenuList",$j=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,...n}=s,a=Ms(Lj,r),i=e.jsx(Se.ul,{"data-orientation":a.orientation,...n,ref:t});return e.jsx(Se.div,{style:{position:"relative"},ref:a.onIndicatorTrackChange,children:e.jsx(ju.Slot,{scope:r,children:a.isRootMenu?e.jsx(Gj,{asChild:!0,children:i}):i})})});$j.displayName=Lj;var Bj="NavigationMenuItem",[sE,Vj]=bu(Bj),Uj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,value:n,...a}=s,i=mr(),o=n||i||"LEGACY_REACT_AUTO_VALUE",l=p.useRef(null),c=p.useRef(null),d=p.useRef(null),u=p.useRef(()=>{}),h=p.useRef(!1),m=p.useCallback((g="start")=>{if(l.current){u.current();const f=rd(l.current);f.length&&Su(g==="start"?f:f.reverse())}},[]),x=p.useCallback(()=>{if(l.current){const g=rd(l.current);g.length&&(u.current=dE(g))}},[]);return e.jsx(sE,{scope:r,value:o,triggerRef:c,contentRef:l,focusProxyRef:d,wasEscapeCloseRef:h,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:x,onContentFocusOutside:x,children:e.jsx(Se.li,{...a,ref:t})})});Uj.displayName=Bj;var sd="NavigationMenuTrigger",Hj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,disabled:n,...a}=s,i=Ms(sd,s.__scopeNavigationMenu),o=Vj(sd,s.__scopeNavigationMenu),l=p.useRef(null),c=We(l,o.triggerRef,t),d=Zj(i.baseId,o.value),u=Yj(i.baseId,o.value),h=p.useRef(!1),m=p.useRef(!1),x=o.value===i.value;return e.jsxs(e.Fragment,{children:[e.jsx(ju.ItemSlot,{scope:r,value:o.value,children:e.jsx(Qj,{asChild:!0,children:e.jsx(Se.button,{id:d,disabled:n,"data-disabled":n?"":void 0,"data-state":Cu(x),"aria-expanded":x,"aria-controls":u,...a,ref:c,onPointerEnter:ge(s.onPointerEnter,()=>{m.current=!1,o.wasEscapeCloseRef.current=!1}),onPointerMove:ge(s.onPointerMove,Uo(()=>{n||m.current||o.wasEscapeCloseRef.current||h.current||(i.onTriggerEnter(o.value),h.current=!0)})),onPointerLeave:ge(s.onPointerLeave,Uo(()=>{n||(i.onTriggerLeave(),h.current=!1)})),onClick:ge(s.onClick,()=>{i.onItemSelect(o.value),m.current=x}),onKeyDown:ge(s.onKeyDown,g=>{const v={horizontal:"ArrowDown",vertical:i.dir==="rtl"?"ArrowLeft":"ArrowRight"}[i.orientation];x&&g.key===v&&(o.onEntryKeyDown(),g.preventDefault())})})})}),x&&e.jsxs(e.Fragment,{children:[e.jsx(Oy,{"aria-hidden":!0,tabIndex:0,ref:o.focusProxyRef,onFocus:g=>{const f=o.contentRef.current,v=g.relatedTarget,y=v===l.current,j=f==null?void 0:f.contains(v);(y||!j)&&o.onFocusProxyEnter(y?"start":"end")}}),i.viewport&&e.jsx("span",{"aria-owns":u})]})]})});Hj.displayName=sd;var rE="NavigationMenuLink",Ph="navigationMenu.linkSelect",nE=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,active:n,onSelect:a,...i}=s;return e.jsx(Qj,{asChild:!0,children:e.jsx(Se.a,{"data-active":n?"":void 0,"aria-current":n?"page":void 0,...i,ref:t,onClick:ge(s.onClick,o=>{const l=o.target,c=new CustomEvent(Ph,{bubbles:!0,cancelable:!0});if(l.addEventListener(Ph,d=>a==null?void 0:a(d),{once:!0}),uh(l,c),!c.defaultPrevented&&!o.metaKey){const d=new CustomEvent(ko,{bubbles:!0,cancelable:!0});uh(l,d)}},{checkForDefaultPrevented:!1})})})});nE.displayName=rE;var wu="NavigationMenuIndicator",qj=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=Ms(wu,s.__scopeNavigationMenu),i=!!a.value;return a.indicatorTrack?m2.createPortal(e.jsx(ds,{present:r||i,children:e.jsx(aE,{...n,ref:t})}),a.indicatorTrack):null});qj.displayName=wu;var aE=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,...n}=s,a=Ms(wu,r),i=Rj(r),[o,l]=p.useState(null),[c,d]=p.useState(null),u=a.orientation==="horizontal",h=!!a.value;p.useEffect(()=>{var f;const g=(f=i().find(v=>v.value===a.value))==null?void 0:f.ref.current;g&&l(g)},[i,a.value]);const m=()=>{o&&d({size:u?o.offsetWidth:o.offsetHeight,offset:u?o.offsetLeft:o.offsetTop})};return nd(o,m),nd(a.indicatorTrack,m),c?e.jsx(Se.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":a.orientation,...n,ref:t,style:{position:"absolute",...u?{left:0,width:c.size+"px",transform:`translateX(${c.offset}px)`}:{top:0,height:c.size+"px",transform:`translateY(${c.offset}px)`},...n.style}}):null}),fa="NavigationMenuContent",zj=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=Ms(fa,s.__scopeNavigationMenu),i=Vj(fa,s.__scopeNavigationMenu),o=We(i.contentRef,t),l=i.value===a.value,c={value:i.value,triggerRef:i.triggerRef,focusProxyRef:i.focusProxyRef,wasEscapeCloseRef:i.wasEscapeCloseRef,onContentFocusOutside:i.onContentFocusOutside,onRootContentClose:i.onRootContentClose,...n};return a.viewport?e.jsx(iE,{forceMount:r,...c,ref:o}):e.jsx(ds,{present:r||l,children:e.jsx(Wj,{"data-state":Cu(l),...c,ref:o,onPointerEnter:ge(s.onPointerEnter,a.onContentEnter),onPointerLeave:ge(s.onPointerLeave,Uo(a.onContentLeave)),style:{pointerEvents:!l&&a.isRootMenu?"none":void 0,...c.style}})})});zj.displayName=fa;var iE=p.forwardRef((s,t)=>{const r=Ms(fa,s.__scopeNavigationMenu),{onViewportContentChange:n,onViewportContentRemove:a}=r;return Ss(()=>{n(s.value,{ref:t,...s})},[s,t,n]),Ss(()=>()=>a(s.value),[s.value,a]),null}),ko="navigationMenu.rootContentDismiss",Wj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,value:n,triggerRef:a,focusProxyRef:i,wasEscapeCloseRef:o,onRootContentClose:l,onContentFocusOutside:c,...d}=s,u=Ms(fa,r),h=p.useRef(null),m=We(h,t),x=Zj(u.baseId,n),g=Yj(u.baseId,n),f=Rj(r),v=p.useRef(null),{onItemDismiss:y}=u;p.useEffect(()=>{const b=h.current;if(u.isRootMenu&&b){const k=()=>{var S;y(),l(),b.contains(document.activeElement)&&((S=a.current)==null||S.focus())};return b.addEventListener(ko,k),()=>b.removeEventListener(ko,k)}},[u.isRootMenu,s.value,a,y,l]);const j=p.useMemo(()=>{const k=f().map(I=>I.value);u.dir==="rtl"&&k.reverse();const S=k.indexOf(u.value),D=k.indexOf(u.previousValue),T=n===u.value,C=D===k.indexOf(n);if(!T&&!C)return v.current;const E=(()=>{if(S!==D){if(T&&D!==-1)return S>D?"from-end":"from-start";if(C&&S!==-1)return S>D?"to-start":"to-end"}return null})();return v.current=E,E},[u.previousValue,u.value,u.dir,f,n]);return e.jsx(Gj,{asChild:!0,children:e.jsx(vl,{id:g,"aria-labelledby":x,"data-motion":j,"data-orientation":u.orientation,...d,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{var k;const b=new Event(ko,{bubbles:!0,cancelable:!0});(k=h.current)==null||k.dispatchEvent(b)},onFocusOutside:ge(s.onFocusOutside,b=>{var S;c();const k=b.target;(S=u.rootNavigationMenu)!=null&&S.contains(k)&&b.preventDefault()}),onPointerDownOutside:ge(s.onPointerDownOutside,b=>{var T;const k=b.target,S=f().some(C=>{var E;return(E=C.ref.current)==null?void 0:E.contains(k)}),D=u.isRootMenu&&((T=u.viewport)==null?void 0:T.contains(k));(S||D||!u.isRootMenu)&&b.preventDefault()}),onKeyDown:ge(s.onKeyDown,b=>{var D;const k=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!k){const T=rd(b.currentTarget),C=document.activeElement,E=T.findIndex(N=>N===C),w=b.shiftKey?T.slice(0,E).reverse():T.slice(E+1,T.length);Su(w)?b.preventDefault():(D=i.current)==null||D.focus()}}),onEscapeKeyDown:ge(s.onEscapeKeyDown,b=>{o.current=!0})})})}),Nu="NavigationMenuViewport",Kj=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,i=!!Ms(Nu,s.__scopeNavigationMenu).value;return e.jsx(ds,{present:r||i,children:e.jsx(oE,{...n,ref:t})})});Kj.displayName=Nu;var oE=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,children:n,...a}=s,i=Ms(Nu,r),o=We(t,i.onViewportChange),l=eE(fa,s.__scopeNavigationMenu),[c,d]=p.useState(null),[u,h]=p.useState(null),m=c?(c==null?void 0:c.width)+"px":void 0,x=c?(c==null?void 0:c.height)+"px":void 0,g=!!i.value,f=g?i.value:i.previousValue;return nd(u,()=>{u&&d({width:u.offsetWidth,height:u.offsetHeight})}),e.jsx(Se.div,{"data-state":Cu(g),"data-orientation":i.orientation,...a,ref:o,style:{pointerEvents:!g&&i.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":x,...a.style},onPointerEnter:ge(s.onPointerEnter,i.onContentEnter),onPointerLeave:ge(s.onPointerLeave,Uo(i.onContentLeave)),children:Array.from(l.items).map(([y,{ref:j,forceMount:b,...k}])=>{const S=f===y;return e.jsx(ds,{present:b||S,children:e.jsx(Wj,{...k,ref:a2(j,D=>{S&&D&&h(D)})})},y)})})}),lE="FocusGroup",Gj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,...n}=s,a=Ms(lE,r);return e.jsx(td.Provider,{scope:r,children:e.jsx(td.Slot,{scope:r,children:e.jsx(Se.div,{dir:a.dir,...n,ref:t})})})}),Eh=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],cE="FocusGroupItem",Qj=p.forwardRef((s,t)=>{const{__scopeNavigationMenu:r,...n}=s,a=ZP(r),i=Ms(cE,r);return e.jsx(td.ItemSlot,{scope:r,children:e.jsx(Se.button,{...n,ref:t,onKeyDown:ge(s.onKeyDown,o=>{if(["Home","End",...Eh].includes(o.key)){let c=a().map(h=>h.ref.current);if([i.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(o.key)&&c.reverse(),Eh.includes(o.key)){const h=c.indexOf(o.currentTarget);c=c.slice(h+1)}setTimeout(()=>Su(c)),o.preventDefault()}})})})});function rd(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Su(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}function dE(s){return s.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{s.forEach(t=>{const r=t.dataset.tabindex;t.setAttribute("tabindex",r)})}}function nd(s,t){const r=as(t);Ss(()=>{let n=0;if(s){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(s),()=>{window.cancelAnimationFrame(n),a.unobserve(s)}}},[s,r])}function Cu(s){return s?"open":"closed"}function Zj(s,t){return`${s}-trigger-${t}`}function Yj(s,t){return`${s}-content-${t}`}function Uo(s){return t=>t.pointerType==="mouse"?s(t):void 0}var Xj=Oj,Jj=$j,uE=Uj,eb=Hj,tb=qj,sb=zj,rb=Kj;const nb=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Xj,{ref:n,className:J("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...r,children:[t,e.jsx(lb,{})]}));nb.displayName=Xj.displayName;const ab=p.forwardRef(({className:s,...t},r)=>e.jsx(Jj,{ref:r,className:J("group flex flex-1 list-none items-center justify-center space-x-1",s),...t}));ab.displayName=Jj.displayName;const mE=uE,hE=$n("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),ib=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(eb,{ref:n,className:J(hE(),"group",s),...r,children:[t," ",e.jsx(ns,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));ib.displayName=eb.displayName;const ob=p.forwardRef(({className:s,...t},r)=>e.jsx(sb,{ref:r,className:J("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...t}));ob.displayName=sb.displayName;const lb=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{className:J("absolute left-0 top-full flex justify-center"),children:e.jsx(rb,{className:J("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:r,...t})}));lb.displayName=rb.displayName;const pE=p.forwardRef(({className:s,...t},r)=>e.jsx(tb,{ref:r,className:J("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...t,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));pE.displayName=tb.displayName;const fE=$n("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function pe({className:s,variant:t,...r}){return e.jsx("div",{className:J(fE({variant:t}),s),...r})}const xE=()=>{const[s,t]=p.useState({authenticated:!1,user:null,loading:!0}),r=async()=>{try{const o=await(await fetch("/api/auth/status")).json();t({authenticated:o.authenticated,user:o.authenticated?o.user:null,loading:!1})}catch(i){console.error("Error checking authentication status:",i),t({authenticated:!1,user:null,loading:!1})}};p.useEffect(()=>{r()},[]);const n=()=>{window.addEventListener("message",u);const i=500,o=350,l=window.screen.width/2-o/2,c=window.screen.height/2-i/2,d=window.open(`https://replit.com/auth_with_repl_site?domain=${location.host}`,"_blank",`modal=yes,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no,copyhistory=no,width=${o},height=${i},top=${c},left=${l}`);function u(h){h.data==="auth_complete"&&(window.removeEventListener("message",u),d==null||d.close(),r())}},a=async()=>{window.location.href="/__replauthlogout"};return{authenticated:s.authenticated,user:s.user,loading:s.loading,login:n,logout:a,checkAuthStatus:r}},cb=p.createContext(void 0),gE=({children:s})=>{const t=xE();return e.jsx(cb.Provider,{value:t,children:s})},vE=()=>{const s=p.useContext(cb);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},vc=768;function yE(){const[s,t]=p.useState(void 0);return p.useEffect(()=>{const r=window.matchMedia(`(max-width: ${vc-1}px)`),n=()=>{t(window.innerWidth<vc)};return r.addEventListener("change",n),t(window.innerWidth<vc),()=>r.removeEventListener("change",n)},[]),!!s}const jE=yE,Dh=[{title:"Dashboard",path:"/dashboard",subItems:[{title:"Overview",path:"/dashboard"},{title:"Inventory",path:"/inventory"},{title:"Inventory Tracking",path:"/inventory-tracking"}]},{title:"Orders",path:"/orders",subItems:[{title:"Orders List",path:"/orders"},{title:"Order Progress",path:"/order-progress/1"},{title:"Payment Links",path:"/payment-links"}]},{title:"Production",path:"/production",subItems:[{title:"Kanban Board",path:"/production"},{title:"Materials Orders",path:"/materials"},{title:"Materials Pick List",path:"/materials-pick-list"}]},{title:"POS",path:"/",subItems:[{title:"New Order",path:"/"},{title:"Cost Estimator",path:"/cost-estimator"},{title:"Mat Options",path:"/mat-test"},{title:"Mat Border Demo",path:"/mat-border-demo"},{title:"Pricing",path:"/pricing"}]},{title:"Integration",path:"/hub",subItems:[{title:"Hub",path:"/hub"},{title:"Webhook",path:"/webhook-integration"},{title:"Vendor Settings",path:"/vendor-settings"},{title:"System Health",path:"/system-health"}]},{title:"Communications",path:"/voice-calls",subItems:[{title:"Voice Calls",path:"/voice-calls"},{title:"Notifications",path:"/notifications"},{title:"Customers",path:"/customers"}]}];function bE({darkMode:s,toggleTheme:t}){const[r]=Cs();jE();const[n,a]=p.useState(!1),[i,o]=p.useState(0),{authenticated:l,user:c}=vE(),d=()=>{a(!n)};return p.useEffect(()=>{a(!1)},[r]),p.useEffect(()=>{const u=localStorage.getItem("cart");if(u)try{const m=JSON.parse(u);o(Array.isArray(m)?m.length:0)}catch(m){console.error("Error parsing cart from localStorage:",m),o(0)}const h=m=>{if(m.key==="cart")try{const x=m.newValue?JSON.parse(m.newValue):[];o(Array.isArray(x)?x.length:0)}catch(x){console.error("Error parsing cart from storage event:",x)}};return window.addEventListener("storage",h),()=>{window.removeEventListener("storage",h)}},[]),e.jsxs("header",{className:"bg-background border-b dark:border-gray-800 fixed top-0 left-0 w-full z-50",children:[e.jsxs("div",{className:"container mx-auto px-3 lg:px-4 h-14 lg:h-16 flex items-center justify-between",children:[e.jsx(Rt,{href:"/dashboard",className:"flex items-center space-x-2 cursor-pointer",children:e.jsx("span",{className:"font-bold text-xl text-foreground",children:"Jay's Frames"})}),e.jsx("div",{className:"hidden md:flex",children:e.jsx(nb,{children:e.jsx(ab,{children:Dh.map((u,h)=>e.jsxs(mE,{children:[e.jsx(ib,{className:"text-foreground font-semibold",children:u.title}),e.jsx(ob,{children:e.jsx("ul",{className:"grid w-[200px] gap-2 p-2",children:u.subItems.map((m,x)=>e.jsx("li",{children:e.jsx(Rt,{href:m.path,children:e.jsx("a",{className:J("block select-none rounded-md p-2 hover:bg-accent hover:text-accent-foreground cursor-pointer",r===m.path&&"bg-accent/50 text-accent-foreground"),children:m.title})})},x))})})]},h))})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Toggle theme",className:"text-foreground hover:text-foreground",children:s?e.jsx(Wc,{className:"h-5 w-5 text-foreground"}):e.jsx(ej,{className:"h-5 w-5 text-foreground"})}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>window.location.href="/checkout/cart",className:"text-foreground hover:text-foreground",children:e.jsxs("div",{className:"relative",children:[e.jsx(wl,{className:"h-5 w-5 text-foreground"}),i>0&&e.jsx(pe,{className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-[0.7rem]",children:i})]})}),l&&c&&e.jsx("span",{className:"text-sm hidden md:inline-block text-foreground",children:c.name||c.username||"User"}),e.jsx(P,{className:"md:hidden text-foreground hover:text-foreground hover:bg-accent",variant:"ghost",size:"icon",onClick:d,"aria-label":"Toggle menu",children:n?e.jsx(Mn,{className:"h-6 w-6 text-foreground"}):e.jsx(tj,{className:"h-6 w-6 text-foreground"})})]})]}),n&&e.jsx("div",{className:"md:hidden absolute top-14 lg:top-16 left-0 w-full bg-background dark:bg-background border-b border-border shadow-lg z-40",children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 max-h-[calc(100vh-4rem)] overflow-y-auto",children:[Dh.map((u,h)=>e.jsxs("div",{className:"mb-4",children:[e.jsx(Rt,{href:u.path,children:e.jsx("div",{className:"font-semibold text-lg mb-2 text-foreground hover:text-primary cursor-pointer py-2 border-b border-border",children:u.title})}),e.jsx("div",{className:"pl-4 space-y-1",children:u.subItems.map((m,x)=>e.jsx(Rt,{href:m.path,children:e.jsx("div",{className:J("py-2 text-sm font-medium hover:text-primary transition-colors cursor-pointer rounded-md px-2 hover:bg-accent",r===m.path?"text-primary bg-accent":"text-foreground"),children:m.title})},x))})]},h)),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[e.jsx(Rt,{href:"/customers",className:"text-foreground hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Customers"}),e.jsx(Rt,{href:"/frame-education",children:e.jsx("div",{className:J("py-2 px-2 font-medium hover:text-primary transition-colors cursor-pointer rounded-md hover:bg-accent",r==="/frame-education"?"text-primary bg-accent":"text-foreground"),children:"Frame Education"})}),e.jsx(Rt,{href:"/notifications",className:"text-foreground hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Notifications"}),e.jsxs("div",{className:"py-3 px-2 flex items-center justify-between bg-muted rounded-md",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Cart Items:"}),e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-semibold",children:i})]}),l&&c&&e.jsx("div",{className:"py-3 px-2 bg-muted rounded-md",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Welcome, ",c.name||c.username||"User"]})})]})]})})]})}async function db(){try{return console.log("Loading static matboard data to prevent application freezing..."),[]}catch(s){return console.error("Error fetching Crescent matboards:",s),[]}}function wE(s){return console.log("Converting Larson matboards to MatColor format:"),s.map(t=>{t.hex_color||console.warn(`Missing hex_color for matboard ${t.id}: ${t.name}`);const r={id:t.id,name:t.name,color:t.hex_color||"#FFFFFF",price:t.price,manufacturer:t.manufacturer,code:t.code||null,description:t.description||null,category:t.category||null};return s.indexOf(t)<3&&console.log(`Matboard ${t.id} converted:`,{original:t,converted:r}),r})}const li=[{id:"white",name:"White",color:"#FFFFFF",price:"0.02",manufacturer:"Basic",code:"WHT",description:"Pure white mat board",category:"Standard"},{id:"black",name:"Black",color:"#2C2C2C",price:"0.025",manufacturer:"Basic",code:"BLK",description:"Deep black mat board",category:"Standard"},{id:"grey",name:"Grey",color:"#ADADAD",price:"0.02",manufacturer:"Basic",code:"GRY",description:"Neutral grey mat board",category:"Standard"},{id:"beige",name:"Beige",color:"#F5F5DC",price:"0.02",manufacturer:"Basic",code:"BGE",description:"Soft beige mat board",category:"Standard"}],Ya=[{id:"crescent-white",name:"Bright White",color:"#FFFFFF",price:"0.025",manufacturer:"Crescent",code:"S100",description:"Bright white conservation mat board",category:"Whites"},{id:"crescent-cream",name:"Cream",color:"#FFF8E1",price:"0.025",manufacturer:"Crescent",code:"S101",description:"Cream white conservation mat board",category:"Whites"},{id:"crescent-antique",name:"Antique White",color:"#F5F1E6",price:"0.025",manufacturer:"Crescent",code:"S102",description:"Subtle antique white tone",category:"Whites"},{id:"crescent-stone",name:"Stone",color:"#E0DCCC",price:"0.027",manufacturer:"Crescent",code:"S200",description:"Light stone grey conservation mat",category:"Neutrals"},{id:"crescent-fog",name:"Fog",color:"#D6D6D6",price:"0.027",manufacturer:"Crescent",code:"S201",description:"Subtle fog grey conservation mat",category:"Neutrals"},{id:"crescent-granite",name:"Granite",color:"#A9A9A9",price:"0.027",manufacturer:"Crescent",code:"S202",description:"Darker granite grey tone",category:"Neutrals"},{id:"crescent-colonial-blue",name:"Colonial Blue",color:"#B5C7D3",price:"0.029",manufacturer:"Crescent",code:"S300",description:"Subtle colonial blue conservation mat",category:"Blues"},{id:"crescent-wedgewood",name:"Wedgewood",color:"#6E99C0",price:"0.029",manufacturer:"Crescent",code:"S301",description:"Classic wedgewood blue conservation mat",category:"Blues"},{id:"crescent-ultramarine",name:"Ultramarine",color:"#4166B0",price:"0.029",manufacturer:"Crescent",code:"S302",description:"Deep ultramarine blue conservation mat",category:"Blues"},{id:"crescent-sage",name:"Sage",color:"#BCCCBA",price:"0.029",manufacturer:"Crescent",code:"S400",description:"Soft sage green conservation mat",category:"Greens"},{id:"crescent-celadon",name:"Celadon",color:"#9CB084",price:"0.029",manufacturer:"Crescent",code:"S401",description:"Classic celadon green conservation mat",category:"Greens"},{id:"crescent-forest",name:"Forest",color:"#4A6741",price:"0.029",manufacturer:"Crescent",code:"S402",description:"Deep forest green conservation mat",category:"Greens"},{id:"crescent-sand",name:"Sand",color:"#E6D7B8",price:"0.027",manufacturer:"Crescent",code:"S500",description:"Light sand beige conservation mat",category:"Earth Tones"},{id:"crescent-chamois",name:"Chamois",color:"#D9BC8C",price:"0.027",manufacturer:"Crescent",code:"S501",description:"Warm chamois tan conservation mat",category:"Earth Tones"},{id:"crescent-chestnut",name:"Chestnut",color:"#A67B5B",price:"0.027",manufacturer:"Crescent",code:"S502",description:"Rich chestnut brown conservation mat",category:"Earth Tones"},{id:"crescent-pale-rose",name:"Pale Rose",color:"#F0D4D4",price:"0.029",manufacturer:"Crescent",code:"S600",description:"Subtle pale rose conservation mat",category:"Warm Tones"},{id:"crescent-dusty-rose",name:"Dusty Rose",color:"#D4A9A9",price:"0.029",manufacturer:"Crescent",code:"S601",description:"Classic dusty rose conservation mat",category:"Warm Tones"},{id:"crescent-rust",name:"Rust",color:"#B56A55",price:"0.029",manufacturer:"Crescent",code:"S602",description:"Deep rust red conservation mat",category:"Warm Tones"},{id:"crescent-black",name:"Raven Black",color:"#1A1A1A",price:"0.03",manufacturer:"Crescent",code:"S700",description:"Deep black conservation mat board",category:"Black"}];let Pl=[...li,...Ya];const NE=async()=>{if(typeof window>"u"){console.log("Skipping Supabase fetch on server-side");return}try{console.log("Fetching Crescent matboards from Larson Juhl catalog...");const s=await db();if(s&&s.length>0){console.log("Converting API matboards to MatColor format");const t=s.map(n=>({id:n.id,name:n.name,color:n.hex_color||"#FFFFFF",price:n.price,manufacturer:n.manufacturer,code:n.code||null,description:n.description||null,category:n.category||null}));Pl=[...li,...t],console.log(`Loaded and converted ${s.length} Crescent matboards from Larson Juhl catalog`)}else console.log("No Crescent matboards found in Larson Juhl catalog or empty response. Using static fallback data.")}catch(s){console.error("Failed to load Crescent matboards:",s),console.log("Using static Crescent matboard catalog as fallback.")}};typeof window<"u"&&NE();const SE=s=>Pl.find(t=>t.id===s),CE=s=>Pl.filter(t=>t.category===s),kE=()=>{const s=new Set;return Pl.forEach(t=>{t.category&&s.add(t.category)}),Array.from(s)},To=[{id:"none",name:"No Glass",description:"No glass protection",price:"0.00"},{id:"regular",name:"Regular Glass",description:"Standard protection",price:"0.08"},{id:"uv",name:"Museum Glass",description:"Museum non-glare",price:"0.45"},{id:"museum",name:"Conservation Glass",description:"Premium UV protection",price:"0.25"},{id:"regular-acrylic",name:"Regular Acrylic",description:"Standard acrylic glazing",price:"0.12"},{id:"conservation-clear-acrylic",name:"Conservation Clear Acrylic",description:"UV filtering acrylic glazing",price:"0.35"},{id:"optium-acrylic",name:"Optium Acrylic",description:"Premium non-glare acrylic",price:"0.45"}],TE=s=>To.find(t=>t.id===s),Ah=[{id:"float-mount",name:"Float Mount",description:"Artwork appears to float",price:"50.00"},{id:"glass-float",name:"Glass Float",description:"Suspended between glass",price:"55.00"},{id:"shadowbox",name:"Shadowbox",description:"For 3D objects",price:"65.00"},{id:"labor-30min",name:"Additional Labor (30 min)",description:"Custom work",price:"30.00"},{id:"labor-1hour",name:"Additional Labor (1 hour)",description:"Custom work",price:"55.00"}];function PE(s){return s>=40?2.2:s>=25?2.4:s>=15?2.6:s>=10?2.8:s>=6?3:s>=4?3.2:s>=2?3.5:4}function ad(s,t,r,n){const a=s+r*2,i=t+r*2,c=(a+i)/12*n,d=PE(c);return c*d}function id(s,t,r,n){const a=s+r*2,i=t+r*2,o=a+i,l=o*n*2.5;let c=5.5;o<=24?c=5.5:o<=36?c=5:o<=50?c=4.5:o<=68?c=4.2:o<=88?c=3.8:o<=108?c=3.5:c=3.2;const d=EE(o);return l*c+d}function od(s,t,r,n){const a=s+r*2,i=t+r*2,o=a+i,l=o*n;let c=4;return o<=24?c=4:o<=36?c=3.8:o<=50?c=3.5:o<=68?c=3.2:o<=88?c=3:o<=108?c=2.8:c=2.5,l*c}function EE(s){let t=15;return s<=24?t=15:s<=36?t=20:s<=50?t=25:s<=68?t=35:s<=88?t=45:s<=108?t=55:t=65,t}function DE(s,t,r){const n=s+r*2,a=t+r*2,i=n+a;let o=25;return i<=24?o=25:i<=36?o=30:i<=50?o=35:i<=68?o=45:i<=88?o=55:i<=108?o=65:o=80,o}function ld(s,t,r,n){const a=s+r*2,i=t+r*2,d=a*i*n*.3*2.5;return Math.max(d,5)}function AE(s){let t=.15;return s<100?t=.2:s<250?t=.15:s<500?t=.12:t=.1,s*t}const IE=({selectedServices:s,onChange:t})=>{var i;const r=o=>{const l=Ah.find(d=>d.id===o);if(!l)return;const c=s.some(d=>d.id===o);t(c?s.filter(d=>d.id!==o):[...s,l])},n=o=>{const l=o.target.value,c=s.filter(d=>d.id!=="labor-30min"&&d.id!=="labor-1hour");if(l==="0")t(c);else{const d=Ah.find(u=>u.id===l);d&&t([...c,d])}},a=((i=s.find(o=>o.id==="labor-30min"||o.id==="labor-1hour"))==null?void 0:i.id)||"0";return e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 header-underline",children:"Special Services"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-light-border dark:border-dark-border rounded-lg p-3 cursor-pointer hover:border-primary transition-colors",onClick:()=>r("float-mount"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Float Mount"}),e.jsx("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"Artwork appears to float"})]}),e.jsx("div",{children:e.jsx("input",{type:"checkbox",id:"float-mount",className:"h-4 w-4 text-primary border-gray-300 rounded",checked:s.some(o=>o.id==="float-mount"),onChange:()=>r("float-mount")})})]}),e.jsx("div",{className:"mt-2 text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"+$35.00"})]}),e.jsxs("div",{className:"border border-light-border dark:border-dark-border rounded-lg p-3 cursor-pointer hover:border-primary transition-colors",onClick:()=>r("glass-float"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Glass Float"}),e.jsx("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"Suspended between glass"})]}),e.jsx("div",{children:e.jsx("input",{type:"checkbox",id:"glass-float",className:"h-4 w-4 text-primary border-gray-300 rounded",checked:s.some(o=>o.id==="glass-float"),onChange:()=>r("glass-float")})})]}),e.jsx("div",{className:"mt-2 text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"+$55.00"})]}),e.jsxs("div",{className:"border border-light-border dark:border-dark-border rounded-lg p-3 cursor-pointer hover:border-primary transition-colors",onClick:()=>r("shadowbox"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Shadowbox"}),e.jsx("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"For 3D objects"})]}),e.jsx("div",{children:e.jsx("input",{type:"checkbox",id:"shadowbox",className:"h-4 w-4 text-primary border-gray-300 rounded",checked:s.some(o=>o.id==="shadowbox"),onChange:()=>r("shadowbox")})})]}),e.jsx("div",{className:"mt-2 text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"+$65.00"})]}),e.jsx("div",{className:"border border-light-border dark:border-dark-border rounded-lg p-3 cursor-pointer hover:border-primary transition-colors",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Additional Labor"}),e.jsx("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"Custom work"})]}),e.jsx("div",{children:e.jsxs("select",{className:"text-sm border border-light-border dark:border-dark-border rounded bg-light-bg dark:bg-dark-bg p-1",value:a,onChange:n,children:[e.jsx("option",{value:"0",children:"None"}),e.jsx("option",{value:"labor-30min",children:"30 min (+$30)"}),e.jsx("option",{value:"labor-1hour",children:"1 hour (+$55)"})]})})]})})]})]})};var ku="Checkbox",[_E,K8]=fs(ku),[RE,OE]=_E(ku),ub=p.forwardRef((s,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=s,[m,x]=p.useState(null),g=We(t,k=>x(k)),f=p.useRef(!1),v=m?u||!!m.closest("form"):!0,[y=!1,j]=ms({prop:a,defaultProp:i,onChange:d}),b=p.useRef(y);return p.useEffect(()=>{const k=m==null?void 0:m.form;if(k){const S=()=>j(b.current);return k.addEventListener("reset",S),()=>k.removeEventListener("reset",S)}},[m,j]),e.jsxs(RE,{scope:r,state:y,disabled:l,children:[e.jsx(Se.button,{type:"button",role:"checkbox","aria-checked":Lr(y)?"mixed":y,"aria-required":o,"data-state":pb(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onKeyDown:ge(s.onKeyDown,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:ge(s.onClick,k=>{j(S=>Lr(S)?!0:!S),v&&(f.current=k.isPropagationStopped(),f.current||k.stopPropagation())})}),v&&e.jsx(ME,{control:m,bubbles:!f.current,name:n,value:c,checked:y,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Lr(i)?!1:i})]})});ub.displayName=ku;var mb="CheckboxIndicator",hb=p.forwardRef((s,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=s,i=OE(mb,r);return e.jsx(ds,{present:n||Lr(i.state)||i.state===!0,children:e.jsx(Se.span,{"data-state":pb(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...s.style}})})});hb.displayName=mb;var ME=s=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:a,...i}=s,o=p.useRef(null),l=Aa(r),c=yl(t);p.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&x){const g=new Event("click",{bubbles:n});u.indeterminate=Lr(r),x.call(u,Lr(r)?!1:r),u.dispatchEvent(g)}},[l,r,n]);const d=p.useRef(Lr(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Lr(s){return s==="indeterminate"}function pb(s){return Lr(s)?"indeterminate":s?"checked":"unchecked"}var fb=ub,FE=hb;const os=p.forwardRef(({className:s,...t},r)=>e.jsx(fb,{ref:r,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(FE,{className:J("flex items-center justify-center text-current"),children:e.jsx(ls,{className:"h-4 w-4"})})}));os.displayName=fb.displayName;const q=p.forwardRef(({className:s,type:t,...r},n)=>e.jsx("input",{type:t,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...r}));q.displayName="Input";var El={},xb={L:1,M:0,Q:3,H:2},gb={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},LE=gb;function vb(s){this.mode=LE.MODE_8BIT_BYTE,this.data=s}vb.prototype={getLength:function(s){return this.data.length},write:function(s){for(var t=0;t<this.data.length;t++)s.put(this.data.charCodeAt(t),8)}};var $E=vb,co=xb;function sr(s,t){this.totalCount=s,this.dataCount=t}sr.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];sr.getRSBlocks=function(s,t){var r=sr.getRsBlockTable(s,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+s+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var o=r[i*3+0],l=r[i*3+1],c=r[i*3+2],d=0;d<o;d++)a.push(new sr(l,c));return a};sr.getRsBlockTable=function(s,t){switch(t){case co.L:return sr.RS_BLOCK_TABLE[(s-1)*4+0];case co.M:return sr.RS_BLOCK_TABLE[(s-1)*4+1];case co.Q:return sr.RS_BLOCK_TABLE[(s-1)*4+2];case co.H:return sr.RS_BLOCK_TABLE[(s-1)*4+3];default:return}};var BE=sr;function yb(){this.buffer=new Array,this.length=0}yb.prototype={get:function(s){var t=Math.floor(s/8);return(this.buffer[t]>>>7-s%8&1)==1},put:function(s,t){for(var r=0;r<t;r++)this.putBit((s>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(s){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),s&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var VE=yb,qs={glog:function(s){if(s<1)throw new Error("glog("+s+")");return qs.LOG_TABLE[s]},gexp:function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return qs.EXP_TABLE[s]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var zt=0;zt<8;zt++)qs.EXP_TABLE[zt]=1<<zt;for(var zt=8;zt<256;zt++)qs.EXP_TABLE[zt]=qs.EXP_TABLE[zt-4]^qs.EXP_TABLE[zt-5]^qs.EXP_TABLE[zt-6]^qs.EXP_TABLE[zt-8];for(var zt=0;zt<255;zt++)qs.LOG_TABLE[qs.EXP_TABLE[zt]]=zt;var jb=qs,rn=jb;function Po(s,t){if(s.length==null)throw new Error(s.length+"/"+t);for(var r=0;r<s.length&&s[r]==0;)r++;this.num=new Array(s.length-r+t);for(var n=0;n<s.length-r;n++)this.num[n]=s[n+r]}Po.prototype={get:function(s){return this.num[s]},getLength:function(){return this.num.length},multiply:function(s){for(var t=new Array(this.getLength()+s.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<s.getLength();n++)t[r+n]^=rn.gexp(rn.glog(this.get(r))+rn.glog(s.get(n)));return new Po(t,0)},mod:function(s){if(this.getLength()-s.getLength()<0)return this;for(var t=rn.glog(this.get(0))-rn.glog(s.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<s.getLength();n++)r[n]^=rn.gexp(rn.glog(s.get(n))+t);return new Po(r,0).mod(s)}};var bb=Po,Ps=gb,Ih=bb,UE=jb,Er={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ut={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(s){for(var t=s<<10;Ut.getBCHDigit(t)-Ut.getBCHDigit(Ut.G15)>=0;)t^=Ut.G15<<Ut.getBCHDigit(t)-Ut.getBCHDigit(Ut.G15);return(s<<10|t)^Ut.G15_MASK},getBCHTypeNumber:function(s){for(var t=s<<12;Ut.getBCHDigit(t)-Ut.getBCHDigit(Ut.G18)>=0;)t^=Ut.G18<<Ut.getBCHDigit(t)-Ut.getBCHDigit(Ut.G18);return s<<12|t},getBCHDigit:function(s){for(var t=0;s!=0;)t++,s>>>=1;return t},getPatternPosition:function(s){return Ut.PATTERN_POSITION_TABLE[s-1]},getMask:function(s,t,r){switch(s){case Er.PATTERN000:return(t+r)%2==0;case Er.PATTERN001:return t%2==0;case Er.PATTERN010:return r%3==0;case Er.PATTERN011:return(t+r)%3==0;case Er.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Er.PATTERN101:return t*r%2+t*r%3==0;case Er.PATTERN110:return(t*r%2+t*r%3)%2==0;case Er.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+s)}},getErrorCorrectPolynomial:function(s){for(var t=new Ih([1],0),r=0;r<s;r++)t=t.multiply(new Ih([1,UE.gexp(r)],0));return t},getLengthInBits:function(s,t){if(1<=t&&t<10)switch(s){case Ps.MODE_NUMBER:return 10;case Ps.MODE_ALPHA_NUM:return 9;case Ps.MODE_8BIT_BYTE:return 8;case Ps.MODE_KANJI:return 8;default:throw new Error("mode:"+s)}else if(t<27)switch(s){case Ps.MODE_NUMBER:return 12;case Ps.MODE_ALPHA_NUM:return 11;case Ps.MODE_8BIT_BYTE:return 16;case Ps.MODE_KANJI:return 10;default:throw new Error("mode:"+s)}else if(t<41)switch(s){case Ps.MODE_NUMBER:return 14;case Ps.MODE_ALPHA_NUM:return 13;case Ps.MODE_8BIT_BYTE:return 16;case Ps.MODE_KANJI:return 12;default:throw new Error("mode:"+s)}else throw new Error("type:"+t)},getLostPoint:function(s){for(var t=s.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=s.isDark(n,a),l=-1;l<=1;l++)if(!(n+l<0||t<=n+l))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||l==0&&c==0||o==s.isDark(n+l,a+c)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var d=0;s.isDark(n,a)&&d++,s.isDark(n+1,a)&&d++,s.isDark(n,a+1)&&d++,s.isDark(n+1,a+1)&&d++,(d==0||d==4)&&(r+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)s.isDark(n,a)&&!s.isDark(n,a+1)&&s.isDark(n,a+2)&&s.isDark(n,a+3)&&s.isDark(n,a+4)&&!s.isDark(n,a+5)&&s.isDark(n,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)s.isDark(n,a)&&!s.isDark(n+1,a)&&s.isDark(n+2,a)&&s.isDark(n+3,a)&&s.isDark(n+4,a)&&!s.isDark(n+5,a)&&s.isDark(n+6,a)&&(r+=40);for(var u=0,a=0;a<t;a++)for(var n=0;n<t;n++)s.isDark(n,a)&&u++;var h=Math.abs(100*u/t/t-50)/5;return r+=h*10,r}},HE=Ut,qE=$E,wb=BE,Nb=VE,Qr=HE,zE=bb;function rr(s,t){this.typeNumber=s,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Ts=rr.prototype;Ts.addData=function(s){var t=new qE(s);this.dataList.push(t),this.dataCache=null};Ts.isDark=function(s,t){if(s<0||this.moduleCount<=s||t<0||this.moduleCount<=t)throw new Error(s+","+t);return this.modules[s][t]};Ts.getModuleCount=function(){return this.moduleCount};Ts.make=function(){if(this.typeNumber<1){var s=1;for(s=1;s<40;s++){for(var t=wb.getRSBlocks(s,this.errorCorrectLevel),r=new Nb,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),Qr.getLengthInBits(i.mode,s)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=s}this.makeImpl(!1,this.getBestMaskPattern())};Ts.makeImpl=function(s,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(s,t),this.typeNumber>=7&&this.setupTypeNumber(s),this.dataCache==null&&(this.dataCache=rr.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Ts.setupPositionProbePattern=function(s,t){for(var r=-1;r<=7;r++)if(!(s+r<=-1||this.moduleCount<=s+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[s+r][t+n]=!0:this.modules[s+r][t+n]=!1)};Ts.getBestMaskPattern=function(){for(var s=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=Qr.getLostPoint(this);(r==0||s>n)&&(s=n,t=r)}return t};Ts.createMovieClip=function(s,t,r){var n=s.createEmptyMovieClip(t,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,l=0;l<this.modules[i].length;l++){var c=l*a,d=this.modules[i][l];d&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};Ts.setupTimingPattern=function(){for(var s=8;s<this.moduleCount-8;s++)this.modules[s][6]==null&&(this.modules[s][6]=s%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Ts.setupPositionAdjustPattern=function(){for(var s=Qr.getPatternPosition(this.typeNumber),t=0;t<s.length;t++)for(var r=0;r<s.length;r++){var n=s[t],a=s[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};Ts.setupTypeNumber=function(s){for(var t=Qr.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!s&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!s&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};Ts.setupTypeInfo=function(s,t){for(var r=this.errorCorrectLevel<<3|t,n=Qr.getBCHTypeInfo(r),a=0;a<15;a++){var i=!s&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!s&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!s};Ts.mapData=function(s,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[n][o-l]==null){var c=!1;i<s.length&&(c=(s[i]>>>a&1)==1);var d=Qr.getMask(t,n,o-l);d&&(c=!c),this.modules[n][o-l]=c,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};rr.PAD0=236;rr.PAD1=17;rr.createData=function(s,t,r){for(var n=wb.getRSBlocks(s,t),a=new Nb,i=0;i<r.length;i++){var o=r[i];a.put(o.mode,4),a.put(o.getLength(),Qr.getLengthInBits(o.mode,s)),o.write(a)}for(var l=0,i=0;i<n.length;i++)l+=n[i].dataCount;if(a.getLengthInBits()>l*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+l*8+")");for(a.getLengthInBits()+4<=l*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=l*8||(a.put(rr.PAD0,8),a.getLengthInBits()>=l*8));)a.put(rr.PAD1,8);return rr.createBytes(a,n)};rr.createBytes=function(s,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;n=Math.max(n,c),a=Math.max(a,d),i[l]=new Array(c);for(var u=0;u<i[l].length;u++)i[l][u]=255&s.buffer[u+r];r+=c;var h=Qr.getErrorCorrectPolynomial(d),m=new zE(i[l],h.getLength()-1),x=m.mod(h);o[l]=new Array(h.getLength()-1);for(var u=0;u<o[l].length;u++){var g=u+x.getLength()-o[l].length;o[l][u]=g>=0?x.get(g):0}}for(var f=0,u=0;u<t.length;u++)f+=t[u].totalCount;for(var v=new Array(f),y=0,u=0;u<n;u++)for(var l=0;l<t.length;l++)u<i[l].length&&(v[y++]=i[l][u]);for(var u=0;u<a;u++)for(var l=0;l<t.length;l++)u<o[l].length&&(v[y++]=o[l][u]);return v};var WE=rr,Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});var KE=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},GE=pj,Es=Cb(GE),Sb=p,uo=Cb(Sb);function Cb(s){return s&&s.__esModule?s:{default:s}}function QE(s,t){var r={};for(var n in s)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n]);return r}var ZE={bgColor:Es.default.oneOfType([Es.default.object,Es.default.string]).isRequired,bgD:Es.default.string.isRequired,fgColor:Es.default.oneOfType([Es.default.object,Es.default.string]).isRequired,fgD:Es.default.string.isRequired,size:Es.default.number.isRequired,title:Es.default.string,viewBoxSize:Es.default.number.isRequired,xmlns:Es.default.string},Pu=(0,Sb.forwardRef)(function(s,t){var r=s.bgColor,n=s.bgD,a=s.fgD,i=s.fgColor,o=s.size,l=s.title,c=s.viewBoxSize,d=s.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,h=QE(s,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return uo.default.createElement("svg",KE({},h,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:u}),l?uo.default.createElement("title",null,l):null,uo.default.createElement("path",{d:n,fill:r}),uo.default.createElement("path",{d:a,fill:i}))});Pu.displayName="QRCodeSvg";Pu.propTypes=ZE;Tu.default=Pu;Object.defineProperty(El,"__esModule",{value:!0});El.QRCode=void 0;var YE=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])}return s},XE=pj,xr=Wi(XE),JE=xb,eD=Wi(JE),tD=WE,sD=Wi(tD),kb=p,rD=Wi(kb),nD=Tu,aD=Wi(nD);function Wi(s){return s&&s.__esModule?s:{default:s}}function iD(s,t){var r={};for(var n in s)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n]);return r}var oD={bgColor:xr.default.oneOfType([xr.default.object,xr.default.string]),fgColor:xr.default.oneOfType([xr.default.object,xr.default.string]),level:xr.default.string,size:xr.default.number,value:xr.default.string.isRequired},Dl=(0,kb.forwardRef)(function(s,t){var r=s.bgColor,n=r===void 0?"#FFFFFF":r,a=s.fgColor,i=a===void 0?"#000000":a,o=s.level,l=o===void 0?"L":o,c=s.size,d=c===void 0?256:c,u=s.value,h=iD(s,["bgColor","fgColor","level","size","value"]),m=new sD.default(-1,eD.default[l]);m.addData(u),m.make();var x=m.modules;return rD.default.createElement(aD.default,YE({},h,{bgColor:n,bgD:x.map(function(g,f){return g.map(function(v,y){return v?"":"M "+y+" "+f+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:x.map(function(g,f){return g.map(function(v,y){return v?"M "+y+" "+f+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:x.length}))});El.QRCode=Dl;Dl.displayName="QRCode";Dl.propTypes=oD;var Eu=El.default=Dl;const lD=({frames:s,mats:t,glassOption:r,artworkWidth:n,artworkHeight:a,artworkLocation:i,primaryMatWidth:o,specialServices:l,onCreateOrder:c,onSaveQuote:d,onCreateWholesaleOrder:u,onProceedToCheckout:h,orderGroupId:m,showCheckoutButton:x=!1,useMultipleMats:g=!1,useMultipleFrames:f=!1,addToWholesaleOrder:v=!1,setAddToWholesaleOrder:y,orderId:j,sizeSurcharge:b=0,useManualFrame:k=!1,manualFrameName:S="",manualFrameCost:D=0,miscCharges:T=[],initialDiscountPercentage:C=0,onDiscountChange:E,initialQuantity:I=1,onQuantityChange:w})=>{const[N,A]=p.useState(!1),[F,Z]=p.useState(C),[Q,L]=p.useState(I),ae=fe=>{Z(fe);const kt=(Ne+Ke)*(fe/100);E&&E(fe,kt)},M=fe=>{fe<1||(L(fe),w&&w(fe))},re=typeof v<"u"?v:N,Ce=fe=>{y?y(fe):A(fe)},st=s.map(fe=>ad(Number(n),Number(a),o,Number(fe.frame.price))),nt=st.reduce((fe,kt)=>fe+kt,0),B=t.map(fe=>id(Number(n),Number(a),Number(fe.width),Number(fe.matboard.price))),oe=B.reduce((fe,kt)=>fe+kt,0),Y=r?od(Number(n),Number(a),o,Number(r.price)):0,z=ld(Number(n),Number(a),o,.02),ce=DE(Number(n),Number(a),o),je=l.reduce((fe,kt)=>fe+Number(kt.price),0),he=b||0,be=(T==null?void 0:T.reduce((fe,kt)=>fe+Number(kt.amount),0))||0,Ne=nt+oe+Y+z+ce+je+he+be,Ke=AE(Ne),ke=(Ne+Ke)*Q,gt=ke*(F/100),vt=ke-gt,ye=vt*.08,rt=vt+ye,ft=j?qP(j):null;return p.useState(!1),p.useState(!1),p.useState(!1),p.useState(!1),e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 header-underline",children:"Order Summary"}),e.jsxs("div",{className:"mb-4 border-b pb-3 border-gray-200",children:[e.jsx("div",{className:"flex justify-between font-medium",children:e.jsx("span",{children:"Artwork Details"})}),e.jsxs("div",{className:"text-sm mt-1",children:[e.jsxs("div",{className:"flex justify-between text-gray-700",children:[e.jsx("span",{children:"Dimensions:"}),e.jsxs("span",{children:[n,'"  ',a,'"']})]}),i&&i.trim()!==""&&e.jsxs("div",{className:"flex justify-between text-gray-700 mt-1",children:[e.jsx("span",{children:"Storage Location:"}),e.jsx("span",{className:"font-medium text-primary",children:i})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[s.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Frames"}),e.jsxs("span",{children:["$",nt.toFixed(2)]})]}),s.map((fe,kt)=>e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary pl-3",children:[e.jsxs("span",{children:[fe.position===1?"Inner":"Outer"," (",fe.frame.name,")"]}),e.jsxs("span",{children:["$",st[kt].toFixed(2)]})]},fe.frame.id+"-"+fe.position))]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Mats"}),e.jsxs("span",{children:["$",oe.toFixed(2)]})]}),t.map((fe,kt)=>e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary pl-3",children:[e.jsxs("span",{children:[fe.position===1?"Top":fe.position===2?"Middle":"Bottom"," (",fe.matboard.name,", ",fe.width,'")']}),e.jsxs("span",{children:["$",B[kt].toFixed(2)]})]},fe.matboard.id+"-"+fe.position))]}),r&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:["Glass (",r.name,")"]}),e.jsxs("span",{children:["$",Y.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Backing"}),e.jsxs("span",{children:["$",z.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Assembly Labor"}),e.jsxs("span",{children:["$",ce.toFixed(2)]})]}),l.length>0&&e.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-2",children:[e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Special Services"}),e.jsxs("span",{children:["$",je.toFixed(2)]})]}),l.map(fe=>e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary",children:[e.jsx("span",{children:fe.name}),e.jsxs("span",{children:["$",Number(fe.price).toFixed(2)]})]},fe.id))]}),b>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:["Size Surcharge (",n>40||a>60?"Extra Large":"Large",")"]}),e.jsxs("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:["$",b.toFixed(2)]})]}),T&&T.length>0&&e.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-2",children:[e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Miscellaneous Charges"}),e.jsxs("span",{children:["$",be.toFixed(2)]})]}),T.map((fe,kt)=>e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary pl-3",children:[e.jsx("span",{children:fe.description}),e.jsxs("span",{children:["$",Number(fe.amount).toFixed(2)]})]},kt))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-light-textSecondary dark:text-dark-textSecondary",children:"Overhead & Shop Fees"}),e.jsxs("span",{children:["$",Ke.toFixed(2)]})]}),e.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Quantity"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:()=>M(Q-1),disabled:Q<=1,className:"w-8 h-8 rounded-l border border-gray-300 bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm font-medium",children:"-"}),e.jsx(q,{type:"number",min:"1",className:"w-16 h-8 rounded-none text-center border-l-0 border-r-0",value:Q,onChange:fe=>M(parseInt(fe.target.value)||1)}),e.jsx("button",{type:"button",onClick:()=>M(Q+1),className:"w-8 h-8 rounded-r border border-gray-300 bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-sm font-medium",children:"+"})]})]}),e.jsxs("span",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:["$",((Ne+Ke)*Q).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",ke.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:"Discount"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:F||"",onChange:fe=>ae(parseFloat(fe.target.value)||0),className:"w-16 px-2 py-1 text-xs border border-gray-300 rounded text-center",placeholder:"0"}),e.jsx("span",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary",children:"%"})]}),e.jsxs("span",{className:"text-sm text-red-600",children:["-$",gt.toFixed(2)]})]}),F>0&&e.jsxs("div",{className:"flex justify-between font-medium text-green-600",children:[e.jsx("span",{children:"Discounted Subtotal"}),e.jsxs("span",{children:["$",vt.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-light-textSecondary dark:text-dark-textSecondary",children:[e.jsx("span",{children:"Tax (8%)"}),e.jsxs("span",{children:["$",ye.toFixed(2)]})]})]}),e.jsx("div",{className:"border-t border-light-border dark:border-dark-border pt-2",children:e.jsxs("div",{className:"flex justify-between text-lg font-semibold text-primary",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",rt.toFixed(2)]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(os,{id:"add-to-wholesale",checked:re,onCheckedChange:fe=>Ce(fe)}),e.jsx("label",{htmlFor:"add-to-wholesale",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Add To Wholesale Order"})]})]}),e.jsx("div",{className:"mt-6 space-y-3",children:x?e.jsxs("button",{className:"w-full py-4 text-base bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center touch-manipulation",onClick:()=>{m&&h&&h(m)},disabled:!m,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Proceed to Checkout"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:`w-full py-4 text-base ${s.length===0||t.length===0||!r?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primary/90"} text-white rounded-lg font-medium transition-colors flex items-center justify-center touch-manipulation`,onClick:async()=>{console.log("Save Order button clicked in OrderSummary"),console.log("Button disabled state:",s.length===0||t.length===0||!r),console.log("Add to wholesale order:",re),c(),re&&setTimeout(()=>{u()},500)},disabled:s.length===0||t.length===0||!r,children:[e.jsx(wl,{className:"h-5 w-5 mr-2"}),"Save Order (No Payment Required)"]}),e.jsxs("button",{className:"w-full py-4 text-base border border-light-border dark:border-dark-border bg-white dark:bg-dark-bg text-light-text dark:text-dark-text rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-dark-bg/80 transition-colors flex items-center justify-center touch-manipulation",onClick:d,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Save as Quote"]})]})}),s.length>0&&t.length>0&&e.jsxs("div",{className:"mt-6 border border-light-border dark:border-dark-border rounded-lg p-3 bg-gray-50 dark:bg-dark-bg/30",children:[e.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Wholesale Order"]}),e.jsx("p",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary mb-2",children:"This order will require these materials from your wholesalers:"}),e.jsxs("ul",{className:"text-xs space-y-1",children:[s.map(fe=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("span",{children:[fe.frame.manufacturer||"Frame"," (",fe.frame.id,")"]}),e.jsxs("span",{children:[Math.ceil(2*(n+a)/12+1)," ft"]})]},fe.frame.id+"-"+fe.position)),r&&e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:r.name}),e.jsxs("span",{children:[n+2*o,'"  ',a+2*o,'"']})]}),t.map(fe=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("span",{children:[fe.matboard.name," Mat Board"]}),e.jsxs("span",{children:[n+2*fe.width+(fe.position===1?4:0),'" ',a+2*fe.width+(fe.position===1?4:0),'"']})]},fe.matboard.id+"-"+fe.position))]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(os,{id:"wholesale-order-add",checked:re,onCheckedChange:fe=>Ce(fe)}),e.jsx("label",{htmlFor:"wholesale-order-add",className:"text-xs ml-2",children:"Add to Wholesale Order"})]})]}),ft&&e.jsx("div",{className:"mt-4",children:e.jsx(Eu,{value:ft,size:128,level:"H"})})]})};async function cD(){try{const s=await le("GET","/api/vendor-api/frames/larson");if(!s.ok)throw new Error(`Failed to fetch Larson frames: ${s.status}`);const t=await s.json();return Array.isArray(t)?t.map(r=>({id:r.id,name:r.name,manufacturer:r.vendor,material:r.material,width:r.width,depth:r.depth,price:r.price,catalogImage:r.imageUrl||"",color:r.color,edgeTexture:"",corner:""})):[]}catch(s){return console.error("Error fetching Larson-Juhl frames:",s),[]}}async function dD(){try{const s=await le("GET","/api/vendor-api/frames/bella");if(!s.ok)throw new Error(`Failed to fetch Nielsen frames: ${s.status}`);const t=await s.json();return Array.isArray(t)?t.map(r=>({id:r.id,name:r.name,manufacturer:r.vendor,material:r.material,width:r.width,depth:r.depth,price:r.price,catalogImage:r.imageUrl||"",color:r.color,edgeTexture:"",corner:""})):[]}catch(s){return console.error("Error fetching Nielsen frames:",s),[]}}async function uD(){try{const s=await le("GET","/api/vendor-api/frames/roma");if(!s.ok)throw new Error(`Failed to fetch Roma frames: ${s.status}`);const t=await s.json();return Array.isArray(t)?t.map(r=>({id:r.id,name:r.name,manufacturer:r.vendor,material:r.material,width:r.width,depth:r.depth,price:r.price,catalogImage:r.imageUrl||"",color:r.color,edgeTexture:"",corner:""})):[]}catch(s){return console.error("Error fetching Roma frames:",s),[]}}async function mD(){try{const s=await le("GET","/api/vendor-catalog/all");if(!s.ok)throw new Error(`Failed to fetch vendor frames: ${s.status}`);const t=await s.json();return Array.isArray(t)?t:[]}catch(s){throw console.error("Error fetching all vendor frames:",s),s}}async function hD(s){try{const t=await le("GET",`/api/vendor-catalog/search/${s}`);if(!t.ok){if(t.status===404)return console.log(`No frames found for item number: ${s}`),[];throw new Error(`Search failed with status: ${t.status}`)}const r=await t.json();return Array.isArray(r)?r:[]}catch(t){throw console.error(`Error searching for frames with item number ${s}:`,t),new Error(`Failed to search for frames: ${t.message}`)}}async function pD(){try{return await(await le("POST","/api/vendor-catalog/sync")).json()}catch(s){throw console.error("Error syncing frames with database:",s),s}}function fD(){const{data:s,isLoading:t,error:r,refetch:n}=ue({queryKey:["/api/vendor-catalog/all"],queryFn:mD}),{data:a,isLoading:i,error:o,refetch:l}=ue({queryKey:["/api/vendor-catalog/larson"],queryFn:cD}),{data:c,isLoading:d,error:u,refetch:h}=ue({queryKey:["/api/vendor-catalog/nielsen"],queryFn:dD}),{data:m,isLoading:x,error:g,refetch:f}=ue({queryKey:["/api/vendor-catalog/roma"],queryFn:uD}),{mutate:v,data:y,isPending:j,error:b}=Ae({mutationFn:T=>hD(T)}),{mutate:k,isPending:S,error:D}=Ae({mutationFn:pD});return{vendorFrames:s||[],isLoadingVendorFrames:t,vendorFramesError:r,refetchVendorFrames:n,larsonFrames:a||[],isLoadingLarsonFrames:i,larsonFramesError:o,refetchLarsonFrames:l,nielsenFrames:c||[],isLoadingNielsenFrames:d,nielsenFramesError:u,refetchNielsenFrames:h,romaFrames:m||[],isLoadingRomaFrames:x,romaFramesError:g,refetchRomaFrames:f,searchByItemNumber:v,searchResults:y||[],isSearching:j,searchError:b,syncFrames:k,isSyncing:S,syncError:D}}const V=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));V.displayName="Card";const K=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:J("flex flex-col space-y-1.5 p-6",s),...t}));K.displayName="CardHeader";const G=p.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:J("text-2xl font-semibold leading-none tracking-tight",s),...t}));G.displayName="CardTitle";const ee=p.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:J("text-sm text-muted-foreground",s),...t}));ee.displayName="CardDescription";const H=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:J("p-6 pt-0",s),...t}));H.displayName="CardContent";const ht=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:J("flex items-center p-6 pt-0",s),...t}));ht.displayName="CardFooter";var xD="Label",Tb=p.forwardRef((s,t)=>e.jsx(Se.label,{...s,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=s.onMouseDown)==null||a.call(s,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Tb.displayName=xD;var Pb=Tb;const gD=$n("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=p.forwardRef(({className:s,...t},r)=>e.jsx(Pb,{ref:r,className:J(gD(),s),...t}));O.displayName=Pb.displayName;const vD=({onSelectFrame:s,position:t=1})=>{const{toast:r}=Be(),[n,a]=p.useState(""),[i,o]=p.useState([]),[l,c]=p.useState(!1),d=p.useRef(null),{searchByItemNumber:u,searchResults:h,isSearching:m,searchError:x,syncFrames:g,isSyncing:f}=fD();p.useEffect(()=>{h&&JSON.stringify(h)!==JSON.stringify(d.current)&&(d.current=h,o(h),l&&c(!1))},[h,l]),p.useEffect(()=>{x&&(console.error("Vendor search error:",x),r({title:"Search Error",description:"Unable to search vendor catalogs right now. Please try again in a moment.",variant:"destructive"}),l&&c(!1),o([]))},[x,r,l]);const v=async()=>{if(!n.trim()){r({title:"Search Error",description:"Please enter an item number to search for",variant:"destructive"});return}c(!0);try{await u(n.trim())}catch(b){console.error("Search error:",b),r({title:"Search Error",description:"Failed to search for frames. Please try again.",variant:"destructive"})}finally{c(!1)}},y=()=>{g(),r({title:"Syncing Frames",description:"Frame database sync has been initiated"})},j=b=>{s(b,t),r({title:"Frame Selected",description:`${b.name} (${b.id}) has been selected for position ${t}`})};return e.jsxs(V,{className:"w-full",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Vendor Catalog Search"}),e.jsx(ee,{children:"Search for frames by item number across all vendor catalogs"})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(O,{htmlFor:"item-number",children:"Item Number"}),e.jsx(q,{id:"item-number",value:n,onChange:b=>a(b.target.value),placeholder:"Enter frame item number (e.g., 210286)",onKeyDown:b=>b.key==="Enter"&&v()})]}),e.jsxs(P,{onClick:v,disabled:m||l,className:"mb-px",children:[m||l?e.jsx(Ye,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Search"]})]}),e.jsxs(P,{variant:"outline",onClick:y,disabled:f,className:"self-end",children:[f?e.jsx(Ye,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(nr,{className:"h-4 w-4 mr-2"}),"Sync Frames with Database"]}),i.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Search Results:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(b=>e.jsxs(V,{className:"overflow-hidden",children:[e.jsx("div",{className:"relative h-40 overflow-hidden",children:b.catalogImage?e.jsx("img",{src:b.catalogImage,alt:b.name,className:"w-full h-full object-cover",onError:k=>{const S=k.target;S.onerror=null,S.src=`https://via.placeholder.com/200x150/f0f0f0/2d2d2d?text=${b.id}`}}):e.jsx("div",{className:"flex items-center justify-center w-full h-full bg-muted",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"No Image Available"})})}),e.jsxs(H,{className:"p-3",children:[e.jsx("h4",{className:"font-semibold text-sm truncate",children:b.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Item #: ",b.id.split("-")[1]]}),e.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[e.jsx("span",{children:b.manufacturer}),e.jsx("span",{children:b.material})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs mt-1",children:[e.jsxs("span",{children:["Width: ",b.width,'"']}),e.jsxs("span",{className:"font-medium",children:["$",parseFloat(String(b.price)).toFixed(2),"/ft"]})]})]}),e.jsx(ht,{className:"p-3 pt-0",children:e.jsx(P,{size:"sm",className:"w-full",onClick:()=>j(b),children:"Select Frame"})})]},b.id))})]}):i.length===0&&!m&&!l&&n.trim()!==""?e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:['No frames found with item number "',n,'". Try searching for a different item number.']}):null]})})]})};var Du="Tabs",[yD,G8]=fs(Du,[jl]),Eb=jl(),[jD,Au]=yD(Du),Db=p.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=s,u=On(l),[h,m]=ms({prop:n,onChange:a,defaultProp:i});return e.jsx(jD,{scope:r,baseId:mr(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:c,children:e.jsx(Se.div,{dir:u,"data-orientation":o,...d,ref:t})})});Db.displayName=Du;var Ab="TabsList",Ib=p.forwardRef((s,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=s,i=Au(Ab,r),o=Eb(r);return e.jsx(My,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Se.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Ib.displayName=Ab;var _b="TabsTrigger",Rb=p.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=s,o=Au(_b,r),l=Eb(r),c=Fb(o.baseId,n),d=Lb(o.baseId,n),u=n===o.value;return e.jsx(Fy,{asChild:!0,...l,focusable:!a,active:u,children:e.jsx(Se.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ge(s.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:ge(s.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:ge(s.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});Rb.displayName=_b;var Ob="TabsContent",Mb=p.forwardRef((s,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=s,l=Au(Ob,r),c=Fb(l.baseId,n),d=Lb(l.baseId,n),u=n===l.value,h=p.useRef(u);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(ds,{present:a||u,children:({present:m})=>e.jsx(Se.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});Mb.displayName=Ob;function Fb(s,t){return`${s}-trigger-${t}`}function Lb(s,t){return`${s}-content-${t}`}var bD=Db,$b=Ib,Bb=Rb,Vb=Mb;const Bt=bD,Lt=p.forwardRef(({className:s,...t},r)=>e.jsx($b,{ref:r,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Lt.displayName=$b.displayName;const ve=p.forwardRef(({className:s,...t},r)=>e.jsx(Bb,{ref:r,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));ve.displayName=Bb.displayName;const Ee=p.forwardRef(({className:s,...t},r)=>e.jsx(Vb,{ref:r,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Ee.displayName=Vb.displayName;function wD({onFrameAdd:s,useManualFrame:t,onToggleManualFrame:r,frameName:n,onFrameNameChange:a,frameCost:i,onFrameCostChange:o,selectedFrames:l=[],onFrameRemove:c,onFrameEdit:d}){const[u,h]=p.useState({name:"",manufacturer:"",material:"wood",width:"",depth:"",price:"",color:"#8B4513"}),[m,x]=p.useState({itemNumber:"",pricePerFoot:"",name:"",manufacturer:"",material:"wood",width:"",depth:"",color:"#8B4513"}),g=v=>{if(v.preventDefault(),!u.name||!u.price||!u.width){alert("Please fill in all required fields");return}const y={id:`manual-${Date.now()}`,...u,catalogImage:"",edgeTexture:"",corner:""};s==null||s(y),h({name:"",manufacturer:"",material:"wood",width:"",depth:"",price:"",color:"#8B4513"})},f=v=>{if(v.preventDefault(),!m.itemNumber||!m.pricePerFoot){alert("Please enter both item number and price per foot");return}const y={id:`moulding-${m.itemNumber}`,name:m.name||`Moulding ${m.itemNumber}`,manufacturer:m.manufacturer||"Custom",material:m.material,width:m.width||"2.25",depth:m.depth||"1.25",price:m.pricePerFoot,color:m.color,itemNumber:m.itemNumber,catalogImage:"",edgeTexture:"",corner:""};s==null||s(y),x({itemNumber:"",pricePerFoot:"",name:"",manufacturer:"",material:"wood",width:"",depth:"",color:"#8B4513"})};return e.jsxs(V,{className:"w-full max-w-md",children:[e.jsx(K,{children:e.jsx(G,{children:"Frame Management"})}),e.jsxs(H,{children:[l.length>0&&e.jsxs("div",{className:"mb-4 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Selected Frames"}),l.map((v,y)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:v.frame.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",v.frame.price,"/ft"]})]}),e.jsxs("div",{className:"flex space-x-1",children:[v.frame.id.startsWith("manual")&&d&&e.jsx(P,{size:"sm",variant:"outline",onClick:()=>{h({name:v.frame.name,manufacturer:v.frame.manufacturer,material:v.frame.material,width:v.frame.width,depth:v.frame.depth,price:v.frame.price,color:v.frame.color||"#8B4513"})},children:"Edit"}),c&&e.jsx(P,{size:"sm",variant:"destructive",onClick:()=>c(v.frame.id),children:""})]})]},v.frame.id+"-"+v.position))]}),e.jsxs(Bt,{defaultValue:"frame",className:"w-full",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-2",children:[e.jsx(ve,{value:"frame",children:"Custom Frame"}),e.jsx(ve,{value:"moulding",children:"Moulding Entry"})]}),e.jsx(Ee,{value:"frame",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"name",children:"Frame Name *"}),e.jsx(q,{id:"name",value:u.name,onChange:v=>h({...u,name:v.target.value}),placeholder:"Enter frame name",required:!0})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"manufacturer",children:"Manufacturer"}),e.jsx(q,{id:"manufacturer",value:u.manufacturer,onChange:v=>h({...u,manufacturer:v.target.value}),placeholder:"Enter manufacturer"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"material",children:"Material"}),e.jsxs("select",{id:"material",value:u.material,onChange:v=>h({...u,material:v.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"wood",children:"Wood"}),e.jsx("option",{value:"metal",children:"Metal"}),e.jsx("option",{value:"plastic",children:"Plastic"}),e.jsx("option",{value:"composite",children:"Composite"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"width",children:"Width (inches) *"}),e.jsx(q,{id:"width",type:"number",step:"0.125",value:u.width,onChange:v=>h({...u,width:v.target.value}),placeholder:"2.25",required:!0})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"depth",children:"Depth (inches)"}),e.jsx(q,{id:"depth",type:"number",step:"0.125",value:u.depth,onChange:v=>h({...u,depth:v.target.value}),placeholder:"1.25"})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"price",children:"Price per Foot *"}),e.jsx(q,{id:"price",type:"number",step:"0.01",value:u.price,onChange:v=>h({...u,price:v.target.value}),placeholder:"12.99",required:!0})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"color",children:"Color"}),e.jsx(q,{id:"color",type:"color",value:u.color,onChange:v=>h({...u,color:v.target.value})})]}),e.jsx(P,{type:"submit",className:"w-full",children:"Add Frame"})]})}),e.jsx(Ee,{value:"moulding",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"itemNumber",children:"Moulding Item Number *"}),e.jsx(q,{id:"itemNumber",value:m.itemNumber,onChange:v=>x({...m,itemNumber:v.target.value}),placeholder:"e.g., 4512, 210286, L-100",required:!0})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"pricePerFoot",children:"Price per Foot *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),e.jsx(q,{id:"pricePerFoot",type:"number",step:"0.01",min:"0",value:m.pricePerFoot,onChange:v=>x({...m,pricePerFoot:v.target.value}),placeholder:"12.99",className:"pl-7",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingName",children:"Name (Optional)"}),e.jsx(q,{id:"mouldingName",value:m.name,onChange:v=>x({...m,name:v.target.value}),placeholder:"Auto-generated if left blank"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingManufacturer",children:"Manufacturer (Optional)"}),e.jsx(q,{id:"mouldingManufacturer",value:m.manufacturer,onChange:v=>x({...m,manufacturer:v.target.value}),placeholder:"e.g., Larson-Juhl, Nielsen"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingMaterial",children:"Material"}),e.jsxs("select",{id:"mouldingMaterial",value:m.material,onChange:v=>x({...m,material:v.target.value}),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"wood",children:"Wood"}),e.jsx("option",{value:"metal",children:"Metal"}),e.jsx("option",{value:"plastic",children:"Plastic"}),e.jsx("option",{value:"composite",children:"Composite"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingWidth",children:"Width (inches)"}),e.jsx(q,{id:"mouldingWidth",type:"number",step:"0.125",value:m.width,onChange:v=>x({...m,width:v.target.value}),placeholder:"2.25"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingDepth",children:"Depth (inches)"}),e.jsx(q,{id:"mouldingDepth",type:"number",step:"0.125",value:m.depth,onChange:v=>x({...m,depth:v.target.value}),placeholder:"1.25"})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mouldingColor",children:"Color"}),e.jsx(q,{id:"mouldingColor",type:"color",value:m.color,onChange:v=>x({...m,color:v.target.value})})]}),e.jsx(P,{type:"submit",className:"w-full",children:"Add Moulding"})]})})]})]})]})}const ND=({charges:s,onChange:t})=>{const r=()=>{const o={id:Date.now().toString(),description:"",amount:0};t([...s,o])},n=(o,l,c)=>{const d=s.map(u=>u.id===o?{...u,[l]:c}:u);t(d)},a=o=>{t(s.filter(l=>l.id!==o))},i=s.reduce((o,l)=>o+l.amount,0);return e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold header-underline",children:"Miscellaneous Charges"}),e.jsx("button",{type:"button",onClick:r,className:"px-3 py-1 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors",children:"Add Charge"})]}),s.length===0?e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("p",{children:"No miscellaneous charges added."}),e.jsx("p",{className:"text-sm",children:'Click "Add Charge" to include custom fees or add-ons.'})]}):e.jsxs("div",{className:"space-y-3",children:[s.map(o=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border border-light-border dark:border-dark-border rounded-md",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Description"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg",placeholder:"Enter description (e.g., Rush delivery, Custom hardware)",value:o.description,onChange:l=>n(o.id,"description",l.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Amount ($)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg",placeholder:"0.00",value:o.amount||"",onChange:l=>n(o.id,"amount",parseFloat(l.target.value)||0)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>a(o.id),className:"p-2 text-red-600 hover:text-red-800 transition-colors",title:"Remove charge",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 8.142A2 2 0 0116.138 17H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})]},o.id)),s.length>0&&e.jsx("div",{className:"border-t border-light-border dark:border-dark-border pt-3",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Miscellaneous Charges:"}),e.jsxs("span",{children:["$",i.toFixed(2)]})]})})]})]})};function SD(){const[s,t]=p.useState(!0),[r,n]=p.useState(null),[a,i]=p.useState([]),[o,l]=p.useState([]);return p.useEffect(()=>{async function c(){try{t(!0);const d=await db();if(d&&d.length>0){console.log("Loaded Crescent matboards from API:",d.length);const u=wE(d);l(u),i([...li,...u])}else console.log("No Crescent matboards found in Larson Juhl catalog or empty response. Using static fallback data."),l(Ya),i([...li,...Ya]);n(null)}catch(d){console.error("Error in useMatboards hook:",d),n("Failed to load matboard data"),l(Ya),i([...li,...Ya])}finally{t(!1)}}c()},[]),{loading:s,error:r,matboards:a,crescentMatboards:o,getMatboardById:c=>a.find(d=>d.id===c),getMatboardsByManufacturer:c=>a.filter(d=>d.manufacturer===c),getMatboardsByCategory:c=>a.filter(d=>d.category===c),getUniqueCategories:()=>Array.from(new Set(a.map(c=>c.category).filter(Boolean))),getUniqueManufacturers:()=>Array.from(new Set(a.map(c=>c.manufacturer).filter(Boolean)))}}async function CD(){try{const s=new AbortController,t=setTimeout(()=>s.abort(),1e4),r=await fetch("/api/frames",{signal:s.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(t),!r.ok){const a=await r.json().catch(()=>({}));throw new Error(`HTTP ${r.status}: ${a.message||r.statusText}`)}const n=await r.json();return Array.isArray(n.frames)?n.frames:[]}catch(s){return s.name==="AbortError"?console.error("Frame fetch timeout - using fallback data"):console.error("Error fetching frames:",(s==null?void 0:s.message)||s),[{id:"fallback-1",name:"Basic Black Frame",color:"#000000",width:1.5,material:"Wood",price:25,image:"/images/black-frame.jpg",description:"Classic black wood frame"}]}}const kD=[{id:"studio-SM1001",name:"Studio Classic Oak Profile",manufacturer:"Studio Moulding",material:"wood",width:"2.0",depth:"1.5",price:"15.99",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",color:"#D2B48C",description:"Traditional oak frame with natural finish"},{id:"studio-SM1002",name:"Studio Modern Black Metal",manufacturer:"Studio Moulding",material:"metal",width:"1.5",depth:"0.75",price:"12.50",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",color:"#000000",description:"Sleek black metal frame with matte finish"},{id:"studio-SM2001",name:"Studio Antique Gold Ornate",manufacturer:"Studio Moulding",material:"wood",width:"3.0",depth:"2.0",price:"28.75",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",color:"#FFD700",description:"Ornate gold leaf frame for traditional artwork"},{id:"studio-SM2002",name:"Studio Silver Leaf Contemporary",manufacturer:"Studio Moulding",material:"wood",width:"2.5",depth:"1.25",price:"22.99",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",color:"#C0C0C0",description:"Contemporary silver leaf frame"},{id:"studio-SM3001",name:"Studio Rustic Barnwood",manufacturer:"Studio Moulding",material:"wood",width:"2.75",depth:"1.75",price:"18.50",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60",color:"#8B4513",description:"Distressed barnwood frame for rustic appeal"}],qn=[{id:"larson-4512",name:"Larson Gold Leaf 4512",manufacturer:"Larson-Juhl",material:"wood",width:"2.5",depth:"1.75",price:"12.99",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#D4AF37"},{id:"larson-210286",name:"Larson Academie Black 210286",manufacturer:"Larson-Juhl",material:"wood",width:"1.25",depth:"0.75",price:"8.50",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#000000"},{id:"larson-655320",name:"Larson Biltmore Gold 655320",manufacturer:"Larson-Juhl",material:"wood",width:"1.5",depth:"0.875",price:"10.75",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#FFD700"},{id:"larson-460530",name:"Larson Ventura Silver 460530",manufacturer:"Larson-Juhl",material:"metal",width:"0.75",depth:"1.125",price:"9.25",catalogImage:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#C0C0C0"},{id:"larson-310445",name:"Larson Classic Walnut 310445",manufacturer:"Larson-Juhl",material:"wood",width:"2.0",depth:"1.25",price:"14.50",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#8B4513"},{id:"larson-220158",name:"Larson Heritage Cherry 220158",manufacturer:"Larson-Juhl",material:"wood",width:"1.75",depth:"1.0",price:"11.25",catalogImage:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1582131503261-fca1d1c0589f?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#722F37"},{id:"nielsen-71",name:"Nielsen Florentine",manufacturer:"Nielsen",material:"metal",width:"1.25",depth:"0.75",price:"8.99",catalogImage:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",edgeTexture:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",corner:"https://images.unsplash.com/photo-1510172951991-856a654063f9?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGljdHVyZSUyMGZyYW1lfGVufDB8fDB8fHww",color:"#C0C0C0"},{id:"roma-250",name:"Roma Dark Walnut",manufacturer:"Roma Moulding",material:"wood",width:"3.0",depth:"2.0",price:"14.50",catalogImage:"https://images.unsplash.com/photo-1579541591661-567c1ea5dc56?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",edgeTexture:"https://images.unsplash.com/photo-1579541591661-567c1ea5dc56?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",corner:"https://images.unsplash.com/photo-1579541591661-567c1ea5dc56?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",color:"#5C4033"},{id:"omega-102",name:"Omega Black Satin",manufacturer:"Omega Moulding",material:"wood",width:"2.0",depth:"1.5",price:"9.75",catalogImage:"https://images.unsplash.com/photo-1594194208961-0fdf358251d3?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",edgeTexture:"https://images.unsplash.com/photo-1594194208961-0fdf358251d3?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",corner:"https://images.unsplash.com/photo-1594194208961-0fdf358251d3?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",color:"#2D2D2D"},{id:"bella-35",name:"Bella White Simple",manufacturer:"Bella Moulding",material:"composite",width:"1.5",depth:"1.0",price:"6.50",catalogImage:"https://images.unsplash.com/photo-1574117936532-46e544aeb239?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjZ8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",edgeTexture:"https://images.unsplash.com/photo-1574117936532-46e544aeb239?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjZ8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",corner:"https://images.unsplash.com/photo-1574117936532-46e544aeb239?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjZ8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",color:"#F5F5F5"},{id:"larson-8921",name:"Larson Ornate Gold",manufacturer:"Larson-Juhl",material:"wood",width:"3.5",depth:"2.25",price:"18.99",catalogImage:"https://images.unsplash.com/photo-1581814605484-050c5bb1196c?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzF8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",edgeTexture:"https://images.unsplash.com/photo-1581814605484-050c5bb1196c?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzF8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",corner:"https://images.unsplash.com/photo-1581814605484-050c5bb1196c?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzF8fHBpY3R1cmUlMjBmcmFtZXxlbnwwfHwwfHx8MA%3D%3D",color:"#D4AF37"},...kD];function TD(){const[s,t]=p.useState(null),{data:r,isLoading:n,error:a}=ue({queryKey:["/api/frames"],queryFn:async()=>{try{console.log("Fetching frames from catalog API...");const l=await CD();if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const c=await l.json();if(console.log("Loaded frames from API:",(c==null?void 0:c.length)||0),!Array.isArray(c)||c.length===0)return console.log("No valid frames from API, using static frame catalog data"),qn;console.log("Converting API frame data to Frame format");const d=c.filter(u=>u&&typeof u=="object").map((u,h)=>({id:u.id||`api-frame-${h}`,name:u.name||`Frame ${h+1}`,material:u.material||"wood",width:String(u.width||"1.0"),depth:String(u.depth||"0.5"),color:u.color||"#8B4513",price:String(u.price||"10.00"),manufacturer:u.manufacturer||"Generic",imageUrl:u.imageUrl||u.image_url||"",description:u.description||""}));return console.log(`Successfully converted ${d.length} frames from API`),d.length>0?d:qn}catch(l){return console.error("Error fetching frames from API:",l),logError(l,"Frames API fetch"),console.log("Using static frame data as fallback"),qn}},staleTime:5*60*1e3,cacheTime:30*60*1e3,retry:2,retryDelay:1e3});return p.useEffect(()=>{r&&r.length>0?t(r):!n&&(!r||r.length===0)&&(console.log("No frames from API, using static frame catalog data"),t(qn))},[r,n]),{frames:s,loading:n,error:a,getFrameById:l=>s?s.find(c=>c.id===l):qn.find(c=>c.id===l),getFramesByManufacturer:l=>s?s.filter(c=>c.manufacturer===l):qn.filter(c=>c.manufacturer===l)}}var PD="Separator",_h="horizontal",ED=["horizontal","vertical"],Ub=p.forwardRef((s,t)=>{const{decorative:r,orientation:n=_h,...a}=s,i=DD(n)?n:_h,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Se.div,{"data-orientation":i,...l,...a,ref:t})});Ub.displayName=PD;function DD(s){return ED.includes(s)}var Hb=Ub;const Ot=p.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...n},a)=>e.jsx(Hb,{ref:a,decorative:r,orientation:t,className:J("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));Ot.displayName=Hb.displayName;function AD({primaryDesign:s,comparisonDesign:t,onDesignSelect:r,onCompareToggle:n}){const[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(1),[u,h]=p.useState(1),[m,x]=p.useState(0),[g,f]=p.useState(0);p.useEffect(()=>{n&&n(a)},[a,n]);const v=({design:y,title:j,zoom:b,rotation:k,onZoomChange:S,onRotationChange:D,isComparison:T=!1})=>y?e.jsxs(V,{className:`${T?"border-orange-200":"border-blue-200"}`,children:[e.jsx(K,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-sm font-medium",children:j}),e.jsxs(pe,{variant:T?"secondary":"default",children:["$",y.totalPrice.toFixed(2)]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"relative h-64 bg-gray-50 rounded-lg overflow-hidden border-2 border-gray-200 mb-4",children:[e.jsx("div",{className:"absolute inset-4 border-8 rounded-sm shadow-lg transition-transform duration-200",style:{borderColor:y.matColor==="black"?"#2C2C2C":y.matColor==="crescent-ultramarine"?"#4166B0":y.matColor||"#8B4513",transform:`scale(${b}) rotate(${k}deg)`,transformOrigin:"center"},children:e.jsx("div",{className:"relative h-full bg-white border-4",style:{borderColor:y.matColor==="black"?"#2C2C2C":y.matColor==="crescent-ultramarine"?"#4166B0":y.matColor||"#F5F5DC"},children:e.jsx("div",{className:"absolute inset-4 bg-gray-300 flex items-center justify-center text-xs text-gray-600",children:y.artworkImage?e.jsx("img",{src:y.artworkImage,alt:"Artwork",className:"max-w-full max-h-full object-contain"}):e.jsx("span",{children:"Artwork Preview"})})})}),e.jsx("div",{className:"absolute inset-4 bg-gradient-to-br from-transparent via-white/10 to-transparent pointer-events-none rounded-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>S(Math.max(.5,b-.1)),children:e.jsx(y2,{className:"h-3 w-3"})}),e.jsxs("span",{className:"text-xs font-mono",children:[(b*100).toFixed(0),"%"]}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>S(Math.min(2,b+.1)),children:e.jsx(j2,{className:"h-3 w-3"})})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>D(k+90),children:e.jsx(rj,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Frame:"}),e.jsx("span",{className:"font-medium",children:y.frameName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Dimensions:"}),e.jsxs("span",{className:"font-medium",children:[y.dimensions.width,'"  ',y.dimensions.height,'"']})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Glass:"}),e.jsx("span",{className:"font-medium",children:y.glassType})]})]})]})]}):e.jsx(V,{className:`h-96 ${T?"border-orange-200":"border-blue-200"}`,children:e.jsx(H,{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(hi,{className:"mx-auto mb-2 h-12 w-12"}),e.jsx("p",{children:"No design selected"})]})})});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Frame Preview"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>l(!o),children:o?e.jsx(sj,{className:"h-4 w-4"}):e.jsx(ns,{className:"h-4 w-4"})})]}),o&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(P,{variant:a?"default":"outline",size:"sm",onClick:()=>i(!a),children:[a?e.jsx(v2,{className:"h-4 w-4 mr-1"}):e.jsx(hi,{className:"h-4 w-4 mr-1"}),"Compare Mode"]})})]}),o&&e.jsxs("div",{className:`grid gap-4 ${a?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"}`,children:[e.jsx(v,{design:s,title:"Primary Design",zoom:c,rotation:m,onZoomChange:d,onRotationChange:x}),a&&e.jsx(v,{design:t,title:"Comparison Design",zoom:u,rotation:g,onZoomChange:h,onRotationChange:f,isComparison:!0})]}),!o&&s&&e.jsx(V,{className:"border-gray-200",children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.frameName}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.dimensions.width,'"  ',s.dimensions.height,'" | ',s.glassType]})]}),e.jsxs(pe,{variant:"secondary",className:"font-medium",children:["$",s.totalPrice.toFixed(2)]})]})})}),a&&s&&t&&e.jsx(V,{className:"bg-gray-50",children:e.jsx(H,{className:"pt-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Price Comparison"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Primary:"}),e.jsxs("span",{children:["$",s.totalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Comparison:"}),e.jsxs("span",{children:["$",t.totalPrice.toFixed(2)]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Difference:"}),e.jsxs("span",{className:s.totalPrice<t.totalPrice?"text-green-600":"text-red-600",children:["$",Math.abs(s.totalPrice-t.totalPrice).toFixed(2)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r==null?void 0:r(s),children:"Select Primary"}),e.jsx(P,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r==null?void 0:r(t),children:"Select Comparison"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Design Notes"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("p",{children:" Zoom and rotate to examine details"}),e.jsx("p",{children:" Compare pricing and materials"}),e.jsx("p",{children:" Select preferred design for order"})]})]})]})})})]})}var Iu="Popover",[qb,Q8]=fs(Iu,[Ta]),Ki=Ta(),[ID,Zr]=qb(Iu),zb=s=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=s,l=Ki(t),c=p.useRef(null),[d,u]=p.useState(!1),[h=!1,m]=ms({prop:n,defaultProp:a,onChange:i});return e.jsx(iu,{...l,children:e.jsx(ID,{scope:t,contentId:mr(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(x=>!x),[m]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:o,children:r})})};zb.displayName=Iu;var Wb="PopoverAnchor",_D=p.forwardRef((s,t)=>{const{__scopePopover:r,...n}=s,a=Zr(Wb,r),i=Ki(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),e.jsx(bl,{...i,...n,ref:t})});_D.displayName=Wb;var Kb="PopoverTrigger",Gb=p.forwardRef((s,t)=>{const{__scopePopover:r,...n}=s,a=Zr(Kb,r),i=Ki(r),o=We(t,a.triggerRef),l=e.jsx(Se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Jb(a.open),...n,ref:o,onClick:ge(s.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:e.jsx(bl,{asChild:!0,...i,children:l})});Gb.displayName=Kb;var _u="PopoverPortal",[RD,OD]=qb(_u,{forceMount:void 0}),Qb=s=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=s,i=Zr(_u,t);return e.jsx(RD,{scope:t,forceMount:r,children:e.jsx(ds,{present:r||i.open,children:e.jsx(Uy,{asChild:!0,container:a,children:n})})})};Qb.displayName=_u;var xa="PopoverContent",Zb=p.forwardRef((s,t)=>{const r=OD(xa,s.__scopePopover),{forceMount:n=r.forceMount,...a}=s,i=Zr(xa,s.__scopePopover);return e.jsx(ds,{present:n||i.open,children:i.modal?e.jsx(MD,{...a,ref:t}):e.jsx(FD,{...a,ref:t})})});Zb.displayName=xa;var MD=p.forwardRef((s,t)=>{const r=Zr(xa,s.__scopePopover),n=p.useRef(null),a=We(t,n),i=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return Ly(o)},[]),e.jsx($y,{as:gl,allowPinchZoom:!0,children:e.jsx(Yb,{...s,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(s.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ge(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ge(s.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),FD=p.forwardRef((s,t)=>{const r=Zr(xa,s.__scopePopover),n=p.useRef(!1),a=p.useRef(!1);return e.jsx(Yb,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Yb=p.forwardRef((s,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=s,m=Zr(xa,r),x=Ki(r);return By(),e.jsx(Vy,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(vl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:e.jsx(nu,{"data-state":Jb(m.open),role:"dialog",id:m.contentId,...x,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Xb="PopoverClose",LD=p.forwardRef((s,t)=>{const{__scopePopover:r,...n}=s,a=Zr(Xb,r);return e.jsx(Se.button,{type:"button",...n,ref:t,onClick:ge(s.onClick,()=>a.onOpenChange(!1))})});LD.displayName=Xb;var $D="PopoverArrow",BD=p.forwardRef((s,t)=>{const{__scopePopover:r,...n}=s,a=Ki(r);return e.jsx(au,{...a,...n,ref:t})});BD.displayName=$D;function Jb(s){return s?"open":"closed"}var VD=zb,UD=Gb,HD=Qb,ew=Zb;const qD=VD,zD=UD,tw=p.forwardRef(({className:s,align:t="center",sideOffset:r=4,...n},a)=>e.jsx(HD,{children:e.jsx(ew,{ref:a,align:t,sideOffset:r,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));tw.displayName=ew.displayName;let WD=class{constructor(t={}){this.initialized=!1,this.canvas=null,this.ctx=null,this.options={markerSizeCm:t.markerSizeCm||2.54,minContourArea:t.minContourArea||1e3,edgeDetectionThreshold:t.edgeDetectionThreshold||100,allowManualOverride:t.allowManualOverride!==void 0?t.allowManualOverride:!0}}async initialize(){try{if(this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("Failed to get canvas context");this.initialized=!0,console.log("Artwork size detector initialized successfully")}catch(t){throw console.error("Failed to initialize artwork size detector:",t),t}}generateMarker(t=500){const r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("Failed to get canvas context");r.width=t,r.height=t,n.fillStyle="white",n.fillRect(0,0,t,t);const a=Math.floor(t*.08);n.fillStyle="black",n.fillRect(0,0,t,a),n.fillRect(0,0,a,t),n.fillRect(t-a,0,a,t),n.fillRect(0,t-a,t,a);const i=t-a*2,o=8,l=i/o,c=[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,1,1,1,1,0,1],[1,0,1,0,0,1,0,1],[1,0,1,0,0,1,0,1],[1,0,1,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1]];for(let y=0;y<o;y++)for(let j=0;j<o;j++)c[y]&&c[y][j]===1&&n.fillRect(a+j*l,a+y*l,l,l);const d=t/2,u=t/2,h=t*.1;n.strokeStyle="red",n.lineWidth=Math.max(3,t/100),n.beginPath(),n.moveTo(d-h,u),n.lineTo(d+h,u),n.stroke(),n.beginPath(),n.moveTo(d,u-h),n.lineTo(d,u+h),n.stroke();const m=Math.floor(t*.15);n.fillStyle="white",n.fillRect(0,t-m,t,m),n.fillStyle="black";const x=Math.floor(t/16);n.font=`bold ${x}px Arial, sans-serif`,n.textAlign="center";const f=(this.options.markerSizeCm||2.54)/2.54;n.fillText(`${f}"  ${f}"`,t/2,t-m/2);const v=Math.floor(t*.15);return n.fillStyle="red",n.beginPath(),n.moveTo(0,0),n.lineTo(v,0),n.lineTo(0,v),n.fill(),n.beginPath(),n.moveTo(t,0),n.lineTo(t-v,0),n.lineTo(t,v),n.fill(),n.beginPath(),n.moveTo(0,t),n.lineTo(v,t),n.lineTo(0,t-v),n.fill(),n.beginPath(),n.moveTo(t,t),n.lineTo(t-v,t),n.lineTo(t,t-v),n.fill(),r}downloadMarker(){const t=this.generateMarker(500),r=document.createElement("a");r.download="reference-marker.png",r.href=t.toDataURL("image/png"),r.click()}async estimateDimensions(t){if(this.initialized||await this.initialize(),!this.canvas||!this.ctx)throw new Error("Canvas not initialized");try{this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(t,0,0,t.width,t.height);const r=t.width/t.height,n=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),a=this.detectReferenceMarker(n);if(a.found){console.log("Reference marker detected:",a);const l=(this.options.markerSizeCm||2.54)/2.54/a.sizeInPixels*a.detectedSizeInPixels,c=t.width-a.detectedSizeInPixels,d=t.height-a.detectedSizeInPixels;let u=c*l,h=d*l;a.position==="top"||a.position==="bottom"?h=d*l:(a.position==="left"||a.position==="right")&&(u=c*l),u=Math.round(u*4)/4,h=Math.round(h*4)/4;const m=5,x=40;return u=Math.max(m,Math.min(x,u)),h=Math.max(m,Math.min(x,h)),console.log("Marker-based dimensions:",u,"x",h,"inches"),{width:u,height:h,unit:"in"}}else{console.log("No reference marker detected, using estimation method");const i=[{width:5,height:7},{width:8,height:10},{width:11,height:14},{width:16,height:20},{width:18,height:24},{width:20,height:24},{width:24,height:36}];let o=i[0],l=Math.abs(o.width/o.height-r);for(const x of i){const g=x.width/x.height,f=Math.abs(g-r);f<l&&(l=f,o=x)}const c=Math.min(1.5,Math.max(.7,t.width/2e3));let d=o.width*c,u=o.height*c;l>.2&&(r>=1?(d=16,u=16/r):(u=16,d=16*r)),d=Math.round(d*2)/2,u=Math.round(u*2)/2;const h=5,m=40;return d=Math.max(h,Math.min(m,d)),u=Math.max(h,Math.min(m,u)),console.log("Image dimensions:",t.width,"x",t.height,"pixels"),console.log("Aspect ratio:",r),console.log("Closest standard size:",o.width,"x",o.height),console.log("Size adjustment factor:",c),console.log("Estimated dimensions:",d,"x",u,"inches"),{width:d,height:u,unit:"in"}}}catch(r){return console.error("Error estimating artwork dimensions:",r),{width:16,height:20,unit:"in"}}}detectReferenceMarker(t){try{const{data:r,width:n,height:a}=t,i={hasDarkBorder:!0,hasInternalPattern:!0,hasColoredCorners:!0},o=this.options.edgeDetectionThreshold||100,l=this.findPotentialMarkers(r,n,a,o);if(l.length===0)return console.log("No potential markers found"),{found:!1,sizeInPixels:0,detectedSizeInPixels:0,confidence:0,position:"center"};let c=0,d=null;for(const u of l){const{x:h,y:m,width:x,height:g}=u,f=this.checkForBlackBorder(r,n,h,m,x,g),v=this.checkForInternalPattern(r,n,h,m,x,g),y=this.checkForRedCorners(r,n,h,m,x,g),j=(f?.4:0)+(v?.4:0)+(y?.2:0);j>c&&(c=j,d=u)}if(d&&c>.5){const u=this.determineMarkerPosition(d,n,a);return{found:!0,sizeInPixels:500,detectedSizeInPixels:Math.max(d.width,d.height),confidence:c,position:u}}return{found:!1,sizeInPixels:0,detectedSizeInPixels:0,confidence:0,position:"center"}}catch(r){return console.error("Error detecting reference marker:",r),{found:!1,sizeInPixels:0,detectedSizeInPixels:0,confidence:0,position:"center"}}}findPotentialMarkers(t,r,n,a){const i=[],o=Math.min(r,n)*.05,l=Math.min(r,n)*.4,c=10,d=Math.floor(r/c),u=Math.floor(n/c);for(let h=0;h<c-1;h++)for(let m=0;m<c-1;m++){const x=m*d,g=h*u;for(let f=1;f<=3;f++){const v=d*f,y=u*f;x+v>=r||g+y>=n||v<o||v>l||y<o||y>l||this.checkRegionEdges(t,r,x,g,v,y,a)&&i.push({x,y:g,width:v,height:y})}}return console.log("Found",i.length,"potential markers"),i}checkRegionEdges(t,r,n,a,i,o,l){let d=0;for(let u=0;u<20;u++){const h=n+Math.floor(i*(u/20));this.isEdgePoint(t,r,h,a,l)&&d++,this.isEdgePoint(t,r,h,a+o-1,l)&&d++}for(let u=0;u<20;u++){const h=a+Math.floor(o*(u/20));this.isEdgePoint(t,r,n,h,l)&&d++,this.isEdgePoint(t,r,n+i-1,h,l)&&d++}return d>=20}isEdgePoint(t,r,n,a,i){if(n<=0||n>=r-1||a<=0)return!1;const o=(a*r+n)*4,l=h=>{const m=o+h;return(t[m]+t[m+1]+t[m+2])/3},c=-l(-r*4-4)+l(-r*4+4)+-2*l(-4)+2*l(4)+-l(r*4-4)+l(r*4+4),d=-l(-r*4-4)-2*l(-r*4)-l(-r*4+4)+l(r*4-4)+2*l(r*4)+l(r*4+4);return Math.sqrt(c*c+d*d)>i}checkForBlackBorder(t,r,n,a,i,o){const l=Math.floor(Math.min(i,o)*.08),c=10;let d=0,u=0;for(let h=0;h<c;h++){const m=n+Math.floor(i*(h/c));for(let v=0;v<l;v++)this.isDarkPixel(t,r,m,a+v)&&d++,u++;const x=n+Math.floor(i*(h/c));for(let v=0;v<l;v++)this.isDarkPixel(t,r,x,a+o-1-v)&&d++,u++;const g=a+Math.floor(o*(h/c));for(let v=0;v<l;v++)this.isDarkPixel(t,r,n+v,g)&&d++,u++;const f=a+Math.floor(o*(h/c));for(let v=0;v<l;v++)this.isDarkPixel(t,r,n+i-1-v,f)&&d++,u++}return d/u>.6}checkForInternalPattern(t,r,n,a,i,o){const l=Math.floor(Math.min(i,o)*.08),c=n+l,d=a+l,u=i-l*2,h=o-l*2,m=3;let x=0,g=0;for(let y=0;y<m;y++)for(let j=0;j<m;j++){const b=c+Math.floor(u*(j+.5)/m),k=d+Math.floor(h*(y+.5)/m);this.isDarkPixel(t,r,b,k)?x++:g++}const f=x+g,v=x/f;return v>.2&&v<.8}checkForRedCorners(t,r,n,a,i,o){const l=Math.floor(Math.min(i,o)*.15);let c=0;return this.hasRedCorner(t,r,n,a,l,"top-left")&&c++,this.hasRedCorner(t,r,n+i-l,a,l,"top-right")&&c++,this.hasRedCorner(t,r,n,a+o-l,l,"bottom-left")&&c++,this.hasRedCorner(t,r,n+i-l,a+o-l,l,"bottom-right")&&c++,c>=2}hasRedCorner(t,r,n,a,i,o){let l=0,c=0;for(let d=0;d<i;d++)for(let u=0;u<i;u++){let h=!1;switch(o){case"top-left":h=u+d<i;break;case"top-right":h=i-u+d<i;break;case"bottom-left":h=u+i-d<i;break;case"bottom-right":h=i-u+i-d<i;break}if(h){const m=n+u,x=a+d;this.isRedPixel(t,r,m,x)&&l++,c++}}return c>0&&l/c>.4}isDarkPixel(t,r,n,a){const i=(a*r+n)*4,o=t[i],l=t[i+1],c=t[i+2];return(o+l+c)/3<80}isRedPixel(t,r,n,a){const i=(a*r+n)*4,o=t[i],l=t[i+1],c=t[i+2];return o>150&&o>l*1.5&&o>c*1.5}determineMarkerPosition(t,r,n){const{x:a,y:i,width:o,height:l}=t,c=a+o/2,d=i+l/2,u=c/r,h=d/n;return h<.33?"top":h>.66?"bottom":u<.33?"left":u>.66?"right":"center"}createVisualization(t,r){const n=document.createElement("canvas"),a=n.getContext("2d");if(!a)throw new Error("Failed to get canvas context");n.width=t.width,n.height=t.height,a.drawImage(t,0,0,t.width,t.height),a.strokeStyle="rgba(0, 255, 0, 0.8)",a.lineWidth=3;const i=Math.min(t.width,t.height)*.1;a.strokeRect(i,i,t.width-i*2,t.height-i*2);const o=`${r.width}"  ${r.height}"`;a.font=`bold ${Math.max(16,Math.floor(t.width/20))}px Arial, sans-serif`,a.fillStyle="rgba(255, 255, 255, 0.8)";const l=a.measureText(o).width+20,c=Math.max(24,Math.floor(t.width/15));return a.fillRect((t.width-l)/2,t.height-i-c-10,l,c),a.fillStyle="rgba(0, 0, 0, 0.9)",a.textAlign="center",a.fillText(o,t.width/2,t.height-i-20),n}};function KD(s){return new Promise((t,r)=>{const n=new FileReader;n.onload=a=>{if(!a.target||!a.target.result){r(new Error("Failed to read file data"));return}const i=new Image;i.onload=()=>t(i),i.onerror=()=>r(new Error("Failed to load image")),i.src=a.target.result},n.onerror=()=>r(new Error("Failed to read file")),n.readAsDataURL(s)})}function sw({frames:s,mats:t,artworkWidth:r,artworkHeight:n,artworkImage:a,useMultipleMats:i,useMultipleFrames:o,onFrameImageCaptured:l}){const c=p.useRef(null);return p.useEffect(()=>{if(!c.current)return;const d=c.current,u=d.getContext("2d");if(!u)return;const h=1200,m=900;d.width=h,d.height=m,u.clearRect(0,0,d.width,d.height);const x=600,g=r/n;let f,v;g>1?(f=x,v=x/g):(v=x,f=x*g);let y=0,j=0;s.forEach(Z=>{const Q=parseFloat(Z.frame.width)||1;y+=Q*8}),t.forEach(Z=>{j+=Z.width*8});const b=y+j,k=f+b*2,S=v+b*2,D=(d.width-k)/2,T=(d.height-S)/2;let C=D,E=T,I=k,w=S;const N=[...s].sort((Z,Q)=>Q.position-Z.position);if(o)N.forEach(Z=>{const Q=(parseFloat(Z.frame.width)||1)*8;u.fillStyle=Z.frame.color||"#8B4513",u.fillRect(C,E,I,w),u.fillStyle="transparent",u.clearRect(C+Q,E+Q,I-Q*2,w-Q*2),C+=Q,E+=Q,I-=Q*2,w-=Q*2});else if(s.length>0){const Z=N[N.length-1].frame,Q=(parseFloat(Z.width)||1)*8;u.fillStyle=Z.color||"#8B4513",u.fillRect(C,E,I,w),u.clearRect(C+Q,E+Q,I-Q*2,w-Q*2),C+=Q,E+=Q,I-=Q*2,w-=Q*2}const A=[...t].sort((Z,Q)=>Q.position-Z.position);if(i)A.forEach(Z=>{const Q=Z.width*8;u.fillStyle=Z.matboard.color||"#FFFFFF",u.fillRect(C,E,I,w),u.clearRect(C+Q,E+Q,I-Q*2,w-Q*2),C+=Q,E+=Q,I-=Q*2,w-=Q*2});else if(t.length>0){const Z=A[A.length-1],Q=Z.width*8;u.fillStyle=Z.matboard.color||"#FFFFFF",u.fillRect(C,E,I,w),u.clearRect(C+Q,E+Q,I-Q*2,w-Q*2),C+=Q,E+=Q,I-=Q*2,w-=Q*2}if(a){const Z=new Image;Z.onload=()=>{u.drawImage(Z,C,E,I,w),l&&setTimeout(()=>{try{const Q=d.toDataURL("image/jpeg",.9);l(Q)}catch(Q){console.error("Error capturing frame design:",Q)}},100)},Z.onerror=()=>F(),Z.src=a}else F();function F(){u&&(u.fillStyle="#f8f9fa",u.fillRect(C,E,I,w),u.strokeStyle="#dee2e6",u.lineWidth=2,u.strokeRect(C,E,I,w),u.fillStyle="#6c757d",u.font="bold 18px Arial",u.textAlign="center",u.textBaseline="middle",u.fillText("Your Artwork",C+I/2,E+w/2),l&&setTimeout(()=>{try{const Z=d.toDataURL("image/jpeg",.9);l(Z)}catch(Z){console.error("Error capturing frame design:",Z)}},100))}},[s,t,r,n,a,o,i,l]),e.jsxs("div",{className:"frame-visualizer-container w-full",children:[e.jsx("div",{className:"w-full bg-gray-50 p-2 sm:p-4 rounded-lg overflow-x-auto",children:e.jsx("div",{className:"flex justify-center min-w-[320px]",children:e.jsx("canvas",{ref:c,className:"border-2 border-gray-300 shadow-xl rounded-lg bg-white max-w-full h-auto",width:1200,height:900,style:{width:"100%",maxWidth:"1200px",height:"auto",aspectRatio:"4/3",display:"block"}})})}),e.jsx("div",{className:"text-center text-sm text-gray-600 mt-4",children:s.length>0||t.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[s.length>0&&(o?`${s.length} frames`:"Single frame"),s.length>0&&t.length>0&&" | ",t.length>0&&(i?`${t.length} mats`:"Single mat"),(s.length>0||t.length>0)&&` | Artwork: ${r}"  ${n}"`]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:()=>{if(c.current)try{const d=document.createElement("a");d.download=`framed-artwork-${new Date().toISOString().split("T")[0]}.png`,d.href=c.current.toDataURL("image/png",1),d.click()}catch(d){console.error("Error downloading frame design:",d)}},children:"Download Preview"})]}):e.jsx("p",{children:"Select frames and mats to see preview"})})]})}async function mo(s,t={}){const{maxWidth:r=1920,maxHeight:n=1920,quality:a=.8,format:i="jpeg",maxSizeKB:o=1024}=t;return new Promise((l,c)=>{const d=document.createElement("canvas"),u=d.getContext("2d"),h=new Image;if(h.onload=()=>{try{let{width:m,height:x}=h;const g=m/x;if(m>r&&(m=r,x=m/g),x>n&&(x=n,m=x*g),d.width=m,d.height=x,!u){c(new Error("Canvas context not available"));return}u.drawImage(h,0,0,m,x);const f=`image/${i}`;let v=d.toDataURL(f,a);if(v.length*.75/1024>o&&a>.1){const j=Math.max(.1,a*.7);v=d.toDataURL(f,j)}l(v)}catch(m){c(m)}},h.onerror=()=>c(new Error("Failed to load image")),typeof s=="string")h.src=s;else{const m=new FileReader;m.onload=x=>{var g;h.src=(g=x.target)==null?void 0:g.result},m.onerror=()=>c(new Error("Failed to read file")),m.readAsDataURL(s)}})}function Dr(s){return s.split(",")[1].length*.75/1024}function GD({onDimensionsDetected:s,defaultWidth:t=8,defaultHeight:r=10,frames:n=[],mats:a=[],useMultipleFrames:i=!1,useMultipleMats:o=!1,onFrameImageCaptured:l}){const{toast:c}=Be(),[d,u]=p.useState(null),[h,m]=p.useState(!1),[x,g]=p.useState("upload"),[f,v]=p.useState({width:t,height:r,unit:"in"}),[y,j]=p.useState(null),[b,k]=p.useState(!1),[S,D]=p.useState(1),[T,C]=p.useState(0),[E,I]=p.useState(0),[w,N]=p.useState(!1),[A,F]=p.useState(null),Z=p.useRef(null),Q=p.useRef(null),L=p.useRef(null);p.useEffect(()=>((async()=>{try{const z=new WD;await z.initialize(),u(z),console.log("Artwork size detector initialized successfully")}catch(z){console.error("Failed to initialize artwork detector:",z),k(!0)}})(),()=>{L.current&&L.current.getTracks().forEach(z=>z.stop())}),[]);const ae=async Y=>{if(!Y.type.startsWith("image/")){c({title:"Invalid File Type",description:"Please upload an image file (JPG, PNG, etc.)",variant:"destructive"});return}m(!0);try{const z=URL.createObjectURL(Y);if(j(z),d){const ce=await KD(Y),je=await d.estimateDimensions(ce);v(je);const he=new FileReader;he.onload=async be=>{var gt;const Ne=(gt=be.target)==null?void 0:gt.result,Ke=Dr(Ne);console.log(`Original image size: ${Ke.toFixed(1)} KB`);let ke=Ne;if(Ke>500){ke=await mo(Ne,{maxWidth:1920,maxHeight:1920,quality:.8,maxSizeKB:500});const vt=Dr(ke);console.log(`Compressed image size: ${vt.toFixed(1)} KB`)}s(je,ke)},he.readAsDataURL(Y),c({title:"Dimensions Detected",description:`Detected artwork size: ${je.width}"  ${je.height}"`})}else{const ce=new FileReader;ce.onload=async je=>{var Ke;const he=(Ke=je.target)==null?void 0:Ke.result,be=Dr(he);console.log(`Original image size: ${be.toFixed(1)} KB`);let Ne=he;if(be>500){Ne=await mo(he,{maxWidth:1920,maxHeight:1920,quality:.8,maxSizeKB:500});const ke=Dr(Ne);console.log(`Compressed image size: ${ke.toFixed(1)} KB`)}s(f,Ne)},ce.readAsDataURL(Y)}}catch(z){console.error("Error processing image:",z),c({title:"Processing Error",description:"Failed to process image. Please try again or enter dimensions manually.",variant:"destructive"}),k(!0)}finally{m(!1)}},M=Y=>{Y.target.files&&Y.target.files[0]&&ae(Y.target.files[0])},re=(Y,z)=>{const ce=parseFloat(z);!isNaN(ce)&&ce>0&&v(je=>({...je,[Y]:ce}))},Ce=()=>{y?(s(f,y),c({title:"Dimensions Updated",description:`Manual dimensions set to ${f.width}"  ${f.height}"`})):c({title:"No Image Selected",description:"Please upload an image first.",variant:"destructive"})},st=async()=>{try{const z=(await navigator.mediaDevices.enumerateDevices()).filter(je=>je.kind==="videoinput");console.log("Available camera devices:",z.length),z.forEach((je,he)=>{console.log(`Camera ${he}: ${je.label||"Unnamed camera"}`)});let ce;try{ce=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:3840},height:{ideal:2160},frameRate:{ideal:30}}}),console.log("Successfully accessed rear-facing camera")}catch(je){if(console.log("Could not access rear camera, trying alternative:",je),z.length>1){const he=z[z.length>1?1:0].deviceId;try{ce=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:he},width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}}}),console.log("Using specific camera device:",he)}catch(be){console.log("Error using specific camera, falling back to default:",be),ce=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080}}})}}else ce=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080}}})}if(Q.current){Q.current.srcObject=ce,L.current=ce;const je=ce.getVideoTracks()[0];if(je){console.log("Video track capabilities:",je.getCapabilities());try{await je.applyConstraints({advanced:[{focusMode:"continuous"},{whiteBalance:"continuous"},{exposureMode:"continuous"}]})}catch(he){console.log("Could not apply advanced constraints:",he)}}}}catch(Y){console.error("Error accessing webcam:",Y),c({title:"Webcam Error",description:"Failed to access camera. Please check permissions or use file upload instead.",variant:"destructive"})}},nt=()=>{L.current&&(L.current.getTracks().forEach(Y=>Y.stop()),L.current=null,Q.current&&(Q.current.srcObject=null))};p.useEffect(()=>{x==="webcam"?st():nt()},[x]);const B=async()=>{if(!Q.current||!L.current){c({title:"Webcam Not Ready",description:"Webcam is not ready. Please try again.",variant:"destructive"});return}m(!0);try{const Y=L.current.getVideoTracks()[0];if(Y&&Y.getCapabilities&&Y.getCapabilities().focusMode)try{await Y.applyConstraints({advanced:[{focusMode:"continuous"}]}),await new Promise(he=>setTimeout(he,500))}catch(he){console.log("Focus before capture not supported:",he)}const z=document.createElement("canvas");z.width=Q.current.videoWidth,z.height=Q.current.videoHeight;const ce=z.getContext("2d");if(!ce)throw new Error("Failed to get canvas context");console.log("Capturing image at resolution:",z.width,"x",z.height),ce.drawImage(Q.current,0,0);try{const he=ce.getImageData(0,0,z.width,z.height);this.enhanceImageContrast(he.data),ce.putImageData(he,0,0)}catch(he){console.log("Image enhancement failed, continuing with original image:",he)}const je=z.toDataURL("image/jpeg",.95);if(j(je),d){const he=new Image;he.onload=async()=>{try{console.log("Processing image for size detection, resolution:",he.width,"x",he.height);const be=await d.estimateDimensions(he);console.log("Detection result:",be);try{const ke=d.createVisualization(he,be).toDataURL("image/jpeg");j(ke)}catch(Ke){console.error("Error creating visualization:",Ke)}if(be.width>=5&&be.width<=40&&be.height>=5&&be.height<=40){v(be);const Ke=Dr(je);console.log(`Original webcam image size: ${Ke.toFixed(1)} KB`);let ke=je;if(Ke>500){ke=await mo(je,{maxWidth:1920,maxHeight:1920,quality:.8,maxSizeKB:500});const gt=Dr(ke);console.log(`Compressed webcam image size: ${gt.toFixed(1)} KB`)}s(be,ke),c({title:"Dimensions Detected",description:`Detected artwork size: ${be.width}"  ${be.height}"`})}else{console.log("Detection resulted in invalid size:",be);const Ke=he.width/he.height;let ke=16,gt;Ke>=1?gt=Math.round(ke/Ke*10)/10:(gt=20,ke=Math.round(gt*Ke*10)/10),ke=Math.max(5,Math.min(40,ke)),gt=Math.max(5,Math.min(40,gt));const vt={width:ke,height:gt,unit:"in"};v(vt);const W=Dr(je);console.log(`Original webcam image size: ${W.toFixed(1)} KB`);let ye=je;if(W>500){ye=await mo(je,{maxWidth:1920,maxHeight:1920,quality:.8,maxSizeKB:500});const rt=Dr(ye);console.log(`Compressed webcam image size: ${rt.toFixed(1)} KB`)}s(vt,ye),c({title:"Detection Adjusted",description:"Using estimated dimensions. Please verify or adjust manually.",variant:"warning"}),k(!0)}}catch(be){console.error("Error detecting dimensions:",be),c({title:"Detection Error",description:"Failed to detect dimensions. Please try again or enter manually.",variant:"destructive"}),k(!0),s(f,je)}finally{m(!1)}},he.onerror=()=>{c({title:"Image Error",description:"Failed to process captured image.",variant:"destructive"}),m(!1)},he.src=je}else s(f,je),m(!1)}catch(Y){console.error("Error capturing from webcam:",Y),c({title:"Capture Error",description:"Failed to capture image from webcam.",variant:"destructive"}),m(!1)}},oe=()=>{d&&d.downloadMarker()};return e.jsxs(V,{className:"w-full max-w-none border-2 border-red-200",children:[e.jsxs(K,{children:[e.jsx(G,{className:"text-red-700",children:"Artwork Upload & Frame Preview"}),e.jsxs(ee,{children:[e.jsx("strong",{className:"text-red-600",children:"REQUIRED:"})," Upload an image of your artwork with a reference marker to automatically determine its size and see your framing preview. Orders cannot proceed without artwork images."]})]}),e.jsx(H,{className:"max-w-none",children:e.jsx("div",{className:"space-y-4 w-full",children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsxs("div",{className:"border rounded-md bg-muted/10 min-h-[400px] flex flex-col w-full",children:[e.jsx("div",{className:"p-4 border-b bg-white/50 rounded-t-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Artwork Capture & Detection"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Bt,{value:x,onValueChange:g,className:"w-auto",children:e.jsxs(Lt,{className:"grid w-full grid-cols-2",children:[e.jsxs(ve,{value:"webcam",className:"text-xs",children:[e.jsx(hh,{className:"mr-1 h-3 w-3"}),"Camera"]}),e.jsxs(ve,{value:"upload",className:"text-xs",children:[e.jsx(Mr,{className:"mr-1 h-3 w-3"}),"Upload"]})]})})})]})}),e.jsxs("div",{className:"flex-1 p-4",children:[x==="webcam"?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"relative rounded-md overflow-hidden bg-black w-full",style:{aspectRatio:"16/9"},children:[e.jsx("video",{ref:Q,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover transition-transform duration-200 cursor-move",style:{transform:`scale(${S}) translate(${T}px, ${E}px)`,transformOrigin:"center center"},onMouseDown:Y=>{S>1&&(N(!0),F({x:Y.clientX,y:Y.clientY}))},onMouseMove:Y=>{if(w&&A&&S>1){const z=Y.clientX-A.x,ce=Y.clientY-A.y;C(je=>je+z),I(je=>je+ce),F({x:Y.clientX,y:Y.clientY})}},onMouseUp:()=>{N(!1),F(null)},onMouseLeave:()=>{N(!1),F(null)},onTouchStart:Y=>{if(Y.touches.length===1&&S>1){const z=Y.touches[0];N(!0),F({x:z.clientX,y:z.clientY})}},onTouchMove:Y=>{if(w&&A&&Y.touches.length===1&&S>1){const z=Y.touches[0],ce=z.clientX-A.x,je=z.clientY-A.y;C(he=>he+ce),I(he=>he+je),F({x:z.clientX,y:z.clientY})}},onTouchEnd:()=>{N(!1),F(null)}}),e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:e.jsxs("div",{className:"w-3/4 h-3/4 border-2 border-white/30 grid grid-cols-3 grid-rows-3",children:[e.jsx("div",{className:"border-r border-b border-white/30"}),e.jsx("div",{className:"border-r border-b border-white/30"}),e.jsx("div",{className:"border-b border-white/30"}),e.jsx("div",{className:"border-r border-b border-white/30"}),e.jsx("div",{className:"border-r border-b border-white/30"}),e.jsx("div",{className:"border-b border-white/30"}),e.jsx("div",{className:"border-r border-white/30"}),e.jsx("div",{className:"border-r border-white/30"}),e.jsx("div",{})]})}),e.jsxs("div",{className:"absolute top-4 left-0 right-0 text-center text-white text-sm bg-black/70 py-3 px-4 mx-4 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"font-medium",children:'Position artwork with 1"  1" marker on same plane'}),e.jsxs("div",{className:"text-xs mt-1 opacity-90",children:["Use zoom controls to get closer  ",S>1?"Drag to pan view":"Zoom in to enable panning"]})]}),e.jsxs("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex flex-col gap-2 bg-black/70 rounded-lg p-3 backdrop-blur-sm",children:[e.jsx("div",{className:"text-white text-xs text-center font-medium mb-1",children:"Zoom"}),e.jsx(P,{onClick:()=>D(Y=>Math.min(4,Y+.3)),size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white w-10 h-8 p-0 font-bold text-lg",disabled:S>=4,title:"Zoom In",children:"+"}),e.jsxs("div",{className:"text-white text-sm text-center font-mono bg-black/70 px-2 py-1 rounded border border-white/20",children:[S.toFixed(1),"x"]}),e.jsx(P,{onClick:()=>D(Y=>Math.max(1,Y-.3)),size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white w-10 h-8 p-0 font-bold text-lg",disabled:S<=1,title:"Zoom Out",children:"-"}),e.jsx(P,{onClick:()=>{D(1),C(0),I(0)},size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white w-10 h-8 p-0 text-xs font-medium",disabled:S===1&&T===0&&E===0,title:"Reset View",children:"Reset"})]}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:e.jsx(P,{onClick:B,size:"lg",className:"bg-white text-black hover:bg-gray-100",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hh,{className:"mr-2 h-4 w-4"}),"Capture & Detect Size"]})})})]})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed rounded-md p-8 flex flex-col items-center justify-center cursor-pointer hover:bg-muted/50 transition-colors min-h-[300px]",onClick:()=>{var Y;return(Y=Z.current)==null?void 0:Y.click()},children:[e.jsx("input",{type:"file",ref:Z,className:"hidden",accept:"image/*",onChange:M,disabled:h}),e.jsx("div",{className:"text-center",children:h?e.jsx(Ye,{className:"h-12 w-12 animate-spin text-muted-foreground mx-auto"}):e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Upload Artwork Image"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Click to upload JPG, PNG or GIF with reference marker"})]})})]})}),y&&e.jsx("div",{className:"mt-6 space-y-4 w-full",children:e.jsxs("div",{className:"border rounded-md p-1 sm:p-2 bg-white w-full max-w-none",children:[e.jsx("h4",{className:"text-sm font-medium mb-2 text-center",children:"Frame Preview"}),e.jsx("div",{className:"w-full flex justify-center overflow-hidden",children:e.jsx("div",{className:"w-full max-w-full",children:e.jsx(sw,{frames:n,mats:a,artworkWidth:f.width,artworkHeight:f.height,artworkImage:y,useMultipleFrames:i,useMultipleMats:o,onFrameImageCaptured:l})})})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Detected Dimensions"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>k(!b),children:b?"Hide Manual Entry":"Edit Manually"})]}),b?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{htmlFor:"width",children:"Width (inches)"}),e.jsx(q,{id:"width",type:"number",step:"0.01",min:"0.1",value:f.width,onChange:Y=>re("width",Y.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{htmlFor:"height",children:"Height (inches)"}),e.jsx(q,{id:"height",type:"number",step:"0.01",min:"0.1",value:f.height,onChange:Y=>re("height",Y.target.value)})]})]}),e.jsx(P,{onClick:Ce,size:"sm",children:"Apply Dimensions"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-muted p-3 rounded-md",children:[e.jsx(nj,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("span",{className:"font-medium",children:[f.width,'"  ',f.height,'"']}),n.length>0&&a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i?`${n.length} frames`:"Single frame"," |",o?`${a.length} mats`:"Single mat"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsx("div",{className:"bg-muted p-3 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Reference Marker"}),e.jsxs(qD,{children:[e.jsx(zD,{asChild:!0,children:e.jsxs(P,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full",children:[e.jsx("span",{className:"sr-only",children:"Help"}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e.jsx("path",{d:"M12 17h.01"})]})]})}),e.jsx(tw,{className:"w-80 text-sm",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Instructions for Accurate Measurement"}),e.jsx("p",{className:"text-muted-foreground",children:'Download and print this marker at exactly 1"  1" size. Place it next to your artwork on the same plane before taking a photo.'})]})})]})]}),e.jsx(P,{onClick:oe,variant:"outline",size:"sm",children:"Download Marker"})]})}),e.jsxs("div",{className:"bg-muted p-2 rounded-md text-xs text-muted-foreground",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2"}),'Print marker at exactly 1"  1" size.']}),e.jsxs("p",{className:"mt-1 flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-yellow-500 mr-2"}),"Place marker on same plane as artwork."]})]})]})]})]})})}),e.jsx(ht,{className:"text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pi,{className:"h-4 w-4"}),e.jsx("span",{children:'Print marker at exactly 1"  1" and place next to artwork'})]})})]})}function QD(s,t=[]){let r=[];function n(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:m,children:x,...g}=h,f=(m==null?void 0:m[s][c])||l,v=p.useMemo(()=>g,Object.values(g));return e.jsx(f.Provider,{value:v,children:x})}function u(h,m){const x=(m==null?void 0:m[s][c])||l,g=p.useContext(x);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[s])||i;return p.useMemo(()=>({[`__scope${s}`]:{...l,[s]:c}}),[l,c])}};return a.scopeName=s,[n,ZD(a,...t)]}function ZD(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var Ru="Progress",Ou=100,[YD,Y8]=QD(Ru),[XD,JD]=YD(Ru),rw=p.forwardRef((s,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=eA,...o}=s;(a||a===0)&&!Rh(a)&&console.error(tA(`${a}`,"Progress"));const l=Rh(a)?a:Ou;n!==null&&!Oh(n,l)&&console.error(sA(`${n}`,"Progress"));const c=Oh(n,l)?n:null,d=Ho(c)?i(c,l):void 0;return e.jsx(XD,{scope:r,value:c,max:l,children:e.jsx(Se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ho(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":iw(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});rw.displayName=Ru;var nw="ProgressIndicator",aw=p.forwardRef((s,t)=>{const{__scopeProgress:r,...n}=s,a=JD(nw,r);return e.jsx(Se.div,{"data-state":iw(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});aw.displayName=nw;function eA(s,t){return`${Math.round(s/t*100)}%`}function iw(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function Ho(s){return typeof s=="number"}function Rh(s){return Ho(s)&&!isNaN(s)&&s>0}function Oh(s,t){return Ho(s)&&!isNaN(s)&&s<=t&&s>=0}function tA(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ou}\`.`}function sA(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ou} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ow=rw,rA=aw;const ia=p.forwardRef(({className:s,value:t,...r},n)=>e.jsx(ow,{ref:n,className:J("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:e.jsx(rA,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ia.displayName=ow.displayName;function Al({updateInterval:s=1e4,compact:t=!1}){const[r,n]=p.useState(!1),[a,i]=p.useState("overview"),[o,l]=p.useState({memoryUsage:0,memoryLimit:512,apiResponseTime:0,databaseConnected:!1,frameRate:60,networkLatency:0,lastUpdated:new Date().toLocaleTimeString(),cpuUsage:0,activeConnections:0,diskUsage:0,bundleSize:0,errorCount:0,requestsPerMinute:0,responseTime:[],memoryHistory:[],cpuHistory:[],networkHistory:[],alerts:[],uptime:Date.now(),loadTime:0}),[c,d]=p.useState(!1);p.useRef(0);const u=p.useRef(performance.now()),h=p.useRef(Date.now()),m=p.useRef(0),x=p.useRef(0),g=p.useCallback((T,C,E,I,w)=>({id:`${T}-${Date.now()}`,type:I,message:w,timestamp:Date.now(),metric:T,value:C,threshold:E}),[]),f=p.useCallback(async()=>{if(c)return;d(!0);const T=performance.now();try{const C=performance.memory,E=C?Math.round(C.usedJSHeapSize/1024/1024):0,I=C?Math.round(C.jsHeapSizeLimit/1024/1024):512,w=performance.now(),N=w-u.current,A=N>0?Math.min(60,Math.round(1e3/N)):60;u.current=w;const F=Math.round(document.documentElement.outerHTML.length/1024),Z=Math.round(w-h.current),Q=Math.round((Date.now()-h.current)/1e3),L=performance.now();let ae=0,M=!1;try{m.current++;const z=await fetch("/api/kanban/status",{method:"GET",signal:AbortSignal.timeout(5e3)});ae=Math.round(performance.now()-L),M=z.ok,z.ok||x.current++}catch{x.current++,ae=5e3,M=!1}const re=[{endpoint:"/api/frames",timeout:2e3},{endpoint:"/api/auth/status",timeout:2e3}],Ce=await Promise.allSettled(re.map(async z=>{const ce=performance.now();try{return await fetch(z.endpoint,{method:"HEAD",signal:AbortSignal.timeout(z.timeout)}),performance.now()-ce}catch{return z.timeout}})),st=Math.round(Ce.reduce((z,ce)=>z+(ce.status==="fulfilled"?ce.value:2e3),0)/Ce.length),nt=Math.round(m.current/Q*60),B=performance.now()-T,oe=Math.min(100,Math.round(E/I*50+(B>100?25:B/4))),Y=Math.min(100,Math.round((F+E)/10));l(z=>{const ce=[...z.memoryHistory,E].slice(-20),je=[...z.cpuHistory,oe].slice(-20),he=[...z.networkHistory,st].slice(-20),be=[...z.responseTime,ae].slice(-20),Ne=[...z.alerts];E>I*.8&&Ne.push(g("memory",E,I*.8,E>I*.9?"error":"warning",`High memory usage: ${E}MB (${Math.round(E/I*100)}%)`)),ae>2e3&&Ne.push(g("api",ae,2e3,ae>5e3?"error":"warning",`Slow API response: ${ae}ms`)),st>1e3&&Ne.push(g("network",st,1e3,"warning",`High network latency: ${st}ms`)),M||Ne.push(g("database",0,1,"error","Database connection lost")),A<30&&Ne.push(g("framerate",A,30,"warning",`Low frame rate: ${A} FPS`));const Ke=Ne.slice(-10);return{...z,memoryUsage:E,memoryLimit:I,apiResponseTime:ae,databaseConnected:M,frameRate:A,networkLatency:st,lastUpdated:new Date().toLocaleTimeString(),cpuUsage:oe,activeConnections:M?1:0,diskUsage:Y,bundleSize:F,errorCount:x.current,requestsPerMinute:nt,responseTime:be,memoryHistory:ce,cpuHistory:je,networkHistory:he,alerts:Ke,uptime:Q,loadTime:Z}})}catch(C){console.error("Performance monitoring error:",C),x.current++}finally{d(!1)}},[c,g]);p.useEffect(()=>{if(!r)return;f();const T=setInterval(f,s);return()=>clearInterval(T)},[r,s,f]);const v=()=>{const T=o.memoryUsage/o.memoryLimit*100,C=k(o.memoryHistory);return T>80?{color:"destructive",label:"Critical",trend:C}:T>60?{color:"warning",label:"High",trend:C}:{color:"success",label:"Good",trend:C}},y=()=>{const T=k(o.responseTime);return o.databaseConnected?o.apiResponseTime>2e3?{color:"destructive",label:"Very Slow",trend:T}:o.apiResponseTime>1e3?{color:"warning",label:"Slow",trend:T}:{color:"success",label:"Fast",trend:T}:{color:"destructive",label:"Offline",trend:T}},j=()=>{const T=k(o.networkHistory);return o.networkLatency>1500?{color:"destructive",label:"Poor",trend:T}:o.networkLatency>800?{color:"warning",label:"Fair",trend:T}:{color:"success",label:"Good",trend:T}},b=()=>{const T=k(o.cpuHistory);return o.cpuUsage>80?{color:"destructive",label:"High",trend:T}:o.cpuUsage>60?{color:"warning",label:"Medium",trend:T}:{color:"success",label:"Good",trend:T}},k=T=>{if(T.length<3)return"stable";const C=T.slice(-3),E=C.reduce((N,A)=>N+A,0)/C.length,I=T.slice(-6,-3);if(I.length===0)return"stable";const w=I.reduce((N,A)=>N+A,0)/I.length;return E>w*1.1?"up":E<w*.9?"down":"stable"},S=T=>{const C=Math.floor(T/3600),E=Math.floor(T%3600/60),I=T%60;return C>0?`${C}h ${E}m`:E>0?`${E}m ${I}s`:`${I}s`},D=({data:T,color:C="#3b82f6"})=>{if(T.length<2)return e.jsx("div",{className:"h-8 bg-gray-100 rounded"});const E=Math.max(...T),I=Math.min(...T),w=E-I||1;return e.jsx("div",{className:"h-8 flex items-end space-x-0.5",children:T.map((N,A)=>{const F=(N-I)/w*100;return e.jsx("div",{className:"flex-1 rounded-t",style:{height:`${Math.max(F,10)}%`,backgroundColor:C,opacity:.7}},A)})})};if(t&&!r){const T=o.alerts.filter(C=>C.type==="error"||C.type==="warning").length;return e.jsx("div",{className:"fixed bottom-20 right-4 z-40",children:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"bg-white/95 backdrop-blur-sm border-gray-300 shadow-lg hover:shadow-xl transition-all duration-200 text-gray-800 relative",children:[e.jsx(ph,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-800",children:"Performance"}),T>0&&e.jsx(pe,{className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs bg-red-500 text-white",children:T})]})})}return e.jsx("div",{className:"fixed bottom-20 right-4 z-40",children:e.jsxs(V,{className:"w-96 bg-white/95 backdrop-blur-sm border-gray-300 shadow-xl max-h-[600px] overflow-hidden",children:[e.jsx(K,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ph,{className:"h-5 w-5 text-blue-600"}),e.jsx(G,{className:"text-sm text-gray-800",children:"Performance Monitor"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o.alerts.filter(T=>T.type==="error"||T.type==="warning").length>0&&e.jsx(pe,{className:"bg-red-500 text-white text-xs",children:o.alerts.filter(T=>T.type==="error"||T.type==="warning").length}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n(!r),className:"h-6 w-6 p-0",children:e.jsx(Mn,{className:"h-4 w-4"})})]})]})}),e.jsxs(H,{className:"p-0",children:[e.jsxs(Bt,{value:a,onValueChange:T=>i(T),className:"w-full",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-3 mx-4 mb-4",children:[e.jsx(ve,{value:"overview",className:"text-xs",children:"Overview"}),e.jsx(ve,{value:"detailed",className:"text-xs",children:"Detailed"}),e.jsxs(ve,{value:"alerts",className:"text-xs",children:["Alerts ",o.alerts.length>0&&`(${o.alerts.length})`]})]}),e.jsxs("div",{className:"px-4 pb-4 max-h-[500px] overflow-y-auto",children:[e.jsxs(Ee,{value:"overview",className:"mt-0 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b2,{className:"h-3 w-3 text-gray-700"}),e.jsx("span",{className:"text-xs font-medium",children:"Memory"})]}),e.jsx(pe,{variant:v().color==="success"?"default":"destructive",className:"text-xs",children:v().label})]}),e.jsx(ia,{value:o.memoryUsage/o.memoryLimit*100,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[o.memoryUsage,"MB / ",o.memoryLimit,"MB"]}),e.jsx(D,{data:o.memoryHistory,color:"#3b82f6"})]}),e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fo,{className:"h-3 w-3 text-gray-700"}),e.jsx("span",{className:"text-xs font-medium",children:"CPU"})]}),e.jsx(pe,{variant:b().color==="success"?"default":"destructive",className:"text-xs",children:b().label})]}),e.jsx(ia,{value:o.cpuUsage,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[o.cpuUsage,"%"]}),e.jsx(D,{data:o.cpuHistory,color:"#10b981"})]}),e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nl,{className:"h-3 w-3 text-gray-700"}),e.jsx("span",{className:"text-xs font-medium",children:"API"})]}),e.jsx(pe,{variant:y().color==="success"?"default":"destructive",className:"text-xs",children:y().label})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[o.apiResponseTime,"ms ",o.databaseConnected?"":""]}),e.jsx(D,{data:o.responseTime,color:"#f59e0b"})]}),e.jsxs(V,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w2,{className:"h-3 w-3 text-gray-700"}),e.jsx("span",{className:"text-xs font-medium",children:"Network"})]}),e.jsx(pe,{variant:j().color==="success"?"default":"destructive",className:"text-xs",children:j().label})]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[o.networkLatency,"ms"]}),e.jsx(D,{data:o.networkHistory,color:"#8b5cf6"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium text-gray-800",children:S(o.uptime)}),e.jsx("div",{className:"text-gray-600",children:"Uptime"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"font-medium text-gray-800",children:[o.requestsPerMinute,"/min"]}),e.jsx("div",{className:"text-gray-600",children:"Requests"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium text-gray-800",children:o.errorCount}),e.jsx("div",{className:"text-gray-600",children:"Errors"})]})]})]}),e.jsx(Ee,{value:"detailed",className:"mt-0 space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N2,{className:"h-4 w-4 text-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:"Disk Usage"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[o.diskUsage,"%"]}),e.jsx(ia,{value:o.diskUsage,className:"h-1 w-16"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(uu,{className:"h-4 w-4 text-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:"Bundle Size"})]}),e.jsxs("div",{className:"text-sm font-medium",children:[o.bundleSize,"KB"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S2,{className:"h-4 w-4 text-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:"Frame Rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[o.frameRate," FPS"]}),e.jsx(pe,{variant:o.frameRate>=45?"default":"destructive",className:"text-xs",children:o.frameRate>=45?"Smooth":"Choppy"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:"Load Time"})]}),e.jsxs("div",{className:"text-sm font-medium",children:[o.loadTime,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mu,{className:"h-4 w-4 text-gray-700"}),e.jsx("span",{className:"text-sm font-medium",children:"Connections"})]}),e.jsx("div",{className:"text-sm font-medium",children:o.activeConnections})]})]})}),e.jsx(Ee,{value:"alerts",className:"mt-0",children:o.alerts.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ks,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-sm",children:"No performance alerts"}),e.jsx("div",{className:"text-xs",children:"System running smoothly"})]}):e.jsx("div",{className:"space-y-2",children:o.alerts.slice().reverse().map(T=>e.jsx("div",{className:`p-3 rounded border-l-4 ${T.type==="error"?"bg-red-50 border-red-400":T.type==="warning"?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[T.type==="error"?e.jsx($t,{className:"h-4 w-4 text-red-600"}):T.type==="warning"?e.jsx($t,{className:"h-4 w-4 text-yellow-600"}):e.jsx(Ks,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:T.message}),e.jsx("div",{className:"text-xs text-gray-600",children:new Date(T.timestamp).toLocaleTimeString()})]})]}),e.jsx(pe,{variant:"outline",className:"text-xs",children:T.metric})]})},T.id))})})]})]}),e.jsxs("div",{className:"px-4 py-2 border-t bg-gray-50/50 flex items-center justify-between text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nt,{className:"h-3 w-3"}),e.jsxs("span",{children:["Updated: ",o.lastUpdated]})]}),c&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"animate-spin h-3 w-3 border border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{children:"Refreshing..."})]})]})]})]})})}const nA=()=>{var ah,ih;const{toast:s}=Be(),[t,r]=p.useState({name:"",email:"",phone:"",address:""}),[n,a]=p.useState(16),[i,o]=p.useState(20),[l,c]=p.useState(null),[d,u]=p.useState(""),[h,m]=p.useState("print"),[x,g]=p.useState(""),[f,v]=p.useState(.8);p.useRef(null),p.useState(!1);const[y,j]=p.useState(!1),b=p.useRef(null);p.useRef(null);const[k,S]=p.useState([]),[D,T]=p.useState(1),[C,E]=p.useState(!1),[I,w]=p.useState("all"),[N,A]=p.useState("all"),[F,Z]=p.useState("all"),[Q,L]=p.useState("all"),[ae,M]=p.useState(""),{matboards:re,crescentMatboards:Ce,loading:st,getMatboardById:nt}=SD(),[B,oe]=p.useState([]),[Y,z]=p.useState(1),[ce,je]=p.useState(!1),[he,be]=p.useState(2);p.useEffect(()=>{re&&re.length>0&&B.length===0&&(oe([{matboard:re[0],position:1,width:2,offset:0}]),be(2))},[re,B.length]);const[Ne,Ke]=p.useState("all"),[ke,gt]=p.useState(To[0]),[vt,W]=p.useState([]),ye=()=>n>40||i>60?75:n>32||i>40?35:0,[rt,ft]=p.useState(!0),[fe,kt]=p.useState(null),[rs,Kt]=p.useState(!1),[Js,ao]=p.useState(""),[Ua,Xm]=p.useState(0),[tn,Jm]=p.useState([]),[Un,eh]=p.useState(void 0),[th,LT]=p.useState(void 0);Pe.useEffect(()=>{const _=k.length>0?k[0].frame:null,ne=B.length>0?B[0].matboard:null;if(_&&ne){const et=rs?Ua:k.reduce((fr,Ls)=>fr+ad(n,i,Ls.distance,Number(Ls.frame.price)),0),Qe=B.reduce((fr,Ls)=>fr+id(n,i,Ls.width,Number(Ls.matboard.price)),0),Et=ke?od(n,i,he,Number(ke.price)):0,io=ld(n,i,he,.02),Ha=vt.reduce((fr,Ls)=>fr+Number(Ls.price),0),oh=tn.reduce((fr,Ls)=>fr+Ls.amount,0),mc=ye(),hc=(et+Qe+Et+io+25+Ha+oh+mc)*1.08,pc={id:`design-${Date.now()}`,frameName:rs?Js:_.name||"Custom Frame",matColor:ne.name||ne.id,glassType:(ke==null?void 0:ke.name)||"Standard Glass",dimensions:{width:n,height:i,unit:"in"},artworkImage:l||void 0,totalPrice:hc};eh(pc)}},[k,B,ke,vt,tn,n,i,l,rs,Js,Ua,he]);const{frames:pr,loading:$T,error:O8}=TD(),sh=Pe.useMemo(()=>pr?pr.filter(_=>{if(ae.trim()!==""){const ne=ae.trim().toLowerCase(),et=_.id.split("-")[1]||"";if(et===ne)return!0;const Qe=_.id.toLowerCase().includes(ne),Et=et.toLowerCase().includes(ne),io=_.name.toLowerCase().includes(ne),Ha=_.manufacturer.toLowerCase().includes(ne);if(!(Qe||Et||io||Ha))return!1}if(I!=="all"&&_.material!==I||N!=="all"&&_.manufacturer!==N)return!1;if(F!=="all"){const ne=parseFloat(_.width);switch(F){case"narrow":if(ne>=1)return!1;break;case"medium":if(ne<1||ne>=2)return!1;break;case"wide":if(ne<2)return!1;break}}if(Q!=="all"){const ne=parseFloat(_.price);switch(Q){case"economy":if(ne>=15)return!1;break;case"standard":if(ne<15||ne>=30)return!1;break;case"premium":if(ne<30)return!1;break}}return!0}):[],[pr,I,N,F,Q,ae]),BT=Pe.useMemo(()=>pr?Array.from(new Set(pr.map(ne=>ne.manufacturer))):[],[pr]),VT=Pe.useMemo(()=>pr?Array.from(new Set(pr.map(ne=>ne.material))):[],[pr]),UT=()=>{y?(b.current&&b.current.srcObject&&(b.current.srcObject.getTracks().forEach(et=>et.stop()),b.current.srcObject=null),j(!1)):(j(!0),HT())},HT=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720}});b.current&&(b.current.srcObject=_)}catch(_){console.error("Error accessing webcam:",_),s({title:"Webcam Error",description:"Could not access the webcam. Please check your permissions and try again.",variant:"destructive"}),j(!1)}},uc=_=>{if(console.log("Changing mat color to ID:",_),_==="none"||_==="no-mat"){const et=B.filter(Qe=>Qe.position!==Y);oe(et),Y===1&&be(0);return}const ne=nt(_);if(ne){console.log("Found mat color:",ne);const et=B.findIndex(Qe=>Qe.position===Y);if(et>=0){const Qe=[...B];Qe[et]={...Qe[et],matboard:ne},oe(Qe)}else oe([...B,{matboard:ne,position:Y,width:2,offset:0}])}else{console.log("Mat color not found in API data, trying static catalog...");const et=SE(_);if(et){console.log("Found mat color in static catalog:",et);const Qe=B.findIndex(Et=>Et.position===Y);if(Qe>=0){const Et=[...B];Et[Qe]={...Et[Qe],matboard:et},oe(Et)}else oe([...B,{matboard:et,position:Y,width:2,offset:0}])}else console.error("Mat color not found in any catalog:",_)}},qT=_=>{const ne=parseFloat(_.target.value),et=B.findIndex(Qe=>Qe.position===Y);if(et>=0){const Qe=[...B];Qe[et]={...Qe[et],width:ne},oe(Qe),Y===1&&be(ne)}},zT=_=>{const ne=TE(_);ne&&gt(ne)},rh=(_,ne)=>{ne<=0||(_==="width"?a(ne):o(ne))},WT=Ae({mutationFn:async _=>(await le("POST","/api/orders",_)).json(),onSuccess:()=>{ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/order-groups"]}),s({title:"Order Created",description:"The order has been successfully created and added to your cart."})},onError:_=>{s({title:"Failed to Create Order",description:_.message||"There was an error creating the order.",variant:"destructive"})}});Ae({mutationFn:async _=>(await le("POST","/api/wholesale-orders",{orderId:_})).json(),onSuccess:()=>{s({title:"Wholesale Order Created",description:"The wholesale order has been successfully created."})},onError:_=>{s({title:"Failed to Create Wholesale Order",description:_.message||"There was an error creating the wholesale order.",variant:"destructive"})}});const KT=Ae({mutationFn:async _=>(await le("POST","/api/customers",_)).json()}),GT=async()=>{var _;if(console.log("Create Order button clicked"),k.length===0||B.length===0||!ke){console.log("Missing required selections:",{frame:k.length>0?"Selected":"Missing",matColor:B.length>0?"Selected":"Missing",glassOption:ke?"Selected":"Missing"});let ne=[];k.length===0&&ne.push("frame"),B.length===0&&ne.push("mat color"),ke||ne.push("glass option"),s({title:"Incomplete Order",description:`Please select a ${ne.join(", ")}.`,variant:"destructive"});return}if(!t.name){console.log("Missing customer name"),s({title:"Customer Information Required",description:"Please enter customer name.",variant:"destructive"});return}if(!l){s({title:"Artwork Image Required",description:"CRITICAL: Every order must have an artwork image. Please upload or capture artwork before proceeding.",variant:"destructive"});return}console.log("Customer data:",t);try{console.log("Creating customer with data:",t);const ne=await KT.mutateAsync(t);console.log("Customer created/retrieved:",ne);const et=k.length>0?k[0].frame:null,Qe=B.length>0?B[0].matboard:null,Et=B.length>0?B[0].width:2,Ha=k.map(St=>ad(n,i,Et,Number(St.frame.price))).reduce((St,sn)=>St+sn,0),mc=B.map(St=>id(n,i,St.width,Number(St.matboard.price))).reduce((St,sn)=>St+sn,0),hc=ke?od(n,i,Et,Number(ke.price)):0,pc=ld(n,i,Et,.02),fr=25,Ls=vt.reduce((St,sn)=>St+Number(sn.price),0),lh=Ha+mc+hc+pc+fr+Ls,e2=lh*.08,F8=lh+e2,ch=tn.reduce((St,sn)=>St+sn.amount,0),t2=tn.length>0?tn.map(St=>`${St.description}: $${St.amount.toFixed(2)}`).join("; "):"",dh={customerId:ne.id,frameId:rs?"manual":et?et.id:"",matColorId:Qe?Qe.id:"",glassOptionId:ke.id,artworkWidth:n.toString(),artworkHeight:i.toString(),matWidth:Et.toString(),artworkDescription:d,artworkType:h,artworkLocation:x,subtotal:"0",tax:"0",total:"0",artworkImage:l,useManualFrame:rs,manualFrameName:rs?Js:void 0,manualFrameCost:rs?Ua.toString():void 0,miscChargeDescription:t2||void 0,miscChargeAmount:ch>0?ch.toString():void 0};console.log("Creating order with data:",dh);const Hn=await WT.mutateAsync(dh);if(console.log("Order created successfully:",Hn),s({title:"Order Created Successfully! ",description:`Order #${((_=Hn.order)==null?void 0:_.id)||Hn.orderId} has been created for ${customerName}`,duration:5e3}),fe)try{const St=await fetch("/api/frame-designs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:Hn.id,imageData:fe})});St.ok?console.log("Frame design image saved successfully"):console.error("Failed to save frame design image:",await St.text())}catch(St){console.error("Error saving frame design image:",St)}vt.length>0&&(console.log("Adding special services:",vt),await Promise.all(vt.map(St=>le("POST","/api/order-special-services",{orderId:Hn.id,specialServiceId:St.id})))),s({title:"Order Created Successfully",description:`Order #${Hn.id} has been created.`}),YT()}catch(ne){console.error("Error creating order:",ne),s({title:"Error Creating Order",description:"There was an error creating the order. Please try again.",variant:"destructive"})}},QT=()=>{s({title:"Quote Saved",description:"The quote has been saved for future reference."})},ZT=async()=>{if(k.length===0){s({title:"Frame Required",description:"Please select at least one frame to create a wholesale order.",variant:"destructive"});return}try{if(!t.name){s({title:"Customer Information Required",description:"Please enter customer name and create the order first before adding to wholesale order.",variant:"destructive"});return}for(const _ of k){const ne={materialType:"frame",materialId:_.frame.id,materialName:_.frame.name,quantity:Math.ceil(2*(n+i)/12+1).toString(),status:"pending",notes:`Wholesale order for ${t.name} (${_.position===1?"Inner":"Outer"} Frame)`,vendor:_.frame.manufacturer||"Larson Juhl",priority:"normal"};await le("POST","/api/material-orders",ne)}s({title:"Frame Orders Created",description:`Wholesale orders for ${k.length} frame(s) have been created.`});for(const _ of B){const ne={materialType:"mat",materialId:_.matboard.id,materialName:_.matboard.name,quantity:"1",status:"pending",notes:`Mat for ${t.name} (${_.position===1?"Top":_.position===2?"Middle":"Bottom"} Mat)`,vendor:_.matboard.manufacturer||"Crescent",priority:"normal"};await le("POST","/api/material-orders",ne)}if(ke){const _={materialType:"glass",materialId:ke.id,materialName:ke.name,quantity:"1",status:"pending",notes:`Glass for ${t.name}`,vendor:"TruVue",priority:"normal"};await le("POST","/api/material-orders",_)}}catch(_){console.error("Error creating wholesale order:",_),s({title:"Error Creating Wholesale Order",description:"There was an error creating the wholesale order. Please try again.",variant:"destructive"})}},YT=()=>{r({name:"",email:"",phone:"",address:""}),a(16),o(20),c(null),u(""),m("print"),v(.8),S([]),T(1),oe([]),z(1),w("all"),A("all"),Z("all"),L("all"),Ke("all"),gt(To[0]),W([]),be(2),E(!1),je(!1),Kt(!1),ao(""),Xm(0),Jm([]),M(""),y&&UT()},nh=(_,ne,et="chop")=>{const Qe=k.findIndex(Et=>Et.position===ne);if(Qe!==-1){const Et=[...k];Et[Qe]={...Et[Qe],frame:_,pricingMethod:et},S(Et)}else S([...k,{frame:_,position:ne,distance:0,pricingMethod:et}])},XT=_=>{S(k.filter(ne=>ne.frame.id!==_))},JT=(_,ne)=>{const et=k.map(Qe=>Qe.frame.id===_?{...Qe,frame:{...Qe.frame,...ne}}:Qe);S(et)};return e.jsxs("div",{className:"w-full max-w-none",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-4 lg:p-6",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold mb-3 lg:mb-4 header-underline",children:"Order Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Customer Name"}),e.jsx("input",{type:"text",className:"w-full p-3 text-base text-gray-800 border border-gray-300 rounded-md bg-white touch-manipulation",placeholder:"Enter customer name",value:t.name,onChange:_=>r({...t,name:_.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Order Date"}),e.jsx("input",{type:"date",className:"w-full p-3 text-base text-gray-800 border border-gray-300 rounded-md bg-white touch-manipulation",value:new Date().toISOString().split("T")[0],readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",className:"w-full p-3 text-base text-gray-800 border border-gray-300 rounded-md bg-white touch-manipulation",placeholder:"(555) 123-4567",value:t.phone||"",onChange:_=>r({...t,phone:_.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full p-3 text-base text-gray-800 border border-gray-300 rounded-md bg-white touch-manipulation",placeholder:"customer@example.com",value:t.email||"",onChange:_=>r({...t,email:_.target.value})})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-4 lg:p-6",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-semibold mb-3 lg:mb-4 header-underline",children:"Artwork Details"}),n>32||i>40?e.jsx("div",{className:`mb-4 p-3 rounded-lg border-l-4 ${n>40||i>60?"bg-red-50 border-red-400 text-red-800":"bg-yellow-50 border-yellow-400 text-yellow-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold mr-2",children:n>40||i>60?" Large Size Alert:":" Size Notice:"}),e.jsx("span",{children:n>40||i>60?'Artwork over 40"60" requires special handling and extended processing time.':'Artwork over 32"40" may have additional costs and longer processing time.'})]}),e.jsxs("div",{className:"font-bold text-lg",children:["+$",ye()]})]})}):null,e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Width (inches)"}),e.jsx("input",{type:"number",className:"w-full p-3 text-base border border-gray-300 rounded-md bg-white text-gray-800 touch-manipulation",step:"0.125",min:"0.125",value:n,onChange:_=>rh("width",parseFloat(_.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Height (inches)"}),e.jsx("input",{type:"number",className:"w-full p-3 text-base border border-gray-300 rounded-md bg-white text-gray-800 touch-manipulation",step:"0.125",min:"0.125",value:i,onChange:_=>rh("height",parseFloat(_.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Art Type"}),e.jsxs("select",{className:"w-full p-3 text-base text-gray-800 border border-gray-300 rounded-md bg-white touch-manipulation",value:h,onChange:_=>m(_.target.value),children:[e.jsx("option",{value:"print",children:"Print"}),e.jsx("option",{value:"original",children:"Original Artwork"}),e.jsx("option",{value:"photo",children:"Photograph"}),e.jsx("option",{value:"document",children:"Certificate/Document"}),e.jsx("option",{value:"poster",children:"Poster"}),e.jsx("option",{value:"memorabilia",children:"Memorabilia"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Description"}),e.jsx("input",{type:"text",className:"w-full p-3 text-base border border-gray-300 rounded-md bg-white text-gray-800 touch-manipulation",placeholder:"Enter artwork description",value:d,onChange:_=>u(_.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:"Physical Storage Location"}),e.jsx("input",{type:"text",className:"w-full p-3 text-base border border-gray-300 rounded-md bg-white text-gray-800 touch-manipulation",placeholder:"Enter physical storage location at shop",value:x,onChange:_=>g(_.target.value)})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold header-underline",children:"Frame Selection"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Search Frame by Item # or Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full p-2 pl-8 border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg",placeholder:"Enter frame item # (e.g. '4512') or name...",value:ae,onChange:_=>M(_.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 absolute left-2 top-3 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ae&&e.jsx("button",{className:"absolute right-2 top-2.5 text-gray-400 hover:text-gray-600",onClick:()=>M(""),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(vD,{onSelectFrame:(_,ne)=>{nh(_,D,ne||"length")},position:D})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Material"}),e.jsx("select",{className:"w-full p-3 text-base border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg touch-manipulation",value:I,onChange:_=>w(_.target.value),children:VT.map(_=>e.jsx("option",{value:_,children:_==="all"?"All Materials":_.charAt(0).toUpperCase()+_.slice(1)},_))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Manufacturer"}),e.jsx("select",{className:"w-full p-3 text-base border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg touch-manipulation",value:N,onChange:_=>A(_.target.value),children:BT.map(_=>e.jsx("option",{value:_,children:_==="all"?"All Manufacturers":_},_))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Width Range"}),e.jsxs("select",{className:"w-full p-3 text-base border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg touch-manipulation",value:F,onChange:_=>Z(_.target.value),children:[e.jsx("option",{value:"all",children:"All Widths"}),e.jsx("option",{value:"narrow",children:"Narrow (0-1.5 in)"}),e.jsx("option",{value:"medium",children:"Medium (1.5-2.5 in)"}),e.jsx("option",{value:"wide",children:"Wide (2.5+ in)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Price Range"}),e.jsxs("select",{className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg dark:bg-dark-bg",value:Q,onChange:_=>L(_.target.value),children:[e.jsx("option",{value:"all",children:"All Prices"}),e.jsx("option",{value:"economy",children:"Economy ($5-9/ft)"}),e.jsx("option",{value:"standard",children:"Standard ($10-14/ft)"}),e.jsx("option",{value:"premium",children:"Premium ($15+/ft)"})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-md ${D===1?"bg-primary text-white":"bg-gray-200 dark:bg-dark-cardBg"}`,onClick:()=>T(1),children:"Inner Frame"}),C&&e.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-md ${D===2?"bg-primary text-white":"bg-gray-200 dark:bg-dark-cardBg"}`,onClick:()=>T(2),children:"Outer Frame"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"useMultipleFrames",checked:C,onChange:()=>E(!C),className:"mr-2"}),e.jsx("label",{htmlFor:"useMultipleFrames",className:"text-sm",children:"Use Multiple Frames"})]})]})}),e.jsx("div",{className:"h-64 overflow-y-auto p-2 border border-light-border dark:border-dark-border rounded-lg mb-4",children:$T?e.jsxs("div",{className:"flex justify-center items-center h-full",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading frames..."})]}):sh.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx("p",{children:"No frames match your filter criteria."}),e.jsx("button",{className:"mt-2 text-primary hover:underline",onClick:()=>{w("all"),A("all"),Z("all"),L("all")},children:"Reset filters"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:sh.map(_=>e.jsxs("div",{className:`cursor-pointer hover:scale-105 transform transition-transform duration-200 relative rounded overflow-hidden frame-option ${k.some(ne=>ne.frame.id===_.id)?"border-2 border-primary":""}`,onClick:()=>{nh(_,D,"length")},children:[e.jsx("div",{className:"w-full h-24 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center",style:{backgroundColor:_.color||"#8B4513",backgroundImage:"repeating-linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.1) 2px, transparent 2px, transparent 8px)"},children:e.jsxs("span",{className:"text-white text-xs font-mono tracking-tight opacity-70",children:[_.manufacturer.split("-")[0]," #",_.id.split("-")[1]]})}),e.jsxs("div",{className:"bg-black/70 text-white text-xs p-1 absolute bottom-0 left-0 right-0",children:[e.jsx("div",{className:"font-medium truncate",children:_.name}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:_.material}),e.jsxs("span",{children:["$",_.price,"/ft"]})]})]}),k.some(ne=>ne.frame.id===_.id)&&e.jsx("div",{className:"absolute top-2 right-2 bg-primary text-white rounded-full w-5 h-5 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})]},_.id))})}),e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Mat Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary",children:"Mat Color"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"useMultipleMats",checked:ce,onChange:()=>je(!ce),className:"mr-2"}),e.jsx("label",{htmlFor:"useMultipleMats",className:"text-sm",children:"Use Multiple Mats"})]})]}),e.jsxs("div",{className:"flex space-x-2 mb-3",children:[e.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-md ${Y===1?"bg-primary text-white":"bg-gray-200 dark:bg-dark-cardBg"}`,onClick:()=>z(1),children:"Top Mat"}),ce&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-md ${Y===2?"bg-primary text-white":"bg-gray-200 dark:bg-dark-cardBg"}`,onClick:()=>z(2),children:"Middle Mat"}),e.jsx("button",{type:"button",className:`px-3 py-1 text-sm rounded-md ${Y===3?"bg-primary text-white":"bg-gray-200 dark:bg-dark-cardBg"}`,onClick:()=>z(3),children:"Bottom Mat"})]})]}),e.jsxs("div",{className:"flex mb-2 border-b border-light-border dark:border-dark-border",children:[e.jsx("button",{className:`px-3 py-1 text-sm ${Ne==="all"?"font-medium border-b-2 border-primary":""}`,onClick:()=>Ke("all"),children:"All Matboards"}),e.jsx("button",{className:`px-3 py-1 text-sm ${Ne==="Crescent"?"font-medium border-b-2 border-primary":""}`,onClick:()=>Ke("Crescent"),children:"By Category"})]}),Ne==="Crescent"&&e.jsx("div",{className:"mb-2 max-h-40 overflow-y-auto pr-2",children:st?e.jsxs("div",{className:"flex justify-center items-center py-6",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading matboards..."})]}):e.jsx(e.Fragment,{children:kE().map(_=>e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"text-xs text-light-textSecondary dark:text-dark-textSecondary font-medium mb-1",children:_}),e.jsx("div",{className:"grid grid-cols-5 gap-1",children:CE(_).map(ne=>e.jsx("div",{className:`mat-color-option ${B.some(et=>et.matboard.id===ne.id)?"border-2 border-primary":"border border-gray-400"} rounded-full h-6 w-6 cursor-pointer hover:scale-110 transition-transform overflow-hidden`,onClick:()=>uc(ne.id),title:`${ne.name} (${ne.code})`,children:e.jsx("div",{className:"w-full h-full",style:{backgroundColor:ne.color||"#FFFFFF",border:"2px solid transparent"}})},ne.id))})]},_))})}),Ne==="all"&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:st?e.jsxs("div",{className:"flex justify-center items-center py-6 col-span-4",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading matboards..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mat-color-option ${B.length===0?"border-2 border-primary":"border border-gray-400"} rounded-md h-8 w-8 cursor-pointer hover:scale-110 transition-transform overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center`,onClick:()=>uc("none"),title:"No Mat",children:e.jsx("span",{className:"text-xs text-gray-500",children:""})}),(Ne==="all"?re:Ce).map(_=>e.jsx("div",{className:`mat-color-option ${B.some(ne=>ne.matboard.id===_.id)?"border-2 border-primary":"border border-gray-400"} rounded-full h-8 w-8 cursor-pointer hover:scale-110 transition-transform overflow-hidden`,onClick:()=>uc(_.id),title:_.name,children:e.jsx("div",{className:"w-full h-full",style:{backgroundColor:_.color||"#FFFFFF",border:"2px solid transparent"}})},_.id))]})}),B.length>0&&e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Selected Mats"}),B.map((_,ne)=>e.jsxs("div",{className:ne>0?"mt-3 pt-3 border-t border-light-border dark:border-dark-border":"",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("h4",{className:"text-xs font-medium",children:[_.position===1?"Top":_.position===2?"Middle":"Bottom"," Mat",ce?` (Position ${_.position})`:""]}),e.jsx("button",{className:"text-red-500 hover:text-red-700 text-xs font-medium",onClick:()=>{const et=B.filter(Qe=>Qe.position!==_.position);oe(et),_.position===1&&be(0)},children:"Remove"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md inline-block border border-gray-300 shadow-sm",style:{backgroundColor:_.matboard.color||"#FFFFFF"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-sm",children:[_.matboard.name,_.matboard.code&&e.jsxs("span",{className:"ml-1 text-light-textSecondary dark:text-dark-textSecondary text-xs",children:["(",_.matboard.code,")"]})]}),_.matboard.manufacturer&&_.matboard.manufacturer!=="Basic"&&e.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary text-xs",children:_.matboard.manufacturer}),_.matboard.category&&e.jsx("p",{className:"text-light-textSecondary dark:text-dark-textSecondary text-xs",children:_.matboard.category}),e.jsxs("p",{className:"text-xs mt-1",children:["Width: ",_.width,'"']})]})]})]},_.matboard.id+"-"+_.position))]}),B.length===0&&e.jsxs("div",{className:"mt-4 p-3 border border-dashed border-gray-300 rounded-md text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"No mats selected"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click on a mat color above to add matting"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-light-textSecondary dark:text-dark-textSecondary mb-1",children:"Mat Width (inches)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"range",min:"0",max:"6",step:"0.25",value:((ah=B.find(_=>_.position===Y))==null?void 0:ah.width)||2,onChange:qT,className:"w-full h-2 bg-gray-200 dark:bg-dark-border rounded-lg appearance-none cursor-pointer"}),e.jsxs("span",{className:"ml-2 min-w-[40px] text-center",children:[((ih=B.find(_=>_.position===Y))==null?void 0:ih.width)||2,'"']})]}),ce&&e.jsxs("div",{className:"mt-2 text-xs text-light-textSecondary dark:text-dark-textSecondary",children:["Adjusting width for ",Y===1?"Top":Y===2?"Middle":"Bottom"," Mat (Position ",Y,")"]})]})]}),e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Glass Options"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4 mb-6",children:To.map(_=>e.jsxs("div",{className:`border ${ke.id===_.id?"border-primary":"border-light-border dark:border-dark-border"} rounded-lg p-3 cursor-pointer hover:border-primary transition-colors bg-white dark:bg-dark-bg`,onClick:()=>zT(_.id),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:_.name}),e.jsx("p",{className:"text-sm text-light-textSecondary dark:text-dark-textSecondary",children:_.description})]}),e.jsx("div",{className:`flex h-5 w-5 ${ke.id===_.id?"border border-primary":"border border-gray-300 dark:border-dark-border"} rounded-full items-center justify-center`,children:ke.id===_.id&&e.jsx("div",{className:"h-3 w-3 bg-primary rounded-full"})})]}),e.jsxs("div",{className:"mt-2 text-sm text-right",children:["$",parseFloat(String(_.price))*100,"/sq ft"]})]},_.id))})]}),e.jsx(wD,{onFrameAdd:_=>{const ne={frame:{id:`manual-${Date.now()}`,name:_.name,manufacturer:_.manufacturer,material:_.material,width:_.width.toString(),depth:_.depth.toString(),price:_.price.toString(),catalogImage:"",edgeTexture:null,corner:null,color:_.color},distance:0,position:k.length+1,pricingMethod:"chop"};S([...k,ne])},useManualFrame:rs,onToggleManualFrame:Kt,frameName:Js,onFrameNameChange:ao,frameCost:Ua,onFrameCostChange:Xm,selectedFrames:k,onFrameRemove:XT,onFrameEdit:JT}),e.jsx(IE,{selectedServices:vt,onChange:W}),e.jsx(ND,{charges:tn,onChange:Jm})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-4 lg:space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-4 lg:p-6",children:e.jsx(GD,{defaultWidth:n,defaultHeight:i,frames:k,mats:B,useMultipleFrames:C,useMultipleMats:ce,onDimensionsDetected:(_,ne)=>{a(_.width),o(_.height),v(_.width/_.height),c(ne),console.log("Dimensions detected:",_),s({title:"Artwork Dimensions Detected",description:`Width: ${_.width}", Height: ${_.height}"`})},onFrameImageCaptured:kt})}),e.jsx("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-4 lg:p-6",children:e.jsx(AD,{primaryDesign:Un,comparisonDesign:th,onDesignSelect:_=>{_.id===(Un==null?void 0:Un.id)?s({title:"Design Selected",description:"Using current frame design configuration"}):(eh(_),s({title:"Design Updated",description:"Applied comparison design to current order"}))},onCompareToggle:_=>{_&&!th&&Un&&(LT(Un),s({title:"Comparison Mode",description:"Current design saved for comparison"}))}})}),k.length>0&&e.jsx("div",{className:"bg-white dark:bg-dark-cardBg rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Selected Frame Details"}),k.map((_,ne)=>e.jsxs("div",{className:ne>0?"mt-4 pt-4 border-t border-light-border dark:border-dark-border":"",children:[e.jsxs("h4",{className:"text-md font-medium mb-2",children:[_.position===1?"Inner Frame":"Outer Frame",C?` (Position ${_.position})`:""]}),e.jsx("table",{className:"w-full text-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Name:"}),e.jsx("td",{className:"py-1 font-medium",children:_.frame.name})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Material:"}),e.jsx("td",{className:"py-1",children:_.frame.material})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Width:"}),e.jsxs("td",{className:"py-1",children:[_.frame.width," inches"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Depth:"}),e.jsxs("td",{className:"py-1",children:[_.frame.depth," inches"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Wholesale Price:"}),e.jsxs("td",{className:"py-1",children:["$",_.frame.price," per foot"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-1 text-light-textSecondary dark:text-dark-textSecondary",children:"Pricing Method:"}),e.jsx("td",{className:"py-1",children:_.pricingMethod})]})]})})]},_.frame.id+"-"+_.position))]})}),e.jsx(lD,{frames:k,mats:B,glassOption:ke,artworkWidth:n,artworkHeight:i,artworkLocation:x,primaryMatWidth:he,specialServices:vt,onCreateOrder:GT,onSaveQuote:QT,onCreateWholesaleOrder:ZT,useMultipleMats:ce,useMultipleFrames:C,addToWholesaleOrder:rt,setAddToWholesaleOrder:ft,orderId:1,sizeSurcharge:ye(),useManualFrame:rs,manualFrameName:Js,manualFrameCost:Ua,miscCharges:tn})]})]}),e.jsx(Al,{compact:!0,updateInterval:3e3})]})},gs=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:J("w-full caption-bottom text-sm",s),...t})}));gs.displayName="Table";const vs=p.forwardRef(({className:s,...t},r)=>e.jsx("thead",{ref:r,className:J("[&_tr]:border-b",s),...t}));vs.displayName="TableHeader";const ys=p.forwardRef(({className:s,...t},r)=>e.jsx("tbody",{ref:r,className:J("[&_tr:last-child]:border-0",s),...t}));ys.displayName="TableBody";const aA=p.forwardRef(({className:s,...t},r)=>e.jsx("tfoot",{ref:r,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));aA.displayName="TableFooter";const tt=p.forwardRef(({className:s,...t},r)=>e.jsx("tr",{ref:r,className:J("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));tt.displayName="TableRow";const de=p.forwardRef(({className:s,...t},r)=>e.jsx("th",{ref:r,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));de.displayName="TableHead";const ie=p.forwardRef(({className:s,...t},r)=>e.jsx("td",{ref:r,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));ie.displayName="TableCell";const iA=p.forwardRef(({className:s,...t},r)=>e.jsx("caption",{ref:r,className:J("mt-4 text-sm text-muted-foreground",s),...t}));iA.displayName="TableCaption";const Yt=lu,yi=cu,oA=ou,lA=Pa,lw=p.forwardRef(({className:s,...t},r)=>e.jsx(Ui,{ref:r,className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));lw.displayName=Ui.displayName;const Wt=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(oA,{children:[e.jsx(lw,{}),e.jsxs(Hi,{ref:n,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(Pa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Mn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wt.displayName=Hi.displayName;const Xt=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Xt.displayName="DialogHeader";const En=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});En.displayName="DialogFooter";const Jt=p.forwardRef(({className:s,...t},r)=>e.jsx(qi,{ref:r,className:J("text-lg font-semibold leading-none tracking-tight",s),...t}));Jt.displayName=qi.displayName;const bs=p.forwardRef(({className:s,...t},r)=>e.jsx(zi,{ref:r,className:J("text-sm text-muted-foreground",s),...t}));bs.displayName=zi.displayName;function ji(s,[t,r]){return Math.min(r,Math.max(t,s))}var cA=[" ","Enter","ArrowUp","ArrowDown"],dA=[" ","Enter"],Gi="Select",[Il,_l,uA]=Vi(Gi),[_a,X8]=fs(Gi,[uA,Ta]),Rl=Ta(),[mA,Yr]=_a(Gi),[hA,pA]=_a(Gi),cw=s=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:m,required:x,form:g}=s,f=Rl(t),[v,y]=p.useState(null),[j,b]=p.useState(null),[k,S]=p.useState(!1),D=On(d),[T=!1,C]=ms({prop:n,defaultProp:a,onChange:i}),[E,I]=ms({prop:o,defaultProp:l,onChange:c}),w=p.useRef(null),N=v?g||!!v.closest("form"):!0,[A,F]=p.useState(new Set),Z=Array.from(A).map(Q=>Q.props.value).join(";");return e.jsx(iu,{...f,children:e.jsxs(mA,{required:x,scope:t,trigger:v,onTriggerChange:y,valueNode:j,onValueNodeChange:b,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:mr(),value:E,onValueChange:I,open:T,onOpenChange:C,dir:D,triggerPointerDownPosRef:w,disabled:m,children:[e.jsx(Il.Provider,{scope:t,children:e.jsx(hA,{scope:s.__scopeSelect,onNativeOptionAdd:p.useCallback(Q=>{F(L=>new Set(L).add(Q))},[]),onNativeOptionRemove:p.useCallback(Q=>{F(L=>{const ae=new Set(L);return ae.delete(Q),ae})},[]),children:r})}),N?e.jsxs(Rw,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:h,value:E,onChange:Q=>I(Q.target.value),disabled:m,form:g,children:[E===void 0?e.jsx("option",{value:""}):null,Array.from(A)]},Z):null]})})};cw.displayName=Gi;var dw="SelectTrigger",uw=p.forwardRef((s,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=s,i=Rl(r),o=Yr(dw,r),l=o.disabled||n,c=We(t,o.onTriggerChange),d=_l(r),u=p.useRef("touch"),[h,m,x]=Ow(f=>{const v=d().filter(b=>!b.disabled),y=v.find(b=>b.value===o.value),j=Mw(v,f,y);j!==void 0&&o.onValueChange(j.value)}),g=f=>{l||(o.onOpenChange(!0),x()),f&&(o.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(bl,{asChild:!0,...i,children:e.jsx(Se.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_w(o.value)?"":void 0,...a,ref:c,onClick:ge(a.onClick,f=>{f.currentTarget.focus(),u.current!=="mouse"&&g(f)}),onPointerDown:ge(a.onPointerDown,f=>{u.current=f.pointerType;const v=f.target;v.hasPointerCapture(f.pointerId)&&v.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(g(f),f.preventDefault())}),onKeyDown:ge(a.onKeyDown,f=>{const v=h.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&m(f.key),!(v&&f.key===" ")&&cA.includes(f.key)&&(g(),f.preventDefault())})})})});uw.displayName=dw;var mw="SelectValue",hw=p.forwardRef((s,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=s,c=Yr(mw,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=We(t,c.onValueNodeChange);return Ss(()=>{d(u)},[d,u]),e.jsx(Se.span,{...l,ref:h,style:{pointerEvents:"none"},children:_w(c.value)?e.jsx(e.Fragment,{children:o}):i})});hw.displayName=mw;var fA="SelectIcon",pw=p.forwardRef((s,t)=>{const{__scopeSelect:r,children:n,...a}=s;return e.jsx(Se.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});pw.displayName=fA;var xA="SelectPortal",fw=s=>e.jsx(Uy,{asChild:!0,...s});fw.displayName=xA;var Dn="SelectContent",xw=p.forwardRef((s,t)=>{const r=Yr(Dn,s.__scopeSelect),[n,a]=p.useState();if(Ss(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?du.createPortal(e.jsx(gw,{scope:s.__scopeSelect,children:e.jsx(Il.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),i):null}return e.jsx(vw,{...s,ref:t})});xw.displayName=Dn;var $s=10,[gw,Xr]=_a(Dn),gA="SelectContentImpl",vw=p.forwardRef((s,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:g,hideWhenDetached:f,avoidCollisions:v,...y}=s,j=Yr(Dn,r),[b,k]=p.useState(null),[S,D]=p.useState(null),T=We(t,z=>k(z)),[C,E]=p.useState(null),[I,w]=p.useState(null),N=_l(r),[A,F]=p.useState(!1),Z=p.useRef(!1);p.useEffect(()=>{if(b)return Ly(b)},[b]),By();const Q=p.useCallback(z=>{const[ce,...je]=N().map(Ne=>Ne.ref.current),[he]=je.slice(-1),be=document.activeElement;for(const Ne of z)if(Ne===be||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===ce&&S&&(S.scrollTop=0),Ne===he&&S&&(S.scrollTop=S.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==be))return},[N,S]),L=p.useCallback(()=>Q([C,b]),[Q,C,b]);p.useEffect(()=>{A&&L()},[A,L]);const{onOpenChange:ae,triggerPointerDownPosRef:M}=j;p.useEffect(()=>{if(b){let z={x:0,y:0};const ce=he=>{var be,Ne;z={x:Math.abs(Math.round(he.pageX)-(((be=M.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(he.pageY)-(((Ne=M.current)==null?void 0:Ne.y)??0))}},je=he=>{z.x<=10&&z.y<=10?he.preventDefault():b.contains(he.target)||ae(!1),document.removeEventListener("pointermove",ce),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",je,{capture:!0})}}},[b,ae,M]),p.useEffect(()=>{const z=()=>ae(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[ae]);const[re,Ce]=Ow(z=>{const ce=N().filter(be=>!be.disabled),je=ce.find(be=>be.ref.current===document.activeElement),he=Mw(ce,z,je);he&&setTimeout(()=>he.ref.current.focus())}),st=p.useCallback((z,ce,je)=>{const he=!Z.current&&!je;(j.value!==void 0&&j.value===ce||he)&&(E(z),he&&(Z.current=!0))},[j.value]),nt=p.useCallback(()=>b==null?void 0:b.focus(),[b]),B=p.useCallback((z,ce,je)=>{const he=!Z.current&&!je;(j.value!==void 0&&j.value===ce||he)&&w(z)},[j.value]),oe=n==="popper"?cd:yw,Y=oe===cd?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:g,hideWhenDetached:f,avoidCollisions:v}:{};return e.jsx(gw,{scope:r,content:b,viewport:S,onViewportChange:D,itemRefCallback:st,selectedItem:C,onItemLeave:nt,itemTextRefCallback:B,focusSelectedItem:L,selectedItemText:I,position:n,isPositioned:A,searchRef:re,children:e.jsx($y,{as:gl,allowPinchZoom:!0,children:e.jsx(Vy,{asChild:!0,trapped:j.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:ge(a,z=>{var ce;(ce=j.trigger)==null||ce.focus({preventScroll:!0}),z.preventDefault()}),children:e.jsx(vl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(oe,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:z=>z.preventDefault(),...y,...Y,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ge(y.onKeyDown,z=>{const ce=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!ce&&z.key.length===1&&Ce(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let he=N().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(z.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const be=z.target,Ne=he.indexOf(be);he=he.slice(Ne+1)}setTimeout(()=>Q(he)),z.preventDefault()}})})})})})})});vw.displayName=gA;var vA="SelectItemAlignedPosition",yw=p.forwardRef((s,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=s,i=Yr(Dn,r),o=Xr(Dn,r),[l,c]=p.useState(null),[d,u]=p.useState(null),h=We(t,T=>u(T)),m=_l(r),x=p.useRef(!1),g=p.useRef(!0),{viewport:f,selectedItem:v,selectedItemText:y,focusSelectedItem:j}=o,b=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&f&&v&&y){const T=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(i.dir!=="rtl"){const be=I.left-C.left,Ne=E.left-be,Ke=T.left-Ne,ke=T.width+Ke,gt=Math.max(ke,C.width),vt=window.innerWidth-$s,W=ji(Ne,[$s,Math.max($s,vt-gt)]);l.style.minWidth=ke+"px",l.style.left=W+"px"}else{const be=C.right-I.right,Ne=window.innerWidth-E.right-be,Ke=window.innerWidth-T.right-Ne,ke=T.width+Ke,gt=Math.max(ke,C.width),vt=window.innerWidth-$s,W=ji(Ne,[$s,Math.max($s,vt-gt)]);l.style.minWidth=ke+"px",l.style.right=W+"px"}const w=m(),N=window.innerHeight-$s*2,A=f.scrollHeight,F=window.getComputedStyle(d),Z=parseInt(F.borderTopWidth,10),Q=parseInt(F.paddingTop,10),L=parseInt(F.borderBottomWidth,10),ae=parseInt(F.paddingBottom,10),M=Z+Q+A+ae+L,re=Math.min(v.offsetHeight*5,M),Ce=window.getComputedStyle(f),st=parseInt(Ce.paddingTop,10),nt=parseInt(Ce.paddingBottom,10),B=T.top+T.height/2-$s,oe=N-B,Y=v.offsetHeight/2,z=v.offsetTop+Y,ce=Z+Q+z,je=M-ce;if(ce<=B){const be=w.length>0&&v===w[w.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-f.offsetTop-f.offsetHeight,Ke=Math.max(oe,Y+(be?nt:0)+Ne+L),ke=ce+Ke;l.style.height=ke+"px"}else{const be=w.length>0&&v===w[0].ref.current;l.style.top="0px";const Ke=Math.max(B,Z+f.offsetTop+(be?st:0)+Y)+je;l.style.height=Ke+"px",f.scrollTop=ce-B+f.offsetTop}l.style.margin=`${$s}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=N+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[m,i.trigger,i.valueNode,l,d,f,v,y,i.dir,n]);Ss(()=>b(),[b]);const[k,S]=p.useState();Ss(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const D=p.useCallback(T=>{T&&g.current===!0&&(b(),j==null||j(),g.current=!1)},[b,j]);return e.jsx(jA,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:D,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:e.jsx(Se.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});yw.displayName=vA;var yA="SelectPopperPosition",cd=p.forwardRef((s,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=$s,...i}=s,o=Rl(r);return e.jsx(nu,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cd.displayName=yA;var[jA,Mu]=_a(Dn,{}),dd="SelectViewport",jw=p.forwardRef((s,t)=>{const{__scopeSelect:r,nonce:n,...a}=s,i=Xr(dd,r),o=Mu(dd,r),l=We(t,i.onViewportChange),c=p.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Il.Slot,{scope:r,children:e.jsx(Se.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ge(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const x=Math.abs(c.current-u.scrollTop);if(x>0){const g=window.innerHeight-$s*2,f=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),y=Math.max(f,v);if(y<g){const j=y+x,b=Math.min(g,j),k=j-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});jw.displayName=dd;var bw="SelectGroup",[bA,wA]=_a(bw),NA=p.forwardRef((s,t)=>{const{__scopeSelect:r,...n}=s,a=mr();return e.jsx(bA,{scope:r,id:a,children:e.jsx(Se.div,{role:"group","aria-labelledby":a,...n,ref:t})})});NA.displayName=bw;var ww="SelectLabel",Nw=p.forwardRef((s,t)=>{const{__scopeSelect:r,...n}=s,a=wA(ww,r);return e.jsx(Se.div,{id:a.id,...n,ref:t})});Nw.displayName=ww;var qo="SelectItem",[SA,Sw]=_a(qo),Cw=p.forwardRef((s,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=s,l=Yr(qo,r),c=Xr(qo,r),d=l.value===n,[u,h]=p.useState(i??""),[m,x]=p.useState(!1),g=We(t,j=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,j,n,a)}),f=mr(),v=p.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(SA,{scope:r,value:n,disabled:a,textId:f,isSelected:d,onItemTextChange:p.useCallback(j=>{h(b=>b||((j==null?void 0:j.textContent)??"").trim())},[]),children:e.jsx(Il.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:e.jsx(Se.div,{role:"option","aria-labelledby":f,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:ge(o.onFocus,()=>x(!0)),onBlur:ge(o.onBlur,()=>x(!1)),onClick:ge(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:ge(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:ge(o.onPointerDown,j=>{v.current=j.pointerType}),onPointerMove:ge(o.onPointerMove,j=>{var b;v.current=j.pointerType,a?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,j=>{var b;j.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ge(o.onKeyDown,j=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&j.key===" "||(dA.includes(j.key)&&y(),j.key===" "&&j.preventDefault())})})})})});Cw.displayName=qo;var Xa="SelectItemText",kw=p.forwardRef((s,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=s,o=Yr(Xa,r),l=Xr(Xa,r),c=Sw(Xa,r),d=pA(Xa,r),[u,h]=p.useState(null),m=We(t,y=>h(y),c.onItemTextChange,y=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,y,c.value,c.disabled)}),x=u==null?void 0:u.textContent,g=p.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:f,onNativeOptionRemove:v}=d;return Ss(()=>(f(g),()=>v(g)),[f,v,g]),e.jsxs(e.Fragment,{children:[e.jsx(Se.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?du.createPortal(i.children,o.valueNode):null]})});kw.displayName=Xa;var Tw="SelectItemIndicator",Pw=p.forwardRef((s,t)=>{const{__scopeSelect:r,...n}=s;return Sw(Tw,r).isSelected?e.jsx(Se.span,{"aria-hidden":!0,...n,ref:t}):null});Pw.displayName=Tw;var ud="SelectScrollUpButton",Ew=p.forwardRef((s,t)=>{const r=Xr(ud,s.__scopeSelect),n=Mu(ud,s.__scopeSelect),[a,i]=p.useState(!1),o=We(t,n.onScrollButtonChange);return Ss(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(Aw,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Ew.displayName=ud;var md="SelectScrollDownButton",Dw=p.forwardRef((s,t)=>{const r=Xr(md,s.__scopeSelect),n=Mu(md,s.__scopeSelect),[a,i]=p.useState(!1),o=We(t,n.onScrollButtonChange);return Ss(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(Aw,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Dw.displayName=md;var Aw=p.forwardRef((s,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=s,i=Xr("SelectScrollButton",r),o=p.useRef(null),l=_l(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Ss(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),e.jsx(Se.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ge(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ge(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ge(a.onPointerLeave,()=>{c()})})}),CA="SelectSeparator",Iw=p.forwardRef((s,t)=>{const{__scopeSelect:r,...n}=s;return e.jsx(Se.div,{"aria-hidden":!0,...n,ref:t})});Iw.displayName=CA;var hd="SelectArrow",kA=p.forwardRef((s,t)=>{const{__scopeSelect:r,...n}=s,a=Rl(r),i=Yr(hd,r),o=Xr(hd,r);return i.open&&o.position==="popper"?e.jsx(au,{...a,...n,ref:t}):null});kA.displayName=hd;function _w(s){return s===""||s===void 0}var Rw=p.forwardRef((s,t)=>{const{value:r,...n}=s,a=p.useRef(null),i=We(t,a),o=Aa(r);return p.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const h=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(h)}},[o,r]),e.jsx(i2,{asChild:!0,children:e.jsx("select",{...n,ref:i,defaultValue:r})})});Rw.displayName="BubbleSelect";function Ow(s){const t=as(s),r=p.useRef(""),n=p.useRef(0),a=p.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function Mw(s,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?s.indexOf(r):-1;let o=TA(s,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function TA(s,t){return s.map((r,n)=>s[(t+n)%s.length])}var PA=cw,Fw=uw,EA=hw,DA=pw,AA=fw,Lw=xw,IA=jw,$w=Nw,Bw=Cw,_A=kw,RA=Pw,Vw=Ew,Uw=Dw,Hw=Iw;const qe=PA,ze=EA,Ve=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Fw,{ref:n,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(DA,{asChild:!0,children:e.jsx(ns,{className:"h-4 w-4 opacity-50"})})]}));Ve.displayName=Fw.displayName;const qw=p.forwardRef(({className:s,...t},r)=>e.jsx(Vw,{ref:r,className:J("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(sj,{className:"h-4 w-4"})}));qw.displayName=Vw.displayName;const zw=p.forwardRef(({className:s,...t},r)=>e.jsx(Uw,{ref:r,className:J("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ns,{className:"h-4 w-4"})}));zw.displayName=Uw.displayName;const Ue=p.forwardRef(({className:s,children:t,position:r="popper",...n},a)=>e.jsx(AA,{children:e.jsxs(Lw,{ref:a,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[e.jsx(qw,{}),e.jsx(IA,{className:J("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(zw,{})]})}));Ue.displayName=Lw.displayName;const OA=p.forwardRef(({className:s,...t},r)=>e.jsx($w,{ref:r,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));OA.displayName=$w.displayName;const te=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Bw,{ref:n,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(RA,{children:e.jsx(ls,{className:"h-4 w-4"})})}),e.jsx(_A,{children:t})]}));te.displayName=Bw.displayName;const MA=p.forwardRef(({className:s,...t},r)=>e.jsx(Hw,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",s),...t}));MA.displayName=Hw.displayName;const FA=({status:s})=>{const t=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t(s)}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},LA=({orderGroup:s,total:t})=>s?(()=>{const n=parseFloat(s.total||"0"),a=parseFloat(s.cashAmount||"0");if(s.status==="paid")return e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:" PAID"});if(a>0&&a<n){const i=n-a;return e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 border-2 border-orange-300 animate-pulse",children:[" PARTIAL: $",i.toFixed(2)," DUE"]})})}return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border-2 border-red-300 animate-pulse",children:" PAYMENT REQUIRED"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["$",n.toFixed(2)]})]})})():e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 border-2 border-red-300 animate-pulse",children:" PAYMENT REQUIRED"}),e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["$",t]})]}),$A=()=>{const{toast:s}=Be(),[t,r]=p.useState(""),[n,a]=p.useState("all"),[i,o]=p.useState(null),[l,c]=p.useState(!1),[d,u]=Cs(),{data:h,isLoading:m,isError:x}=ue({queryKey:["/api/orders"],staleTime:3e4}),{data:g,isLoading:f,isError:v}=ue({queryKey:["/api/order-groups"],staleTime:3e4}),{data:y}=ue({queryKey:["/api/customers"]}),{data:j}=ue({queryKey:["/api/frames"]}),{data:b}=ue({queryKey:["/api/mat-colors"]}),{data:k}=ue({queryKey:["/api/glass-options"]});Ae({mutationFn:async({id:B,status:oe})=>le("PATCH",`/api/orders/${B}`,{status:oe}),onSuccess:()=>{ut.invalidateQueries({queryKey:["/api/orders"]}),s({title:"Order Updated",description:"Order status has been updated successfully"})},onError:B=>{s({title:"Update Failed",description:B.message||"Failed to update order status",variant:"destructive"})}});const S=Ae({mutationFn:async B=>le("POST","/api/wholesale-orders",{orderId:B}),onSuccess:()=>{ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/wholesale-orders"]}),c(!1),s({title:"Wholesale Order Created",description:"Wholesale order has been created successfully"})},onError:B=>{s({title:"Creation Failed",description:B.message||"Failed to create wholesale order",variant:"destructive"})}}),D=B=>{if(!B||!y)return"Unknown";const Y=y.find(z=>z.id===B);return Y?Y.name:"Unknown"},T=B=>{if(!B||!j)return"Unknown";const Y=j.find(z=>z.id===B);return Y?Y.name:"Unknown"},C=B=>{if(!B||!b)return"Unknown";const Y=b.find(z=>z.id===B);return Y?Y.name:"Unknown"},E=B=>{if(!B||!k)return"Unknown";const Y=k.find(z=>z.id===B);return Y?Y.name:"Unknown"},I=()=>{i&&S.mutate(i.id)},w=Ae({mutationFn:async B=>{var z;const oe=(z=ae(B))==null?void 0:z.id;if(!oe)throw new Error("No invoice found for this order");const Y=await fetch(`/api/invoices/${oe}`);if(!Y.ok)throw new Error("Failed to fetch invoice data");return Y.json()},onSuccess:B=>{const oe=window.open("","_blank");oe&&(oe.document.write(A(B)),oe.document.close(),oe.focus(),setTimeout(()=>{oe.print()},250))},onError:B=>{s({title:"Print Failed",description:B.message||"Failed to print invoice",variant:"destructive"})}}),N=Ae({mutationFn:async B=>{const oe=await fetch(`/api/orders/${B}`);if(!oe.ok)throw new Error("Failed to fetch order data");return oe.json()},onSuccess:B=>{const oe=window.open("","_blank");oe&&(oe.document.write(F(B.order)),oe.document.close(),oe.focus(),setTimeout(()=>{oe.print()},250))},onError:B=>{s({title:"Print Failed",description:B.message||"Failed to print work order",variant:"destructive"})}}),A=B=>{const{orderGroup:oe,orders:Y,customer:z}=B;return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice #${oe.id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 20px; }
          .company-info { text-align: center; margin-bottom: 20px; }
          .invoice-details { display: flex; justify-content: space-between; margin-bottom: 20px; }
          .customer-info { margin-bottom: 20px; }
          table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
          th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background-color: #f5f5f5; font-weight: bold; }
          .totals { text-align: right; margin-top: 20px; }
          .total-line { display: flex; justify-content: space-between; padding: 5px 0; }
          .total-final { font-weight: bold; font-size: 18px; border-top: 2px solid #000; padding-top: 10px; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="company-info">
          <h1>Jay's Frames</h1>
          <p>Professional Custom Framing</p>
          <p>Phone: (555) 123-4567 | Email: info@jaysframes.com</p>
        </div>

        <div class="header">
          <h2>INVOICE #${oe.id}</h2>
        </div>

        <div class="invoice-details">
          <div>
            <strong>Invoice Date:</strong> ${new Date(oe.createdAt).toLocaleDateString()}<br>
            <strong>Due Date:</strong> On Receipt<br>
            <strong>Status:</strong> ${oe.status||"Pending"}
          </div>
          <div>
            <strong>Customer:</strong><br>
            ${z.name}<br>
            ${z.email||""}<br>
            ${z.phone||""}
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Description</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${Y.map(ce=>`
              <tr>
                <td>
                  Custom Framing #${ce.id}<br>
                  <small>${ce.artworkDescription||"Custom Frame"}</small><br>
                  <small>Size: ${ce.artworkWidth}"  ${ce.artworkHeight}"</small>
                </td>
                <td>${ce.quantity}</td>
                <td>$${parseFloat(ce.subtotal).toFixed(2)}</td>
                <td>$${parseFloat(ce.total).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals">
          <div class="total-line">
            <span>Subtotal:</span>
            <span>$${parseFloat(oe.subtotal).toFixed(2)}</span>
          </div>
          <div class="total-line">
            <span>Tax:</span>
            <span>$${parseFloat(oe.tax).toFixed(2)}</span>
          </div>
          <div class="total-line total-final">
            <span>Total:</span>
            <span>$${parseFloat(oe.total).toFixed(2)}</span>
          </div>
        </div>

        <div style="margin-top: 40px; font-size: 12px; color: #666;">
          <p>Thank you for your business! All custom framing sales are final.</p>
        </div>
      </body>
      </html>
    `},F=B=>{const oe=y==null?void 0:y.find(Y=>Y.id===B.customerId);return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Work Order #${B.id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 15px; margin-bottom: 20px; }
          .work-order-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .section { margin-bottom: 15px; }
          .label { font-weight: bold; margin-bottom: 5px; }
          .checklist { margin-top: 30px; }
          .checklist-item { display: flex; align-items: center; margin-bottom: 10px; }
          .checklist-item input { margin-right: 10px; }
          .notes-section { margin-top: 30px; }
          .notes-box { border: 1px solid #ccc; min-height: 100px; padding: 10px; margin-top: 10px; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>JAY'S FRAMES - WORK ORDER</h1>
          <h2>Order #${B.id}</h2>
        </div>

        <div class="work-order-info">
          <div>
            <div class="section">
              <div class="label">Customer:</div>
              <div>${(oe==null?void 0:oe.name)||"Unknown Customer"}</div>
            </div>
            <div class="section">
              <div class="label">Artwork Dimensions:</div>
              <div>${B.artworkWidth}"  ${B.artworkHeight}"</div>
            </div>
            <div class="section">
              <div class="label">Artwork Description:</div>
              <div>${B.artworkDescription||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Artwork Type:</div>
              <div>${B.artworkType||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Artwork Location:</div>
              <div>${B.artworkLocation||"Not specified"}</div>
            </div>
          </div>

          <div>
            <div class="section">
              <div class="label">Frame:</div>
              <div>${T(B.frameId)}</div>
            </div>
            <div class="section">
              <div class="label">Mat:</div>
              <div>${C(B.matColorId)}</div>
            </div>
            <div class="section">
              <div class="label">Glass:</div>
              <div>${E(B.glassOptionId)}</div>
            </div>
            <div class="section">
              <div class="label">Due Date:</div>
              <div>${B.dueDate?new Date(B.dueDate).toLocaleDateString():"Not set"}</div>
            </div>
            <div class="section">
              <div class="label">Order Total:</div>
              <div style="font-size: 18px; font-weight: bold;">$${parseFloat(B.total).toFixed(2)}</div>
            </div>
          </div>
        </div>

        <div class="checklist">
          <div class="label">Production Checklist:</div>
          <div class="checklist-item">
            <input type="checkbox" id="frame-cut">
            <label for="frame-cut">Frame cut and assembled</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="mat-cut">
            <label for="mat-cut">Mat cut and beveled</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="glass-cut">
            <label for="glass-cut">Glass cut and cleaned</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="artwork-mounted">
            <label for="artwork-mounted">Artwork mounted</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="hardware">
            <label for="hardware">Hardware attached</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="inspection">
            <label for="inspection">Final inspection</label>
          </div>
          <div class="checklist-item">
            <input type="checkbox" id="ready">
            <label for="ready">Ready for pickup</label>
          </div>
        </div>

        <div class="notes-section">
          <div class="label">Production Notes:</div>
          <div class="notes-box"></div>
        </div>
      </body>
      </html>
    `},Z=Ae({mutationFn:async B=>le("POST",`/api/orders/${B}/send-update`,{}),onSuccess:()=>{s({title:"Update Sent",description:"Customer has been notified of the current order status"})},onError:B=>{s({title:"Send Failed",description:B.message||"Failed to send customer update",variant:"destructive"})}}),Q=B=>{Z.mutate(B)},L=B=>{o(B),c(!0)},ae=B=>{if(!g||!re)return null;let oe=[];if(Array.isArray(g)?oe=g:g&&typeof g=="object"&&(oe=g.orderGroups||[]),!Array.isArray(oe))return console.warn("Could not extract order groups array:",g),null;const Y=re.find(z=>z.id===B);return!Y||!Y.orderGroupId?null:oe.find(z=>z&&z.id===Y.orderGroupId)||null},M=B=>{u(`/checkout/${B}`)};Ae({mutationFn:async B=>le("POST",`/api/orders/${B}/push-to-kanban`,{}),onSuccess:()=>{s({title:"Pushed to Kanban",description:"Order has been pushed to the production Kanban board"})},onError:B=>{s({title:"Push Failed",description:B.message||"Failed to push order to Kanban",variant:"destructive"})}});const re=Pe.useMemo(()=>h?Array.isArray(h)?h:h&&typeof h=="object"&&h.orders?h.orders:[]:[],[h]);console.log("Orders response:",h),console.log("Orders array:",re);const Ce=Pe.useMemo(()=>Array.isArray(re)?re.filter(B=>{try{const Y=D(B.customerId).toLowerCase().includes(t.toLowerCase())||B.id.toString().includes(t),z=n==="all"||B.status===n;return Y&&z}catch(oe){return console.error("Error filtering order:",B,oe),!1}}):[],[re,t,n]),st=m||f,nt=x||v;return st?e.jsx("div",{className:"flex justify-center items-center min-h-[500px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):nt?e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-red-500 dark:text-red-400 text-xl mb-2",children:"Error Loading Orders"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"There was a problem fetching the orders. Please try again later."}),e.jsx(P,{variant:"outline",className:"mt-4",onClick:()=>{ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/order-groups"]})},children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Orders"}),e.jsx(P,{variant:"outline",onClick:()=>window.location.href="/",children:"Create New Order"})]}),e.jsx(V,{children:e.jsxs(H,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between mb-6",children:[e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(q,{placeholder:"Search by customer or order #",className:"max-w-md",value:t,onChange:B=>r(B.target.value)})}),e.jsx("div",{className:"w-full sm:w-auto",children:e.jsxs(qe,{value:n,onValueChange:a,children:[e.jsx(Ve,{className:"w-full sm:w-[180px]",children:e.jsx(ze,{placeholder:"Filter by status"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"in_progress",children:"In Progress"}),e.jsx(te,{value:"completed",children:"Completed"}),e.jsx(te,{value:"cancelled",children:"Cancelled"})]})]})})]}),Ce.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 dark:text-gray-500 text-lg mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t||n!=="all"?"Try changing your search filters":"Start by creating your first order"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Order #"}),e.jsx(de,{children:"Customer"}),e.jsx(de,{children:"Payment Status"}),e.jsx(de,{children:"Frame"}),e.jsx(de,{children:"Size"}),e.jsx(de,{children:"Location"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:Ce.map(B=>{const oe=ae(B.id);return e.jsxs(tt,{className:!oe||oe.status!=="paid"?"bg-red-50 border-l-4 border-l-red-500":"",children:[e.jsx(ie,{className:"font-medium",children:B.id}),e.jsx(ie,{className:"font-medium",children:D(B.customerId)}),e.jsx(ie,{children:e.jsx(LA,{orderGroup:oe,total:B.total})}),e.jsx(ie,{children:T(B.frameId)}),e.jsx(ie,{children:`${B.artworkWidth}"  ${B.artworkHeight}"`}),e.jsx(ie,{className:"text-sm",children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Art:"})," ",B.artworkLocation||"Not specified"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Materials:"})," Workshop - Bay A"]})]})}),e.jsx(ie,{children:e.jsx(FA,{status:B.status})}),e.jsx(ie,{children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[(!oe||oe.status!=="paid")&&e.jsx(P,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{oe&&oe.id?M(oe.id):s({title:"Creating checkout session...",description:"Setting up payment for this order."})},children:" Checkout"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>Q(B.id),disabled:Z.isPending,children:" Send Update"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>L(B),children:" Materials"}),e.jsx(P,{variant:"secondary",size:"sm",onClick:()=>u(`/order-progress/${B.id}`),children:" Progress"}),e.jsx(P,{size:"sm",variant:"outline",onClick:()=>{try{const Y=ae(B.id);Y&&Y.status==="pending"?console.log("Pushing order group to Kanban:",Y):console.log("Order group not found or not pending")}catch(Y){console.error("Error in push to Kanban operation:",Y)}},children:" Push to Kanban"}),e.jsxs(P,{variant:"default",size:"sm",onClick:()=>u(`/orders/${B.id}`),children:[e.jsx(hi,{className:"h-4 w-4 mr-1"})," Details"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>w.mutate(B.id),disabled:w.isPending,children:" Print Invoice"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>N.mutate(B.id),disabled:N.isPending,children:" Print Work Order"})]})]})})]},B.id)})})]})})]})}),e.jsx(Yt,{open:l,onOpenChange:c,children:e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Create Wholesale Order"}),e.jsxs(bs,{children:["Order materials needed for Order #",i==null?void 0:i.id]})]}),i&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Frame"}),e.jsx("p",{className:"text-sm",children:T(i.frameId)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Mat"}),e.jsx("p",{className:"text-sm",children:C(i.matColorId)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Glass"}),e.jsx("p",{className:"text-sm",children:E(i.glassOptionId)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Size"}),e.jsx("p",{className:"text-sm",children:`${i.artworkWidth}"  ${i.artworkHeight}"`})]})]}),e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 dark:bg-gray-900",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Materials to Order"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Frame length needed:"}),e.jsxs("span",{className:"font-medium",children:[Math.ceil(2*(Number(i.artworkWidth)+Number(i.artworkHeight))/12+1)," ft"]})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Mat board needed:"}),e.jsxs("span",{className:"font-medium",children:[Math.ceil(Number(i.artworkWidth)+Number(i.matWidth)*2+4),'" ',Math.ceil(Number(i.artworkHeight)+Number(i.matWidth)*2+4),'"']})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"Glass needed:"}),e.jsxs("span",{className:"font-medium",children:[Math.ceil(Number(i.artworkWidth)+Number(i.matWidth)*2),'" ',Math.ceil(Number(i.artworkHeight)+Number(i.matWidth)*2),'"']})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(P,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(P,{onClick:I,disabled:S.isPending,children:S.isPending?"Creating...":"Create Wholesale Order"})]})]})]})}),e.jsx(Al,{compact:!0,updateInterval:4e3})]})},BA=void 0,ho=({title:s,value:t,description:r,icon:n})=>e.jsxs(V,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(G,{className:"text-sm font-medium",children:s}),e.jsx("div",{className:"text-primary",children:n})]}),e.jsxs(H,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})]}),VA=()=>{const[s,t]=p.useState("30days"),[r,n]=p.useState("overview");Be();const{data:a,isLoading:i}=ue({queryKey:["/api/orders"],queryFn:()=>le("GET","/api/orders?limit=5")}),{data:o}=ue({queryKey:["/api/frames"]}),{data:l}=ue({queryKey:["/api/mat-colors"]}),{data:c}=ue({queryKey:["/api/glass-options"]}),{data:d}=ue({queryKey:["/api/wholesale-orders"]}),h=(()=>{const w=Array.isArray(a)?a:a!=null&&a.orders&&Array.isArray(a.orders)?a.orders:[];if(!w.length)return[];const N=new Date;let A=new Date;switch(s){case"7days":A.setDate(N.getDate()-7);break;case"30days":A.setDate(N.getDate()-30);break;case"90days":A.setDate(N.getDate()-90);break;case"12months":A.setMonth(N.getMonth()-12);break;default:A.setDate(N.getDate()-30)}return w.filter(F=>new Date(F.createdAt||"")>=A)})(),m=h.reduce((w,N)=>w+Number(N.total),0),x=h.length,g=x>0?m/x:0,f=h.filter(w=>w.status==="pending").length,v=()=>{if(!h.length)return[];const w={};return h.forEach(N=>{const A=new Date(N.createdAt||"").toLocaleDateString();w[A]||(w[A]={date:A,orders:0,sales:0}),w[A].orders+=1,w[A].sales+=Number(N.total)}),Object.values(w).sort((N,A)=>new Date(N.date).getTime()-new Date(A.date).getTime())},y=()=>{if(!h.length||!o)return[];const w={};return h.forEach(N=>{N.frameId&&(w[N.frameId]||(w[N.frameId]=0),w[N.frameId]+=1)}),Object.entries(w).map(([N,A])=>{const F=o.find(Z=>Z.id===N);return{name:F?F.name:"Unknown",value:A}}).sort((N,A)=>A.value-N.value).slice(0,5)},j=()=>{if(!h.length||!l)return[];const w={};return h.forEach(N=>{N.matColorId&&(w[N.matColorId]||(w[N.matColorId]=0),w[N.matColorId]+=1)}),Object.entries(w).map(([N,A])=>{const F=l.find(Z=>Z.id===N);return{name:F?F.name:"Unknown",value:A,color:F?F.color:"#ccc"}})},b=()=>{if(!h.length||!c)return[];const w={};return h.forEach(N=>{N.glassOptionId&&(w[N.glassOptionId]||(w[N.glassOptionId]=0),w[N.glassOptionId]+=1)}),Object.entries(w).map(([N,A])=>{const F=c.find(Z=>Z.id===N);return{name:F?F.name:"Unknown",value:A}})},k=v(),S=y(),D=j(),T=b(),C=["#00ADB5","#E31E6A","#21C685","#FFC107","#F44336"],{data:E,isLoading:I}=ue({queryKey:["/api/dashboard-proxy/metrics"],queryFn:()=>le("GET","/api/dashboard-proxy/metrics"),enabled:!!BA,retry:!1});return i?e.jsx("div",{className:"flex justify-center items-center min-h-[500px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),e.jsxs(qe,{value:s,onValueChange:t,children:[e.jsx(Ve,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Select time range"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"7days",children:"Last 7 days"}),e.jsx(te,{value:"30days",children:"Last 30 days"}),e.jsx(te,{value:"90days",children:"Last 90 days"}),e.jsx(te,{value:"12months",children:"Last 12 months"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ho,{title:"Total Sales",value:`$${m.toFixed(2)}`,description:`${x} orders in selected period`,icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),e.jsx(ho,{title:"Average Order Value",value:`$${g.toFixed(2)}`,description:"Per order in selected period",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})}),e.jsx(ho,{title:"Pending Orders",value:f,description:"Orders awaiting fulfillment",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),e.jsx(ho,{title:"Wholesale Orders",value:(d==null?void 0:d.length)||0,description:"Material orders to wholesalers",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"}),e.jsx("path",{d:"M16.5 9.4 7.55 4.24"}),e.jsx("polyline",{points:"3.29 7 12 12 20.71 7"}),e.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"12"}),e.jsx("circle",{cx:"18.5",cy:"15.5",r:"2.5"}),e.jsx("path",{d:"M20.27 17.27 22 19"})]})})]}),e.jsxs(Bt,{defaultValue:"overview",onValueChange:n,className:"space-y-4",children:[e.jsxs(Lt,{children:[e.jsx(ve,{value:"overview",children:"Overview"}),e.jsx(ve,{value:"orders",children:"Orders"}),e.jsx(ve,{value:"materials",children:"Materials"})]}),e.jsx(Ee,{value:"overview",className:"space-y-4",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Sales Overview"}),e.jsx(ee,{children:"Sales and order volume over time"})]}),e.jsx(H,{className:"h-[400px]",children:k.length>0?e.jsx(_r,{width:"100%",height:"100%",children:e.jsxs(fj,{data:k,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ai,{strokeDasharray:"3 3"}),e.jsx(ii,{dataKey:"date"}),e.jsx(Zn,{yAxisId:"left"}),e.jsx(Zn,{yAxisId:"right",orientation:"right"}),e.jsx(Rr,{}),e.jsx(xj,{}),e.jsx(oi,{yAxisId:"left",type:"monotone",dataKey:"orders",stroke:"#00ADB5",activeDot:{r:8},name:"Orders"}),e.jsx(oi,{yAxisId:"right",type:"monotone",dataKey:"sales",stroke:"#E31E6A",name:"Sales ($)"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No data available for the selected period"})})})]})}),e.jsx(Ee,{value:"orders",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Popular Frames"}),e.jsx(ee,{children:"Most ordered frame styles"})]}),e.jsx(H,{className:"h-[300px]",children:S.length>0?e.jsx(_r,{width:"100%",height:"100%",children:e.jsxs(Zc,{data:S,margin:{top:5,right:30,left:20,bottom:50},children:[e.jsx(ai,{strokeDasharray:"3 3"}),e.jsx(ii,{dataKey:"name",angle:-45,textAnchor:"end",height:70}),e.jsx(Zn,{}),e.jsx(Rr,{}),e.jsx(Yc,{dataKey:"value",name:"Orders",fill:"#00ADB5"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No data available"})})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Mat Colors"}),e.jsx(ee,{children:"Distribution of mat color choices"})]}),e.jsx(H,{className:"h-[300px]",children:D.length>0?e.jsx(_r,{width:"100%",height:"100%",children:e.jsxs(Xc,{children:[e.jsx(Jc,{data:D,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:w,percent:N})=>`${w}: ${(N*100).toFixed(0)}%`,children:D.map((w,N)=>e.jsx(Vo,{fill:w.color||C[N%C.length]},`cell-${N}`))}),e.jsx(Rr,{})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No data available"})})})]})]})}),e.jsx(Ee,{value:"materials",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Glass Options"}),e.jsx(ee,{children:"Distribution of glass choices"})]}),e.jsx(H,{className:"h-[300px]",children:T.length>0?e.jsx(_r,{width:"100%",height:"100%",children:e.jsxs(Xc,{children:[e.jsx(Jc,{data:T,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:w,percent:N})=>`${w}: ${(N*100).toFixed(0)}%`,children:T.map((w,N)=>e.jsx(Vo,{fill:C[N%C.length]},`cell-${N}`))}),e.jsx(Rr,{})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No data available"})})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Wholesale Orders"}),e.jsx(ee,{children:"Material orders by manufacturer"})]}),e.jsx(H,{className:"h-[300px]",children:d&&d.length>0?e.jsx(_r,{width:"100%",height:"100%",children:e.jsxs(Zc,{data:d.reduce((w,N)=>{const A=w.findIndex(F=>F.name===N.manufacturer);return A===-1?w.push({name:N.manufacturer,value:1}):w[A].value+=1,w},[]),margin:{top:5,right:30,left:20,bottom:50},children:[e.jsx(ai,{strokeDasharray:"3 3"}),e.jsx(ii,{dataKey:"name",angle:-45,textAnchor:"end",height:70}),e.jsx(Zn,{}),e.jsx(Rr,{}),e.jsx(Yc,{dataKey:"value",name:"Orders",fill:"#21C685"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No wholesale orders available"})})})]})]})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"External Dashboard Integration"}),e.jsx(ee,{children:"Connection status to external dashboard API"})]}),e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-yellow-600",children:"Dashboard API not configured. Add DASHBOARD_API_URL to secrets."})]}),E&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"External metrics loaded successfully"}),e.jsx("pre",{className:"text-xs mt-2 text-gray-500",children:JSON.stringify(E,null,2)})]}),I&&e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Loading external dashboard data..."})]})]}),e.jsx(Al,{compact:!0,updateInterval:5e3})]})};var Ww="basil",UA=function(t){return t===3?"v3":t},Kw="https://js.stripe.com",HA="".concat(Kw,"/").concat(Ww,"/stripe.js"),qA=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,zA=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Mh="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",WA=function(t){return qA.test(t)||zA.test(t)},KA=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Kw,'"]')),r=0;r<t.length;r++){var n=t[r];if(WA(n.src))return n}return null},Fh=function(t){var r="",n=document.createElement("script");n.src="".concat(HA).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},GA=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:r})},za=null,po=null,fo=null,QA=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},ZA=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},YA=function(t){return za!==null?za:(za=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&t&&console.warn(Mh),window.Stripe){r(window.Stripe);return}try{var a=KA();if(a&&t)console.warn(Mh);else if(!a)a=Fh(t);else if(a&&fo!==null&&po!==null){var i;a.removeEventListener("load",fo),a.removeEventListener("error",po),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=Fh(t)}fo=ZA(r,n),po=QA(n),a.addEventListener("load",fo),a.addEventListener("error",po)}catch(o){n(o);return}}),za.catch(function(r){return za=null,Promise.reject(r)}))},XA=function(t,r,n){if(t===null)return null;var a=r[0],i=a.match(/^pk_test/),o=UA(t.version),l=Ww;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,r);return GA(c,n),c},Wa,Gw=!1,Qw=function(){return Wa||(Wa=YA(null).catch(function(t){return Wa=null,Promise.reject(t)}),Wa)};Promise.resolve().then(function(){return Qw()}).catch(function(s){Gw||console.warn(s)});var Zw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Gw=!0;var a=Date.now();return Qw().then(function(i){return XA(i,r,a)})};function Lh(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),r.push.apply(r,n)}return r}function $h(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lh(Object(r),!0).forEach(function(n){Yw(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Lh(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}function Eo(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eo=function(t){return typeof t}:Eo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(s)}function Yw(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function JA(s,t){if(s==null)return{};var r={},n=Object.keys(s),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=s[a]);return r}function e4(s,t){if(s==null)return{};var r=JA(s,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(r[n]=s[n])}return r}function Xw(s,t){return t4(s)||s4(s,t)||r4(s,t)||n4()}function t4(s){if(Array.isArray(s))return s}function s4(s,t){var r=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(r!=null){var n=[],a=!0,i=!1,o,l;try{for(r=r.call(s);!(a=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw l}}return n}}function r4(s,t){if(s){if(typeof s=="string")return Bh(s,t);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bh(s,t)}}function Bh(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=s[r];return n}function n4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xs=function(t,r,n){var a=!!n,i=Pe.useRef(n);Pe.useEffect(function(){i.current=n},[n]),Pe.useEffect(function(){if(!a||!t)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return t.on(r,o),function(){t.off(r,o)}},[a,r,t,i])},pd=function(t){var r=Pe.useRef(t);return Pe.useEffect(function(){r.current=t},[t]),r.current},ga=function(t){return t!==null&&Eo(t)==="object"},a4=function(t){return ga(t)&&typeof t.then=="function"},i4=function(t){return ga(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},Vh="[object Object]",o4=function s(t,r){if(!ga(t)||!ga(r))return t===r;var n=Array.isArray(t),a=Array.isArray(r);if(n!==a)return!1;var i=Object.prototype.toString.call(t)===Vh,o=Object.prototype.toString.call(r)===Vh;if(i!==o)return!1;if(!i&&!n)return t===r;var l=Object.keys(t),c=Object.keys(r);if(l.length!==c.length)return!1;for(var d={},u=0;u<l.length;u+=1)d[l[u]]=!0;for(var h=0;h<c.length;h+=1)d[c[h]]=!0;var m=Object.keys(d);if(m.length!==l.length)return!1;var x=t,g=r,f=function(y){return s(x[y],g[y])};return m.every(f)},Jw=function(t,r,n){return ga(t)?Object.keys(t).reduce(function(a,i){var o=!ga(r)||!o4(t[i],r[i]);return n.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?$h($h({},a||{}),{},Yw({},i,t[i])):a},null):null},eN="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Uh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eN;if(t===null||i4(t))return t;throw new Error(r)},l4=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eN;if(a4(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(a){return Uh(a,r)})};var n=Uh(t,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},c4=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},Ol=Pe.createContext(null);Ol.displayName="ElementsContext";var tN=function(t,r){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return t},Fu=function(t){var r=t.stripe,n=t.options,a=t.children,i=Pe.useMemo(function(){return l4(r)},[r]),o=Pe.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(n):null}}),l=Xw(o,2),c=l[0],d=l[1];Pe.useEffect(function(){var m=!0,x=function(f){d(function(v){return v.stripe?v:{stripe:f,elements:f.elements(n)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(g){g&&m&&x(g)}):i.tag==="sync"&&!c.stripe&&x(i.stripe),function(){m=!1}},[i,c,n]);var u=pd(r);Pe.useEffect(function(){u!==null&&u!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,r]);var h=pd(n);return Pe.useEffect(function(){if(c.elements){var m=Jw(n,h,["clientSecret","fonts"]);m&&c.elements.update(m)}},[n,h,c.elements]),Pe.useEffect(function(){c4(c.stripe)},[c.stripe]),Pe.createElement(Ol.Provider,{value:c},a)};Fu.propTypes={stripe:yt.any,options:yt.object};var d4=function(t){var r=Pe.useContext(Ol);return tN(r,t)},sN=function(){var t=d4("calls useElements()"),r=t.elements;return r};yt.func.isRequired;var rN=Pe.createContext(null);rN.displayName="CheckoutSdkContext";var u4=function(t,r){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CheckoutProvider> provider."));return t},m4=Pe.createContext(null);m4.displayName="CheckoutContext";yt.any,yt.shape({fetchClientSecret:yt.func.isRequired,elementsOptions:yt.object}).isRequired;var fd=function(t){var r=Pe.useContext(rN),n=Pe.useContext(Ol);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return r?u4(r,t):tN(n,t)},h4=["mode"],p4=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},It=function(t,r){var n="".concat(p4(t),"Element"),a=function(c){var d=c.id,u=c.className,h=c.options,m=h===void 0?{}:h,x=c.onBlur,g=c.onFocus,f=c.onReady,v=c.onChange,y=c.onEscape,j=c.onClick,b=c.onLoadError,k=c.onLoaderStart,S=c.onNetworksChange,D=c.onConfirm,T=c.onCancel,C=c.onShippingAddressChange,E=c.onShippingRateChange,I=fd("mounts <".concat(n,">")),w="elements"in I?I.elements:null,N="checkoutSdk"in I?I.checkoutSdk:null,A=Pe.useState(null),F=Xw(A,2),Z=F[0],Q=F[1],L=Pe.useRef(null),ae=Pe.useRef(null);xs(Z,"blur",x),xs(Z,"focus",g),xs(Z,"escape",y),xs(Z,"click",j),xs(Z,"loaderror",b),xs(Z,"loaderstart",k),xs(Z,"networkschange",S),xs(Z,"confirm",D),xs(Z,"cancel",T),xs(Z,"shippingaddresschange",C),xs(Z,"shippingratechange",E),xs(Z,"change",v);var M;f&&(t==="expressCheckout"?M=f:M=function(){f(Z)}),xs(Z,"ready",M),Pe.useLayoutEffect(function(){if(L.current===null&&ae.current!==null&&(w||N)){var Ce=null;if(N)switch(t){case"payment":Ce=N.createPaymentElement(m);break;case"address":if("mode"in m){var st=m.mode,nt=e4(m,h4);if(st==="shipping")Ce=N.createShippingAddressElement(nt);else if(st==="billing")Ce=N.createBillingAddressElement(nt);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":Ce=N.createExpressCheckoutElement(m);break;case"currencySelector":Ce=N.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else w&&(Ce=w.create(t,m));L.current=Ce,Q(Ce),Ce&&Ce.mount(ae.current)}},[w,N,m]);var re=pd(m);return Pe.useEffect(function(){if(L.current){var Ce=Jw(m,re,["paymentRequest"]);Ce&&"update"in L.current&&L.current.update(Ce)}},[m,re]),Pe.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),Pe.createElement("div",{id:d,className:u,ref:ae})},i=function(c){fd("mounts <".concat(n,">"));var d=c.id,u=c.className;return Pe.createElement("div",{id:d,className:u})},o=r?i:a;return o.propTypes={id:yt.string,className:yt.string,onChange:yt.func,onBlur:yt.func,onFocus:yt.func,onReady:yt.func,onEscape:yt.func,onClick:yt.func,onLoadError:yt.func,onLoaderStart:yt.func,onNetworksChange:yt.func,onConfirm:yt.func,onCancel:yt.func,onShippingAddressChange:yt.func,onShippingRateChange:yt.func,options:yt.object},o.displayName=n,o.__elementType=t,o},_t=typeof window>"u",f4=Pe.createContext(null);f4.displayName="EmbeddedCheckoutProviderContext";var nN=function(){var t=fd("calls useStripe()"),r=t.stripe;return r};It("auBankAccount",_t);It("card",_t);It("cardNumber",_t);It("cardExpiry",_t);It("cardCvc",_t);It("fpxBank",_t);It("iban",_t);It("idealBank",_t);It("p24Bank",_t);It("epsBank",_t);var aN=It("payment",_t);It("expressCheckout",_t);It("currencySelector",_t);It("paymentRequestButton",_t);It("linkAuthentication",_t);It("address",_t);It("shippingAddress",_t);It("paymentMethodMessaging",_t);It("affirmMessage",_t);It("afterpayClearpayMessage",_t);var Lu="Radio",[x4,iN]=fs(Lu),[g4,v4]=x4(Lu),oN=p.forwardRef((s,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=s,[h,m]=p.useState(null),x=We(t,v=>m(v)),g=p.useRef(!1),f=h?d||!!h.closest("form"):!0;return e.jsxs(g4,{scope:r,checked:a,disabled:o,children:[e.jsx(Se.button,{type:"button",role:"radio","aria-checked":a,"data-state":dN(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:x,onClick:ge(s.onClick,v=>{a||c==null||c(),f&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),f&&e.jsx(y4,{control:h,bubbles:!g.current,name:n,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});oN.displayName=Lu;var lN="RadioIndicator",cN=p.forwardRef((s,t)=>{const{__scopeRadio:r,forceMount:n,...a}=s,i=v4(lN,r);return e.jsx(ds,{present:n||i.checked,children:e.jsx(Se.span,{"data-state":dN(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});cN.displayName=lN;var y4=s=>{const{control:t,checked:r,bubbles:n=!0,...a}=s,i=p.useRef(null),o=Aa(r),l=yl(t);return p.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[o,r,n]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dN(s){return s?"checked":"unchecked"}var j4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$u="RadioGroup",[b4,J8]=fs($u,[jl,iN]),uN=jl(),mN=iN(),[w4,N4]=b4($u),hN=p.forwardRef((s,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...m}=s,x=uN(r),g=On(d),[f,v]=ms({prop:i,defaultProp:a,onChange:h});return e.jsx(w4,{scope:r,name:n,required:o,disabled:l,value:f,onValueChange:v,children:e.jsx(My,{asChild:!0,...x,orientation:c,dir:g,loop:u,children:e.jsx(Se.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...m,ref:t})})})});hN.displayName=$u;var pN="RadioGroupItem",fN=p.forwardRef((s,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=s,i=N4(pN,r),o=i.disabled||n,l=uN(r),c=mN(r),d=p.useRef(null),u=We(t,d),h=i.value===a.value,m=p.useRef(!1);return p.useEffect(()=>{const x=f=>{j4.includes(f.key)&&(m.current=!0)},g=()=>m.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",g)}},[]),e.jsx(Fy,{asChild:!0,...l,focusable:!o,active:h,children:e.jsx(oN,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:ge(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:ge(a.onFocus,()=>{var x;m.current&&((x=d.current)==null||x.click())})})})});fN.displayName=pN;var S4="RadioGroupIndicator",xN=p.forwardRef((s,t)=>{const{__scopeRadioGroup:r,...n}=s,a=mN(r);return e.jsx(cN,{...a,...n,ref:t})});xN.displayName=S4;var gN=hN,vN=fN,C4=xN;const yN=p.forwardRef(({className:s,...t},r)=>e.jsx(gN,{className:J("grid gap-2",s),...t,ref:r}));yN.displayName=gN.displayName;const xd=p.forwardRef(({className:s,...t},r)=>e.jsx(vN,{ref:r,className:J("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(C4,{className:"flex items-center justify-center",children:e.jsx(aj,{className:"h-2.5 w-2.5 fill-current text-current"})})}));xd.displayName=vN.displayName;function k4({orderGroupId:s,currentDiscount:t,taxExempt:r=!1,onDiscountApplied:n}){const[a,i]=p.useState((t==null?void 0:t.type)||"percentage"),[o,l]=p.useState((t==null?void 0:t.amount)||""),[c,d]=p.useState(r),[u,h]=p.useState(!1),{toast:m}=Be(),x=async()=>{if(!o||Number(o)<=0){m({title:"Invalid discount",description:"Please enter a valid discount amount",variant:"destructive"});return}h(!0);try{const g=await le("POST",`/api/order-groups/${s}/apply-discount`,{discountType:a,discountAmount:o,taxExempt:c});if(g.ok){const f=await g.json();m({title:"Discount applied",description:f.message}),n()}else{const f=await g.json();m({title:"Error applying discount",description:f.message||"Something went wrong",variant:"destructive"})}}catch{m({title:"Error",description:"Failed to apply discount",variant:"destructive"})}finally{h(!1)}};return e.jsxs(V,{className:"w-full",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Discounts & Tax Status"}),e.jsx(ee,{children:"Apply discounts or mark order as tax exempt"})]}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Discount Type"}),e.jsxs(yN,{value:a,onValueChange:i,className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xd,{value:"percentage",id:"percentage"}),e.jsx(O,{htmlFor:"percentage",children:"Percentage (%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xd,{value:"fixed",id:"fixed"}),e.jsx(O,{htmlFor:"fixed",children:"Fixed Amount ($)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"discountAmount",children:a==="percentage"?"Discount Percentage":"Discount Amount"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{id:"discountAmount",type:"number",min:"0",step:a==="percentage"?"1":"0.01",max:a==="percentage"?"100":void 0,value:o,onChange:g=>l(g.target.value),className:"flex-1",placeholder:a==="percentage"?"10":"25.00"}),e.jsx("span",{className:"ml-2",children:a==="percentage"?"%":"$"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(os,{id:"taxExempt",checked:c,onCheckedChange:g=>d(g)}),e.jsx(O,{htmlFor:"taxExempt",children:"Tax Exempt"})]})]})}),e.jsx(ht,{children:e.jsx(P,{onClick:x,disabled:u,className:"w-full",children:u?"Applying...":"Apply"})})]})}const T4=Zw("pk_live_51QC3rtP1hEy5reEdyiTbL1JCiuLRsrZmHHk83DW17gkXCYfPTBJcxMHjV35TZcjlvOuXDqDxd4ckktLBtwAWtl4K00o0kkZ50c"),P4=({orderGroupId:s})=>{const[t,r]=p.useState(!1),[n,a]=p.useState(null),i=nN(),o=sN(),{toast:l}=Be(),[c,d]=Cs(),u=async h=>{if(h.preventDefault(),!i||!o)return;r(!0),a(null);const{error:m,paymentIntent:x}=await i.confirmPayment({elements:o,confirmParams:{return_url:`${window.location.origin}/payment-status`},redirect:"if_required"});if(m){let g="An unexpected error occurred.";switch(m.type){case"card_error":g=`Your card was declined: ${m.message}`;break;case"validation_error":g="Please check your payment information and try again.";break;case"rate_limit_error":g="Too many payment attempts. Please wait a moment and try again.";break;default:g=m.message||g}a(g),l({title:"Payment failed",description:g,variant:"destructive"})}else if(x)switch(x.status){case"succeeded":l({title:"Payment successful",description:"Your payment has been processed successfully."}),d("/payment-status?payment_intent_client_secret="+x.client_secret);break;case"processing":l({title:"Payment processing",description:"Your payment is being processed."}),d("/payment-status?payment_intent_client_secret="+x.client_secret);break;case"requires_action":a("Your payment requires additional authentication.");break;default:a("Payment status unclear. Please contact support.")}r(!1)};return e.jsxs("form",{onSubmit:u,children:[e.jsxs(H,{className:"space-y-6 pt-6",children:[e.jsx(aN,{}),n&&e.jsx("div",{className:"text-red-500 text-sm",children:n})]}),e.jsxs(ht,{className:"pt-6 flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>d("/orders"),children:"Cancel"}),e.jsx(P,{type:"submit",disabled:!i||t,className:"ml-auto",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing"]}):"Pay Now"})]})]})},Hh=({orderGroupId:s})=>{const[t,r]=p.useState("cash"),[n,a]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1),{toast:h}=Be(),[m,x]=Cs(),g=async f=>{if(f.preventDefault(),t==="cash"&&(!n||Number(n)<=0)){h({title:"Invalid cash amount",description:"Please enter a valid cash amount.",variant:"destructive"});return}if(t==="check"&&!i){h({title:"Check number required",description:"Please enter the check number.",variant:"destructive"});return}u(!0);try{const v=await fetch(`/api/order-groups/${s}/pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:t,details:{cashAmount:t==="cash"?Number(n):void 0,checkNumber:t==="check"?i:void 0,notes:l||void 0}})});if(v.ok)h({title:"Payment recorded",description:`${t==="cash"?"Cash":"Check"} payment has been successfully recorded.`}),x("/orders");else{const y=await v.json();h({title:"Payment failed",description:y.message||"Failed to process payment.",variant:"destructive"})}}catch{h({title:"Error",description:"There was an error processing your payment. Please try again.",variant:"destructive"})}finally{u(!1)}};return e.jsxs("form",{onSubmit:g,children:[e.jsxs(H,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Payment Method"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(P,{type:"button",variant:t==="cash"?"default":"outline",onClick:()=>r("cash"),className:"flex-1",children:[e.jsx(kn,{className:"mr-2 h-4 w-4"}),"Cash"]}),e.jsxs(P,{type:"button",variant:t==="check"?"default":"outline",onClick:()=>r("check"),className:"flex-1",children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),"Check"]})]})]}),t==="cash"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"cashAmount",children:"Cash Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:"$"}),e.jsx(q,{id:"cashAmount",value:n,onChange:f=>a(f.target.value),type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-8"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"checkNumber",children:"Check Number"}),e.jsx(q,{id:"checkNumber",value:i,onChange:f=>o(f.target.value),placeholder:"Check #"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"notes",children:"Payment Notes (Optional)"}),e.jsx(q,{id:"notes",value:l,onChange:f=>c(f.target.value),placeholder:"Add any payment notes here"})]})]}),e.jsxs(ht,{className:"pt-6 flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>x("/orders"),children:"Cancel"}),e.jsx(P,{type:"submit",disabled:d,className:"ml-auto",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing"]}):"Record Payment"})]})]})},E4=()=>{const[s,t]=p.useState(null),{orderGroupId:r}=kl(),{toast:n}=Be(),[a,i]=Cs(),[o,l]=p.useState(0),{data:c,isLoading:d,error:u}=ue({queryKey:["/api/order-groups",r,o],queryFn:async()=>{const j=await fetch(`/api/order-groups/${r}`);if(!j.ok)throw new Error("Failed to fetch order group");return j.json()},enabled:!!r}),{data:h,isLoading:m,error:x}=ue({queryKey:["/api/order-groups",r,"orders",o],queryFn:async()=>{const j=await fetch(`/api/order-groups/${r}/orders`);if(!j.ok)throw new Error("Failed to fetch orders");return j.json()},enabled:!!r});p.useEffect(()=>{r&&c&&(async()=>{try{const b=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderGroupId:Number(r),amount:Math.round(Number(c.total)*100)})});if(!b.ok)throw new Error("Failed to create payment intent");const k=await b.json();t(k.clientSecret)}catch(b){console.error("Error creating payment intent:",b),n({title:"Error",description:"Unable to initialize payment. Please try again later.",variant:"destructive"})}})()},[r,c,n,o]);const g=()=>{l(j=>j+1)},f=(h==null?void 0:h.reduce((j,b)=>j+Number(b.subtotal),0))||0,v=(h==null?void 0:h.reduce((j,b)=>j+Number(b.tax),0))||0,y=(h==null?void 0:h.reduce((j,b)=>j+Number(b.total),0))||0;return d||m?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):u||x||!c||!h?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(V,{children:[e.jsx(K,{children:e.jsx(G,{children:"Error"})}),e.jsx(H,{children:e.jsx("p",{children:"There was an error loading the checkout information. Please try again later."})}),e.jsx(ht,{children:e.jsx(P,{onClick:()=>i("/orders"),children:"Return to Orders"})})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"md:col-span-5",children:[e.jsxs(V,{className:"mb-8",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Summary"}),e.jsxs(ee,{children:["Order Group #",c.id]})]}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[h.map(j=>e.jsx("div",{className:"border-b pb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Order #",j.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.artworkWidth,'"  ',j.artworkHeight,'"']})]}),e.jsxs("p",{className:"font-medium",children:["$",Number(j.total).toFixed(2)]})]})},j.id)),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("p",{children:["$",f.toFixed(2)]})]}),c.discountAmount&&c.discountType&&e.jsxs("div",{className:"flex justify-between mt-2 text-green-600",children:[e.jsxs("p",{children:["Discount ",c.discountType==="percentage"?`(${c.discountAmount}%)`:""]}),e.jsxs("p",{children:["-$",c.discountType==="percentage"?(Number(c.discountAmount)/100*f).toFixed(2):Number(c.discountAmount).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Tax ",c.taxExempt?"(Exempt)":""]}),e.jsxs("p",{children:["$",v.toFixed(2)]})]}),e.jsx(Ot,{className:"my-4"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["$",y.toFixed(2)]})]})]})]})})]}),e.jsx(k4,{orderGroupId:Number(r),currentDiscount:c.discountAmount&&c.discountType?{type:c.discountType,amount:String(c.discountAmount)}:void 0,taxExempt:c.taxExempt,onDiscountApplied:g})]}),e.jsx("div",{className:"md:col-span-7",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Payment Method"}),e.jsx(ee,{children:"Choose how you would like to pay for this order"})]}),e.jsxs(Bt,{defaultValue:"credit_card",className:"w-full",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-3",children:[e.jsxs(ve,{value:"credit_card",children:[e.jsx(fi,{className:"h-4 w-4 mr-2"}),"Credit Card"]}),e.jsxs(ve,{value:"cash",children:[e.jsx(kn,{className:"h-4 w-4 mr-2"}),"Cash"]}),e.jsxs(ve,{value:"check",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Check"]})]}),e.jsx(Ee,{value:"credit_card",children:s?e.jsx(Fu,{stripe:T4,options:{clientSecret:s},children:e.jsx(P4,{orderGroupId:Number(r)})}):e.jsx(H,{className:"flex items-center justify-center py-10",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})})}),e.jsx(Ee,{value:"cash",children:e.jsx(Hh,{orderGroupId:Number(r)})}),e.jsx(Ee,{value:"check",children:e.jsx(Hh,{orderGroupId:Number(r)})})]})]})})]})]})},D4=()=>{const[,s]=Cs(),[t,r]=p.useState("loading"),[n,a]=p.useState(""),[i,o]=p.useState(null);p.useEffect(()=>{const u=new URLSearchParams(window.location.search),h=u.get("payment_intent_client_secret");if(u.get("redirect_status"),!h){r("failed"),a("No payment information found.");return}const m=h.split("_secret_")[0];(async()=>{try{const g=await fetch("/api/payment-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_intent_id:m,client_secret:h})}),f=await g.json();if(g.ok)switch(o(f.orderGroupId),f.status){case"succeeded":r("success"),a("Your payment has been processed successfully!");break;case"processing":r("processing"),a("Your payment is being processed. We'll notify you when it's complete.");break;case"requires_payment_method":r("failed"),a("Your payment was not successful. Please try again with a different payment method.");break;default:r("failed"),a("There was an issue with your payment. Please contact support.")}else r("failed"),a(f.message||"Failed to verify payment status.")}catch(g){console.error("Error checking payment status:",g),r("failed"),a("Unable to verify payment status. Please contact support.")}})()},[]);const l=()=>{switch(t){case"loading":return e.jsx(Ye,{className:"h-12 w-12 animate-spin text-blue-500"});case"success":return e.jsx(Ks,{className:"h-12 w-12 text-green-500"});case"processing":return e.jsx($t,{className:"h-12 w-12 text-yellow-500"});case"failed":return e.jsx(Ln,{className:"h-12 w-12 text-red-500"});default:return e.jsx(Ye,{className:"h-12 w-12 animate-spin text-blue-500"})}},c=()=>{switch(t){case"loading":return"Processing Payment...";case"success":return"Payment Successful!";case"processing":return"Payment Processing";case"failed":return"Payment Failed";default:return"Processing Payment..."}},d=()=>{switch(t){case"success":return"text-green-600";case"processing":return"text-yellow-600";case"failed":return"text-red-600";default:return"text-blue-600"}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(V,{children:[e.jsxs(K,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:l()}),e.jsx(G,{className:d(),children:c()}),e.jsx(ee,{children:n})]}),e.jsxs(H,{className:"text-center space-y-4",children:[t==="success"&&i&&e.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700",children:["Order #",i," has been confirmed and will be processed shortly."]})}),t==="processing"&&e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"We'll send you an email confirmation once the payment is complete."})}),t==="failed"&&e.jsx("div",{className:"p-4 bg-red-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:"No charges have been made to your account."})}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:t==="success"&&i?e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>s("/orders"),children:"View My Orders"}),e.jsx(P,{variant:"outline",onClick:()=>s("/"),children:"Return Home"})]}):t==="failed"?e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>window.history.back(),children:"Try Again"}),e.jsx(P,{variant:"outline",onClick:()=>s("/"),children:"Return Home"})]}):e.jsx(P,{variant:"outline",onClick:()=>s("/"),children:"Return Home"})})]})]})})})},A4=$n("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),hs=p.forwardRef(({className:s,variant:t,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:J(A4({variant:t}),s),...r}));hs.displayName="Alert";const Qs=p.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:J("mb-1 font-medium leading-none tracking-tight",s),...t}));Qs.displayName="AlertTitle";const ps=p.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:J("text-sm [&_p]:leading-relaxed",s),...t}));ps.displayName="AlertDescription";function jN({customerId:s}){const{toast:t}=Be(),[r,n]=p.useState(null),[a,i]=p.useState(""),[o,l]=p.useState("all"),[c,d]=p.useState("all"),{data:u,isLoading:h}=ue({queryKey:["/api/customers",s],queryFn:async()=>{const C=await fetch(`/api/customers/${s}`);if(!C.ok)throw new Error("Failed to fetch customer data");return C.json()}}),{data:m,isLoading:x,isError:g,error:f}=ue({queryKey:["/api/customers",s,"invoices"],queryFn:async()=>{const C=await fetch(`/api/customers/${s}/orders`);if(!C.ok)throw new Error("Failed to load invoices");return(await C.json()).map(I=>({orderGroup:I.orderGroup,orders:I.orders,customer:u}))},enabled:!!s&&!!u}),v=C=>C?`$${Number(C).toFixed(2)}`:"$0.00",y=C=>{if(!C)return"N/A";try{return lr(new Date(C),"MMM d, yyyy")}catch{return"Invalid Date"}},j=C=>{n(C)},b=async C=>{try{const E=await fetch(`/api/invoices/send/${C}`,{method:"POST"});if(E.ok)t({title:"Invoice Sent",description:`Invoice has been emailed to ${u==null?void 0:u.email}`,variant:"default"});else{const I=await E.json();t({title:"Failed to Send",description:I.message||"There was an error sending the invoice",variant:"destructive"})}}catch{t({title:"Error",description:"Could not send invoice by email",variant:"destructive"})}},k=C=>{n(C),setTimeout(()=>{window.print()},500)},S=m?m.filter(C=>{const E=a===""||C.orderGroup.id.toString().includes(a)||C.orderGroup.notes&&C.orderGroup.notes.toLowerCase().includes(a.toLowerCase()),I=o==="all"||C.orderGroup.status===o||C.orderGroup.stripePaymentStatus===o,w=c==="all"||C.orderGroup.paymentMethod===c;return E&&I&&w}):[],D=m?[...new Set(m.map(C=>C.orderGroup.paymentMethod||"unknown"))]:[],T=m?[...new Set(m.map(C=>C.orderGroup.stripePaymentStatus||C.orderGroup.status))]:[];return x||h?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):g?e.jsxs(hs,{variant:"destructive",className:"mb-4",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Error"}),e.jsx(ps,{children:f instanceof Error?f.message:"Failed to load invoices"})]}):e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Invoices & Order History"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{window.open(`/api/invoices/export/${s}`,"_blank")},children:[e.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Export All"]})]}),e.jsx(ee,{children:"View and manage all invoices for this customer"})]}),e.jsxs(H,{children:[!m||m.length===0?e.jsxs(hs,{className:"mb-4",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(Qs,{children:"No Invoices"}),e.jsx(ps,{children:"There are no invoices available for this customer yet."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fn,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(q,{placeholder:"Search by invoice #, notes...",className:"pl-8",value:a,onChange:C=>i(C.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(qe,{value:o,onValueChange:l,children:[e.jsxs(Ve,{className:"w-[180px] text-xs",children:[e.jsx(ni,{className:"h-3.5 w-3.5 mr-2"}),e.jsx(ze,{placeholder:"Filter by status"})]}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Statuses"}),T.map(C=>e.jsx(te,{value:C||"unknown",children:C||"Unknown Status"},C))]})]}),e.jsxs(qe,{value:c,onValueChange:d,children:[e.jsxs(Ve,{className:"w-[180px] text-xs",children:[e.jsx(ni,{className:"h-3.5 w-3.5 mr-2"}),e.jsx(ze,{placeholder:"Filter by payment"})]}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Payment Methods"}),D.map(C=>e.jsx(te,{value:C,children:C==="credit_card"?"Credit Card":C==="cash"?"Cash":C==="check"?"Check":C},C))]})]})]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{className:"w-[100px]",children:"Invoice #"}),e.jsx(de,{children:"Date"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Payment"}),e.jsx(de,{className:"text-right",children:"Amount"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(ys,{children:S.length===0?e.jsx(tt,{children:e.jsx(ie,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"No invoices match your filters"})}):S.map(C=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:C.orderGroup.id}),e.jsx(ie,{children:y(C.orderGroup.createdAt)}),e.jsx(ie,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${["succeeded","paid","completed"].includes(C.orderGroup.stripePaymentStatus||C.orderGroup.status)?"bg-green-100 text-green-800":["pending","processing"].includes(C.orderGroup.stripePaymentStatus||C.orderGroup.status)?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:C.orderGroup.stripePaymentStatus||C.orderGroup.status})}),e.jsx(ie,{children:C.orderGroup.paymentMethod||"N/A"}),e.jsx(ie,{className:"text-right",children:v(C.orderGroup.total)}),e.jsx(ie,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>j(C),children:[e.jsx(hi,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"View"})]}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>k(C),children:[e.jsx(Lo,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Print"})]}),(u==null?void 0:u.email)&&e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>b(C.orderGroup.id),children:[e.jsx(Sr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Email"})]})]})})]},C.orderGroup.id))})]})})]}),e.jsx(Yt,{open:!!r,onOpenChange:C=>!C&&n(null),children:e.jsx(Wt,{className:"max-w-4xl",children:r&&e.jsxs("div",{className:"p-4",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Invoice #",r.orderGroup.id]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Bill To:"}),e.jsx("p",{className:"text-sm",children:r.customer.name}),r.customer.email&&e.jsx("p",{className:"text-sm",children:r.customer.email}),r.customer.phone&&e.jsx("p",{className:"text-sm",children:r.customer.phone}),r.customer.address&&e.jsx("p",{className:"text-sm",children:r.customer.address})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Invoice Date:"}),e.jsx("span",{children:y(r.orderGroup.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Payment Status:"}),e.jsx("span",{children:r.orderGroup.stripePaymentStatus||r.orderGroup.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Payment Method:"}),e.jsx("span",{children:r.orderGroup.paymentMethod||"N/A"})]}),r.orderGroup.paymentDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Payment Date:"}),e.jsx("span",{children:y(r.orderGroup.paymentDate)})]})]})]}),e.jsx("div",{className:"border rounded-md mb-6",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Item"}),e.jsx(de,{children:"Description"}),e.jsx(de,{className:"text-right",children:"Qty"}),e.jsx(de,{className:"text-right",children:"Price"}),e.jsx(de,{className:"text-right",children:"Total"})]})}),e.jsx(ys,{children:r.orders.map(C=>e.jsxs(tt,{children:[e.jsxs(ie,{children:["Order #",C.id]}),e.jsx(ie,{children:C.artworkDescription||`Custom Framing (${C.artworkWidth}"  ${C.artworkHeight}")`}),e.jsx(ie,{className:"text-right",children:C.quantity}),e.jsx(ie,{className:"text-right",children:v(parseFloat(C.subtotal)/C.quantity)}),e.jsx(ie,{className:"text-right",children:v(C.subtotal)})]},C.id))})]})}),e.jsxs("div",{className:"flex flex-col items-end space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between w-60",children:[e.jsx("span",{className:"font-medium",children:"Subtotal:"}),e.jsx("span",{children:v(r.orderGroup.subtotal)})]}),e.jsxs("div",{className:"flex justify-between w-60",children:[e.jsx("span",{className:"font-medium",children:"Tax:"}),e.jsx("span",{children:v(r.orderGroup.tax)})]}),e.jsxs("div",{className:"flex justify-between w-60 text-lg font-bold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:v(r.orderGroup.total)})]})]}),r.orderGroup.notes&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Notes:"}),e.jsx("p",{className:"text-sm",children:r.orderGroup.notes})]}),e.jsxs("div",{className:"flex justify-end mt-8 gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>n(null),children:"Close"}),e.jsxs(P,{variant:"default",onClick:()=>window.print(),className:"text-white",children:[e.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Print"]}),(u==null?void 0:u.email)&&e.jsxs(P,{variant:"default",onClick:()=>{b(r.orderGroup.id),n(null)},className:"text-white",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Email"]})]})]})})})]})]})}function I4({customerId:s}){Be();const[,t]=Cs(),[r,n]=p.useState("all"),{data:a,isLoading:i}=ue({queryKey:["/api/customers",s],queryFn:async()=>{const g=await fetch(`/api/customers/${s}`);if(!g.ok)throw new Error("Failed to fetch customer data");return g.json()}}),{data:o,isLoading:l}=ue({queryKey:["/api/orders",{customerId:s}],queryFn:async()=>{const g=await fetch(`/api/orders?customerId=${s}`);if(!g.ok)throw new Error("Failed to fetch order history");return g.json()}}),{data:c,isLoading:d}=ue({queryKey:["/api/order-groups",{customerId:s}],queryFn:async()=>{const g=await fetch(`/api/customers/${s}/orders`);if(!g.ok)throw new Error("Failed to fetch order groups");return(await g.json()).map(v=>v.orderGroup)}}),u=g=>{if(!g)return"N/A";try{return lr(new Date(g),"MMM d, yyyy")}catch{return"Invalid Date"}},m=(()=>{if(!o||!c)return{totalSpent:0,orderCount:0,averageOrderValue:0,recentOrderDate:null,upcomingOrders:0,inProgressOrders:0,paymentMethods:{},ordersByMonth:{}};const g=o.filter(E=>{if(r==="all")return!0;const I=new Date(E.createdAt),w=r==="6months"?oo(new Date,6):oo(new Date,12);return mh(I,w)}),f=c.filter(E=>{if(r==="all")return!0;const I=new Date(E.createdAt),w=r==="6months"?oo(new Date,6):oo(new Date,12);return mh(I,w)}),v=f.reduce((E,I)=>E+(I.total?parseFloat(I.total):0),0),y=f.length,j=y>0?v/y:0,b=g.map(E=>new Date(E.createdAt).getTime()).sort((E,I)=>I-E),k=b.length>0?new Date(b[0]).toISOString():null,S=g.filter(E=>E.dueDate&&new Date(E.dueDate)>new Date).length,D=g.filter(E=>E.productionStatus!=="completed"&&E.productionStatus!=="order_processed").length,T={};f.forEach(E=>{const I=E.paymentMethod||"unknown";T[I]=(T[I]||0)+1});const C={};return g.forEach(E=>{const I=lr(new Date(E.createdAt),"MMM yyyy");C[I]=(C[I]||0)+1}),{totalSpent:v,orderCount:y,averageOrderValue:j,recentOrderDate:k,upcomingOrders:S,inProgressOrders:D,paymentMethods:T,ordersByMonth:C}})(),x=g=>{let f="";switch(g.toLowerCase()){case"active":f="bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";break;case"inactive":f="bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100";break;default:f="bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100"}return e.jsx(pe,{className:f,children:g})};return i||l||d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(G,{className:"text-2xl",children:a.name}),e.jsxs(ee,{children:["Customer since ",u(a.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col sm:items-end",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),x("Active")]}),a.stripeCustomerId&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(fi,{className:"h-4 w-4 mr-1 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Stripe Customer"})]})]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Spent"}),e.jsx(kn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs("span",{className:"text-2xl font-bold",children:["$",m.totalSpent.toFixed(2)]}),e.jsx("div",{className:"mt-auto pt-2 text-xs text-muted-foreground",children:"Lifetime value"})]}),e.jsxs("div",{className:"flex flex-col p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Orders"}),e.jsx(ma,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("span",{className:"text-2xl font-bold",children:m.orderCount}),e.jsx("div",{className:"mt-auto pt-2 text-xs text-muted-foreground",children:"Total orders placed"})]}),e.jsxs("div",{className:"flex flex-col p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Average Order"}),e.jsx($o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs("span",{className:"text-2xl font-bold",children:["$",m.averageOrderValue.toFixed(2)]}),e.jsx("div",{className:"mt-auto pt-2 text-xs text-muted-foreground",children:"Average order value"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[a.email&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"w-20 text-sm text-muted-foreground",children:"Email:"}),e.jsx("span",{className:"flex-1 text-sm",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"w-20 text-sm text-muted-foreground",children:"Phone:"}),e.jsx("span",{className:"flex-1 text-sm",children:a.phone})]}),a.address&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"w-20 text-sm text-muted-foreground",children:"Address:"}),e.jsx("span",{className:"flex-1 text-sm",children:a.address})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Recent Order"})]}),e.jsx("span",{className:"text-sm font-medium",children:m.recentOrderDate?u(m.recentOrderDate):"No orders"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C2,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Upcoming Orders"})]}),e.jsx("span",{className:"text-sm font-medium",children:m.upcomingOrders})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ij,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"In Progress"})]}),e.jsx("span",{className:"text-sm font-medium",children:m.inProgressOrders})]})]})]})]})]}),e.jsxs(ht,{className:"flex justify-between border-t px-6 py-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{variant:r==="all"?"default":"outline",size:"sm",onClick:()=>n("all"),className:r==="all"?"text-white":"",children:"All Time"}),e.jsx(P,{variant:r==="12months"?"default":"outline",size:"sm",onClick:()=>n("12months"),className:r==="12months"?"text-white":"",children:"Last 12 Months"}),e.jsx(P,{variant:r==="6months"?"default":"outline",size:"sm",onClick:()=>n("6months"),className:r==="6months"?"text-white":"",children:"Last 6 Months"})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>t(`/pos?customerId=${a.id}`),children:["Create Order",e.jsx(Cl,{className:"ml-1 h-4 w-4"})]})]})]}),e.jsx(jN,{customerId:s}),e.jsx("div",{className:"mt-8",children:e.jsx(CustomerActivityTimeline,{customerId:s})})]}):e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Customer Not Found"}),e.jsx(ee,{children:"Could not find customer information"})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($t,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{children:"The requested customer information could not be found."})]})}),e.jsx(ht,{children:e.jsx(P,{variant:"outline",onClick:()=>t("/customers"),children:"Back to Customers"})})]})}const cr=p.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));cr.displayName="Textarea";var Bu="Switch",[_4,eU]=fs(Bu),[R4,O4]=_4(Bu),bN=p.forwardRef((s,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=s,[m,x]=p.useState(null),g=We(t,b=>x(b)),f=p.useRef(!1),v=m?u||!!m.closest("form"):!0,[y=!1,j]=ms({prop:a,defaultProp:i,onChange:d});return e.jsxs(R4,{scope:r,checked:y,disabled:l,children:[e.jsx(Se.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":SN(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:ge(s.onClick,b=>{j(k=>!k),v&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})}),v&&e.jsx(M4,{control:m,bubbles:!f.current,name:n,value:c,checked:y,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});bN.displayName=Bu;var wN="SwitchThumb",NN=p.forwardRef((s,t)=>{const{__scopeSwitch:r,...n}=s,a=O4(wN,r);return e.jsx(Se.span,{"data-state":SN(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});NN.displayName=wN;var M4=s=>{const{control:t,checked:r,bubbles:n=!0,...a}=s,i=p.useRef(null),o=Aa(r),l=yl(t);return p.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[o,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...s.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function SN(s){return s?"checked":"unchecked"}var CN=bN,F4=NN;const br=p.forwardRef(({className:s,...t},r)=>e.jsx(CN,{className:J("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:e.jsx(F4,{className:J("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));br.displayName=CN.displayName;function L4({customerId:s}){const{toast:t}=Be(),r=ss(),[n,a]=p.useState(!1),[i,o]=p.useState({}),{data:l,isLoading:c}=ue({queryKey:[`/api/customers/${s}/preferences`],queryFn:()=>le("GET",`/api/customers/${s}/preferences`).then(x=>x.json()).catch(x=>{if(x.status===404)return{customerId:s,notificationsEnabled:!0,emailNotifications:!0,smsNotifications:!1,specialInstructions:"",notes:"",preferredMatType:"",preferredGlassType:"",preferredPickupDay:""};throw x}),enabled:!!s});Pe.useEffect(()=>{l&&o(l)},[l]);const d=Ae({mutationFn:async x=>{const g=`/api/customers/${s}/preferences`,f=l!=null&&l.id?"PATCH":"POST";return(await le(f,g,x)).json()},onSuccess:()=>{r.invalidateQueries({queryKey:[`/api/customers/${s}/preferences`]}),a(!1),t({title:"Preferences saved",description:"Customer preferences have been updated"})},onError:x=>{t({title:"Error saving preferences",description:"There was a problem saving customer preferences",variant:"destructive"})}}),u=x=>{const{name:g,value:f}=x.target;o(v=>({...v,[g]:f}))},h=(x,g)=>{o(f=>({...f,[x]:g}))},m=x=>{x.preventDefault(),d.mutate(i)};return c?e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Customer Preferences"}),e.jsx(ee,{children:"Loading customer preferences..."})]}),e.jsx(H,{className:"flex justify-center py-8",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})})]}):e.jsxs(V,{children:[e.jsxs(K,{className:"flex flex-row items-start justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Customer Preferences"}),e.jsx(ee,{children:"Preferences and special notes for this customer"})]}),n?null:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>a(!0),children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Edit"]})]}),e.jsx(H,{children:n?e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Notification Preferences"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{htmlFor:"notificationsEnabled",className:"flex-1",children:"Enable notifications"}),e.jsx(br,{id:"notificationsEnabled",checked:i.notificationsEnabled,onCheckedChange:x=>h("notificationsEnabled",x)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{htmlFor:"emailNotifications",className:"flex-1",children:"Email notifications"}),e.jsx(br,{id:"emailNotifications",checked:i.emailNotifications,onCheckedChange:x=>h("emailNotifications",x),disabled:!i.notificationsEnabled})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{htmlFor:"smsNotifications",className:"flex-1",children:"SMS notifications"}),e.jsx(br,{id:"smsNotifications",checked:i.smsNotifications,onCheckedChange:x=>h("smsNotifications",x),disabled:!i.notificationsEnabled})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx(oj,{className:"mr-2 h-4 w-4"}),"Special Instructions"]}),e.jsx(cr,{name:"specialInstructions",value:i.specialInstructions||"",onChange:u,placeholder:"Add special framing instructions for this customer",className:"min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Internal Notes"}),e.jsx(cr,{name:"notes",value:i.notes||"",onChange:u,placeholder:"Add internal notes about this customer (not visible to customer)",className:"min-h-[100px]"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsxs(P,{type:"submit",disabled:d.isPending,children:[d.isPending&&e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(k2,{className:"mr-2 h-4 w-4"}),"Save Preferences"]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center",children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Notification Preferences"]}),e.jsx("div",{className:"rounded-md border p-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-muted-foreground",children:"Notifications:"}),e.jsx("div",{children:i.notificationsEnabled?"Enabled":"Disabled"}),e.jsx("div",{className:"text-muted-foreground",children:"Email Notifications:"}),e.jsx("div",{children:i.emailNotifications?"Enabled":"Disabled"}),e.jsx("div",{className:"text-muted-foreground",children:"SMS Notifications:"}),e.jsx("div",{children:i.smsNotifications?"Enabled":"Disabled"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Special Instructions"}),e.jsx("div",{className:"rounded-md border p-3 min-h-[80px]",children:i.specialInstructions?e.jsx("p",{className:"text-sm",children:i.specialInstructions}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No special instructions"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Internal Notes"}),e.jsx("div",{className:"rounded-md border p-3 min-h-[80px]",children:i.notes?e.jsx("p",{className:"text-sm",children:i.notes}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No internal notes"})})]})]})})]})}function $4(s){switch(s){case"order_created":return e.jsx(ma,{className:"h-5 w-5 text-blue-500"});case"payment_completed":return e.jsx(fi,{className:"h-5 w-5 text-green-500"});case"status_changed":return e.jsx(Fr,{className:"h-5 w-5 text-yellow-500"});case"invoice_generated":return e.jsx(Sl,{className:"h-5 w-5 text-purple-500"});case"order_shipped":return e.jsx(Gr,{className:"h-5 w-5 text-indigo-500"});case"order_ready":return e.jsx(Gs,{className:"h-5 w-5 text-teal-500"});case"appointment_scheduled":return e.jsx(Vr,{className:"h-5 w-5 text-orange-500"});case"production_update":return e.jsx(T2,{className:"h-5 w-5 text-gray-500"});default:return e.jsx(Nt,{className:"h-5 w-5 text-gray-500"})}}function B4(s){switch(s){case"order_created":return e.jsx(pe,{variant:"default",children:"New Order"});case"payment_completed":return e.jsx(pe,{className:"bg-green-100 text-green-800",children:"Payment Received"});case"status_changed":return e.jsx(pe,{className:"bg-yellow-100 text-yellow-800",children:"Status Updated"});case"invoice_generated":return e.jsx(pe,{className:"bg-purple-100 text-purple-800",children:"Invoice"});case"order_shipped":return e.jsx(pe,{className:"bg-indigo-100 text-indigo-800",children:"Shipped"});case"order_ready":return e.jsx(pe,{className:"bg-teal-100 text-teal-800",children:"Ready for Pickup"});case"appointment_scheduled":return e.jsx(pe,{className:"bg-orange-100 text-orange-800",children:"Appointment"});case"production_update":return e.jsx(pe,{className:"bg-gray-100 text-gray-800",children:"Production"});default:return e.jsx(pe,{variant:"outline",children:"Activity"})}}function V4({customerId:s}){const{data:t,isLoading:r}=ue({queryKey:[`/api/status-history/customers/${s}/status-history`],queryFn:()=>le("GET",`/api/status-history/customers/${s}/status-history`).then(l=>l.json()),enabled:!!s}),{data:n,isLoading:a}=ue({queryKey:[`/api/notifications/customers/${s}/notifications`],queryFn:()=>le("GET",`/api/notifications/customers/${s}/notifications`).then(l=>l.json()),enabled:!!s}),i=[];t&&t.forEach(l=>{i.push({id:l.id,type:"status_changed",message:`Order #${l.order_id} status changed from "${l.previous_status}" to "${l.new_status}"`,timestamp:l.changed_at,orderId:l.order_id,details:{frameName:l.frame_name,artworkDescription:l.artwork_description,previousStatus:l.previous_status,newStatus:l.new_status}})}),n&&n.forEach(l=>{i.push({id:l.id,type:l.type,message:l.message,timestamp:l.created_at,orderId:l.order_id,details:l.details?JSON.parse(l.details):{}})});const o=i.sort((l,c)=>new Date(c.timestamp).getTime()-new Date(l.timestamp).getTime());return r||a?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):o.length===0?e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Activity Timeline"}),e.jsx(ee,{children:"No activity found for this customer"})]}),e.jsx(H,{children:e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-50"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"No activity has been recorded yet"})]})})})]}):e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Activity Timeline"}),e.jsx(ee,{children:"Recent activity for this customer"})]}),e.jsx(H,{children:e.jsx("div",{className:"space-y-8",children:o.map((l,c)=>{var d;return e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"mr-4 flex flex-col items-center",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border border-muted bg-background",children:$4(l.type)}),c<o.length-1&&e.jsx("div",{className:"h-full w-px bg-border"})]}),e.jsxs("div",{className:"flex flex-col gap-2 pb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[B4(l.type),e.jsx("span",{className:"text-sm text-muted-foreground",children:lr(new Date(l.timestamp),"MMM dd, yyyy  h:mm a")})]}),e.jsx("p",{className:"text-sm",children:l.message}),l.orderId&&e.jsxs("div",{className:"mt-1 rounded-md bg-muted/50 p-2 text-xs",children:[e.jsxs("div",{className:"font-medium",children:["Order #",l.orderId]}),((d=l.details)==null?void 0:d.frameName)&&e.jsxs("div",{className:"text-muted-foreground",children:[l.details.frameName,l.details.artworkDescription?` - ${l.details.artworkDescription}`:""]})]})]})]},`${l.type}-${l.id}-${c}`)})})})]})}function U4(){const[s]=Cs(),t=s.split("/"),r=t[t.length-1],n=r==="new",a=!n&&!isNaN(parseInt(r))?parseInt(r):void 0,{toast:i}=Be(),[,o]=Cs(),l=ss(),[c,d]=p.useState(!1),[u,h]=p.useState({}),[m,x]=p.useState("dashboard");p.useEffect(()=>{n&&(h({name:"",email:"",phone:"",address:""}),d(!0))},[n]);const{data:g,isLoading:f,error:v}=ue({queryKey:["/api/customers",a],queryFn:()=>n||!a?Promise.resolve(void 0):fetch(`/api/customers/${a}`).then(D=>{if(!D.ok)throw new Error("Failed to fetch customer");return D.json()}),enabled:!n&&!!a}),y=Ae({mutationFn:async D=>await(await le("PATCH",`/api/customers/${a}`,D)).json(),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/customers",a]}),d(!1),i({title:"Customer updated",description:"Customer information has been updated successfully.",variant:"default"})},onError:D=>{i({title:"Update failed",description:D.message,variant:"destructive"})}}),j=Ae({mutationFn:async D=>await(await le("POST","/api/customers",D)).json(),onSuccess:D=>{l.invalidateQueries({queryKey:["/api/customers"]}),d(!1),i({title:"Customer created",description:"New customer has been created successfully.",variant:"default"}),o(`/customers/${D.id}`)},onError:D=>{i({title:"Creation failed",description:D.message,variant:"destructive"})}}),b=D=>{const{name:T,value:C}=D.target;h(E=>({...E,[T]:C}))},k=D=>{D.preventDefault(),a===void 0||isNaN(a)||!g?j.mutate(u):y.mutate(u)},S=()=>{g&&(h({name:g.name,email:g.email||"",phone:g.phone||"",address:g.address||""}),d(!0))};return f?e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):v?e.jsxs(hs,{variant:"destructive",className:"mb-4",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Error"}),e.jsx(ps,{children:v instanceof Error?v.message:"Failed to load customer information"})]}):n||!g&&!f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:n?"Create New Customer":"Customer Account"}),e.jsxs("div",{className:"flex gap-2",children:[!n&&e.jsx(P,{variant:"default",onClick:()=>o("/customers/new"),className:"text-white",children:"New Customer"}),e.jsx(P,{variant:"outline",onClick:()=>o("/customers"),children:"Back to Customers"})]})]}),!n&&e.jsxs(hs,{variant:"destructive",className:"mb-4",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Customer Not Found"}),e.jsx(ps,{children:'The requested customer information could not be found. You can create a new customer using the "New Customer" button above.'})]}),n&&e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Customer Information"}),e.jsx(ee,{children:"Enter the information for the new customer"})]}),e.jsx(H,{children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"name",children:"Full Name"}),e.jsx(q,{id:"name",name:"name",value:u.name||"",onChange:b,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"email",children:"Email Address"}),e.jsx(q,{id:"email",name:"email",type:"email",value:u.email||"",onChange:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"phone",children:"Phone Number"}),e.jsx(q,{id:"phone",name:"phone",value:u.phone||"",onChange:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"address",children:"Address"}),e.jsx(q,{id:"address",name:"address",value:u.address||"",onChange:b})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>o("/customers"),children:"Cancel"}),e.jsxs(P,{type:"submit",disabled:j.isPending,className:"text-white",children:[j.isPending&&e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Customer"]})]})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Customer Account"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"default",onClick:()=>o("/customers/new"),className:"text-white",children:"New Customer"}),e.jsx(P,{variant:"outline",onClick:()=>o("/customers"),children:"Back to Customers"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"text-2xl flex items-center",children:[e.jsx(oj,{className:"h-6 w-6 mr-2 text-primary"}),g==null?void 0:g.name]}),e.jsx(ee,{children:"Manage customer information"})]}),!c&&e.jsxs(P,{variant:"outline",onClick:S,children:[e.jsx(xi,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})}),e.jsx(H,{children:c?e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"name",children:"Full Name"}),e.jsx(q,{id:"name",name:"name",value:u.name||"",onChange:b,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"email",children:"Email Address"}),e.jsx(q,{id:"email",name:"email",type:"email",value:u.email||"",onChange:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"phone",children:"Phone Number"}),e.jsx(q,{id:"phone",name:"phone",value:u.phone||"",onChange:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"address",children:"Address"}),e.jsx(q,{id:"address",name:"address",value:u.address||"",onChange:b})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(P,{type:"submit",disabled:y.isPending,className:"text-white",children:[y.isPending&&e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(O,{className:"text-muted-foreground",children:"Full Name"}),e.jsx("div",{className:"text-lg",children:g==null?void 0:g.name})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(O,{className:"text-muted-foreground",children:"Email Address"}),e.jsx("div",{className:"text-lg",children:(g==null?void 0:g.email)||"Not provided"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(O,{className:"text-muted-foreground",children:"Phone Number"}),e.jsx("div",{className:"text-lg",children:(g==null?void 0:g.phone)||"Not provided"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(O,{className:"text-muted-foreground",children:"Address"}),e.jsx("div",{className:"text-lg",children:(g==null?void 0:g.address)||"Not provided"})]})]})})]}),e.jsxs(Bt,{value:m,onValueChange:x,className:"w-full",children:[e.jsxs(Lt,{className:"mb-4 grid grid-cols-3 md:w-auto md:grid-cols-6",children:[e.jsxs(ve,{value:"dashboard",className:"flex items-center",children:[e.jsx(P2,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),e.jsxs(ve,{value:"orders",className:"flex items-center",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Orders"]}),e.jsxs(ve,{value:"invoices",className:"flex items-center",children:[e.jsx(E2,{className:"h-4 w-4 mr-2"}),"Invoices"]}),e.jsxs(ve,{value:"activity",className:"flex items-center",children:[e.jsx(D2,{className:"h-4 w-4 mr-2"}),"Activity"]}),e.jsxs(ve,{value:"preferences",className:"flex items-center",children:[e.jsx(xi,{className:"h-4 w-4 mr-2"}),"Preferences"]}),e.jsxs(ve,{value:"payments",className:"flex items-center",children:[e.jsx(fi,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),e.jsx(Ee,{value:"dashboard",children:g&&a&&e.jsx(I4,{customerId:a})}),e.jsx(Ee,{value:"orders",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order History"}),e.jsx(ee,{children:"View and manage customer orders and their production status"})]}),e.jsx(H,{children:e.jsx("div",{className:"flex justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ma,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Orders Tab Under Development"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-md",children:"This tab will show a detailed list of all orders with production status, due dates, and other important details."}),e.jsx(P,{variant:"default",className:"mt-4 text-white",onClick:()=>{a&&o(`/pos?customerId=${a}`)},children:"Create New Order"})]})})})]})}),e.jsx(Ee,{value:"invoices",children:g&&a&&e.jsx(jN,{customerId:a})}),e.jsx(Ee,{value:"activity",children:g&&a&&e.jsx(V4,{customerId:a})}),e.jsx(Ee,{value:"preferences",children:g&&a&&e.jsx(L4,{customerId:a})}),e.jsx(Ee,{value:"payments",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Payment Methods"}),e.jsx(ee,{children:"Manage payment methods and billing information"})]}),e.jsx(H,{children:e.jsx("div",{className:"flex justify-center py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"Payments Tab Under Development"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-md",children:"This tab will show saved payment methods, billing preferences, and payment history."}),e.jsx(P,{variant:"outline",className:"mt-4",onClick:()=>x("dashboard"),children:"Return to Dashboard"})]})})})]})})]})]})]})}const H4=()=>{const{toast:s}=Be(),[t,r]=p.useState(""),[n,a]=p.useState(!1),[i,o]=Cs(),[l,c]=p.useState({name:"",email:"",phone:"",address:""}),{data:d,isLoading:u,isError:h}=ue({queryKey:["/api/customers"],staleTime:3e4}),m=Ae({mutationFn:async f=>(await le("POST","/api/customers",f)).json(),onSuccess:f=>{ut.invalidateQueries({queryKey:["/api/customers"]}),a(!1),c({name:"",email:"",phone:"",address:""}),s({title:"Customer Created",description:`Customer ${f.name} has been created successfully`})},onError:f=>{s({title:"Creation Failed",description:f.message||"Failed to create customer",variant:"destructive"})}}),x=f=>{if(f.preventDefault(),!l.name.trim()){s({title:"Validation Error",description:"Customer name is required",variant:"destructive"});return}m.mutate(l)},g=Array.isArray(d)?d.filter(f=>{const v=t.toLowerCase();return f.name.toLowerCase().includes(v)||f.email&&f.email.toLowerCase().includes(v)||f.phone&&f.phone.includes(t)}):[];return u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading customers..."})]})}):h?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"text-center text-red-600",children:e.jsx("p",{children:"Error loading customers. Please try again."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your customer database and contact information"})]}),e.jsxs(Yt,{open:n,onOpenChange:a,children:[e.jsx(yi,{asChild:!0,children:e.jsxs(P,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Add Customer"]})}),e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Add New Customer"}),e.jsx(bs,{children:"Create a new customer record for your framing business"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"name",children:"Full Name *"}),e.jsx(q,{id:"name",value:l.name,onChange:f=>c(v=>({...v,name:f.target.value})),placeholder:"Enter customer's full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",value:l.email,onChange:f=>c(v=>({...v,email:f.target.value})),placeholder:"customer@email.com"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone",children:"Phone"}),e.jsx(q,{id:"phone",value:l.phone,onChange:f=>c(v=>({...v,phone:f.target.value})),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"address",children:"Address"}),e.jsx(q,{id:"address",value:l.address,onChange:f=>c(v=>({...v,address:f.target.value})),placeholder:"123 Main St, City, State 12345"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(P,{type:"submit",disabled:m.isPending,children:m.isPending?"Creating...":"Create Customer"})]})]})]})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Customer List"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search customers...",value:t,onChange:f=>r(f.target.value),className:"pl-8"})]})})]}),e.jsx(H,{children:g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground",children:t?"No customers match your search.":"No customers found."}),!t&&e.jsxs(P,{className:"mt-4",onClick:()=>a(!0),children:[e.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Add Your First Customer"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Contact Info"}),e.jsx(de,{children:"Address"}),e.jsx(de,{children:"Created"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:g.map(f=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center text-sm font-medium",children:f.name.charAt(0).toUpperCase()}),e.jsx("span",{children:f.name})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-1",children:[f.email&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(hu,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:f.email})]}),f.phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(Us,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:f.phone})]})]})}),e.jsx(ie,{children:f.address&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx(gi,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"max-w-xs truncate",children:f.address})]})}),e.jsx(ie,{children:new Date(f.createdAt||"").toLocaleDateString()}),e.jsx(ie,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(`/customers/${f.id}`),children:[e.jsx(hi,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(`/customers/${f.id}`),children:[e.jsx(Ea,{className:"h-4 w-4 mr-1"}),"Edit"]})]})})]},f.id))})]})})})]})]})};function Qi({orderId:s,customerId:t}){const{toast:r}=Be(),n=ue({queryKey:["production-kanban"],queryFn:async()=>{var x;const h=await fetch("/api/orders");if(!h.ok)throw new Error("Failed to fetch orders for kanban board");const m=await h.json();return console.log(`Loaded ${((x=m.orders)==null?void 0:x.length)||0} orders from ${m.source||"unknown"} source`),m.orders||[]},refetchInterval:3e4,staleTime:1e4,retry:3,retryDelay:h=>Math.min(1e3*2**h,3e4)}),a=ue({queryKey:["/api/orders",s],queryFn:async()=>{if(!s)return null;const h=await fetch(`/api/orders/${s}`);if(!h.ok)throw new Error("Failed to fetch order");const m=await h.json();return m.order||m},enabled:!!s}),i=ue({queryKey:["/api/notifications/customer",t],queryFn:async()=>{if(!t)return[];const h=await fetch(`/api/notifications/customer/${t}`);if(!h.ok)throw new Error("Failed to fetch customer notifications");return h.json()},enabled:!!t}),o=ue({queryKey:["/api/notifications/order",s],queryFn:async()=>{if(!s)return[];const h=await fetch(`/api/notifications/order/${s}`);if(!h.ok)throw new Error("Failed to fetch order notifications");return h.json()},enabled:!!s}),l=h=>ue({queryKey:["/api/production/status",h],queryFn:async()=>{const m=await fetch(`/api/production/status/${h}`);if(!m.ok)throw new Error(`Failed to fetch orders with status ${h}`);return m.json()}}),c=Ae({mutationFn:async({id:h,status:m})=>(await le("PATCH",`/api/production/status/${h}`,{status:m})).json(),onSuccess:()=>{r({title:"Order status updated",description:"The order status has been successfully updated"}),ut.invalidateQueries({queryKey:["/api/production/kanban"]}),ut.invalidateQueries({queryKey:["/api/production/status"]}),ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/notifications/order"]})},onError:h=>{r({title:"Failed to update order status",description:h.message,variant:"destructive"})}}),d=Ae({mutationFn:async({id:h,estimatedDays:m})=>(await le("POST",`/api/production/schedule/${h}`,{estimatedDays:m})).json(),onSuccess:()=>{r({title:"Order scheduled",description:"The order has been scheduled for production"}),ut.invalidateQueries({queryKey:["/api/production/kanban"]}),ut.invalidateQueries({queryKey:["/api/production/status"]}),ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/notifications/order"]})},onError:h=>{r({title:"Failed to schedule order",description:h.message,variant:"destructive"})}}),u=Ae({mutationFn:async({id:h,enabled:m})=>(await le("PATCH",`/api/orders/${h}/notifications`,{enabled:m})).json(),onSuccess:(h,m)=>{r({title:"Notification preferences updated",description:`Email notifications have been ${m.enabled?"enabled":"disabled"} for this order`}),ut.invalidateQueries({queryKey:["/api/orders"]}),s&&ut.invalidateQueries({queryKey:["/api/orders",s]}),ut.invalidateQueries({queryKey:["/api/production/kanban"]})},onError:h=>{r({title:"Failed to update notification preferences",description:h.message,variant:"destructive"})}});return{orders:n.data,isLoadingOrders:n.isLoading,ordersError:n.error,order:a.data,isLoadingOrder:a.isLoading,orderError:a.error,customerNotifications:i.data||[],orderNotifications:o.data||[],isLoadingCustomerNotifications:i.isLoading,isLoadingOrderNotifications:o.isLoading,getOrdersByStatus:l,updateOrderStatus:c.mutate,scheduleOrder:d.mutate,toggleNotificationsMutation:u,isUpdating:c.isPending,isScheduling:d.isPending}}function kN(){const s=Qi({});return{orders:s.orders||[],isLoading:s.isLoadingOrders||!1,error:s.ordersError||null,useOrdersByStatus:s.getOrdersByStatus,updateOrderStatus:s.updateOrderStatus||(t=>console.warn("updateOrderStatus not available")),scheduleOrder:s.scheduleOrder||(t=>console.warn("scheduleOrder not available")),isUpdating:s.isUpdating||!1,isScheduling:s.isScheduling||!1}}function q4({order:s}){var a;const t=()=>{window.print()},r=()=>{const i=n(),o=new Blob([i],{type:"text/html"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`work-order-${s.orderNumber||s.id}.html`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},n=()=>{var i;return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Work Order - ${s.orderNumber||s.id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 20px; }
          .section { margin-bottom: 20px; }
          .label { font-weight: bold; }
          .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
          .artwork-image { max-width: 200px; max-height: 200px; border: 1px solid #ccc; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>JAY'S FRAMES - WORK ORDER</h1>
          <h2>Order #${s.orderNumber||s.id}</h2>
        </div>
        <div class="grid">
          <div>
            <div class="section">
              <div class="label">Customer:</div>
              <div>${s.customerName}</div>
            </div>
            <div class="section">
              <div class="label">Artwork Dimensions:</div>
              <div>${s.artworkWidth}"  ${s.artworkHeight}"</div>
            </div>
            <div class="section">
              <div class="label">Artwork Description:</div>
              <div>${s.artworkDescription||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Artwork Type:</div>
              <div>${s.artworkType||"N/A"}</div>
            </div>
          </div>
          <div>
            <div class="section">
              <div class="label">Frame:</div>
              <div>${s.frameName||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Mat:</div>
              <div>${s.matDescription||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Glass:</div>
              <div>${s.glassType||"N/A"}</div>
            </div>
            <div class="section">
              <div class="label">Special Services:</div>
              <div>${((i=s.specialServices)==null?void 0:i.join(", "))||"None"}</div>
            </div>
          </div>
        </div>
        ${s.artworkImage?`
          <div class="section">
            <div class="label">Artwork Reference:</div>
            <img src="${s.artworkImage}" alt="Artwork" class="artwork-image" />
          </div>
        `:""}
        <div class="section">
          <div class="label">Due Date:</div>
          <div>${s.dueDate?new Date(s.dueDate).toLocaleDateString():"Not set"}</div>
        </div>
        <div class="section">
          <div class="label">Order Total:</div>
          <div style="font-size: 18px; font-weight: bold;">${Pn(parseFloat(s.total))}</div>
        </div>
        <div class="section">
          <div class="label">Production Notes:</div>
          <div style="height: 100px; border: 1px solid #ccc; margin-top: 5px;"></div>
        </div>
        <div class="section">
          <div class="label">Quality Check:</div>
          <div style="margin-top: 10px;">
             Frame cut and assembled<br/>
             Mat cut and beveled<br/>
             Glass cut and cleaned<br/>
             Artwork mounted<br/>
             Hardware attached<br/>
             Final inspection<br/>
             Ready for pickup
          </div>
        </div>
      </body>
      </html>
    `};return e.jsxs(V,{className:"max-w-4xl mx-auto",children:[e.jsxs(K,{className:"text-center border-b",children:[e.jsx(G,{className:"text-2xl font-bold",children:"JAY'S FRAMES - WORK ORDER"}),e.jsxs("div",{className:"text-xl font-semibold",children:["Order #",s.orderNumber||s.id]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(P,{onClick:t,variant:"outline",size:"sm",children:[e.jsx(Lo,{className:"w-4 h-4 mr-2"}),"Print"]}),e.jsxs(P,{onClick:r,variant:"outline",size:"sm",children:[e.jsx(mn,{className:"w-4 h-4 mr-2"}),"Download"]})]})]}),e.jsxs(H,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Customer"}),e.jsx("div",{className:"text-lg",children:s.customerName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Artwork Dimensions"}),e.jsxs("div",{className:"text-lg",children:[s.artworkWidth,'"  ',s.artworkHeight,'"']})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Artwork Description"}),e.jsx("div",{children:s.artworkDescription||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Artwork Type"}),e.jsx("div",{children:s.artworkType||"N/A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Frame"}),e.jsx("div",{children:s.frameName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Mat"}),e.jsx("div",{children:s.matDescription||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Glass"}),e.jsx("div",{children:s.glassType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Special Services"}),e.jsx("div",{children:((a=s.specialServices)==null?void 0:a.join(", "))||"None"})]})]})]}),s.artworkImage&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600 mb-2",children:"Artwork Reference"}),e.jsx("img",{src:s.artworkImage,alt:"Artwork",className:"max-w-xs max-h-48 border border-gray-300 rounded"})]}),e.jsx(Ot,{className:"my-6"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Due Date"}),e.jsx("div",{className:"text-lg",children:s.dueDate?new Date(s.dueDate).toLocaleDateString():"Not set"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600",children:"Order Total"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Pn(parseFloat(s.total))})]})]}),e.jsx(Ot,{className:"my-6"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600 mb-2",children:"Production Notes"}),e.jsx("div",{className:"h-24 border border-gray-300 rounded p-2 bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-600 mb-3",children:"Quality Checklist"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"frame-cut"}),e.jsx("label",{htmlFor:"frame-cut",children:"Frame cut and assembled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"mat-cut"}),e.jsx("label",{htmlFor:"mat-cut",children:"Mat cut and beveled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"glass-cut"}),e.jsx("label",{htmlFor:"glass-cut",children:"Glass cut and cleaned"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"artwork-mounted"}),e.jsx("label",{htmlFor:"artwork-mounted",children:"Artwork mounted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hardware"}),e.jsx("label",{htmlFor:"hardware",children:"Hardware attached"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"inspection"}),e.jsx("label",{htmlFor:"inspection",children:"Final inspection"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ready"}),e.jsx("label",{htmlFor:"ready",children:"Ready for pickup"})]})]})]})]})]})}const TN=p.createContext({dragDropManager:void 0});function Ds(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var qh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yc=function(){return Math.random().toString(36).substring(7).split("").join(".")},zh={INIT:"@@redux/INIT"+yc(),REPLACE:"@@redux/REPLACE"+yc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+yc()}};function z4(s){if(typeof s!="object"||s===null)return!1;for(var t=s;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t}function PN(s,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ds(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ds(1));return r(PN)(s,t)}if(typeof s!="function")throw new Error(Ds(2));var a=s,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(Ds(3));return i}function h(f){if(typeof f!="function")throw new Error(Ds(4));if(c)throw new Error(Ds(5));var v=!0;return d(),l.push(f),function(){if(v){if(c)throw new Error(Ds(6));v=!1,d();var j=l.indexOf(f);l.splice(j,1),o=null}}}function m(f){if(!z4(f))throw new Error(Ds(7));if(typeof f.type>"u")throw new Error(Ds(8));if(c)throw new Error(Ds(9));try{c=!0,i=a(i,f)}finally{c=!1}for(var v=o=l,y=0;y<v.length;y++){var j=v[y];j()}return f}function x(f){if(typeof f!="function")throw new Error(Ds(10));a=f,m({type:zh.REPLACE})}function g(){var f,v=h;return f={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(Ds(11));function b(){j.next&&j.next(u())}b();var k=v(b);return{unsubscribe:k}}},f[qh]=function(){return this},f}return m({type:zh.INIT}),n={dispatch:m,subscribe:h,getState:u,replaceReducer:x},n[qh]=g,n}function Me(s,t,...r){if(W4()&&t===void 0)throw new Error("invariant requires an error message argument");if(!s){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;n=new Error(t.replace(/%s/g,function(){return r[a++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function W4(){return typeof process<"u"&&!0}function K4(s,t,r){return t.split(".").reduce((n,a)=>n&&n[a]?n[a]:r||null,s)}function G4(s,t){return s.filter(r=>r!==t)}function EN(s){return typeof s=="object"}function Q4(s,t){const r=new Map,n=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};s.forEach(n),t.forEach(n);const a=[];return r.forEach((i,o)=>{i===1&&a.push(o)}),a}function Z4(s,t){return s.filter(r=>t.indexOf(r)>-1)}const Vu="dnd-core/INIT_COORDS",Ml="dnd-core/BEGIN_DRAG",Uu="dnd-core/PUBLISH_DRAG_SOURCE",Fl="dnd-core/HOVER",Ll="dnd-core/DROP",$l="dnd-core/END_DRAG";function Wh(s,t){return{type:Vu,payload:{sourceClientOffset:t||null,clientOffset:s||null}}}const Y4={type:Vu,payload:{clientOffset:null,sourceClientOffset:null}};function X4(s){return function(r=[],n={publishSource:!0}){const{publishSource:a=!0,clientOffset:i,getSourceClientOffset:o}=n,l=s.getMonitor(),c=s.getRegistry();s.dispatch(Wh(i)),J4(r,l,c);const d=sI(r,l);if(d==null){s.dispatch(Y4);return}let u=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");eI(o),u=o(d)}s.dispatch(Wh(i,u));const m=c.getSource(d).beginDrag(l,d);if(m==null)return;tI(m),c.pinSource(d);const x=c.getSourceType(d);return{type:Ml,payload:{itemType:x,item:m,sourceId:d,clientOffset:i||null,sourceClientOffset:u||null,isSourcePublic:!!a}}}}function J4(s,t,r){Me(!t.isDragging(),"Cannot call beginDrag while dragging."),s.forEach(function(n){Me(r.getSource(n),"Expected sourceIds to be registered.")})}function eI(s){Me(typeof s=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function tI(s){Me(EN(s),"Item must be an object.")}function sI(s,t){let r=null;for(let n=s.length-1;n>=0;n--)if(t.canDragSource(s[n])){r=s[n];break}return r}function rI(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function nI(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){rI(s,a,r[a])})}return s}function aI(s){return function(r={}){const n=s.getMonitor(),a=s.getRegistry();iI(n),cI(n).forEach((o,l)=>{const c=oI(o,l,a,n),d={type:Ll,payload:{dropResult:nI({},r,c)}};s.dispatch(d)})}}function iI(s){Me(s.isDragging(),"Cannot call drop while not dragging."),Me(!s.didDrop(),"Cannot call drop twice during one drag operation.")}function oI(s,t,r,n){const a=r.getTarget(s);let i=a?a.drop(n,s):void 0;return lI(i),typeof i>"u"&&(i=t===0?{}:n.getDropResult()),i}function lI(s){Me(typeof s>"u"||EN(s),"Drop result must either be an object or undefined.")}function cI(s){const t=s.getTargetIds().filter(s.canDropOnTarget,s);return t.reverse(),t}function dI(s){return function(){const r=s.getMonitor(),n=s.getRegistry();uI(r);const a=r.getSourceId();return a!=null&&(n.getSource(a,!0).endDrag(r,a),n.unpinSource()),{type:$l}}}function uI(s){Me(s.isDragging(),"Cannot call endDrag while not dragging.")}function gd(s,t){return t===null?s===null:Array.isArray(s)?s.some(r=>r===t):s===t}function mI(s){return function(r,{clientOffset:n}={}){hI(r);const a=r.slice(0),i=s.getMonitor(),o=s.getRegistry(),l=i.getItemType();return fI(a,o,l),pI(a,i,o),xI(a,i,o),{type:Fl,payload:{targetIds:a,clientOffset:n||null}}}}function hI(s){Me(Array.isArray(s),"Expected targetIds to be an array.")}function pI(s,t,r){Me(t.isDragging(),"Cannot call hover while not dragging."),Me(!t.didDrop(),"Cannot call hover after drop.");for(let n=0;n<s.length;n++){const a=s[n];Me(s.lastIndexOf(a)===n,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(a);Me(i,"Expected targetIds to be registered.")}}function fI(s,t,r){for(let n=s.length-1;n>=0;n--){const a=s[n],i=t.getTargetType(a);gd(i,r)||s.splice(n,1)}}function xI(s,t,r){s.forEach(function(n){r.getTarget(n).hover(t,n)})}function gI(s){return function(){if(s.getMonitor().isDragging())return{type:Uu}}}function vI(s){return{beginDrag:X4(s),publishDragSource:gI(s),hover:mI(s),drop:aI(s),endDrag:dI(s)}}class yI{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:r}=this.store;function n(i){return(...o)=>{const l=i.apply(t,o);typeof l<"u"&&r(l)}}const a=vI(this);return Object.keys(a).reduce((i,o)=>{const l=a[o];return i[o]=n(l),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}}function jI(s,t){return{x:s.x+t.x,y:s.y+t.y}}function DN(s,t){return{x:s.x-t.x,y:s.y-t.y}}function bI(s){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=s;return!t||!r||!n?null:DN(jI(t,n),r)}function wI(s){const{clientOffset:t,initialClientOffset:r}=s;return!t||!r?null:DN(t,r)}const ci=[],Hu=[];ci.__IS_NONE__=!0;Hu.__IS_ALL__=!0;function NI(s,t){return s===ci?!1:s===Hu||typeof t>"u"?!0:Z4(t,s).length>0}class SI{subscribeToStateChange(t,r={}){const{handlerIds:n}=r;Me(typeof t=="function","listener must be a function."),Me(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),l=o.stateId;try{l===a||l===a+1&&!NI(o.dirtyHandlerIds,n)||t()}finally{a=l}};return this.store.subscribe(i)}subscribeToOffsetChange(t){Me(typeof t=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const a=this.store.getState().dragOffset;a!==r&&(r=a,t())};return this.store.subscribe(n)}canDragSource(t){if(!t)return!1;const r=this.registry.getSource(t);return Me(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const r=this.registry.getTarget(t);if(Me(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(t),a=this.getItemType();return gd(n,a)&&r.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const r=this.registry.getSource(t,!0);if(Me(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(t),a=this.getItemType();return n!==a?!1:r.isDragging(this,t)}isOverTarget(t,r={shallow:!1}){if(!t)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const a=this.registry.getTargetType(t),i=this.getItemType();if(i&&!gd(a,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(t);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return bI(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return wI(this.store.getState().dragOffset)}constructor(t,r){this.store=t,this.registry=r}}const Kh=typeof global<"u"?global:self,AN=Kh.MutationObserver||Kh.WebKitMutationObserver;function IN(s){return function(){const r=setTimeout(a,0),n=setInterval(a,50);function a(){clearTimeout(r),clearInterval(n),s()}}}function CI(s){let t=1;const r=new AN(s),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const kI=typeof AN=="function"?CI:IN;class TI{enqueueTask(t){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,a=t.length-this.index;n<a;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=kI(this.flush),this.requestErrorThrow=IN(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class PI{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}}class EI{create(t){const r=this.freeTasks,n=r.length?r.pop():new PI(this.onError,a=>r[r.length]=a);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}}const _N=new TI,DI=new EI(_N.registerPendingError);function AI(s){_N.enqueueTask(DI.create(s))}const qu="dnd-core/ADD_SOURCE",zu="dnd-core/ADD_TARGET",Wu="dnd-core/REMOVE_SOURCE",Bl="dnd-core/REMOVE_TARGET";function II(s){return{type:qu,payload:{sourceId:s}}}function _I(s){return{type:zu,payload:{targetId:s}}}function RI(s){return{type:Wu,payload:{sourceId:s}}}function OI(s){return{type:Bl,payload:{targetId:s}}}function MI(s){Me(typeof s.canDrag=="function","Expected canDrag to be a function."),Me(typeof s.beginDrag=="function","Expected beginDrag to be a function."),Me(typeof s.endDrag=="function","Expected endDrag to be a function.")}function FI(s){Me(typeof s.canDrop=="function","Expected canDrop to be a function."),Me(typeof s.hover=="function","Expected hover to be a function."),Me(typeof s.drop=="function","Expected beginDrag to be a function.")}function vd(s,t){if(t&&Array.isArray(s)){s.forEach(r=>vd(r,!1));return}Me(typeof s=="string"||typeof s=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Os;(function(s){s.SOURCE="SOURCE",s.TARGET="TARGET"})(Os||(Os={}));let LI=0;function $I(){return LI++}function BI(s){const t=$I().toString();switch(s){case Os.SOURCE:return`S${t}`;case Os.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${s}`)}}function Gh(s){switch(s[0]){case"S":return Os.SOURCE;case"T":return Os.TARGET;default:throw new Error(`Cannot parse handler ID: ${s}`)}}function Qh(s,t){const r=s.entries();let n=!1;do{const{done:a,value:[,i]}=r.next();if(i===t)return!0;n=!!a}while(!n);return!1}class VI{addSource(t,r){vd(t),MI(r);const n=this.addHandler(Os.SOURCE,t,r);return this.store.dispatch(II(n)),n}addTarget(t,r){vd(t,!0),FI(r);const n=this.addHandler(Os.TARGET,t,r);return this.store.dispatch(_I(n)),n}containsHandler(t){return Qh(this.dragSources,t)||Qh(this.dropTargets,t)}getSource(t,r=!1){return Me(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return Me(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return Me(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return Me(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return Gh(t)===Os.SOURCE}isTargetId(t){return Gh(t)===Os.TARGET}removeSource(t){Me(this.getSource(t),"Expected an existing source."),this.store.dispatch(RI(t)),AI(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){Me(this.getTarget(t),"Expected an existing target."),this.store.dispatch(OI(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const r=this.getSource(t);Me(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}unpinSource(){Me(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,r,n){const a=BI(t);return this.types.set(a,r),t===Os.SOURCE?this.dragSources.set(a,n):t===Os.TARGET&&this.dropTargets.set(a,n),a}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const UI=(s,t)=>s===t;function HI(s,t){return!s&&!t?!0:!s||!t?!1:s.x===t.x&&s.y===t.y}function qI(s,t,r=UI){if(s.length!==t.length)return!1;for(let n=0;n<s.length;++n)if(!r(s[n],t[n]))return!1;return!0}function zI(s=ci,t){switch(t.type){case Fl:break;case qu:case zu:case Bl:case Wu:return ci;case Ml:case Uu:case $l:case Ll:default:return Hu}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,a=Q4(r,n);if(!(a.length>0||!qI(r,n)))return ci;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&a.push(o),l&&a.push(l)),a}function WI(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function KI(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){WI(s,a,r[a])})}return s}const Zh={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function GI(s=Zh,t){const{payload:r}=t;switch(t.type){case Vu:case Ml:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Fl:return HI(s.clientOffset,r.clientOffset)?s:KI({},s,{clientOffset:r.clientOffset});case $l:case Ll:return Zh;default:return s}}function QI(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function zn(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){QI(s,a,r[a])})}return s}const ZI={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function YI(s=ZI,t){const{payload:r}=t;switch(t.type){case Ml:return zn({},s,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Uu:return zn({},s,{isSourcePublic:!0});case Fl:return zn({},s,{targetIds:r.targetIds});case Bl:return s.targetIds.indexOf(r.targetId)===-1?s:zn({},s,{targetIds:G4(s.targetIds,r.targetId)});case Ll:return zn({},s,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case $l:return zn({},s,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return s}}function XI(s=0,t){switch(t.type){case qu:case zu:return s+1;case Wu:case Bl:return s-1;default:return s}}function JI(s=0){return s+1}function e_(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function t_(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){e_(s,a,r[a])})}return s}function s_(s={},t){return{dirtyHandlerIds:zI(s.dirtyHandlerIds,{type:t.type,payload:t_({},t.payload,{prevTargetIds:K4(s,"dragOperation.targetIds",[])})}),dragOffset:GI(s.dragOffset,t),refCount:XI(s.refCount,t),dragOperation:YI(s.dragOperation,t),stateId:JI(s.stateId)}}function r_(s,t=void 0,r={},n=!1){const a=n_(n),i=new SI(a,new VI(a)),o=new yI(a,i),l=s(o,t,r);return o.receiveBackend(l),o}function n_(s){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return PN(s_,s&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function a_(s,t){if(s==null)return{};var r=i_(s,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(r[n]=s[n])}return r}function i_(s,t){if(s==null)return{};var r={},n=Object.keys(s),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=s[a]);return r}let Yh=0;const Do=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var o_=p.memo(function(t){var{children:r}=t,n=a_(t,["children"]);const[a,i]=l_(n);return p.useEffect(()=>{if(i){const o=RN();return++Yh,()=>{--Yh===0&&(o[Do]=null)}}},[]),e.jsx(TN.Provider,{value:a,children:r})});function l_(s){if("manager"in s)return[{dragDropManager:s.manager},!1];const t=c_(s.backend,s.context,s.options,s.debugMode),r=!s.context;return[t,r]}function c_(s,t=RN(),r,n){const a=t;return a[Do]||(a[Do]={dragDropManager:r_(s,t,r,n)}),a[Do]}function RN(){return typeof global<"u"?global:window}var d_=function s(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!s(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var o=i[a];if(!s(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const u_=h2(d_),An=typeof window<"u"?p.useLayoutEffect:p.useEffect;function m_(s,t,r){const[n,a]=p.useState(()=>t(s)),i=p.useCallback(()=>{const o=t(s);u_(n,o)||(a(o),r&&r())},[n,s,r]);return An(i),[n,i]}function h_(s,t,r){const[n,a]=m_(s,t,r);return An(function(){const o=s.getHandlerId();if(o!=null)return s.subscribeToStateChange(a,{handlerIds:[o]})},[s,a]),n}function ON(s,t,r){return h_(t,s||(()=>({})),()=>r.reconnect())}function MN(s,t){const r=[];return typeof s!="function"&&r.push(s),p.useMemo(()=>typeof s=="function"?s():s,r)}function p_(s){return p.useMemo(()=>s.hooks.dragSource(),[s])}function f_(s){return p.useMemo(()=>s.hooks.dragPreview(),[s])}let jc=!1,bc=!1;class x_{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){Me(!jc,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return jc=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{jc=!1}}isDragging(){if(!this.sourceId)return!1;Me(!bc,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return bc=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{bc=!1}}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,r){return this.internalMonitor.isOverTarget(t,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let wc=!1;class g_{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}canDrop(){if(!this.targetId)return!1;Me(!wc,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return wc=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{wc=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function v_(s,t,r){const n=r.getRegistry(),a=n.addTarget(s,t);return[a,()=>n.removeTarget(a)]}function y_(s,t,r){const n=r.getRegistry(),a=n.addSource(s,t);return[a,()=>n.removeSource(a)]}function yd(s,t,r,n){let a;if(a!==void 0)return!!a;if(s===t)return!0;if(typeof s!="object"||!s||typeof t!="object"||!t)return!1;const i=Object.keys(s),o=Object.keys(t);if(i.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const d=i[c];if(!l(d))return!1;const u=s[d],h=t[d];if(a=void 0,a===!1||a===void 0&&u!==h)return!1}return!0}function jd(s){return s!==null&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function j_(s){if(typeof s.type=="string")return;const t=s.type.displayName||s.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function b_(s){return(t=null,r=null)=>{if(!p.isValidElement(t)){const i=t;return s(i,r),i}const n=t;return j_(n),w_(n,r?i=>s(i,r):s)}}function FN(s){const t={};return Object.keys(s).forEach(r=>{const n=s[r];if(r.endsWith("Ref"))t[r]=s[r];else{const a=b_(n);t[r]=()=>a}}),t}function Xh(s,t){typeof s=="function"?s(t):s.current=t}function w_(s,t){const r=s.ref;return Me(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?p.cloneElement(s,{ref:n=>{Xh(r,n),Xh(t,n)}}):p.cloneElement(s,{ref:t})}class N_{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?t?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),r):(this.lastConnectedDragSource=t,r):r}reconnectDragPreview(t=!1){const r=this.dragPreview,n=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!yd(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!yd(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=FN({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,jd(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,jd(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class S_{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!yd(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=FN({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,jd(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Ra(){const{dragDropManager:s}=p.useContext(TN);return Me(s!=null,"Expected drag drop context"),s}function C_(s,t){const r=Ra(),n=p.useMemo(()=>new N_(r.getBackend()),[r]);return An(()=>(n.dragSourceOptions=s||null,n.reconnect(),()=>n.disconnectDragSource()),[n,s]),An(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}function k_(){const s=Ra();return p.useMemo(()=>new x_(s),[s])}class T_{beginDrag(){const t=this.spec,r=this.monitor;let n=null;return typeof t.item=="object"?n=t.item:typeof t.item=="function"?n=t.item(r):n={},n??null}canDrag(){const t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}isDragging(t,r){const n=this.spec,a=this.monitor,{isDragging:i}=n;return i?i(a):r===t.getSourceId()}endDrag(){const t=this.spec,r=this.monitor,n=this.connector,{end:a}=t;a&&a(r.getItem(),r),n.reconnect()}constructor(t,r,n){this.spec=t,this.monitor=r,this.connector=n}}function P_(s,t,r){const n=p.useMemo(()=>new T_(s,t,r),[t,r]);return p.useEffect(()=>{n.spec=s},[s]),n}function E_(s){return p.useMemo(()=>{const t=s.type;return Me(t!=null,"spec.type must be defined"),t},[s])}function D_(s,t,r){const n=Ra(),a=P_(s,t,r),i=E_(s);An(function(){if(i!=null){const[l,c]=y_(i,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c}},[n,t,r,a,i])}function A_(s,t){const r=MN(s);Me(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=k_(),a=C_(r.options,r.previewOptions);return D_(r,n,a),[ON(r.collect,n,a),p_(a),f_(a)]}function I_(s){return p.useMemo(()=>s.hooks.dropTarget(),[s])}function __(s){const t=Ra(),r=p.useMemo(()=>new S_(t.getBackend()),[t]);return An(()=>(r.dropTargetOptions=s||null,r.reconnect(),()=>r.disconnectDropTarget()),[s]),r}function R_(){const s=Ra();return p.useMemo(()=>new g_(s),[s])}function O_(s){const{accept:t}=s;return p.useMemo(()=>(Me(s.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class M_{canDrop(){const t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}hover(){const t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}drop(){const t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}constructor(t,r){this.spec=t,this.monitor=r}}function F_(s,t){const r=p.useMemo(()=>new M_(s,t),[t]);return p.useEffect(()=>{r.spec=s},[s]),r}function L_(s,t,r){const n=Ra(),a=F_(s,t),i=O_(s);An(function(){const[l,c]=v_(i,a,n);return t.receiveHandlerId(l),r.receiveHandlerId(l),c},[n,t,a,r,i.map(o=>o.toString()).join("|")])}function $_(s,t){const r=MN(s),n=R_(),a=__(r.options);return L_(r,n,a),[ON(r.collect,n,a),I_(a)]}function LN(s){let t=null;return()=>(t==null&&(t=s()),t)}function B_(s,t){return s.filter(r=>r!==t)}function V_(s,t){const r=new Set,n=i=>r.add(i);s.forEach(n),t.forEach(n);const a=[];return r.forEach(i=>a.push(i)),a}class U_{enter(t){const r=this.entered.length,n=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(t));return this.entered=V_(this.entered.filter(n),[t]),r===0&&this.entered.length>0}leave(t){const r=this.entered.length;return this.entered=B_(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class H_{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const a=this.config.exposeProperties[n];a!=null&&(r[n]={value:a(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,r){return r===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const $N="__NATIVE_FILE__",BN="__NATIVE_URL__",VN="__NATIVE_TEXT__",UN="__NATIVE_HTML__",Jh=Object.freeze(Object.defineProperty({__proto__:null,FILE:$N,HTML:UN,TEXT:VN,URL:BN},Symbol.toStringTag,{value:"Module"}));function Nc(s,t,r){const n=t.reduce((a,i)=>a||s.getData(i),"");return n??r}const bd={[$N]:{exposeProperties:{files:s=>Array.prototype.slice.call(s.files),items:s=>s.items,dataTransfer:s=>s},matchesTypes:["Files"]},[UN]:{exposeProperties:{html:(s,t)=>Nc(s,t,""),dataTransfer:s=>s},matchesTypes:["Html","text/html"]},[BN]:{exposeProperties:{urls:(s,t)=>Nc(s,t,"").split(`
`),dataTransfer:s=>s},matchesTypes:["Url","text/uri-list"]},[VN]:{exposeProperties:{text:(s,t)=>Nc(s,t,""),dataTransfer:s=>s},matchesTypes:["Text","text/plain"]}};function q_(s,t){const r=bd[s];if(!r)throw new Error(`native type ${s} has no configuration`);const n=new H_(r);return n.loadDataTransfer(t),n}function Sc(s){if(!s)return null;const t=Array.prototype.slice.call(s.types||[]);return Object.keys(bd).filter(r=>{const n=bd[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(a=>t.indexOf(a)>-1):!1})[0]||null}const z_=LN(()=>/firefox/i.test(navigator.userAgent)),HN=LN(()=>!!window.safari);class ep{interpolate(t){const{xs:r,ys:n,c1s:a,c2s:i,c3s:o}=this;let l=r.length-1;if(t===r[l])return n[l];let c=0,d=o.length-1,u;for(;c<=d;){u=Math.floor(.5*(c+d));const x=r[u];if(x<t)c=u+1;else if(x>t)d=u-1;else return n[u]}l=Math.max(0,d);const h=t-r[l],m=h*h;return n[l]+a[l]*h+i[l]*m+o[l]*h*m}constructor(t,r){const{length:n}=t,a=[];for(let x=0;x<n;x++)a.push(x);a.sort((x,g)=>t[x]<t[g]?-1:1);const i=[],o=[];let l,c;for(let x=0;x<n-1;x++)l=t[x+1]-t[x],c=r[x+1]-r[x],i.push(l),o.push(c/l);const d=[o[0]];for(let x=0;x<i.length-1;x++){const g=o[x],f=o[x+1];if(g*f<=0)d.push(0);else{l=i[x];const v=i[x+1],y=l+v;d.push(3*y/((y+v)/g+(y+l)/f))}}d.push(o[o.length-1]);const u=[],h=[];let m;for(let x=0;x<d.length-1;x++){m=o[x];const g=d[x],f=1/i[x],v=g+d[x+1]-m-m;u.push((m-g-v)*f),h.push(v*f*f)}this.xs=t,this.ys=r,this.c1s=d,this.c2s=u,this.c3s=h}}const W_=1;function qN(s){const t=s.nodeType===W_?s:s.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function xo(s){return{x:s.clientX,y:s.clientY}}function K_(s){var t;return s.nodeName==="IMG"&&(z_()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(s)))}function G_(s,t,r,n){let a=s?t.width:r,i=s?t.height:n;return HN()&&s&&(i/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:i}}function Q_(s,t,r,n,a){const i=K_(t),l=qN(i?s:t),c={x:r.x-l.x,y:r.y-l.y},{offsetWidth:d,offsetHeight:u}=s,{anchorX:h,anchorY:m}=n,{dragPreviewWidth:x,dragPreviewHeight:g}=G_(i,t,d,u),f=()=>{let D=new ep([0,.5,1],[c.y,c.y/u*g,c.y+g-u]).interpolate(m);return HN()&&i&&(D+=(window.devicePixelRatio-1)*g),D},v=()=>new ep([0,.5,1],[c.x,c.x/d*x,c.x+x-d]).interpolate(h),{offsetX:y,offsetY:j}=a,b=y===0||y,k=j===0||j;return{x:b?y:v(),y:k?j:f()}}class Z_{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,r){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=r}}function Y_(s,t,r){return t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function tp(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable}))),n.forEach(function(a){Y_(s,a,r[a])})}return s}class X_{profile(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,r,n){this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);const a=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(t,r){const n=o=>this.handleDragEnter(o,t),a=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return r.addEventListener("dragenter",n),r.addEventListener("dragover",a),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",a),r.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return tp({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(t);return tp({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(Jh).some(r=>Jh[r]===t)}beginDragNativeItem(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=q_(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(t,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(t,r){this.dropTargetIds.unshift(r)}constructor(t,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const i=this.sourceNodes.get(a);return i&&qN(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=xo(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=a,c=Sc(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const u=this.monitor.getSourceId(),h=this.sourceNodes.get(u),m=this.sourcePreviewNodes.get(u)||h;if(m){const{anchorX:x,anchorY:g,offsetX:f,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),b=Q_(h,m,o,{anchorX:x,anchorY:g},{offsetX:f,offsetY:v});l.setDragImage(m,b.x,b.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:l}=a,c=Sc(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,i.length>0&&this.actions.hover(i,{clientOffset:xo(a)}),i.some(l=>this.monitor.canDropOnTarget(l))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=xo(a),this.scheduleHover(i),(i||[]).some(l=>this.monitor.canDropOnTarget(l))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;a.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(a.dataTransfer)}else Sc(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:xo(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const i=a.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(a.preventDefault(),i.dragDrop()))},this.options=new Z_(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new U_(this.isNodeInDocument)}}const J_=function(t,r,n){return new X_(t,r,n)};function eR(){const{toast:s}=Be(),t=ue({queryKey:["/api/orders"],queryFn:async()=>{const i=await fetch("/api/orders");if(!i.ok)throw new Error("Failed to fetch orders");const o=await i.json();return console.log("Orders API response:",o),o.orders||o||[]}}),r=i=>ue({queryKey:["/api/orders",i],queryFn:async()=>{const o=await fetch(`/api/orders/${i}`);if(!o.ok)throw new Error("Failed to fetch order");return o.json()},enabled:!!i}),n=Ae({mutationFn:async i=>await le("POST","/api/orders",i),onSuccess:i=>{var o;s({title:"Order created successfully! ",description:`Order #${((o=i.order)==null?void 0:o.id)||i.orderId} has been created`}),ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/production/kanban"]}),ut.invalidateQueries({queryKey:["/api/order-groups"]}),ut.refetchQueries({queryKey:["/api/orders"]})},onError:i=>{s({title:"Failed to create order",description:i.message,variant:"destructive"})}}),a=Ae({mutationFn:async({id:i,data:o,recalculatePricing:l=!0})=>await le("PATCH",`/api/orders/${i}`,{...o,recalculatePricing:l}),onSuccess:()=>{s({title:"Order updated",description:"The order has been successfully updated"}),ut.invalidateQueries({queryKey:["/api/orders"]}),ut.invalidateQueries({queryKey:["/api/production/kanban"]}),ut.invalidateQueries({queryKey:["/api/materials/pick-list"]}),ut.invalidateQueries({queryKey:["/api/order-groups"]})},onError:i=>{s({title:"Failed to update order",description:i.message,variant:"destructive"})}});return{orders:t.data,isLoading:t.isLoading,error:t.error,getOrder:r,createOrder:n.mutate,createOrderAsync:n.mutateAsync,isCreatingOrder:n.isPending,updateOrder:a.mutate,isUpdatingOrder:a.isPending}}function zN(s,t){return function(){return s.apply(t,arguments)}}const{toString:tR}=Object.prototype,{getPrototypeOf:Ku}=Object,Vl=(s=>t=>{const r=tR.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ys=s=>(s=s.toLowerCase(),t=>Vl(t)===s),Ul=s=>t=>typeof t===s,{isArray:Oa}=Array,bi=Ul("undefined");function sR(s){return s!==null&&!bi(s)&&s.constructor!==null&&!bi(s.constructor)&&ws(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const WN=Ys("ArrayBuffer");function rR(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&WN(s.buffer),t}const nR=Ul("string"),ws=Ul("function"),KN=Ul("number"),Hl=s=>s!==null&&typeof s=="object",aR=s=>s===!0||s===!1,Ao=s=>{if(Vl(s)!=="object")return!1;const t=Ku(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},iR=Ys("Date"),oR=Ys("File"),lR=Ys("Blob"),cR=Ys("FileList"),dR=s=>Hl(s)&&ws(s.pipe),uR=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||ws(s.append)&&((t=Vl(s))==="formdata"||t==="object"&&ws(s.toString)&&s.toString()==="[object FormData]"))},mR=Ys("URLSearchParams"),[hR,pR,fR,xR]=["ReadableStream","Request","Response","Headers"].map(Ys),gR=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zi(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let n,a;if(typeof s!="object"&&(s=[s]),Oa(s))for(n=0,a=s.length;n<a;n++)t.call(null,s[n],n,s);else{const i=r?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,s[l],l,s)}}function GN(s,t){t=t.toLowerCase();const r=Object.keys(s);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const pn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QN=s=>!bi(s)&&s!==pn;function wd(){const{caseless:s}=QN(this)&&this||{},t={},r=(n,a)=>{const i=s&&GN(t,a)||a;Ao(t[i])&&Ao(n)?t[i]=wd(t[i],n):Ao(n)?t[i]=wd({},n):Oa(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Zi(arguments[n],r);return t}const vR=(s,t,r,{allOwnKeys:n}={})=>(Zi(t,(a,i)=>{r&&ws(a)?s[i]=zN(a,r):s[i]=a},{allOwnKeys:n}),s),yR=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),jR=(s,t,r,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},bR=(s,t,r,n)=>{let a,i,o;const l={};if(t=t||{},s==null)return t;do{for(a=Object.getOwnPropertyNames(s),i=a.length;i-- >0;)o=a[i],(!n||n(o,s,t))&&!l[o]&&(t[o]=s[o],l[o]=!0);s=r!==!1&&Ku(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},wR=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const n=s.indexOf(t,r);return n!==-1&&n===r},NR=s=>{if(!s)return null;if(Oa(s))return s;let t=s.length;if(!KN(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},SR=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Ku(Uint8Array)),CR=(s,t)=>{const n=(s&&s[Symbol.iterator]).call(s);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(s,i[0],i[1])}},kR=(s,t)=>{let r;const n=[];for(;(r=s.exec(t))!==null;)n.push(r);return n},TR=Ys("HTMLFormElement"),PR=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),sp=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),ER=Ys("RegExp"),ZN=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),n={};Zi(r,(a,i)=>{let o;(o=t(a,i,s))!==!1&&(n[i]=o||a)}),Object.defineProperties(s,n)},DR=s=>{ZN(s,(t,r)=>{if(ws(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=s[r];if(ws(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},AR=(s,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Oa(s)?n(s):n(String(s).split(t)),r},IR=()=>{},_R=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function RR(s){return!!(s&&ws(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const OR=s=>{const t=new Array(10),r=(n,a)=>{if(Hl(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const i=Oa(n)?[]:{};return Zi(n,(o,l)=>{const c=r(o,a+1);!bi(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(s,0)},MR=Ys("AsyncFunction"),FR=s=>s&&(Hl(s)||ws(s))&&ws(s.then)&&ws(s.catch),YN=((s,t)=>s?setImmediate:t?((r,n)=>(pn.addEventListener("message",({source:a,data:i})=>{a===pn&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),pn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ws(pn.postMessage)),LR=typeof queueMicrotask<"u"?queueMicrotask.bind(pn):typeof process<"u"&&process.nextTick||YN,U={isArray:Oa,isArrayBuffer:WN,isBuffer:sR,isFormData:uR,isArrayBufferView:rR,isString:nR,isNumber:KN,isBoolean:aR,isObject:Hl,isPlainObject:Ao,isReadableStream:hR,isRequest:pR,isResponse:fR,isHeaders:xR,isUndefined:bi,isDate:iR,isFile:oR,isBlob:lR,isRegExp:ER,isFunction:ws,isStream:dR,isURLSearchParams:mR,isTypedArray:SR,isFileList:cR,forEach:Zi,merge:wd,extend:vR,trim:gR,stripBOM:yR,inherits:jR,toFlatObject:bR,kindOf:Vl,kindOfTest:Ys,endsWith:wR,toArray:NR,forEachEntry:CR,matchAll:kR,isHTMLForm:TR,hasOwnProperty:sp,hasOwnProp:sp,reduceDescriptors:ZN,freezeMethods:DR,toObjectSet:AR,toCamelCase:PR,noop:IR,toFiniteNumber:_R,findKey:GN,global:pn,isContextDefined:QN,isSpecCompliantForm:RR,toJSONObject:OR,isAsyncFn:MR,isThenable:FR,setImmediate:YN,asap:LR};function Oe(s,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}U.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const XN=Oe.prototype,JN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{JN[s]={value:s}});Object.defineProperties(Oe,JN);Object.defineProperty(XN,"isAxiosError",{value:!0});Oe.from=(s,t,r,n,a,i)=>{const o=Object.create(XN);return U.toFlatObject(s,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Oe.call(o,s.message,t,r,n,a),o.cause=s,o.name=s.name,i&&Object.assign(o,i),o};const $R=null;function Nd(s){return U.isPlainObject(s)||U.isArray(s)}function e0(s){return U.endsWith(s,"[]")?s.slice(0,-2):s}function rp(s,t,r){return s?s.concat(t).map(function(a,i){return a=e0(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function BR(s){return U.isArray(s)&&!s.some(Nd)}const VR=U.toFlatObject(U,{},null,function(t){return/^is[A-Z]/.test(t)});function ql(s,t,r){if(!U.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=U.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,v){return!U.isUndefined(v[f])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(a))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(U.isDate(g))return g.toISOString();if(!c&&U.isBlob(g))throw new Oe("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(g)||U.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,f,v){let y=g;if(g&&!v&&typeof g=="object"){if(U.endsWith(f,"{}"))f=n?f:f.slice(0,-2),g=JSON.stringify(g);else if(U.isArray(g)&&BR(g)||(U.isFileList(g)||U.endsWith(f,"[]"))&&(y=U.toArray(g)))return f=e0(f),y.forEach(function(b,k){!(U.isUndefined(b)||b===null)&&t.append(o===!0?rp([f],k,i):o===null?f:f+"[]",d(b))}),!1}return Nd(g)?!0:(t.append(rp(v,f,i),d(g)),!1)}const h=[],m=Object.assign(VR,{defaultVisitor:u,convertValue:d,isVisitable:Nd});function x(g,f){if(!U.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+f.join("."));h.push(g),U.forEach(g,function(y,j){(!(U.isUndefined(y)||y===null)&&a.call(t,y,U.isString(j)?j.trim():j,f,m))===!0&&x(y,f?f.concat(j):[j])}),h.pop()}}if(!U.isObject(s))throw new TypeError("data must be an object");return x(s),t}function np(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Gu(s,t){this._pairs=[],s&&ql(s,this,t)}const t0=Gu.prototype;t0.append=function(t,r){this._pairs.push([t,r])};t0.toString=function(t){const r=t?function(n){return t.call(this,n,np)}:np;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function UR(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s0(s,t,r){if(!t)return s;const n=r&&r.encode||UR;U.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=U.isURLSearchParams(t)?t.toString():new Gu(t,r).toString(n),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class ap{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){U.forEach(this.handlers,function(n){n!==null&&t(n)})}}const r0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},HR=typeof URLSearchParams<"u"?URLSearchParams:Gu,qR=typeof FormData<"u"?FormData:null,zR=typeof Blob<"u"?Blob:null,WR={isBrowser:!0,classes:{URLSearchParams:HR,FormData:qR,Blob:zR},protocols:["http","https","file","blob","url","data"]},Qu=typeof window<"u"&&typeof document<"u",Sd=typeof navigator=="object"&&navigator||void 0,KR=Qu&&(!Sd||["ReactNative","NativeScript","NS"].indexOf(Sd.product)<0),GR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QR=Qu&&window.location.href||"http://localhost",ZR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qu,hasStandardBrowserEnv:KR,hasStandardBrowserWebWorkerEnv:GR,navigator:Sd,origin:QR},Symbol.toStringTag,{value:"Module"})),Qt={...ZR,...WR};function YR(s,t){return ql(s,new Qt.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,i){return Qt.isNode&&U.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function XR(s){return U.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function JR(s){const t={},r=Object.keys(s);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=s[i];return t}function n0(s){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&U.isArray(a)?a.length:o,c?(U.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!U.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&U.isArray(a[o])&&(a[o]=JR(a[o])),!l)}if(U.isFormData(s)&&U.isFunction(s.entries)){const r={};return U.forEachEntry(s,(n,a)=>{t(XR(n),a,r,0)}),r}return null}function eO(s,t,r){if(U.isString(s))try{return(t||JSON.parse)(s),U.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(s)}const Yi={transitional:r0,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=U.isObject(t);if(i&&U.isHTMLForm(t)&&(t=new FormData(t)),U.isFormData(t))return a?JSON.stringify(n0(t)):t;if(U.isArrayBuffer(t)||U.isBuffer(t)||U.isStream(t)||U.isFile(t)||U.isBlob(t)||U.isReadableStream(t))return t;if(U.isArrayBufferView(t))return t.buffer;if(U.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return YR(t,this.formSerializer).toString();if((l=U.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ql(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),eO(t)):t}],transformResponse:[function(t){const r=this.transitional||Yi.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(U.isResponse(t)||U.isReadableStream(t))return t;if(t&&U.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Oe.from(l,Oe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qt.classes.FormData,Blob:Qt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],s=>{Yi.headers[s]={}});const tO=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sO=s=>{const t={};let r,n,a;return s&&s.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&tO[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},ip=Symbol("internals");function Ka(s){return s&&String(s).trim().toLowerCase()}function Io(s){return s===!1||s==null?s:U.isArray(s)?s.map(Io):String(s)}function rO(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(s);)t[n[1]]=n[2];return t}const nO=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Cc(s,t,r,n,a){if(U.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!U.isString(t)){if(U.isString(n))return t.indexOf(n)!==-1;if(U.isRegExp(n))return n.test(t)}}function aO(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function iO(s,t){const r=U.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}class us{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=Ka(c);if(!u)throw new Error("header name must be a non-empty string");const h=U.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=Io(l))}const o=(l,c)=>U.forEach(l,(d,u)=>i(d,u,c));if(U.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(U.isString(t)&&(t=t.trim())&&!nO(t))o(sO(t),r);else if(U.isHeaders(t))for(const[l,c]of t.entries())i(c,l,n);else t!=null&&i(r,t,n);return this}get(t,r){if(t=Ka(t),t){const n=U.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return rO(a);if(U.isFunction(r))return r.call(this,a,n);if(U.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ka(t),t){const n=U.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Cc(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=Ka(o),o){const l=U.findKey(n,o);l&&(!r||Cc(n,n[l],l,r))&&(delete n[l],a=!0)}}return U.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Cc(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return U.forEach(this,(a,i)=>{const o=U.findKey(n,i);if(o){r[o]=Io(a),delete r[i];return}const l=t?aO(i):String(i).trim();l!==i&&delete r[i],r[l]=Io(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return U.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&U.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[ip]=this[ip]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Ka(o);n[l]||(iO(a,o),n[l]=!0)}return U.isArray(t)?t.forEach(i):i(t),this}}us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(us.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[r]=n}}});U.freezeMethods(us);function kc(s,t){const r=this||Yi,n=t||r,a=us.from(n.headers);let i=n.data;return U.forEach(s,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function a0(s){return!!(s&&s.__CANCEL__)}function Ma(s,t,r){Oe.call(this,s??"canceled",Oe.ERR_CANCELED,t,r),this.name="CanceledError"}U.inherits(Ma,Oe,{__CANCEL__:!0});function i0(s,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?s(r):t(new Oe("Request failed with status code "+r.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function oO(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function lO(s,t){s=s||10;const r=new Array(s),n=new Array(s);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let h=i,m=0;for(;h!==a;)m+=r[h++],h=h%s;if(a=(a+1)%s,a===i&&(i=(i+1)%s),d-o<t)return;const x=u&&d-u;return x?Math.round(m*1e3/x):void 0}}function cO(s,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),s.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const zo=(s,t,r=3)=>{let n=0;const a=lO(50,250);return cO(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};s(h)},r)},op=(s,t)=>{const r=s!=null;return[n=>t[0]({lengthComputable:r,total:s,loaded:n}),t[1]]},lp=s=>(...t)=>U.asap(()=>s(...t)),dO=Qt.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,Qt.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(Qt.origin),Qt.navigator&&/(msie|trident)/i.test(Qt.navigator.userAgent)):()=>!0,uO=Qt.hasStandardBrowserEnv?{write(s,t,r,n,a,i){const o=[s+"="+encodeURIComponent(t)];U.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),U.isString(n)&&o.push("path="+n),U.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mO(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function hO(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function o0(s,t,r){let n=!mO(t);return s&&(n||r==!1)?hO(s,t):t}const cp=s=>s instanceof us?{...s}:s;function In(s,t){t=t||{};const r={};function n(d,u,h,m){return U.isPlainObject(d)&&U.isPlainObject(u)?U.merge.call({caseless:m},d,u):U.isPlainObject(u)?U.merge({},u):U.isArray(u)?u.slice():u}function a(d,u,h,m){if(U.isUndefined(u)){if(!U.isUndefined(d))return n(void 0,d,h,m)}else return n(d,u,h,m)}function i(d,u){if(!U.isUndefined(u))return n(void 0,u)}function o(d,u){if(U.isUndefined(u)){if(!U.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in s)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>a(cp(d),cp(u),h,!0)};return U.forEach(Object.keys(Object.assign({},s,t)),function(u){const h=c[u]||a,m=h(s[u],t[u],u);U.isUndefined(m)&&h!==l||(r[u]=m)}),r}const l0=s=>{const t=In({},s);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=us.from(o),t.url=s0(o0(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(U.isFormData(r)){if(Qt.hasStandardBrowserEnv||Qt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Qt.hasStandardBrowserEnv&&(n&&U.isFunction(n)&&(n=n(t)),n||n!==!1&&dO(t.url))){const d=a&&i&&uO.read(i);d&&o.set(a,d)}return t},pO=typeof XMLHttpRequest<"u",fO=pO&&function(s){return new Promise(function(r,n){const a=l0(s);let i=a.data;const o=us.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,h,m,x,g;function f(){x&&x(),g&&g(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function y(){if(!v)return;const b=us.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:s,request:v};i0(function(T){r(T),f()},function(T){n(T),f()},S),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Oe("Request aborted",Oe.ECONNABORTED,s,v)),v=null)},v.onerror=function(){n(new Oe("Network Error",Oe.ERR_NETWORK,s,v)),v=null},v.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||r0;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),n(new Oe(k,S.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,s,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&U.forEach(o.toJSON(),function(k,S){v.setRequestHeader(S,k)}),U.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),l&&l!=="json"&&(v.responseType=a.responseType),d&&([m,g]=zo(d,!0),v.addEventListener("progress",m)),c&&v.upload&&([h,x]=zo(c),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(u=b=>{v&&(n(!b||b.type?new Ma(null,s,v):b),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const j=oO(a.url);if(j&&Qt.protocols.indexOf(j)===-1){n(new Oe("Unsupported protocol "+j+":",Oe.ERR_BAD_REQUEST,s));return}v.send(i||null)})},xO=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Oe?u:new Ma(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Oe(`timeout ${t} of ms exceeded`,Oe.ETIMEDOUT))},t);const l=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),s=null)};s.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>U.asap(l),c}},gO=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let n=0,a;for(;n<r;)a=n+t,yield s.slice(n,a),n=a},vO=async function*(s,t){for await(const r of yO(s))yield*gO(r,t)},yO=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},dp=(s,t,r,n)=>{const a=vO(s,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},zl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",c0=zl&&typeof ReadableStream=="function",jO=zl&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),d0=(s,...t)=>{try{return!!s(...t)}catch{return!1}},bO=c0&&d0(()=>{let s=!1;const t=new Request(Qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),up=64*1024,Cd=c0&&d0(()=>U.isReadableStream(new Response("").body)),Wo={stream:Cd&&(s=>s.body)};zl&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Wo[t]&&(Wo[t]=U.isFunction(s[t])?r=>r[t]():(r,n)=>{throw new Oe(`Response type '${t}' is not supported`,Oe.ERR_NOT_SUPPORT,n)})})})(new Response);const wO=async s=>{if(s==null)return 0;if(U.isBlob(s))return s.size;if(U.isSpecCompliantForm(s))return(await new Request(Qt.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(U.isArrayBufferView(s)||U.isArrayBuffer(s))return s.byteLength;if(U.isURLSearchParams(s)&&(s=s+""),U.isString(s))return(await jO(s)).byteLength},NO=async(s,t)=>{const r=U.toFiniteNumber(s.getContentLength());return r??wO(t)},SO=zl&&(async s=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:m}=l0(s);d=d?(d+"").toLowerCase():"text";let x=xO([a,i&&i.toAbortSignal()],o),g;const f=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let v;try{if(c&&bO&&r!=="get"&&r!=="head"&&(v=await NO(u,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),D;if(U.isFormData(n)&&(D=S.headers.get("content-type"))&&u.setContentType(D),S.body){const[T,C]=op(v,zo(lp(c)));n=dp(S.body,up,T,C)}}U.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;g=new Request(t,{...m,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let j=await fetch(g);const b=Cd&&(d==="stream"||d==="response");if(Cd&&(l||b&&f)){const S={};["status","statusText","headers"].forEach(E=>{S[E]=j[E]});const D=U.toFiniteNumber(j.headers.get("content-length")),[T,C]=l&&op(D,zo(lp(l),!0))||[];j=new Response(dp(j.body,up,T,()=>{C&&C(),f&&f()}),S)}d=d||"text";let k=await Wo[U.findKey(Wo,d)||"text"](j,s);return!b&&f&&f(),await new Promise((S,D)=>{i0(S,D,{data:k,headers:us.from(j.headers),status:j.status,statusText:j.statusText,config:s,request:g})})}catch(y){throw f&&f(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Oe("Network Error",Oe.ERR_NETWORK,s,g),{cause:y.cause||y}):Oe.from(y,y&&y.code,s,g)}}),kd={http:$R,xhr:fO,fetch:SO};U.forEach(kd,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const mp=s=>`- ${s}`,CO=s=>U.isFunction(s)||s===null||s===!1,u0={getAdapter:s=>{s=U.isArray(s)?s:[s];const{length:t}=s;let r,n;const a={};for(let i=0;i<t;i++){r=s[i];let o;if(n=r,!CO(r)&&(n=kd[(o=String(r)).toLowerCase()],n===void 0))throw new Oe(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(mp).join(`
`):" "+mp(i[0]):"as no adapter specified";throw new Oe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:kd};function Tc(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Ma(null,s)}function hp(s){return Tc(s),s.headers=us.from(s.headers),s.data=kc.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),u0.getAdapter(s.adapter||Yi.adapter)(s).then(function(n){return Tc(s),n.data=kc.call(s,s.transformResponse,n),n.headers=us.from(n.headers),n},function(n){return a0(n)||(Tc(s),n&&n.response&&(n.response.data=kc.call(s,s.transformResponse,n.response),n.response.headers=us.from(n.response.headers))),Promise.reject(n)})}const m0="1.8.4",Wl={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Wl[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const pp={};Wl.transitional=function(t,r,n){function a(i,o){return"[Axios v"+m0+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new Oe(a(o," has been removed"+(r?" in "+r:"")),Oe.ERR_DEPRECATED);return r&&!pp[o]&&(pp[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Wl.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function kO(s,t,r){if(typeof s!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=s[i],c=l===void 0||o(l,i,s);if(c!==!0)throw new Oe("option "+i+" must be "+c,Oe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Oe("Unknown option "+i,Oe.ERR_BAD_OPTION)}}const _o={assertOptions:kO,validators:Wl},er=_o.validators;class Nn{constructor(t){this.defaults=t,this.interceptors={request:new ap,response:new ap}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=In(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&_o.assertOptions(n,{silentJSONParsing:er.transitional(er.boolean),forcedJSONParsing:er.transitional(er.boolean),clarifyTimeoutError:er.transitional(er.boolean)},!1),a!=null&&(U.isFunction(a)?r.paramsSerializer={serialize:a}:_o.assertOptions(a,{encode:er.function,serialize:er.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),_o.assertOptions(r,{baseUrl:er.spelling("baseURL"),withXsrfToken:er.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&U.merge(i.common,i[r.method]);i&&U.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=us.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(c=c&&f.synchronous,l.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let u,h=0,m;if(!c){const g=[hp.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,d),m=g.length,u=Promise.resolve(r);h<m;)u=u.then(g[h++],g[h++]);return u}m=l.length;let x=r;for(h=0;h<m;){const g=l[h++],f=l[h++];try{x=g(x)}catch(v){f.call(this,v);break}}try{u=hp.call(this,x)}catch(g){return Promise.reject(g)}for(h=0,m=d.length;h<m;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=In(this.defaults,t);const r=o0(t.baseURL,t.url,t.allowAbsoluteUrls);return s0(r,t.params,t.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(t){Nn.prototype[t]=function(r,n){return this.request(In(n||{},{method:t,url:r,data:(n||{}).data}))}});U.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(In(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Nn.prototype[t]=r(),Nn.prototype[t+"Form"]=r(!0)});class Zu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Ma(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Zu(function(a){t=a}),cancel:t}}}function TO(s){return function(r){return s.apply(null,r)}}function PO(s){return U.isObject(s)&&s.isAxiosError===!0}const Td={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Td).forEach(([s,t])=>{Td[t]=s});function h0(s){const t=new Nn(s),r=zN(Nn.prototype.request,t);return U.extend(r,Nn.prototype,t,{allOwnKeys:!0}),U.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return h0(In(s,a))},r}const At=h0(Yi);At.Axios=Nn;At.CanceledError=Ma;At.CancelToken=Zu;At.isCancel=a0;At.VERSION=m0;At.toFormData=ql;At.AxiosError=Oe;At.Cancel=At.CanceledError;At.all=function(t){return Promise.all(t)};At.spread=TO;At.isAxiosError=PO;At.mergeConfig=In;At.AxiosHeaders=us;At.formToJSON=s=>n0(U.isHTMLForm(s)?new FormData(s):s);At.getAdapter=u0.getAdapter;At.HttpStatusCode=Td;At.default=At;async function EO(s,t){try{return(await At.post(`/api/files/orders/${s}/artwork`,{imageData:t})).data}catch(r){throw console.error("Error uploading artwork image:",r),r}}function p0({isOpen:s,onClose:t,order:r}){var C,E,I;const{updateOrder:n,isUpdatingOrder:a}=eR(),{toast:i}=Be(),o=p.useRef(null),[l,c]=p.useState({frameId:"",matColorId:"",glassOptionId:"",artworkWidth:"",artworkHeight:"",matWidth:"",artworkDescription:"",artworkType:"",quantity:"1"}),[d,u]=p.useState(!1),[h,m]=p.useState(null),{data:x}=ue({queryKey:["/api/frames"],queryFn:async()=>{const w=await fetch("/api/frames");if(!w.ok)throw new Error("Failed to fetch frames");return w.json()}}),{data:g}=ue({queryKey:["/api/larson-catalog/crescent"],queryFn:async()=>{const w=await fetch("/api/larson-catalog/crescent");if(!w.ok)throw new Error("Failed to fetch mat colors");return w.json()}}),{data:f}=ue({queryKey:["/api/glass-options"],queryFn:async()=>{const w=await fetch("/api/glass-options");if(!w.ok)throw new Error("Failed to fetch glass options");return w.json()}});p.useEffect(()=>{c(r?{frameId:r.frameId||"",matColorId:r.matColorId||"",glassOptionId:r.glassOptionId||"",artworkWidth:String(r.artworkWidth||""),artworkHeight:String(r.artworkHeight||""),matWidth:String(r.matWidth||""),artworkDescription:r.artworkDescription||"",artworkType:r.artworkType||"",quantity:String(r.quantity||"1")}:{frameId:"",matColorId:"",glassOptionId:"",artworkWidth:"",artworkHeight:"",matWidth:"",artworkDescription:"",artworkType:"",quantity:"1"})},[r]);const v=w=>{const{name:N,value:A}=w.target;c(F=>({...F,[N]:A}))},y=w=>{const{value:N}=w.target;c(A=>({...A,artworkWidth:N}))},j=w=>{const{value:N}=w.target;c(A=>({...A,artworkHeight:N}))},b=(w,N)=>{c(A=>({...A,[w]:N}))},k=()=>r?String(l.artworkWidth)!==String(r.artworkWidth)||String(l.artworkHeight)!==String(r.artworkHeight)||String(l.matWidth)!==String(r.matWidth):!1,S=w=>{var F;const N=(F=w.target.files)==null?void 0:F[0];if(!N)return;u(!0);const A=new FileReader;A.onloadend=()=>{m(A.result),u(!1)},A.onerror=()=>{i({title:"Error Reading File",description:"There was an error reading the selected file.",variant:"destructive"}),u(!1)},A.readAsDataURL(N)},D=()=>{var w;(w=o.current)==null||w.click()},T=async()=>{if(r&&Object.keys(l).length>0){const w=k(),N={frameId:l.frameId||void 0,matColorId:l.matColorId||void 0,glassOptionId:l.glassOptionId||void 0,artworkWidth:l.artworkWidth&&parseFloat(l.artworkWidth)||void 0,artworkHeight:l.artworkHeight&&parseFloat(l.artworkHeight)||void 0,matWidth:l.matWidth&&parseFloat(l.matWidth)||void 0,artworkDescription:l.artworkDescription||void 0,artworkType:l.artworkType||void 0,quantity:l.quantity&&parseInt(l.quantity)||1};n({id:r.id,data:N,recalculatePricing:w},{onSuccess:async()=>{if(w&&i({title:"Size Updated",description:"Order dimensions and pricing have been recalculated",variant:"default"}),h)try{await EO(r.id,h),i({title:"Artwork Updated",description:"Order artwork has been updated",variant:"default"})}catch(A){console.error("Error uploading artwork image:",A),i({title:"Image Upload Failed",description:"Order was updated but the artwork image failed to upload.",variant:"destructive"})}t()}})}};return r?e.jsx(Yt,{open:s,onOpenChange:t,children:e.jsxs(Wt,{className:"sm:max-w-[500px]",children:[e.jsx(Xt,{children:e.jsxs(Jt,{children:["Edit Order #",r.id]})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"frameId",className:"text-right",children:"Frame"}),e.jsx("div",{className:"col-span-3",children:e.jsxs(qe,{value:((C=l.frameId)==null?void 0:C.toString())||"",onValueChange:w=>b("frameId",w),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a frame"})}),e.jsx(Ue,{children:x&&x.map(w=>e.jsx(te,{value:w.id,children:w.name},w.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"matColorId",className:"text-right",children:"Mat Color"}),e.jsx("div",{className:"col-span-3",children:e.jsxs(qe,{value:((E=l.matColorId)==null?void 0:E.toString())||"",onValueChange:w=>b("matColorId",w),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a mat color"})}),e.jsx(Ue,{children:g&&g.map(w=>e.jsx(te,{value:w.id,children:w.name},w.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"glassOptionId",className:"text-right",children:"Glass Option"}),e.jsx("div",{className:"col-span-3",children:e.jsxs(qe,{value:((I=l.glassOptionId)==null?void 0:I.toString())||"",onValueChange:w=>b("glassOptionId",w),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select glass"})}),e.jsx(Ue,{children:f&&f.map(w=>e.jsx(te,{value:w.id,children:w.name},w.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"artworkWidth",className:"text-right",children:"Width (inches)"}),e.jsx(q,{id:"artworkWidth",name:"artworkWidth",type:"number",step:"0.125",value:l.artworkWidth||"",onChange:y,className:"col-span-3",placeholder:"Enter width"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"artworkHeight",className:"text-right",children:"Height (inches)"}),e.jsx(q,{id:"artworkHeight",name:"artworkHeight",type:"number",step:"0.125",value:l.artworkHeight||"",onChange:j,className:"col-span-3",placeholder:"Enter height"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"matWidth",className:"text-right",children:"Mat Width (inches)"}),e.jsx(q,{id:"matWidth",name:"matWidth",type:"number",step:"0.125",value:l.matWidth||"",onChange:v,className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),e.jsx(q,{id:"quantity",name:"quantity",type:"number",min:"1",value:l.quantity||"1",onChange:v,className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"artworkImage",className:"text-right",children:"Artwork Image"}),e.jsx("div",{className:"col-span-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:D,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-current border-t-transparent rounded-full"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Upload Image"]})}),e.jsx("input",{ref:o,type:"file",id:"artworkImage",accept:"image/*",className:"hidden",onChange:S}),h&&e.jsx("div",{className:"relative border rounded-md p-1",children:e.jsx("img",{src:h,alt:"Artwork preview",className:"h-16 object-cover rounded"})}),!h&&r.artworkImagePath&&e.jsxs("div",{className:"text-sm flex items-center text-muted-foreground",children:[e.jsx(pi,{className:"h-4 w-4 mr-1"}),"Existing artwork image available"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"artworkDescription",className:"text-right",children:"Description"}),e.jsx(q,{id:"artworkDescription",name:"artworkDescription",value:l.artworkDescription||"",onChange:v,className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(O,{htmlFor:"artworkType",className:"text-right",children:"Type"}),e.jsx(q,{id:"artworkType",name:"artworkType",value:l.artworkType||"",onChange:v,className:"col-span-3"})]})]}),e.jsxs(En,{children:[e.jsx(P,{variant:"outline",onClick:t,children:"Cancel"}),e.jsxs(P,{onClick:T,disabled:a||d,children:[(a||d)&&e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})}):null}function DO({order:s,customerId:t,onSuccess:r}){const[n,a]=p.useState(s?s.total:""),[i,o]=p.useState(s?`Payment for Order #${s.orderNumber||s.id} - ${s.customerName}`:""),[l,c]=p.useState("7"),[d,u]=p.useState(""),[h,m]=p.useState(""),[x,g]=p.useState(!0),[f,v]=p.useState(null),{toast:y}=Be(),j=ss(),b=Ae({mutationFn:async T=>(await le("POST","/api/payment-links",T)).json(),onSuccess:T=>{var C;if(j.invalidateQueries({queryKey:["/api/payment-links"]}),(C=T.paymentLink)!=null&&C.token){const I=`${window.location.origin}/payment/${T.paymentLink.token}`;v(I)}y({title:"Payment link created",description:x?"The payment link has been created and sent to the customer.":"The payment link has been created successfully."}),r&&r()},onError:T=>{y({title:"Error creating payment link",description:T.message||"There was an error creating the payment link.",variant:"destructive"})}}),k=T=>{if(T.preventDefault(),!n||isNaN(parseFloat(n))||parseFloat(n)<=0){y({title:"Invalid amount",description:"Please enter a valid payment amount.",variant:"destructive"});return}if(x&&!d&&!h){y({title:"Contact information required",description:"Please provide either an email address or phone number to send the notification.",variant:"destructive"});return}const C={amount:parseFloat(n),expiresInDays:parseInt(l),sendNotification:x};i&&(C.description=i),(t||s)&&(C.customerId=t||(s==null?void 0:s.id)),x&&(d&&(C.email=d),h&&(C.phone=h)),b.mutate(C)},S=()=>{f&&(navigator.clipboard.writeText(f),y({title:"Link copied",description:"Payment link copied to clipboard"}))},D=()=>{f&&window.open(f,"_blank")};return e.jsxs(V,{className:"w-full max-w-2xl",children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Send Payment Link"]}),e.jsx(ee,{children:"Create and send a secure payment link to your customer using Stripe."})]}),e.jsx(H,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Payment Link Created!"}),e.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Your payment link is ready. You can copy it and send it manually, or it has been automatically sent if you selected notification options."}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white border rounded",children:[e.jsx(q,{value:f,readOnly:!0,className:"flex-1"}),e.jsx(P,{onClick:S,variant:"outline",size:"sm",children:e.jsx(lj,{className:"w-4 h-4"})}),e.jsx(P,{onClick:D,variant:"outline",size:"sm",children:e.jsx(A2,{className:"w-4 h-4"})})]})]}),e.jsx(P,{onClick:()=>{v(null),a(s?s.total:""),o(s?`Payment for Order #${s.orderNumber||s.id} - ${s.customerName}`:""),u(""),m("")},variant:"outline",className:"w-full",children:"Create Another Link"})]}):e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"amount",children:"Amount ($)"}),e.jsx(q,{id:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"Amount",value:n,onChange:T=>a(T.target.value),required:!0}),n&&!isNaN(parseFloat(n))&&e.jsx("p",{className:"text-sm text-gray-600",children:Pn(parseFloat(n))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"expiresInDays",children:"Expires In (days)"}),e.jsx(q,{id:"expiresInDays",type:"number",min:"1",max:"30",placeholder:"7",value:l,onChange:T=>c(T.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"description",children:"Description"}),e.jsx(cr,{id:"description",placeholder:"Payment description",value:i,onChange:T=>o(T.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"sendNotification",checked:x,onCheckedChange:T=>g(!!T)}),e.jsx(O,{htmlFor:"sendNotification",children:"Send payment link automatically"})]}),x&&e.jsxs("div",{className:"pl-6 space-y-4 border-l-2 border-gray-200",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"email",children:"Customer Email"}),e.jsx(q,{id:"email",type:"email",placeholder:"customer@example.com",value:d,onChange:T=>u(T.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"phone",children:"Customer Phone Number"}),e.jsx(q,{id:"phone",type:"tel",placeholder:"+1 (123) 456-7890",value:h,onChange:T=>m(T.target.value)})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Provide at least one contact method to send the payment link automatically."})]})]}),e.jsx(P,{type:"submit",disabled:b.isPending,className:"w-full",children:b.isPending?"Creating Payment Link...":e.jsxs(e.Fragment,{children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Create Payment Link"]})})]})})]})}const f0={ORDER_CARD:"order"};function AO({order:s,onMoveLeft:t,onMoveRight:r,canMoveLeft:n,canMoveRight:a,onSchedule:i,index:o,moveOrder:l}){var b,k;const[c,d]=p.useState(!1),[u,h]=p.useState(!1),[m,x]=p.useState(7),g=p.useRef(null),f=S=>S.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),v=()=>{i(m),d(!1)},[{isDragging:y},j]=A_({type:f0.ORDER_CARD,item:{id:s.id,status:s.productionStatus,index:o},collect:S=>({isDragging:S.isDragging()}),end:(S,D)=>{D.getDropResult()}});return j(g),e.jsxs(V,{ref:g,className:`mb-4 shadow-md relative cursor-grab active:cursor-grabbing transition-all duration-200 hover:shadow-lg ${y?"opacity-60 rotate-3 scale-105 z-50":"hover:scale-[1.02]"}`,style:{transform:y?"rotate(3deg) scale(1.05)":void 0,zIndex:y?1e3:"auto"},children:[e.jsx("div",{className:"absolute top-2 right-2 text-muted-foreground",children:e.jsx(I2,{className:"h-4 w-4"})}),e.jsxs(K,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(G,{className:"text-md",children:["Order #",s.id]}),e.jsx(pe,{variant:s.productionStatus==="completed"?"default":s.productionStatus==="delayed"?"destructive":"secondary",children:f(s.productionStatus||"order_processed")})]}),e.jsxs(ee,{children:["Customer #",s.customerId||"Unknown"]})]}),e.jsxs(H,{className:"text-sm space-y-2 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Frame:"})," ",((b=s.frameId)==null?void 0:b.split("-")[1])||"None"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Mat:"})," ",((k=s.matColorId)==null?void 0:k.split("-")[1])||"None"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size:"})," ",s.artworkWidth,"",s.artworkHeight,'"']}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Glass:"})," ",s.glassOptionId?s.glassOptionId.includes("-")?s.glassOptionId.split("-")[1]:s.glassOptionId==="museum"?"Museum":s.glassOptionId==="uv"?"UV Protection":s.glassOptionId:"None"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Contact customer for details"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hu,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:["Order #",s.id]})]}),s.estimatedCompletionDays&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vr,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs",children:["Est. completion: ",new Date(new Date().setDate(new Date().getDate()+s.estimatedCompletionDays)).toLocaleDateString()]})]})]}),e.jsxs(ht,{className:"pt-0 flex gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:t,disabled:!n,children:[e.jsx(_2,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[e.jsx(Ea,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.productionStatus==="order_processed"?e.jsxs(Yt,{open:c,onOpenChange:d,children:[e.jsx(yi,{asChild:!0,children:e.jsxs(P,{size:"sm",variant:"default",children:[e.jsx(Vr,{className:"h-4 w-4 mr-1"}),"Schedule"]})}),e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsxs(Jt,{children:["Schedule Order #",s.id," for Production"]}),e.jsx(bs,{children:"Set the estimated number of days until completion"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(O,{htmlFor:"estimated-days",children:"Estimated Days"}),e.jsx(q,{id:"estimated-days",type:"number",min:7,max:30,value:m,onChange:S=>x(parseInt(S.target.value))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 7 days required for scheduling."})]}),e.jsxs(En,{children:[e.jsx(lA,{asChild:!0,children:e.jsx(P,{variant:"outline",children:"Cancel"})}),e.jsx(P,{onClick:v,children:"Schedule"})]})]})]}):e.jsxs(P,{variant:"default",size:"sm",onClick:r,disabled:!a,children:["Next",e.jsx(Kc,{className:"h-4 w-4 ml-1"})]}),e.jsx(p0,{isOpen:u,onClose:()=>h(!1),order:s})]})]})}function IO({title:s,orders:t=[],isLoading:r=!1,previousStatus:n,nextStatus:a,updateOrderStatus:i,scheduleOrder:o,currentStatus:l}){const c=p.useRef(null),[{isOver:d,canDrop:u},h]=$_({accept:f0.ORDER_CARD,drop:x=>(x.status!==l&&i(x.id,l),{status:l}),canDrop:x=>l==="delayed"||x.status===n||x.status===a,collect:x=>({isOver:x.isOver({shallow:!0}),canDrop:x.canDrop()})});h(c);const m=()=>d&&u?"bg-primary/20 border-primary shadow-lg":u?"bg-primary/5 border-primary/50":d?"bg-destructive/10 border-destructive":"bg-muted/20 border-muted";return e.jsxs("div",{className:"kanban-column min-w-[280px] max-w-[280px]",children:[e.jsxs("div",{className:"bg-muted rounded-t-lg p-3 sticky top-0 z-10",children:[e.jsx("h3",{className:"font-medium",children:s}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.length," order",t.length!==1?"s":""]})]}),e.jsx("div",{ref:c,className:`p-6 min-h-[calc(100vh-160px)] rounded-b-lg ${m()} transition-all duration-200 border-2 border-dashed ${d&&u?"border-primary scale-[1.02]":u?"border-primary/30":"border-transparent"}`,style:{minHeight:"calc(100vh - 160px)",padding:d&&u?"8px":"24px"},children:r?e.jsx("div",{className:"flex items-center justify-center h-20",children:e.jsx(Ye,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-20 text-muted-foreground",children:[e.jsx(cj,{className:"h-8 w-8 mb-2"}),e.jsx("p",{className:"text-xs",children:"No orders in this column"})]}):t.map((x,g)=>e.jsx(AO,{order:x,canMoveLeft:!!n,canMoveRight:!!a,onMoveLeft:()=>i(x.id,n),onMoveRight:()=>i(x.id,a),onSchedule:f=>o(x.id,f),index:g,moveOrder:i},x.id))})]})}function _O(){const{orders:s=[],isLoading:t=!1,error:r=null,updateOrderStatus:n=g=>console.log("Update status called with:",g),scheduleOrder:a=g=>console.log("Schedule order called with:",g)}=kN(),[i,o]=p.useState(null),[l,c]=p.useState(null),d=(g,f)=>{n({id:g,status:f})},u=(g,f)=>{a({id:g,estimatedDays:f})},h=[{title:"Order Processed",status:"order_processed",nextStatus:"scheduled"},{title:"Scheduled",status:"scheduled",previousStatus:"order_processed",nextStatus:"materials_ordered"},{title:"Materials Ordered",status:"materials_ordered",previousStatus:"scheduled",nextStatus:"materials_arrived"},{title:"Materials Arrived",status:"materials_arrived",previousStatus:"materials_ordered",nextStatus:"frame_cut"},{title:"Frame Cut",status:"frame_cut",previousStatus:"materials_arrived",nextStatus:"mat_cut"},{title:"Mat Cut",status:"mat_cut",previousStatus:"frame_cut",nextStatus:"prepped"},{title:"Prepped",status:"prepped",previousStatus:"mat_cut",nextStatus:"completed"},{title:"Completed",status:"completed",previousStatus:"prepped"},{title:"Delayed",status:"delayed",previousStatus:"completed"}],m=g=>{if(!s)return console.log("No orders data available"),[];if(!Array.isArray(s))return console.log("Orders is not an array:",s),[];const f=s.filter(v=>v.productionStatus===g);return console.log(`Found ${f.length} orders with status ${g}`),f};if(r)return e.jsxs("div",{className:"p-4 bg-destructive/10 rounded-lg",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Error Loading Production Board"}),e.jsxs("p",{className:"text-muted-foreground",children:[e.jsx(Dt,{className:"inline-block h-4 w-4 mr-1 align-middle"}),r.message||"Failed to connect to database"]}),e.jsx("div",{className:"mt-4",children:e.jsxs(P,{onClick:()=>window.location.reload(),variant:"outline",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Retry Loading"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This error typically occurs when there are temporary database connection issues. You can try refreshing the page or checking your database connection."})})]});const x=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Production Kanban Board"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track framing orders through each production stage"})]}),e.jsx("div",{children:e.jsxs(Yt,{children:[e.jsx(yi,{asChild:!0,children:e.jsxs(P,{variant:"outline",children:[e.jsx(vi,{className:"h-4 w-4 mr-2"}),"How to Use"]})}),e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Using the Production Kanban Board"}),e.jsx(bs,{children:"A guide to managing your framing production workflow"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Moving Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use drag and drop to move cards between production stages, or use the 'Back' and 'Next' buttons."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Scheduling"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"New orders must be scheduled before they can enter production. Click 'Schedule' on orders in the first column to set an estimated completion date."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Customer Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic notifications are sent to customers when orders change status. You can disable notifications for specific orders in the order details."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Daily Capacity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The system limits new production to 5 orders per day to ensure quality and predictable completion times."})]})]})]})]})})]}),t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading production board..."})]}):e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:h.map(g=>e.jsx(IO,{title:g.title,orders:m(g.status),previousStatus:g.previousStatus,nextStatus:g.nextStatus,updateOrderStatus:d,scheduleOrder:u,currentStatus:g.status},g.status))})]});return e.jsxs(o_,{backend:J_,children:[e.jsx(x,{}),i&&e.jsx(Yt,{open:!0,onOpenChange:()=>o(null),children:e.jsxs(Wt,{className:"max-w-4xl",children:[e.jsx(Xt,{children:e.jsx(Jt,{children:"Work Order"})}),e.jsx(q4,{order:{id:i.id,orderNumber:i.orderNumber,customerName:i.customerName,artworkWidth:i.artworkWidth,artworkHeight:i.artworkHeight,artworkDescription:i.artworkDescription,artworkType:i.artworkType,frameName:i.frameName,matDescription:i.matDescription,glassType:i.glassType,specialServices:i.specialServices,dueDate:i.dueDate,status:i.status,total:i.total,createdAt:i.createdAt,artworkImage:i.artworkImage}})]})}),l&&e.jsx(Yt,{open:!0,onOpenChange:()=>c(null),children:e.jsxs(Wt,{className:"max-w-md",children:[e.jsx(Xt,{children:e.jsx(Jt,{children:"Send Payment Link"})}),e.jsx(DO,{order:{id:l.id,customerName:l.customerName,total:l.total,orderNumber:l.orderNumber},onSuccess:()=>c(null)})]})})]})}function RO(){const{orders:s=[],isLoading:t=!1,error:r=null,updateOrderStatus:n=()=>{},scheduleOrder:a=()=>{}}=kN()||{},[i,o]=p.useState(0);p.useEffect(()=>{console.log("ProductionPage loaded with orders:",s?s.length:0)},[s]);const l=()=>{o(c=>c+1),window.location.reload()};return e.jsx("div",{className:"container mx-auto py-4",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(hs,{variant:"destructive",className:"mb-4",children:[e.jsxs(Qs,{className:"flex items-center",children:[e.jsx(Nl,{className:"mr-2 h-5 w-5"}),"Database Connection Error"]}),e.jsxs(ps,{className:"flex flex-col gap-2",children:[e.jsx("p",{children:"There was a problem connecting to the database. This might be due to a temporary connection issue or server load."}),e.jsxs(P,{variant:"outline",className:"w-fit",onClick:l,children:[e.jsx(nr,{className:"mr-2 h-4 w-4"}),"Retry Connection"]})]})]}),e.jsxs("div",{className:"rounded-lg bg-muted/30 p-8 text-center",children:[e.jsx(Dt,{className:"h-12 w-12 mx-auto text-amber-500 mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Production Kanban Temporarily Unavailable"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The production board cannot be displayed due to a database connection issue."}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"You can try accessing other parts of the application while we resolve this issue."})]})]}):e.jsx(_O,{})})}const X=Symbol.for("drizzle:entityKind");function Ht(s,t){if(!s||typeof s!="object")return!1;if(s instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,X))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(s).constructor;if(r)for(;r;){if(X in r&&r[X]===t[X])return!0;r=Object.getPrototypeOf(r)}return!1}var zf;zf=X;class va{constructor(t,r){R(this,"name");R(this,"keyAsName");R(this,"primary");R(this,"notNull");R(this,"default");R(this,"defaultFn");R(this,"onUpdateFn");R(this,"hasDefault");R(this,"isUnique");R(this,"uniqueName");R(this,"uniqueType");R(this,"dataType");R(this,"columnType");R(this,"enumValues");R(this,"generated");R(this,"generatedIdentity");R(this,"config");this.table=t,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}R(va,zf,"Column");var Wf;Wf=X;class x0{constructor(t,r,n){R(this,"config");R(this,"$default",this.$defaultFn);R(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}R(x0,Wf,"ColumnBuilder");const oa=Symbol.for("drizzle:Name");var Kf;Kf=X;class g0{constructor(t,r){R(this,"reference");R(this,"_onUpdate","no action");R(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:i}=t();return{name:n,columns:a,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new v0(t,this)}}R(g0,Kf,"PgForeignKeyBuilder");var Gf;Gf=X;class v0{constructor(t,r){R(this,"reference");R(this,"onUpdate");R(this,"onDelete");this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:t,columns:r,foreignColumns:n}=this.reference(),a=r.map(l=>l.name),i=n.map(l=>l.name),o=[this.table[oa],...a,n[0].table[oa],...i];return t??`${o.join("_")}_fk`}}R(v0,Gf,"PgForeignKey");function OO(s,...t){return s(...t)}function MO(s,t){return`${s[oa]}_${t.join("_")}_unique`}function fp(s,t,r){for(let n=t;n<s.length;n++){const a=s[n];if(a==="\\"){n++;continue}if(a==='"')return[s.slice(t,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[s.slice(t,n).replace(/\\/g,""),n]}return[s.slice(t).replace(/\\/g,""),s.length]}function y0(s,t=0){const r=[];let n=t,a=!1;for(;n<s.length;){const i=s[n];if(i===","){(a||n===t)&&r.push(""),a=!0,n++;continue}if(a=!1,i==="\\"){n+=2;continue}if(i==='"'){const[c,d]=fp(s,n+1,!0);r.push(c),n=d;continue}if(i==="}")return[r,n+1];if(i==="{"){const[c,d]=y0(s,n+1);r.push(c),n=d;continue}const[o,l]=fp(s,n,!1);r.push(o),n=l}return[r,n]}function FO(s){const[t]=y0(s,1);return t}function j0(s){return`{${s.map(t=>Array.isArray(t)?j0(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var Qf,Zf;class Je extends(Zf=x0,Qf=X,Zf){constructor(){super(...arguments);R(this,"foreignKeyConfigs",[])}array(r){return new w0(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>OO((o,l)=>{const c=new g0(()=>{const d=o();return{columns:[r],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(n)},a,i))}buildExtraConfigColumn(r){return new b0(r,this.config)}}R(Je,Qf,"PgColumnBuilder");var Yf,Xf;class $e extends(Xf=va,Yf=X,Xf){constructor(t,r){r.uniqueName||(r.uniqueName=MO(t,[r.name])),super(t,r),this.table=t}}R($e,Yf,"PgColumn");var Jf,ex;class b0 extends(ex=$e,Jf=X,ex){constructor(){super(...arguments);R(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});R(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}R(b0,Jf,"ExtraConfigColumn");var tx,sx;class w0 extends(sx=Je,tx=X,sx){constructor(t,r,n){super(t,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(t){const r=this.config.baseBuilder.build(t);return new Pd(t,this.config,r)}}R(w0,tx,"PgArrayBuilder");var rx,nx;const xl=class xl extends(nx=$e,rx=X,nx){constructor(r,n,a,i){super(r,n);R(this,"size");this.baseColumn=a,this.range=i,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=FO(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const a=r.map(i=>i===null?null:Ht(this.baseColumn,xl)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?a:j0(a)}};R(xl,rx,"PgArray");let Pd=xl;const xp=Symbol.for("drizzle:isPgEnum");function LO(s){return!!s&&typeof s=="function"&&xp in s&&s[xp]===!0}var ax;ax=X;class Yu{constructor(t,r,n,a=!1){this._={brand:"Subquery",sql:t,selectedFields:r,alias:n,isWith:a}}}R(Yu,ax,"Subquery");const $O={startActiveSpan(s,t){return t()}},la=Symbol.for("drizzle:ViewBaseConfig"),Pc=Symbol.for("drizzle:Schema"),gp=Symbol.for("drizzle:Columns"),vp=Symbol.for("drizzle:ExtraConfigColumns"),Ec=Symbol.for("drizzle:OriginalName"),Dc=Symbol.for("drizzle:BaseName"),Ko=Symbol.for("drizzle:IsAlias"),yp=Symbol.for("drizzle:ExtraConfigBuilder"),N0=Symbol.for("drizzle:IsDrizzleTable");var ix,ox,lx,cx,dx,ux,mx,hx,px,fx;fx=X,px=oa,hx=Ec,mx=Pc,ux=gp,dx=vp,cx=Dc,lx=Ko,ox=N0,ix=yp;class is{constructor(t,r,n){R(this,px);R(this,hx);R(this,mx);R(this,ux);R(this,dx);R(this,cx);R(this,lx,!1);R(this,ox,!0);R(this,ix);this[oa]=this[Ec]=t,this[Pc]=r,this[Dc]=n}}R(is,fx,"Table"),R(is,"Symbol",{Name:oa,Schema:Pc,OriginalName:Ec,Columns:gp,ExtraConfigColumns:vp,BaseName:Dc,IsAlias:Ko,ExtraConfigBuilder:yp});function S0(s){return typeof s=="object"&&s!==null&&N0 in s}function BO(s){return s!=null&&typeof s.getSQL=="function"}function VO(s){var r;const t={sql:"",params:[]};for(const n of s)t.sql+=n.sql,t.params.push(...n.params),(r=n.typings)!=null&&r.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}var xx;xx=X;class _s{constructor(t){R(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new Ft([this])}}R(_s,xx,"StringChunk");var gx;gx=X;const un=class un{constructor(t){R(this,"decoder",C0);R(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return $O.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,t);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=n;return VO(t.map(u=>{var h;if(Ht(u,_s))return{sql:u.value.join(""),params:[]};if(Ht(u,Go))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const m=[new _s("(")];for(const[x,g]of u.entries())m.push(g),x<u.length-1&&m.push(new _s(", "));return m.push(new _s(")")),this.buildQueryFromSourceParams(m,n)}if(Ht(u,un))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:c||u.shouldInlineParams});if(Ht(u,is)){const m=u[is.Symbol.Schema],x=u[is.Symbol.Name];return{sql:m===void 0||u[Ko]?i(x):i(m)+"."+i(x),params:[]}}if(Ht(u,va)){const m=a.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:i(m),params:[]};const x=u.table[is.Symbol.Schema];return{sql:u.table[Ko]||x===void 0?i(u.table[is.Symbol.Name])+"."+i(m):i(x)+"."+i(u.table[is.Symbol.Name])+"."+i(m),params:[]}}if(Ht(u,P0)){const m=u[la].schema,x=u[la].name;return{sql:m===void 0||u[la].isAlias?i(x):i(m)+"."+i(x),params:[]}}if(Ht(u,Xu)){if(Ht(u.value,Zo))return{sql:o(d.value++,u),params:[u],typings:["none"]};const m=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(Ht(m,un))return this.buildQueryFromSourceParams([m],n);if(c)return{sql:this.mapInlineParam(m,n),params:[]};let x=["none"];return l&&(x=[l(u.encoder)]),{sql:o(d.value++,m),params:[m],typings:x}}return Ht(u,Zo)?{sql:o(d.value++,u),params:[u],typings:["none"]}:Ht(u,un.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:Ht(u,Yu)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new _s("("),u._.sql,new _s(") "),new Go(u._.alias)],n):LO(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:BO(u)?(h=u.shouldOmitSQLParens)!=null&&h.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new _s("("),u.getSQL(),new _s(")")],n):c?{sql:this.mapInlineParam(u,n),params:[]}:{sql:o(d.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){const n=t.toString();return r(n==="[object Object]"?JSON.stringify(t):n)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new un.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};R(un,gx,"SQL");let Ft=un;var vx;vx=X;class Go{constructor(t){R(this,"brand");this.value=t}getSQL(){return new Ft([this])}}R(Go,vx,"Name");const C0={mapFromDriverValue:s=>s},k0={mapToDriverValue:s=>s};({...C0,...k0});var yx;yx=X;class Xu{constructor(t,r=k0){R(this,"brand");this.value=t,this.encoder=r}getSQL(){return new Ft([this])}}R(Xu,yx,"Param");function Qo(s,...t){const r=[];(t.length>0||s.length>0&&s[0]!=="")&&r.push(new _s(s[0]));for(const[n,a]of t.entries())r.push(a,new _s(s[n+1]));return new Ft(r)}(s=>{function t(){return new Ft([])}s.empty=t;function r(c){return new Ft(c)}s.fromList=r;function n(c){return new Ft([new _s(c)])}s.raw=n;function a(c,d){const u=[];for(const[h,m]of c.entries())h>0&&d!==void 0&&u.push(d),u.push(m);return new Ft(u)}s.join=a;function i(c){return new Go(c)}s.identifier=i;function o(c){return new Zo(c)}s.placeholder=o;function l(c,d){return new Xu(c,d)}s.param=l})(Qo||(Qo={}));(s=>{var r;r=X;const n=class n{constructor(i,o){R(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};R(n,r,"SQL.Aliased");let t=n;s.Aliased=t})(Ft||(Ft={}));var jx;jx=X;class Zo{constructor(t){this.name=t}getSQL(){return new Ft([this])}}R(Zo,jx,"Placeholder");const T0=Symbol.for("drizzle:IsDrizzleView");var bx,wx,Nx;Nx=X,wx=la,bx=T0;class P0{constructor({name:t,schema:r,selectedFields:n,query:a}){R(this,wx);R(this,bx,!0);this[la]={name:t,originalName:t,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new Ft([this])}}R(P0,Nx,"View");function UO(s){return typeof s=="object"&&s!==null&&T0 in s}va.prototype.getSQL=function(){return new Ft([this])};is.prototype.getSQL=function(){return new Ft([this])};Yu.prototype.getSQL=function(){return new Ft([this])};function HO(s){return s[is.Symbol.Columns]}function qO(s){return s[la].selectedFields}function Vt(s,t){return{name:typeof s=="string"&&s.length>0?s:"",config:typeof s=="object"?s:t}}var Sx,Cx;class Xi extends(Cx=Je,Sx=X,Cx){generatedAlwaysAsIdentity(t){if(t){const{name:r,...n}=t;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:r,...n}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}R(Xi,Sx,"PgIntColumnBaseBuilder");var kx,Tx;class E0 extends(Tx=Xi,kx=X,Tx){constructor(t){super(t,"number","PgBigInt53")}build(t){return new D0(t,this.config)}}R(E0,kx,"PgBigInt53Builder");var Px,Ex;class D0 extends(Ex=$e,Px=X,Ex){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}R(D0,Px,"PgBigInt53");var Dx,Ax;class A0 extends(Ax=Xi,Dx=X,Ax){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new I0(t,this.config)}}R(A0,Dx,"PgBigInt64Builder");var Ix,_x;class I0 extends(_x=$e,Ix=X,_x){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}R(I0,Ix,"PgBigInt64");function zO(s,t){const{name:r,config:n}=Vt(s,t);return n.mode==="number"?new E0(r):new A0(r)}var Rx,Ox;class _0 extends(Ox=Je,Rx=X,Ox){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new R0(t,this.config)}}R(_0,Rx,"PgBigSerial53Builder");var Mx,Fx;class R0 extends(Fx=$e,Mx=X,Fx){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}R(R0,Mx,"PgBigSerial53");var Lx,$x;class O0 extends($x=Je,Lx=X,$x){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new M0(t,this.config)}}R(O0,Lx,"PgBigSerial64Builder");var Bx,Vx;class M0 extends(Vx=$e,Bx=X,Vx){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}R(M0,Bx,"PgBigSerial64");function WO(s,t){const{name:r,config:n}=Vt(s,t);return n.mode==="number"?new _0(r):new O0(r)}var Ux,Hx;class F0 extends(Hx=Je,Ux=X,Hx){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new L0(t,this.config)}}R(F0,Ux,"PgBooleanBuilder");var qx,zx;class L0 extends(zx=$e,qx=X,zx){getSQLType(){return"boolean"}}R(L0,qx,"PgBoolean");function Mt(s){return new F0(s??"")}var Wx,Kx;class $0 extends(Kx=Je,Wx=X,Kx){constructor(t,r){super(t,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new B0(t,this.config)}}R($0,Wx,"PgCharBuilder");var Gx,Qx;class B0 extends(Qx=$e,Gx=X,Qx){constructor(){super(...arguments);R(this,"length",this.config.length);R(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}R(B0,Gx,"PgChar");function KO(s,t={}){const{name:r,config:n}=Vt(s,t);return new $0(r,n)}var Zx,Yx;class V0 extends(Yx=Je,Zx=X,Yx){constructor(t){super(t,"string","PgCidr")}build(t){return new U0(t,this.config)}}R(V0,Zx,"PgCidrBuilder");var Xx,Jx;class U0 extends(Jx=$e,Xx=X,Jx){getSQLType(){return"cidr"}}R(U0,Xx,"PgCidr");function GO(s){return new V0(s??"")}var eg,tg;class H0 extends(tg=Je,eg=X,tg){constructor(t,r,n){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(t){return new q0(t,this.config)}}R(H0,eg,"PgCustomColumnBuilder");var sg,rg;class q0 extends(rg=$e,sg=X,rg){constructor(r,n){super(r,n);R(this,"sqlName");R(this,"mapTo");R(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}R(q0,sg,"PgCustomColumn");function QO(s){return(t,r)=>{const{name:n,config:a}=Vt(t,r);return new H0(n,a,s)}}var ng,ag;class Fa extends(ag=Je,ng=X,ag){defaultNow(){return this.default(Qo`now()`)}}R(Fa,ng,"PgDateColumnBaseBuilder");var ig,og;class z0 extends(og=Fa,ig=X,og){constructor(t){super(t,"date","PgDate")}build(t){return new W0(t,this.config)}}R(z0,ig,"PgDateBuilder");var lg,cg;class W0 extends(cg=$e,lg=X,cg){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}R(W0,lg,"PgDate");var dg,ug;class K0 extends(ug=Fa,dg=X,ug){constructor(t){super(t,"string","PgDateString")}build(t){return new G0(t,this.config)}}R(K0,dg,"PgDateStringBuilder");var mg,hg;class G0 extends(hg=$e,mg=X,hg){getSQLType(){return"date"}}R(G0,mg,"PgDateString");function ZO(s,t){const{name:r,config:n}=Vt(s,t);return(n==null?void 0:n.mode)==="date"?new z0(r):new K0(r)}var pg,fg;class Q0 extends(fg=Je,pg=X,fg){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new Z0(t,this.config)}}R(Q0,pg,"PgDoublePrecisionBuilder");var xg,gg;class Z0 extends(gg=$e,xg=X,gg){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}R(Z0,xg,"PgDoublePrecision");function YO(s){return new Q0(s??"")}var vg,yg;class Y0 extends(yg=Je,vg=X,yg){constructor(t){super(t,"string","PgInet")}build(t){return new X0(t,this.config)}}R(Y0,vg,"PgInetBuilder");var jg,bg;class X0 extends(bg=$e,jg=X,bg){getSQLType(){return"inet"}}R(X0,jg,"PgInet");function XO(s){return new Y0(s??"")}var wg,Ng;class J0 extends(Ng=Xi,wg=X,Ng){constructor(t){super(t,"number","PgInteger")}build(t){return new eS(t,this.config)}}R(J0,wg,"PgIntegerBuilder");var Sg,Cg;class eS extends(Cg=$e,Sg=X,Cg){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}R(eS,Sg,"PgInteger");function Fe(s){return new J0(s??"")}var kg,Tg;class tS extends(Tg=Je,kg=X,Tg){constructor(t,r){super(t,"string","PgInterval"),this.config.intervalConfig=r}build(t){return new sS(t,this.config)}}R(tS,kg,"PgIntervalBuilder");var Pg,Eg;class sS extends(Eg=$e,Pg=X,Eg){constructor(){super(...arguments);R(this,"fields",this.config.intervalConfig.fields);R(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}R(sS,Pg,"PgInterval");function JO(s,t={}){const{name:r,config:n}=Vt(s,t);return new tS(r,n)}var Dg,Ag;class rS extends(Ag=Je,Dg=X,Ag){constructor(t){super(t,"json","PgJson")}build(t){return new nS(t,this.config)}}R(rS,Dg,"PgJsonBuilder");var Ig,_g;class nS extends(_g=$e,Ig=X,_g){constructor(t,r){super(t,r)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}R(nS,Ig,"PgJson");function eM(s){return new rS(s??"")}var Rg,Og;class aS extends(Og=Je,Rg=X,Og){constructor(t){super(t,"json","PgJsonb")}build(t){return new iS(t,this.config)}}R(aS,Rg,"PgJsonbBuilder");var Mg,Fg;class iS extends(Fg=$e,Mg=X,Fg){constructor(t,r){super(t,r)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}R(iS,Mg,"PgJsonb");function La(s){return new aS(s??"")}var Lg,$g;class oS extends($g=Je,Lg=X,$g){constructor(t){super(t,"array","PgLine")}build(t){return new lS(t,this.config)}}R(oS,Lg,"PgLineBuilder");var Bg,Vg;class lS extends(Vg=$e,Bg=X,Vg){getSQLType(){return"line"}mapFromDriverValue(t){const[r,n,a]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}R(lS,Bg,"PgLine");var Ug,Hg;class cS extends(Hg=Je,Ug=X,Hg){constructor(t){super(t,"json","PgLineABC")}build(t){return new dS(t,this.config)}}R(cS,Ug,"PgLineABCBuilder");var qg,zg;class dS extends(zg=$e,qg=X,zg){getSQLType(){return"line"}mapFromDriverValue(t){const[r,n,a]=t.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}R(dS,qg,"PgLineABC");function tM(s,t){const{name:r,config:n}=Vt(s,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new oS(r):new cS(r)}var Wg,Kg;class uS extends(Kg=Je,Wg=X,Kg){constructor(t){super(t,"string","PgMacaddr")}build(t){return new mS(t,this.config)}}R(uS,Wg,"PgMacaddrBuilder");var Gg,Qg;class mS extends(Qg=$e,Gg=X,Qg){getSQLType(){return"macaddr"}}R(mS,Gg,"PgMacaddr");function sM(s){return new uS(s??"")}var Zg,Yg;class hS extends(Yg=Je,Zg=X,Yg){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new pS(t,this.config)}}R(hS,Zg,"PgMacaddr8Builder");var Xg,Jg;class pS extends(Jg=$e,Xg=X,Jg){getSQLType(){return"macaddr8"}}R(pS,Xg,"PgMacaddr8");function rM(s){return new hS(s??"")}var ev,tv;class fS extends(tv=Je,ev=X,tv){constructor(t,r,n){super(t,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(t){return new xS(t,this.config)}}R(fS,ev,"PgNumericBuilder");var sv,rv;class xS extends(rv=$e,sv=X,rv){constructor(r,n){super(r,n);R(this,"precision");R(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}R(xS,sv,"PgNumeric");function De(s,t){const{name:r,config:n}=Vt(s,t);return new fS(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var nv,av;class gS extends(av=Je,nv=X,av){constructor(t){super(t,"array","PgPointTuple")}build(t){return new vS(t,this.config)}}R(gS,nv,"PgPointTupleBuilder");var iv,ov;class vS extends(ov=$e,iv=X,ov){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,n]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}R(vS,iv,"PgPointTuple");var lv,cv;class yS extends(cv=Je,lv=X,cv){constructor(t){super(t,"json","PgPointObject")}build(t){return new jS(t,this.config)}}R(yS,lv,"PgPointObjectBuilder");var dv,uv;class jS extends(uv=$e,dv=X,uv){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,n]=t.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}R(jS,dv,"PgPointObject");function nM(s,t){const{name:r,config:n}=Vt(s,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new gS(r):new yS(r)}function aM(s){const t=[];for(let r=0;r<s.length;r+=2)t.push(Number.parseInt(s.slice(r,r+2),16));return new Uint8Array(t)}function jp(s,t){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,s[t+a]);return n.getFloat64(0,!0)}function bS(s){const t=aM(s);let r=0;const n=t[r];r+=1;const a=new DataView(t.buffer),i=a.getUint32(r,n===1);if(r+=4,i&536870912&&(a.getUint32(r,n===1),r+=4),(i&65535)===1){const o=jp(t,r);r+=8;const l=jp(t,r);return r+=8,[o,l]}throw new Error("Unsupported geometry type")}var mv,hv;class wS extends(hv=Je,mv=X,hv){constructor(t){super(t,"array","PgGeometry")}build(t){return new NS(t,this.config)}}R(wS,mv,"PgGeometryBuilder");var pv,fv;class NS extends(fv=$e,pv=X,fv){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return bS(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}R(NS,pv,"PgGeometry");var xv,gv;class SS extends(gv=Je,xv=X,gv){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new CS(t,this.config)}}R(SS,xv,"PgGeometryObjectBuilder");var vv,yv;class CS extends(yv=$e,vv=X,yv){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const r=bS(t);return{x:r[0],y:r[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}R(CS,vv,"PgGeometryObject");function iM(s,t){const{name:r,config:n}=Vt(s,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new wS(r):new SS(r)}var jv,bv;class kS extends(bv=Je,jv=X,bv){constructor(t,r){super(t,"number","PgReal"),this.config.length=r}build(t){return new TS(t,this.config)}}R(kS,jv,"PgRealBuilder");var wv,Nv;class TS extends(Nv=$e,wv=X,Nv){constructor(r,n){super(r,n);R(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}R(TS,wv,"PgReal");function oM(s){return new kS(s??"")}var Sv,Cv;class PS extends(Cv=Je,Sv=X,Cv){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new ES(t,this.config)}}R(PS,Sv,"PgSerialBuilder");var kv,Tv;class ES extends(Tv=$e,kv=X,Tv){getSQLType(){return"serial"}}R(ES,kv,"PgSerial");function xt(s){return new PS(s??"")}var Pv,Ev;class DS extends(Ev=Xi,Pv=X,Ev){constructor(t){super(t,"number","PgSmallInt")}build(t){return new AS(t,this.config)}}R(DS,Pv,"PgSmallIntBuilder");var Dv,Av;class AS extends(Av=$e,Dv=X,Av){constructor(){super(...arguments);R(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}R(AS,Dv,"PgSmallInt");function lM(s){return new DS(s??"")}var Iv,_v;class IS extends(_v=Je,Iv=X,_v){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new _S(t,this.config)}}R(IS,Iv,"PgSmallSerialBuilder");var Rv,Ov;class _S extends(Ov=$e,Rv=X,Ov){getSQLType(){return"smallserial"}}R(_S,Rv,"PgSmallSerial");function cM(s){return new IS(s??"")}var Mv,Fv;class RS extends(Fv=Je,Mv=X,Fv){constructor(t,r){super(t,"string","PgText"),this.config.enumValues=r.enum}build(t){return new OS(t,this.config)}}R(RS,Mv,"PgTextBuilder");var Lv,$v;class OS extends($v=$e,Lv=X,$v){constructor(){super(...arguments);R(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}R(OS,Lv,"PgText");function $(s,t={}){const{name:r,config:n}=Vt(s,t);return new RS(r,n)}var Bv,Vv;class MS extends(Vv=Fa,Bv=X,Vv){constructor(t,r,n){super(t,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(t){return new FS(t,this.config)}}R(MS,Bv,"PgTimeBuilder");var Uv,Hv;class FS extends(Hv=$e,Uv=X,Hv){constructor(r,n){super(r,n);R(this,"withTimezone");R(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}R(FS,Uv,"PgTime");function dM(s,t={}){const{name:r,config:n}=Vt(s,t);return new MS(r,n.withTimezone??!1,n.precision)}var qv,zv;class LS extends(zv=Fa,qv=X,zv){constructor(t,r,n){super(t,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(t){return new $S(t,this.config)}}R(LS,qv,"PgTimestampBuilder");var Wv,Kv;class $S extends(Kv=$e,Wv=X,Kv){constructor(r,n){super(r,n);R(this,"withTimezone");R(this,"precision");R(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));R(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}R($S,Wv,"PgTimestamp");var Gv,Qv;class BS extends(Qv=Fa,Gv=X,Qv){constructor(t,r,n){super(t,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(t){return new VS(t,this.config)}}R(BS,Gv,"PgTimestampStringBuilder");var Zv,Yv;class VS extends(Yv=$e,Zv=X,Yv){constructor(r,n){super(r,n);R(this,"withTimezone");R(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}R(VS,Zv,"PgTimestampString");function Re(s,t={}){const{name:r,config:n}=Vt(s,t);return(n==null?void 0:n.mode)==="string"?new BS(r,n.withTimezone??!1,n.precision):new LS(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Xv,Jv;class US extends(Jv=Je,Xv=X,Jv){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Qo`gen_random_uuid()`)}build(t){return new HS(t,this.config)}}R(US,Xv,"PgUUIDBuilder");var ey,ty;class HS extends(ty=$e,ey=X,ty){getSQLType(){return"uuid"}}R(HS,ey,"PgUUID");function uM(s){return new US(s??"")}var sy,ry;class qS extends(ry=Je,sy=X,ry){constructor(t,r){super(t,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new zS(t,this.config)}}R(qS,sy,"PgVarcharBuilder");var ny,ay;class zS extends(ay=$e,ny=X,ay){constructor(){super(...arguments);R(this,"length",this.config.length);R(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}R(zS,ny,"PgVarchar");function mM(s,t={}){const{name:r,config:n}=Vt(s,t);return new qS(r,n)}var iy,oy;class WS extends(oy=Je,iy=X,oy){constructor(t,r){super(t,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(t){return new KS(t,this.config)}}R(WS,iy,"PgBinaryVectorBuilder");var ly,cy;class KS extends(cy=$e,ly=X,cy){constructor(){super(...arguments);R(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}R(KS,ly,"PgBinaryVector");function hM(s,t){const{name:r,config:n}=Vt(s,t);return new WS(r,n)}var dy,uy;class GS extends(uy=Je,dy=X,uy){constructor(t,r){super(t,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(t){return new QS(t,this.config)}}R(GS,dy,"PgHalfVectorBuilder");var my,hy;class QS extends(hy=$e,my=X,hy){constructor(){super(...arguments);R(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}R(QS,my,"PgHalfVector");function pM(s,t){const{name:r,config:n}=Vt(s,t);return new GS(r,n)}var py,fy;class ZS extends(fy=Je,py=X,fy){constructor(t,r){super(t,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(t){return new YS(t,this.config)}}R(ZS,py,"PgSparseVectorBuilder");var xy,gy;class YS extends(gy=$e,xy=X,gy){constructor(){super(...arguments);R(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}R(YS,xy,"PgSparseVector");function fM(s,t){const{name:r,config:n}=Vt(s,t);return new ZS(r,n)}var vy,yy;class XS extends(yy=Je,vy=X,yy){constructor(t,r){super(t,"array","PgVector"),this.config.dimensions=r.dimensions}build(t){return new JS(t,this.config)}}R(XS,vy,"PgVectorBuilder");var jy,by;class JS extends(by=$e,jy=X,by){constructor(){super(...arguments);R(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}R(JS,jy,"PgVector");function xM(s,t){const{name:r,config:n}=Vt(s,t);return new XS(r,n)}function gM(){return{bigint:zO,bigserial:WO,boolean:Mt,char:KO,cidr:GO,customType:QO,date:ZO,doublePrecision:YO,inet:XO,integer:Fe,interval:JO,json:eM,jsonb:La,line:tM,macaddr:sM,macaddr8:rM,numeric:De,point:nM,geometry:iM,real:oM,serial:xt,smallint:lM,smallserial:cM,text:$,time:dM,timestamp:Re,uuid:uM,varchar:mM,bit:hM,halfvec:pM,sparsevec:fM,vector:xM}}const Ed=Symbol.for("drizzle:PgInlineForeignKeys"),bp=Symbol.for("drizzle:EnableRLS");var wy,Ny,Sy,Cy,ky;class ca extends(ky=is,Cy=X,Sy=Ed,Ny=bp,wy=is.Symbol.ExtraConfigBuilder,ky){constructor(){super(...arguments);R(this,Sy,[]);R(this,Ny,!1);R(this,wy)}}R(ca,Cy,"PgTable"),R(ca,"Symbol",Object.assign({},is.Symbol,{InlineForeignKeys:Ed,EnableRLS:bp}));function vM(s,t,r,n,a=s){const i=new ca(s,n,a),o=typeof t=="function"?t(gM()):t,l=Object.fromEntries(Object.entries(o).map(([u,h])=>{const m=h;m.setName(u);const x=m.build(i);return i[Ed].push(...m.buildForeignKeys(x,i)),[u,x]})),c=Object.fromEntries(Object.entries(o).map(([u,h])=>{const m=h;m.setName(u);const x=m.buildExtraConfigColumn(i);return[u,x]})),d=Object.assign(i,l);return d[is.Symbol.Columns]=l,d[is.Symbol.ExtraConfigColumns]=c,r&&(d[ca.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:()=>(d[ca.Symbol.EnableRLS]=!0,d)})}const lt=(s,t,r)=>vM(s,t,r,void 0);function yM(...s){return s[0].columns?new Dd(s[0].columns,s[0].name):new Dd(s)}var Ty;Ty=X;class Dd{constructor(t,r){R(this,"columns");R(this,"name");this.columns=t,this.name=r}build(t){return new eC(t,this.columns,this.name)}}R(Dd,Ty,"PgPrimaryKeyBuilder");var Py;Py=X;class eC{constructor(t,r,n){R(this,"columns");R(this,"name");this.table=t,this.columns=r,this.name=n}getName(){return this.name??`${this.table[ca.Symbol.Name]}_${this.columns.map(t=>t.name).join("_")}_pk`}}R(eC,Py,"PgPrimaryKey");var Xe;(function(s){s.assertEqual=a=>a;function t(a){}s.assertIs=t;function r(a){throw new Error}s.assertNever=r,s.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},s.getValidEnumValues=a=>{const i=s.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return s.objectValues(o)},s.objectValues=a=>s.objectKeys(a).map(function(i){return a[i]}),s.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},s.find=(a,i)=>{for(const o of a)if(i(o))return o},s.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}s.joinValues=n,s.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Xe||(Xe={}));var Ad;(function(s){s.mergeShapes=(t,r)=>({...t,...r})})(Ad||(Ad={}));const xe=Xe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Or=s=>{switch(typeof s){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return isNaN(s)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(s)?xe.array:s===null?xe.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?xe.promise:typeof Map<"u"&&s instanceof Map?xe.map:typeof Set<"u"&&s instanceof Set?xe.set:typeof Date<"u"&&s instanceof Date?xe.date:xe.object;default:return xe.unknown}},se=Xe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jM=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class Ns extends Error{constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof Ns))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ns.create=s=>new Ns(s);const ya=(s,t)=>{let r;switch(s.code){case se.invalid_type:s.received===xe.undefined?r="Required":r=`Expected ${s.expected}, received ${s.received}`;break;case se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(s.expected,Xe.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:r=`Unrecognized key(s) in object: ${Xe.joinValues(s.keys,", ")}`;break;case se.invalid_union:r="Invalid input";break;case se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Xe.joinValues(s.options)}`;break;case se.invalid_enum_value:r=`Invalid enum value. Expected ${Xe.joinValues(s.options)}, received '${s.received}'`;break;case se.invalid_arguments:r="Invalid function arguments";break;case se.invalid_return_type:r="Invalid function return type";break;case se.invalid_date:r="Invalid date";break;case se.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(r=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?r=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?r=`Invalid input: must end with "${s.validation.endsWith}"`:Xe.assertNever(s.validation):s.validation!=="regex"?r=`Invalid ${s.validation}`:r="Invalid";break;case se.too_small:s.type==="array"?r=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?r=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?r=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?r=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:r="Invalid input";break;case se.too_big:s.type==="array"?r=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?r=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?r=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?r=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?r=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:r="Invalid input";break;case se.custom:r="Invalid input";break;case se.invalid_intersection_types:r="Intersection results could not be merged";break;case se.not_multiple_of:r=`Number must be a multiple of ${s.multipleOf}`;break;case se.not_finite:r="Number must be finite";break;default:r=t.defaultError,Xe.assertNever(s)}return{message:r}};let tC=ya;function bM(s){tC=s}function Yo(){return tC}const Xo=s=>{const{data:t,path:r,errorMaps:n,issueData:a}=s,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}},wM=[];function me(s,t){const r=Yo(),n=Xo({issueData:t,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,r,r===ya?void 0:ya].filter(a=>!!a)});s.common.issues.push(n)}class ts{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return _e;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return ts.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return _e;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const _e=Object.freeze({status:"aborted"}),Yn=s=>({status:"dirty",value:s}),cs=s=>({status:"valid",value:s}),Id=s=>s.status==="aborted",_d=s=>s.status==="dirty",wi=s=>s.status==="valid",Ni=s=>typeof Promise<"u"&&s instanceof Promise;function Jo(s,t,r,n){if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(s)}function sC(s,t,r,n,a){if(typeof t=="function"?s!==t||!a:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(s,r),r}var we;(function(s){s.errToObj=t=>typeof t=="string"?{message:t}:t||{},s.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(we||(we={}));var Ja,ei;class dr{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wp=(s,t)=>{if(wi(t))return{success:!0,data:t.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ns(s.common.issues);return this._error=r,this._error}}};function Le(s){if(!s)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=s;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{var c,d;const{message:u}=s;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(c=u??n)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=u??r)!==null&&d!==void 0?d:l.defaultError}},description:a}}class He{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Or(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Or(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ts,ctx:{common:t.parent.common,data:t.data,parsedType:Or(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ni(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const a={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Or(t)},i=this._parseSync({data:t,path:a.path,parent:a});return wp(a,i)}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Or(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Ni(a)?a:Promise.resolve(a));return wp(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:se.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Zs({schema:this,typeName:Ie.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return ar.create(this,this._def)}nullable(){return zr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ws.create(this,this._def)}promise(){return ba.create(this,this._def)}or(t){return Ti.create([this,t],this._def)}and(t){return Pi.create(this,t,this._def)}transform(t){return new Zs({...Le(this._def),schema:this,typeName:Ie.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new _i({...Le(this._def),innerType:this,defaultValue:r,typeName:Ie.ZodDefault})}brand(){return new Ju({typeName:Ie.ZodBranded,type:this,...Le(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Ri({...Le(this._def),innerType:this,catchValue:r,typeName:Ie.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Ji.create(this,t)}readonly(){return Oi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const NM=/^c[^\s-]{8,}$/i,SM=/^[0-9a-z]+$/,CM=/^[0-9A-HJKMNP-TV-Z]{26}$/,kM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TM=/^[a-z0-9_-]{21}$/i,PM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,EM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,DM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ac;const AM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IM=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,_M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",RM=new RegExp(`^${rC}$`);function nC(s){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?t=`${t}\\.\\d{${s.precision}}`:s.precision==null&&(t=`${t}(\\.\\d+)?`),t}function OM(s){return new RegExp(`^${nC(s)}$`)}function aC(s){let t=`${rC}T${nC(s)}`;const r=[];return r.push(s.local?"Z?":"Z"),s.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function MM(s,t){return!!((t==="v4"||!t)&&AM.test(s)||(t==="v6"||!t)&&IM.test(s))}class zs extends He{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==xe.string){const i=this._getOrReturnCtx(t);return me(i,{code:se.invalid_type,expected:xe.string,received:i.parsedType}),_e}const n=new ts;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),me(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),me(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?me(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&me(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")EM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"email",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Ac||(Ac=new RegExp(DM,"u")),Ac.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"emoji",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")kM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"uuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")TM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"nanoid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")NM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"cuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")SM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"cuid2",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")CM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"ulid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),me(a,{validation:"url",code:se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"regex",code:se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?aC(i).test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?RM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?OM(i).test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{code:se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?PM.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"duration",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?MM(t.data,i.version)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"ip",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?_M.test(t.data)||(a=this._getOrReturnCtx(t,a),me(a,{validation:"base64",code:se.invalid_string,message:i.message}),n.dirty()):Xe.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:se.invalid_string,...we.errToObj(n)})}_addCheck(t){return new zs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...we.errToObj(t)})}url(t){return this._addCheck({kind:"url",...we.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...we.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...we.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...we.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...we.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...we.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...we.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...we.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...we.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...we.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...we.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...we.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...we.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...we.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...we.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...we.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...we.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...we.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...we.errToObj(r)})}nonempty(t){return this.min(1,we.errToObj(t))}trim(){return new zs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}zs.create=s=>{var t;return new zs({checks:[],typeName:Ie.ZodString,coerce:(t=s==null?void 0:s.coerce)!==null&&t!==void 0?t:!1,...Le(s)})};function FM(s,t){const r=(s.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=parseInt(s.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Ur extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==xe.number){const i=this._getOrReturnCtx(t);return me(i,{code:se.invalid_type,expected:xe.number,received:i.parsedType}),_e}let n;const a=new ts;for(const i of this._def.checks)i.kind==="int"?Xe.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),me(n,{code:se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?FM(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),me(n,{code:se.not_finite,message:i.message}),a.dirty()):Xe.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,we.toString(r))}gt(t,r){return this.setLimit("min",t,!1,we.toString(r))}lte(t,r){return this.setLimit("max",t,!0,we.toString(r))}lt(t,r){return this.setLimit("max",t,!1,we.toString(r))}setLimit(t,r,n,a){return new Ur({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:we.toString(a)}]})}_addCheck(t){return new Ur({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:we.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:we.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:we.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:we.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:we.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:we.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:we.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:we.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:we.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Xe.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Ur.create=s=>new Ur({checks:[],typeName:Ie.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...Le(s)});class Hr extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==xe.bigint){const i=this._getOrReturnCtx(t);return me(i,{code:se.invalid_type,expected:xe.bigint,received:i.parsedType}),_e}let n;const a=new ts;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),me(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Xe.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,we.toString(r))}gt(t,r){return this.setLimit("min",t,!1,we.toString(r))}lte(t,r){return this.setLimit("max",t,!0,we.toString(r))}lt(t,r){return this.setLimit("max",t,!1,we.toString(r))}setLimit(t,r,n,a){return new Hr({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:we.toString(a)}]})}_addCheck(t){return new Hr({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:we.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:we.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:we.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:we.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:we.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Hr.create=s=>{var t;return new Hr({checks:[],typeName:Ie.ZodBigInt,coerce:(t=s==null?void 0:s.coerce)!==null&&t!==void 0?t:!1,...Le(s)})};class Si extends He{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==xe.boolean){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.boolean,received:n.parsedType}),_e}return cs(t.data)}}Si.create=s=>new Si({typeName:Ie.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...Le(s)});class _n extends He{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==xe.date){const i=this._getOrReturnCtx(t);return me(i,{code:se.invalid_type,expected:xe.date,received:i.parsedType}),_e}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return me(i,{code:se.invalid_date}),_e}const n=new ts;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),me(a,{code:se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),me(a,{code:se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Xe.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new _n({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:we.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:we.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}_n.create=s=>new _n({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:Ie.ZodDate,...Le(s)});class el extends He{_parse(t){if(this._getType(t)!==xe.symbol){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.symbol,received:n.parsedType}),_e}return cs(t.data)}}el.create=s=>new el({typeName:Ie.ZodSymbol,...Le(s)});class Ci extends He{_parse(t){if(this._getType(t)!==xe.undefined){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.undefined,received:n.parsedType}),_e}return cs(t.data)}}Ci.create=s=>new Ci({typeName:Ie.ZodUndefined,...Le(s)});class ki extends He{_parse(t){if(this._getType(t)!==xe.null){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.null,received:n.parsedType}),_e}return cs(t.data)}}ki.create=s=>new ki({typeName:Ie.ZodNull,...Le(s)});class ja extends He{constructor(){super(...arguments),this._any=!0}_parse(t){return cs(t.data)}}ja.create=s=>new ja({typeName:Ie.ZodAny,...Le(s)});class Sn extends He{constructor(){super(...arguments),this._unknown=!0}_parse(t){return cs(t.data)}}Sn.create=s=>new Sn({typeName:Ie.ZodUnknown,...Le(s)});class Cr extends He{_parse(t){const r=this._getOrReturnCtx(t);return me(r,{code:se.invalid_type,expected:xe.never,received:r.parsedType}),_e}}Cr.create=s=>new Cr({typeName:Ie.ZodNever,...Le(s)});class tl extends He{_parse(t){if(this._getType(t)!==xe.undefined){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.void,received:n.parsedType}),_e}return cs(t.data)}}tl.create=s=>new tl({typeName:Ie.ZodVoid,...Le(s)});class Ws extends He{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==xe.array)return me(r,{code:se.invalid_type,expected:xe.array,received:r.parsedType}),_e;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(me(r,{code:o?se.too_big:se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(me(r,{code:se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(me(r,{code:se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new dr(r,o,r.path,l)))).then(o=>ts.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new dr(r,o,r.path,l)));return ts.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Ws({...this._def,minLength:{value:t,message:we.toString(r)}})}max(t,r){return new Ws({...this._def,maxLength:{value:t,message:we.toString(r)}})}length(t,r){return new Ws({...this._def,exactLength:{value:t,message:we.toString(r)}})}nonempty(t){return this.min(1,t)}}Ws.create=(s,t)=>new Ws({type:s,minLength:null,maxLength:null,exactLength:null,typeName:Ie.ZodArray,...Le(t)});function Kn(s){if(s instanceof bt){const t={};for(const r in s.shape){const n=s.shape[r];t[r]=ar.create(Kn(n))}return new bt({...s._def,shape:()=>t})}else return s instanceof Ws?new Ws({...s._def,type:Kn(s.element)}):s instanceof ar?ar.create(Kn(s.unwrap())):s instanceof zr?zr.create(Kn(s.unwrap())):s instanceof ur?ur.create(s.items.map(t=>Kn(t))):s}class bt extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Xe.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==xe.object){const d=this._getOrReturnCtx(t);return me(d,{code:se.invalid_type,expected:xe.object,received:d.parsedType}),_e}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Cr&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new dr(a,h,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Cr){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(me(a,{code:se.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new dr(a,h,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,m=await u.value;d.push({key:h,value:m,alwaysSet:u.alwaysSet})}return d}).then(d=>ts.mergeObjectSync(n,d)):ts.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return we.errToObj,new bt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,i,o,l;const c=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=we.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new bt({...this._def,unknownKeys:"strip"})}passthrough(){return new bt({...this._def,unknownKeys:"passthrough"})}extend(t){return new bt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new bt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ie.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new bt({...this._def,catchall:t})}pick(t){const r={};return Xe.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new bt({...this._def,shape:()=>r})}omit(t){const r={};return Xe.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new bt({...this._def,shape:()=>r})}deepPartial(){return Kn(this)}partial(t){const r={};return Xe.objectKeys(this.shape).forEach(n=>{const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}),new bt({...this._def,shape:()=>r})}required(t){const r={};return Xe.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof ar;)i=i._def.innerType;r[n]=i}}),new bt({...this._def,shape:()=>r})}keyof(){return iC(Xe.objectKeys(this.shape))}}bt.create=(s,t)=>new bt({shape:()=>s,unknownKeys:"strip",catchall:Cr.create(),typeName:Ie.ZodObject,...Le(t)});bt.strictCreate=(s,t)=>new bt({shape:()=>s,unknownKeys:"strict",catchall:Cr.create(),typeName:Ie.ZodObject,...Le(t)});bt.lazycreate=(s,t)=>new bt({shape:s,unknownKeys:"strip",catchall:Cr.create(),typeName:Ie.ZodObject,...Le(t)});class Ti extends He{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ns(l.ctx.common.issues));return me(r,{code:se.invalid_union,unionErrors:o}),_e}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Ns(c));return me(r,{code:se.invalid_union,unionErrors:l}),_e}}get options(){return this._def.options}}Ti.create=(s,t)=>new Ti({options:s,typeName:Ie.ZodUnion,...Le(t)});const gr=s=>s instanceof Di?gr(s.schema):s instanceof Zs?gr(s.innerType()):s instanceof Ai?[s.value]:s instanceof qr?s.options:s instanceof Ii?Xe.objectValues(s.enum):s instanceof _i?gr(s._def.innerType):s instanceof Ci?[void 0]:s instanceof ki?[null]:s instanceof ar?[void 0,...gr(s.unwrap())]:s instanceof zr?[null,...gr(s.unwrap())]:s instanceof Ju||s instanceof Oi?gr(s.unwrap()):s instanceof Ri?gr(s._def.innerType):[];class Kl extends He{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==xe.object)return me(r,{code:se.invalid_type,expected:xe.object,received:r.parsedType}),_e;const n=this.discriminator,a=r.data[n],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(me(r,{code:se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const a=new Map;for(const i of r){const o=gr(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);a.set(l,i)}}return new Kl({typeName:Ie.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...Le(n)})}}function Rd(s,t){const r=Or(s),n=Or(t);if(s===t)return{valid:!0,data:s};if(r===xe.object&&n===xe.object){const a=Xe.objectKeys(t),i=Xe.objectKeys(s).filter(l=>a.indexOf(l)!==-1),o={...s,...t};for(const l of i){const c=Rd(s[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===xe.array&&n===xe.array){if(s.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<s.length;i++){const o=s[i],l=t[i],c=Rd(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===xe.date&&n===xe.date&&+s==+t?{valid:!0,data:s}:{valid:!1}}class Pi extends He{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(Id(i)||Id(o))return _e;const l=Rd(i.value,o.value);return l.valid?((_d(i)||_d(o))&&r.dirty(),{status:r.value,value:l.data}):(me(n,{code:se.invalid_intersection_types}),_e)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Pi.create=(s,t,r)=>new Pi({left:s,right:t,typeName:Ie.ZodIntersection,...Le(r)});class ur extends He{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xe.array)return me(n,{code:se.invalid_type,expected:xe.array,received:n.parsedType}),_e;if(n.data.length<this._def.items.length)return me(n,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new dr(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ts.mergeArray(r,o)):ts.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new ur({...this._def,rest:t})}}ur.create=(s,t)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ur({items:s,typeName:Ie.ZodTuple,rest:null,...Le(t)})};class Ei extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xe.object)return me(n,{code:se.invalid_type,expected:xe.object,received:n.parsedType}),_e;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in n.data)a.push({key:i._parse(new dr(n,l,n.path,l)),value:o._parse(new dr(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?ts.mergeObjectAsync(r,a):ts.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof He?new Ei({keyType:t,valueType:r,typeName:Ie.ZodRecord,...Le(n)}):new Ei({keyType:zs.create(),valueType:t,typeName:Ie.ZodRecord,...Le(r)})}}class sl extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xe.map)return me(n,{code:se.invalid_type,expected:xe.map,received:n.parsedType}),_e;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new dr(n,l,n.path,[d,"key"])),value:i._parse(new dr(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return _e;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return _e;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}sl.create=(s,t,r)=>new sl({valueType:t,keyType:s,typeName:Ie.ZodMap,...Le(r)});class Rn extends He{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==xe.set)return me(n,{code:se.invalid_type,expected:xe.set,received:n.parsedType}),_e;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(me(n,{code:se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(me(n,{code:se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return _e;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new dr(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Rn({...this._def,minSize:{value:t,message:we.toString(r)}})}max(t,r){return new Rn({...this._def,maxSize:{value:t,message:we.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Rn.create=(s,t)=>new Rn({valueType:s,minSize:null,maxSize:null,typeName:Ie.ZodSet,...Le(t)});class da extends He{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==xe.function)return me(r,{code:se.invalid_type,expected:xe.function,received:r.parsedType}),_e;function n(l,c){return Xo({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Yo(),ya].filter(d=>!!d),issueData:{code:se.invalid_arguments,argumentsError:c}})}function a(l,c){return Xo({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Yo(),ya].filter(d=>!!d),issueData:{code:se.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof ba){const l=this;return cs(async function(...c){const d=new Ns([]),u=await l._def.args.parseAsync(c,i).catch(x=>{throw d.addIssue(n(c,x)),d}),h=await Reflect.apply(o,this,u);return await l._def.returns._def.type.parseAsync(h,i).catch(x=>{throw d.addIssue(a(h,x)),d})})}else{const l=this;return cs(function(...c){const d=l._def.args.safeParse(c,i);if(!d.success)throw new Ns([n(c,d.error)]);const u=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(u,i);if(!h.success)throw new Ns([a(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new da({...this._def,args:ur.create(t).rest(Sn.create())})}returns(t){return new da({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new da({args:t||ur.create([]).rest(Sn.create()),returns:r||Sn.create(),typeName:Ie.ZodFunction,...Le(n)})}}class Di extends He{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Di.create=(s,t)=>new Di({getter:s,typeName:Ie.ZodLazy,...Le(t)});class Ai extends He{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return me(r,{received:r.data,code:se.invalid_literal,expected:this._def.value}),_e}return{status:"valid",value:t.data}}get value(){return this._def.value}}Ai.create=(s,t)=>new Ai({value:s,typeName:Ie.ZodLiteral,...Le(t)});function iC(s,t){return new qr({values:s,typeName:Ie.ZodEnum,...Le(t)})}class qr extends He{constructor(){super(...arguments),Ja.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return me(r,{expected:Xe.joinValues(n),received:r.parsedType,code:se.invalid_type}),_e}if(Jo(this,Ja)||sC(this,Ja,new Set(this._def.values)),!Jo(this,Ja).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return me(r,{received:r.data,code:se.invalid_enum_value,options:n}),_e}return cs(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return qr.create(t,{...this._def,...r})}exclude(t,r=this._def){return qr.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Ja=new WeakMap;qr.create=iC;class Ii extends He{constructor(){super(...arguments),ei.set(this,void 0)}_parse(t){const r=Xe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==xe.string&&n.parsedType!==xe.number){const a=Xe.objectValues(r);return me(n,{expected:Xe.joinValues(a),received:n.parsedType,code:se.invalid_type}),_e}if(Jo(this,ei)||sC(this,ei,new Set(Xe.getValidEnumValues(this._def.values))),!Jo(this,ei).has(t.data)){const a=Xe.objectValues(r);return me(n,{received:n.data,code:se.invalid_enum_value,options:a}),_e}return cs(t.data)}get enum(){return this._def.values}}ei=new WeakMap;Ii.create=(s,t)=>new Ii({values:s,typeName:Ie.ZodNativeEnum,...Le(t)});class ba extends He{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==xe.promise&&r.common.async===!1)return me(r,{code:se.invalid_type,expected:xe.promise,received:r.parsedType}),_e;const n=r.parsedType===xe.promise?r.data:Promise.resolve(r.data);return cs(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ba.create=(s,t)=>new ba({type:s,typeName:Ie.ZodPromise,...Le(t)});class Zs extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{me(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return _e;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?_e:c.status==="dirty"||r.value==="dirty"?Yn(c.value):c});{if(r.value==="aborted")return _e;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?_e:l.status==="dirty"||r.value==="dirty"?Yn(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?_e:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?_e:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!wi(o))return o;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>wi(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):o);Xe.assertNever(a)}}Zs.create=(s,t,r)=>new Zs({schema:s,typeName:Ie.ZodEffects,effect:t,...Le(r)});Zs.createWithPreprocess=(s,t,r)=>new Zs({schema:t,effect:{type:"preprocess",transform:s},typeName:Ie.ZodEffects,...Le(r)});class ar extends He{_parse(t){return this._getType(t)===xe.undefined?cs(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ar.create=(s,t)=>new ar({innerType:s,typeName:Ie.ZodOptional,...Le(t)});class zr extends He{_parse(t){return this._getType(t)===xe.null?cs(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}zr.create=(s,t)=>new zr({innerType:s,typeName:Ie.ZodNullable,...Le(t)});class _i extends He{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===xe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}_i.create=(s,t)=>new _i({innerType:s,typeName:Ie.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Le(t)});class Ri extends He{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ni(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ns(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ns(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ri.create=(s,t)=>new Ri({innerType:s,typeName:Ie.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Le(t)});class rl extends He{_parse(t){if(this._getType(t)!==xe.nan){const n=this._getOrReturnCtx(t);return me(n,{code:se.invalid_type,expected:xe.nan,received:n.parsedType}),_e}return{status:"valid",value:t.data}}}rl.create=s=>new rl({typeName:Ie.ZodNaN,...Le(s)});const LM=Symbol("zod_brand");class Ju extends He{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ji extends He{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_e:i.status==="dirty"?(r.dirty(),Yn(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?_e:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new Ji({in:t,out:r,typeName:Ie.ZodPipeline})}}class Oi extends He{_parse(t){const r=this._def.innerType._parse(t),n=a=>(wi(a)&&(a.value=Object.freeze(a.value)),a);return Ni(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Oi.create=(s,t)=>new Oi({innerType:s,typeName:Ie.ZodReadonly,...Le(t)});function oC(s,t={},r){return s?ja.create().superRefine((n,a)=>{var i,o;if(!s(n)){const l=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,c=(o=(i=l.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;a.addIssue({code:"custom",...d,fatal:c})}}):ja.create()}const $M={object:bt.lazycreate};var Ie;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(Ie||(Ie={}));const BM=(s,t={message:`Input not instance of ${s.name}`})=>oC(r=>r instanceof s,t),vr=zs.create,lC=Ur.create,VM=rl.create,UM=Hr.create,nl=Si.create,HM=_n.create,qM=el.create,zM=Ci.create,WM=ki.create,KM=ja.create,GM=Sn.create,QM=Cr.create,ZM=tl.create,YM=Ws.create,cC=bt.create,XM=bt.strictCreate,JM=Ti.create,eF=Kl.create,tF=Pi.create,sF=ur.create,rF=Ei.create,nF=sl.create,aF=Rn.create,iF=da.create,oF=Di.create,lF=Ai.create,cF=qr.create,dF=Ii.create,uF=ba.create,Np=Zs.create,mF=ar.create,hF=zr.create,pF=Zs.createWithPreprocess,fF=Ji.create,xF=()=>vr().optional(),gF=()=>lC().optional(),vF=()=>nl().optional(),yF={string:s=>zs.create({...s,coerce:!0}),number:s=>Ur.create({...s,coerce:!0}),boolean:s=>Si.create({...s,coerce:!0}),bigint:s=>Hr.create({...s,coerce:!0}),date:s=>_n.create({...s,coerce:!0})},jF=_e;var Ge=Object.freeze({__proto__:null,defaultErrorMap:ya,setErrorMap:bM,getErrorMap:Yo,makeIssue:Xo,EMPTY_PATH:wM,addIssueToContext:me,ParseStatus:ts,INVALID:_e,DIRTY:Yn,OK:cs,isAborted:Id,isDirty:_d,isValid:wi,isAsync:Ni,get util(){return Xe},get objectUtil(){return Ad},ZodParsedType:xe,getParsedType:Or,ZodType:He,datetimeRegex:aC,ZodString:zs,ZodNumber:Ur,ZodBigInt:Hr,ZodBoolean:Si,ZodDate:_n,ZodSymbol:el,ZodUndefined:Ci,ZodNull:ki,ZodAny:ja,ZodUnknown:Sn,ZodNever:Cr,ZodVoid:tl,ZodArray:Ws,ZodObject:bt,ZodUnion:Ti,ZodDiscriminatedUnion:Kl,ZodIntersection:Pi,ZodTuple:ur,ZodRecord:Ei,ZodMap:sl,ZodSet:Rn,ZodFunction:da,ZodLazy:Di,ZodLiteral:Ai,ZodEnum:qr,ZodNativeEnum:Ii,ZodPromise:ba,ZodEffects:Zs,ZodTransformer:Zs,ZodOptional:ar,ZodNullable:zr,ZodDefault:_i,ZodCatch:Ri,ZodNaN:rl,BRAND:LM,ZodBranded:Ju,ZodPipeline:Ji,ZodReadonly:Oi,custom:oC,Schema:He,ZodSchema:He,late:$M,get ZodFirstPartyTypeKind(){return Ie},coerce:yF,any:KM,array:YM,bigint:UM,boolean:nl,date:HM,discriminatedUnion:eF,effect:Np,enum:cF,function:iF,instanceof:BM,intersection:tF,lazy:oF,literal:lF,map:nF,nan:VM,nativeEnum:dF,never:QM,null:WM,nullable:hF,number:lC,object:cC,oboolean:vF,onumber:gF,optional:mF,ostring:xF,pipeline:fF,preprocess:pF,promise:uF,record:rF,set:aF,strictObject:XM,string:vr,symbol:qM,transformer:Np,tuple:sF,undefined:zM,union:JM,unknown:GM,void:ZM,NEVER:jF,ZodIssueCode:se,quotelessJson:jM,ZodError:Ns});const jt={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Pt(s,t){return t.includes(s.columnType)}function bF(s){return"enumValues"in s&&Array.isArray(s.enumValues)&&s.enumValues.length>0}const wF=Ge.union([Ge.string(),Ge.number(),Ge.boolean(),Ge.null()]),NF=Ge.union([wF,Ge.record(Ge.any()),Ge.array(Ge.any())]),SF=Ge.custom(s=>s instanceof Buffer);function dC(s,t){const r=(t==null?void 0:t.zodInstance)??Ge,n=(t==null?void 0:t.coerce)??{};let a;return bF(s)&&(a=s.enumValues.length?r.enum(s.enumValues):r.string()),a||(Pt(s,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):Pt(s,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):Pt(s,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=s.dimensions?a.length(s.dimensions):a):Pt(s,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):Pt(s,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):Pt(s,["PgArray"])?(a=r.array(dC(s.baseColumn,r)),a=s.size?a.length(s.size):a):s.dataType==="array"?a=r.array(r.any()):s.dataType==="number"?a=CF(s,r,n):s.dataType==="bigint"?a=kF(s,r,n):s.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():s.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():s.dataType==="string"?a=TF(s,r,n):s.dataType==="json"?a=NF:s.dataType==="custom"?a=r.any():s.dataType==="buffer"&&(a=SF)),a||(a=r.any()),a}function CF(s,t,r){let n=s.getSQLType().includes("unsigned"),a,i,o=!1;Pt(s,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:jt.INT8_MIN,i=n?jt.INT8_UNSIGNED_MAX:jt.INT8_MAX,o=!0):Pt(s,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:jt.INT16_MIN,i=n?jt.INT16_UNSIGNED_MAX:jt.INT16_MAX,o=!0):Pt(s,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:jt.INT24_MIN,i=n?jt.INT24_UNSIGNED_MAX:jt.INT24_MAX,o=Pt(s,["MySqlMediumInt","SingleStoreMediumInt"])):Pt(s,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:jt.INT32_MIN,i=n?jt.INT32_UNSIGNED_MAX:jt.INT32_MAX,o=!0):Pt(s,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:jt.INT48_MIN,i=n?jt.INT48_UNSIGNED_MAX:jt.INT48_MAX):Pt(s,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||Pt(s,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):Pt(s,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,o=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?t.coerce.number():t.number();return l=l.min(a).max(i),o?l.int():l}function kF(s,t,r){const n=s.getSQLType().includes("unsigned"),a=n?0n:jt.INT64_MIN,i=n?jt.INT64_UNSIGNED_MAX:jt.INT64_MAX;return(r===!0||r!=null&&r.bigint?t.coerce.bigint():t.bigint()).min(a).max(i)}function TF(s,t,r){if(Pt(s,["PgUUID"]))return t.string().uuid();let n,a,i=!1;Pt(s,["PgVarchar","SQLiteText"])?n=s.length:Pt(s,["MySqlVarChar","SingleStoreVarChar"])?n=s.length??jt.INT16_UNSIGNED_MAX:Pt(s,["MySqlText","SingleStoreText"])&&(s.textType==="longtext"?n=jt.INT32_UNSIGNED_MAX:s.textType==="mediumtext"?n=jt.INT24_UNSIGNED_MAX:s.textType==="text"?n=jt.INT16_UNSIGNED_MAX:n=jt.INT8_UNSIGNED_MAX),Pt(s,["PgChar","MySqlChar","SingleStoreChar"])&&(n=s.length,i=!0),Pt(s,["PgBinaryVector"])&&(a=/^[01]+$/,n=s.dimensions);let o=r===!0||r!=null&&r.string?t.coerce.string():t.string();return o=a?o.regex(a):o,n&&i?o.length(n):n?o.max(n):o}function uC(s){return S0(s)?HO(s):qO(s)}function mC(s,t,r,n){const a={};for(const[i,o]of Object.entries(s)){if(!Ht(o,va)&&!Ht(o,Ft)&&!Ht(o,Ft.Aliased)&&typeof o=="object"){const h=S0(o)||UO(o)?uC(o):o;a[i]=mC(h,t[i]??{},r,n);continue}const l=t[i];if(l!==void 0&&typeof l!="function"){a[i]=l;continue}const c=Ht(o,va)?o:void 0,d=c?dC(c,n):Ge.any(),u=typeof l=="function"?l(d):d;r.never(c)||(a[i]=u,c&&(r.nullable(c)&&(a[i]=a[i].nullable()),r.optional(c)&&(a[i]=a[i].optional())))}return Ge.object(a)}const PF={never:s=>{var t,r;return((t=s==null?void 0:s.generated)==null?void 0:t.type)==="always"||((r=s==null?void 0:s.generatedIdentity)==null?void 0:r.type)==="always"},optional:s=>!s.notNull||s.notNull&&s.hasDefault,nullable:s=>!s.notNull},ct=(s,t)=>{const r=uC(s);return mC(r,{},PF)},eo=lt("customers",{id:xt("id").primaryKey(),name:$("name").notNull(),email:$("email"),phone:$("phone"),address:$("address"),stripeCustomerId:$("stripe_customer_id"),createdAt:Re("created_at").defaultNow()});ct(eo).omit({id:!0,createdAt:!0});const em=lt("frames",{id:$("id").primaryKey(),name:$("name").notNull(),manufacturer:$("manufacturer").notNull(),material:$("material").notNull(),width:De("width").notNull(),depth:De("depth").notNull(),price:De("price").notNull(),catalogImage:$("catalog_image").notNull(),edgeTexture:$("edge_texture"),corner:$("corner")});ct(em);const tm=lt("mat_colors",{id:$("id").primaryKey(),name:$("name").notNull(),color:$("color").notNull(),price:De("price").notNull(),manufacturer:$("manufacturer"),code:$("code"),description:$("description"),category:$("category")});ct(tm);const hC=lt("glass_options",{id:$("id").primaryKey(),name:$("name").notNull(),description:$("description").notNull(),price:De("price").notNull()});ct(hC);const pC=lt("special_services",{id:$("id").primaryKey(),name:$("name").notNull(),description:$("description").notNull(),price:De("price").notNull()});ct(pC);const fC=lt("order_groups",{id:xt("id").primaryKey(),customerId:Fe("customer_id").references(()=>eo.id),subtotal:De("subtotal"),tax:De("tax"),total:De("total"),status:$("status").notNull().default("open"),paymentMethod:$("payment_method"),notes:$("notes"),createdAt:Re("created_at").defaultNow(),stripePaymentIntentId:$("stripe_payment_intent_id"),stripePaymentStatus:$("stripe_payment_status"),paymentDate:Re("payment_date"),discountAmount:De("discount_amount"),discountType:$("discount_type"),taxExempt:Mt("tax_exempt").default(!1),cashAmount:De("cash_amount"),checkNumber:$("check_number"),invoiceEmailSent:Mt("invoice_email_sent").default(!1),invoiceEmailDate:Re("invoice_email_date")});ct(fC).omit({id:!0,createdAt:!0});const go=["order_processed","scheduled","materials_ordered","materials_arrived","frame_cut","mat_cut","prepped","completed","delayed"],Jr=lt("orders",{id:xt("id").primaryKey(),customerId:Fe("customer_id").references(()=>eo.id),orderGroupId:Fe("order_group_id").references(()=>fC.id),frameId:$("frame_id").references(()=>em.id),matColorId:$("mat_color_id").references(()=>tm.id),glassOptionId:$("glass_option_id").references(()=>hC.id),artworkWidth:De("artwork_width").notNull(),artworkHeight:De("artwork_height").notNull(),matWidth:De("mat_width").notNull(),artworkDescription:$("artwork_description"),artworkType:$("artwork_type"),artworkLocation:$("artwork_location"),quantity:Fe("quantity").notNull().default(1),subtotal:De("subtotal").notNull(),tax:De("tax").notNull(),total:De("total").notNull(),status:$("status").notNull().default("pending"),productionStatus:$("production_status").$type().notNull().default("order_processed"),previousStatus:$("previous_status").$type(),createdAt:Re("created_at").defaultNow(),dueDate:Re("due_date"),artworkImage:$("artwork_image"),frameDesignImage:$("frame_design_image"),lastNotificationSent:Re("last_notification_sent"),estimatedCompletionDays:Fe("estimated_completion_days"),addToWholesaleOrder:Mt("add_to_wholesale_order").default(!1),lastStatusChange:Re("last_status_change").defaultNow(),notificationsEnabled:Mt("notifications_enabled").default(!0),useMultipleMats:Mt("use_multiple_mats").default(!1),useMultipleFrames:Mt("use_multiple_frames").default(!1),useManualFrame:Mt("use_manual_frame").default(!1),manualFrameName:$("manual_frame_name"),manualFrameCost:De("manual_frame_cost"),miscChargeDescription:$("misc_charge_description"),miscChargeAmount:De("misc_charge_amount")});ct(Jr).omit({id:!0,createdAt:!0});const EF=lt("order_special_services",{orderId:Fe("order_id").references(()=>Jr.id),specialServiceId:$("special_service_id").references(()=>pC.id)},s=>({pk:yM({columns:[s.orderId,s.specialServiceId]})}));ct(EF);const DF=lt("order_mats",{id:xt("id").primaryKey(),orderId:Fe("order_id").references(()=>Jr.id).notNull(),matColorId:$("mat_color_id").references(()=>tm.id).notNull(),position:Fe("position").notNull(),width:De("width").notNull(),offset:De("offset").notNull().default("0"),createdAt:Re("created_at").defaultNow()});ct(DF).omit({id:!0,createdAt:!0});const AF=lt("order_frames",{id:xt("id").primaryKey(),orderId:Fe("order_id").references(()=>Jr.id).notNull(),frameId:$("frame_id").references(()=>em.id).notNull(),position:Fe("position").notNull(),distance:De("distance").notNull().default("0"),createdAt:Re("created_at").defaultNow()});ct(AF).omit({id:!0,createdAt:!0});const IF=lt("wholesale_orders",{id:xt("id").primaryKey(),orderId:Fe("order_id").references(()=>Jr.id),manufacturer:$("manufacturer").notNull(),items:La("items").notNull(),status:$("status").notNull().default("pending"),createdAt:Re("created_at").defaultNow()});ct(IF).omit({id:!0,createdAt:!0});const Bn=lt("users",{id:xt("id").primaryKey(),username:$("username").notNull().unique(),password:$("password").notNull(),role:$("role").notNull().default("employee")});ct(Bn).omit({id:!0});const _F=lt("larson_juhl_catalog",{id:$("id").primaryKey(),name:$("name").notNull(),hex_color:$("hex_color"),price:De("price",{precision:10,scale:6}).notNull(),code:$("code").notNull(),crescent_code:$("crescent_code"),description:$("description"),category:$("category"),manufacturer:$("manufacturer").notNull(),type:$("type").notNull().default("matboard"),material:$("material"),width:De("width"),depth:De("depth"),edge_texture:$("edge_texture"),corner:$("corner"),catalog_image:$("catalog_image"),createdAt:Re("created_at").defaultNow()});ct(_F).omit({createdAt:!0});const RF=lt("customer_notifications",{id:xt("id").primaryKey(),customerId:Fe("customer_id").references(()=>eo.id),orderId:Fe("order_id").references(()=>Jr.id),notificationType:$("notification_type").$type().notNull(),channel:$("channel").$type().notNull().default("email"),subject:$("subject").notNull(),message:$("message").notNull(),sentAt:Re("sent_at").defaultNow(),successful:Mt("successful").notNull(),responseData:La("response_data"),previousStatus:$("previous_status"),newStatus:$("new_status"),paymentLinkId:Fe("payment_link_id")});ct(RF).omit({id:!0,sentAt:!0});const OF=["pending","processed","ordered","arrived","frame_cut","mat_cut","prepped","completed","delayed","canceled"],MF=lt("material_orders",{id:xt("id").primaryKey(),materialType:$("material_type").$type().notNull(),materialId:$("material_id").notNull(),materialName:$("material_name").notNull(),quantity:De("quantity").notNull(),status:$("status").$type().notNull().default("pending"),sourceOrderId:Fe("source_order_id").references(()=>Jr.id),orderDate:Re("order_date"),expectedArrival:Re("expected_arrival"),actualArrival:Re("actual_arrival"),supplierName:$("supplier_name"),supplierOrderNumber:$("supplier_order_number"),notes:$("notes"),costPerUnit:De("cost_per_unit"),totalCost:De("total_cost"),priority:$("priority").default("normal"),hubOrderId:$("hub_order_id"),hubSyncStatus:$("hub_sync_status").default("not_synced"),hubLastSyncDate:Re("hub_last_sync_date"),hubTrackingInfo:$("hub_tracking_info"),hubEstimatedDelivery:Re("hub_estimated_delivery"),hubSupplierNotes:$("hub_supplier_notes"),orderReference:$("order_reference"),unitMeasurement:$("unit_measurement"),createdAt:Re("created_at").defaultNow()});ct(MF).omit({id:!0,createdAt:!0,hubOrderId:!0,hubSyncStatus:!0,hubLastSyncDate:!0,hubTrackingInfo:!0,hubEstimatedDelivery:!0,hubSupplierNotes:!0});const sm=lt("suppliers",{id:xt("id").primaryKey(),name:$("name").notNull(),contactName:$("contact_name"),email:$("email"),phone:$("phone"),address:$("address"),website:$("website"),accountNumber:$("account_number"),notes:$("notes"),paymentTerms:$("payment_terms"),minimumOrderAmount:De("minimum_order_amount"),shippingPreference:$("shipping_preference"),leadTime:Fe("lead_time"),active:Mt("active").default(!0),createdAt:Re("created_at").defaultNow(),lastOrderDate:Re("last_order_date")});ct(sm).omit({id:!0,createdAt:!0});const rm=lt("inventory_categories",{id:xt("id").primaryKey(),name:$("name").notNull(),description:$("description"),parentCategoryId:Fe("parent_category_id").references(()=>rm.id),createdAt:Re("created_at").defaultNow()});ct(rm).omit({id:!0,createdAt:!0});const $a=lt("inventory_locations",{id:xt("id").primaryKey(),name:$("name").notNull(),description:$("description"),type:$("type"),parentLocationId:Fe("parent_location_id").references(()=>$a.id),active:Mt("active").default(!0),createdAt:Re("created_at").defaultNow()});ct($a).omit({id:!0,createdAt:!0});const Gl=lt("inventory_items",{id:xt("id").primaryKey(),sku:$("sku").notNull().unique(),name:$("name").notNull(),description:$("description"),categoryId:Fe("category_id").references(()=>rm.id),supplierId:Fe("supplier_id").references(()=>sm.id),supplierSku:$("supplier_sku"),unitOfMeasure:$("unit_of_measure").$type().notNull(),costPerUnit:De("cost_per_unit").notNull(),retailPrice:De("retail_price"),minimumStockLevel:De("minimum_stock_level").notNull(),reorderLevel:De("reorder_level").notNull(),reorderQuantity:De("reorder_quantity"),locationId:Fe("location_id").references(()=>$a.id),barcode:$("barcode"),notes:$("notes"),tags:$("tags").array(),isActive:Mt("is_active").default(!0),createdAt:Re("created_at").defaultNow(),updatedAt:Re("updated_at").defaultNow(),lastCountDate:Re("last_count_date"),imageUrl:$("image_url"),dimensions:La("dimensions"),autoBatchReorder:Mt("auto_batch_reorder").default(!1),materialType:$("material_type").$type(),materialId:$("material_id")});ct(Gl).omit({id:!0,createdAt:!0,updatedAt:!0});const FF=lt("inventory_transactions",{id:xt("id").primaryKey(),itemId:Fe("item_id").references(()=>Gl.id).notNull(),type:$("type").$type().notNull(),quantity:De("quantity").notNull(),unitCost:De("unit_cost"),locationId:Fe("location_id").references(()=>$a.id),relatedOrderId:Fe("related_order_id").references(()=>Jr.id),notes:$("notes"),referenceNumber:$("reference_number"),createdAt:Re("created_at").defaultNow(),createdBy:Fe("created_by").references(()=>Bn.id)});ct(FF).omit({id:!0,createdAt:!0});const xC=lt("purchase_orders",{id:xt("id").primaryKey(),poNumber:$("po_number").notNull(),supplierId:Fe("supplier_id").references(()=>sm.id).notNull(),orderDate:Re("order_date").notNull(),expectedDeliveryDate:Re("expected_delivery_date"),status:$("status").$type().default("draft").notNull(),subtotal:De("subtotal"),tax:De("tax"),shipping:De("shipping"),total:De("total"),notes:$("notes"),createdBy:Fe("created_by").references(()=>Bn.id),createdAt:Re("created_at").defaultNow(),updatedAt:Re("updated_at").defaultNow(),receivedDate:Re("received_date"),supplierOrderConfirmation:$("supplier_order_confirmation"),shippingMethod:$("shipping_method"),paymentMethod:$("payment_method"),paymentTerms:$("payment_terms"),tracking:$("tracking"),attachments:$("attachments").array()});ct(xC).omit({id:!0,createdAt:!0,updatedAt:!0});const LF=lt("purchase_order_lines",{id:xt("id").primaryKey(),purchaseOrderId:Fe("purchase_order_id").references(()=>xC.id).notNull(),itemId:Fe("item_id").references(()=>Gl.id).notNull(),quantity:De("quantity").notNull(),unitCost:De("unit_cost").notNull(),lineTotal:De("line_total").notNull(),receivedQuantity:De("received_quantity").default("0"),notes:$("notes"),createdAt:Re("created_at").defaultNow()});ct(LF).omit({id:!0,createdAt:!0});const gC=lt("inventory_counts",{id:xt("id").primaryKey(),countReference:$("count_reference").notNull(),startDate:Re("start_date").notNull(),endDate:Re("end_date"),status:$("status").default("in_progress").notNull(),notes:$("notes"),createdBy:Fe("created_by").references(()=>Bn.id),createdAt:Re("created_at").defaultNow()});ct(gC).omit({id:!0,createdAt:!0});const $F=lt("inventory_count_items",{id:xt("id").primaryKey(),countId:Fe("count_id").references(()=>gC.id).notNull(),itemId:Fe("item_id").references(()=>Gl.id).notNull(),locationId:Fe("location_id").references(()=>$a.id),expectedQuantity:De("expected_quantity"),actualQuantity:De("actual_quantity"),notes:$("notes"),countedBy:Fe("counted_by").references(()=>Bn.id),countedAt:Re("counted_at"),createdAt:Re("created_at").defaultNow()});ct($F).omit({id:!0,createdAt:!0});const BF=lt("payment_links",{id:xt("id").primaryKey(),token:$("token").notNull().unique(),amount:De("amount",{precision:10,scale:2}).notNull(),description:$("description"),customerId:Fe("customer_id").references(()=>eo.id),createdAt:Re("created_at").defaultNow(),expiresAt:Re("expires_at").notNull(),usedAt:Re("used_at"),used:Mt("used").default(!1),paymentIntentId:$("payment_intent_id"),paymentStatus:$("payment_status").default("pending")});ct(BF).omit({id:!0,createdAt:!0,usedAt:!0,used:!0,paymentIntentId:!0,paymentStatus:!0});const VF=["inventory_location","inventory_item","material_order","customer_order","production_status","artwork_location"],nm=lt("qr_codes",{id:xt("id").primaryKey(),code:$("code").notNull().unique(),type:$("type").$type().notNull(),entityId:$("entity_id").notNull(),title:$("title").notNull(),description:$("description"),metadata:La("metadata"),createdAt:Re("created_at").defaultNow(),lastScanned:Re("last_scanned"),scanCount:Fe("scan_count").default(0),active:Mt("active").default(!0)});ct(nm).omit({id:!0,createdAt:!0,lastScanned:!0,scanCount:!0});const UF=lt("qr_code_scans",{id:xt("id").primaryKey(),qrCodeId:Fe("qr_code_id").references(()=>nm.id).notNull(),userId:Fe("user_id").references(()=>Bn.id),scannedAt:Re("scanned_at").defaultNow(),location:$("location"),action:$("action"),metadata:La("metadata")});ct(UF).omit({id:!0,scannedAt:!0});const HF=lt("material_locations",{id:xt("id").primaryKey(),materialType:$("material_type").$type().notNull(),materialId:$("material_id").notNull(),locationId:Fe("location_id").references(()=>$a.id).notNull(),qrCodeId:Fe("qr_code_id").references(()=>nm.id),quantity:De("quantity").notNull().default("1"),notes:$("notes"),lastUpdated:Re("last_updated").defaultNow(),active:Mt("active").default(!0)});ct(HF).omit({id:!0,lastUpdated:!0});const qF=lt("notifications",{id:xt("id").primaryKey(),title:$("title").notNull(),description:$("description").notNull(),source:$("source").notNull(),sourceId:$("source_id"),type:$("type").$type().notNull().default("info"),createdAt:Re("created_at").defaultNow(),read:Mt("read").default(!1),actionable:Mt("actionable").default(!1),link:$("link"),smsEnabled:Mt("sms_enabled").default(!1),smsRecipient:$("sms_recipient"),userId:Fe("user_id").references(()=>Bn.id)});ct(qF).omit({id:!0,createdAt:!0});function vC({order:s,showHistory:t=!0}){const{toast:r}=Be(),{toggleNotificationsMutation:n}=Qi({orderId:s.id,customerId:s.customerId||void 0}),a=()=>{const d=go.indexOf(s.productionStatus);if(s.productionStatus==="scheduled")return 10;if(s.productionStatus==="delayed"){if(s.previousStatus){const u=go.indexOf(s.previousStatus);return Math.max(u*100/(go.length-1)-10,10)}return 50}return d>=0?d*100/(go.length-1):0},i=d=>{switch(d){case"order_processed":return e.jsx(fh,{className:"h-5 w-5"});case"scheduled":return e.jsx(Vr,{className:"h-5 w-5"});case"materials_ordered":return e.jsx(Gr,{className:"h-5 w-5"});case"materials_arrived":return e.jsx(O2,{className:"h-5 w-5"});case"frame_cut":case"mat_cut":return e.jsx(ha,{className:"h-5 w-5"});case"in_production":return e.jsx(ha,{className:"h-5 w-5"});case"prepped":return e.jsx(fh,{className:"h-5 w-5"});case"completed":return e.jsx(R2,{className:"h-5 w-5"});case"delayed":return e.jsx(Dt,{className:"h-5 w-5"});default:return e.jsx(Nt,{className:"h-5 w-5"})}},l=(d=>{switch(d){case"order_processed":return{title:"Order Processed",description:"Your order has been received and is being processed."};case"scheduled":return{title:"Order Scheduled",description:"Your order has been scheduled for production."};case"materials_ordered":return{title:"Materials Ordered",description:"Materials for your frame have been ordered from our suppliers."};case"materials_arrived":return{title:"Materials Arrived",description:"All materials for your frame have arrived and are ready for assembly."};case"frame_cut":return{title:"Frame Cutting",description:"The frame moulding is being cut to size for your artwork."};case"mat_cut":return{title:"Mat Cutting",description:"The mat board is being cut to size for your artwork."};case"in_production":return{title:"In Production",description:"Your frame is currently being assembled and finished."};case"prepped":return{title:"Assembly Preparation",description:"Your frame components are prepared and ready for final assembly."};case"completed":return{title:"Order Completed",description:"Your custom frame is complete and ready for pickup or delivery."};case"delayed":return{title:"Order Delayed",description:"There is a delay with your order. We will provide updates as soon as possible."};default:return{title:"Processing",description:"Your order is being processed."}}})(s.productionStatus),c=d=>{n.mutate({id:s.id,enabled:d},{onSuccess:()=>{r({title:"Notification preferences updated",description:`Email notifications have been ${d?"enabled":"disabled"} for this order`})}})};return e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Order Progress"}),e.jsxs(ee,{children:["Current status: ",l.title]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email notifications"}),e.jsx(br,{checked:!!s.notificationsEnabled,onCheckedChange:c,disabled:n.isPending})]})]})}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Order Received"}),e.jsx("span",{children:"Completed"})]}),e.jsx(ia,{value:a(),className:"h-2"})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-md flex items-start gap-3",children:[i(s.productionStatus),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:l.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),s.dueDate&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Expected completion: ",lr(new Date(s.dueDate),"PPP")]})]})]})]}),s.estimatedCompletionDays&&s.estimatedCompletionDays>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Estimated time to completion: ",s.estimatedCompletionDays," ",s.estimatedCompletionDays===1?"day":"days"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-md",children:[e.jsx(gi,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Materials Location"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.artworkLocation||"Workshop - Bay A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-md",children:[e.jsx(gi,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Artwork Location"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Shelf #",s.id,"-ART"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hs,{className:"h-6 w-6 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Order QR Code"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Quick access to order #",s.id]})]})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{const d=`${window.location.origin}/order-progress/${s.id}`,u={orderId:s.id,status:s.productionStatus,materials:s.artworkLocation||"Workshop - Bay A",artwork:`Shelf #${s.id}-ART`,url:d},h=document.createElement("div");h.style.cssText=`
                  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                  background: rgba(0,0,0,0.8); display: flex; align-items: center;
                  justify-content: center; z-index: 9999;
                `;const m=document.createElement("div");m.style.cssText=`
                  background: white; padding: 30px; border-radius: 10px;
                  text-align: center; max-width: 400px;
                `;const x=`https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=${encodeURIComponent(d)}`;m.innerHTML=`
                  <h3 style="margin: 0 0 20px 0;">Order #${s.id} QR Code</h3>
                  <div style="margin: 20px 0; padding: 10px; background: #f5f5f5;">
                    <img src="${x}" alt="QR Code" style="max-width: 200px; height: auto;" />
                  </div>
                  <p style="font-size: 12px; color: #666; margin: 15px 0;">
                    Materials: ${u.materials}<br>
                    Artwork: ${u.artwork}<br>
                    <strong>URL:</strong> ${d}
                  </p>
                  <button onclick="this.closest('.qr-modal').remove()" style="
                    padding: 8px 16px; background: #007bff; color: white;
                    border: none; border-radius: 4px; cursor: pointer; margin-right: 8px;
                  ">Close</button>
                  <button onclick="window.print()" style="
                    padding: 8px 16px; background: #28a745; color: white;
                    border: none; border-radius: 4px; cursor: pointer;
                  ">Print</button>
                `,h.className="qr-modal",h.appendChild(m),document.body.appendChild(h),h.addEventListener("click",g=>{g.target===h&&h.remove()})},children:[e.jsx(Hs,{className:"h-4 w-4 mr-1"}),"View QR"]})]})]}),e.jsx("div",{className:"flex gap-2 pt-4 border-t",children:e.jsxs(P,{variant:"outline",size:"sm",onClick:async()=>{try{const d=await fetch(`/api/customers/${s.customerId}`),u=await d.json();if(!d.ok||!u.customer)throw new Error("Customer not found");const h=u.customer,m=await fetch("/api/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:s.id,customerEmail:h.email,customerPhone:h.phone,type:"status_update",message:`Your order #${s.id} status has been updated to: ${l.title}`})}),x=await m.json();if(m.ok)r({title:"Notification Sent",description:`Customer ${h.name} has been notified of the order status update.`});else throw new Error(x.error||"Failed to send notification")}catch(d){console.error("Notification error:",d),r({title:"Notification Failed",description:d.message||"Failed to send notification. Please try again.",variant:"destructive"})}},children:[e.jsx(Sr,{className:"h-4 w-4 mr-1"}),"Send Update"]})})]}),t&&e.jsx(ht,{className:"flex justify-end border-t pt-4",children:e.jsx(P,{variant:"ghost",asChild:!0,children:e.jsx(Rt,{href:`/order-progress/${s.id}`,children:"View detailed progress"})})})]})}var am="Collapsible",[zF,yC]=fs(am),[WF,im]=zF(am),jC=p.forwardRef((s,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=s,[c=!1,d]=ms({prop:n,defaultProp:a,onChange:o});return e.jsx(WF,{scope:r,disabled:i,contentId:mr(),open:c,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:e.jsx(Se.div,{"data-state":lm(c),"data-disabled":i?"":void 0,...l,ref:t})})});jC.displayName=am;var bC="CollapsibleTrigger",wC=p.forwardRef((s,t)=>{const{__scopeCollapsible:r,...n}=s,a=im(bC,r);return e.jsx(Se.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":lm(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:ge(s.onClick,a.onOpenToggle)})});wC.displayName=bC;var om="CollapsibleContent",NC=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=im(om,s.__scopeCollapsible);return e.jsx(ds,{present:r||a.open,children:({present:i})=>e.jsx(KF,{...n,ref:t,present:i})})});NC.displayName=om;var KF=p.forwardRef((s,t)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=s,o=im(om,r),[l,c]=p.useState(n),d=p.useRef(null),u=We(t,d),h=p.useRef(0),m=h.current,x=p.useRef(0),g=x.current,f=o.open||l,v=p.useRef(f),y=p.useRef();return p.useEffect(()=>{const j=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(j)},[]),Ss(()=>{const j=d.current;if(j){y.current=y.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const b=j.getBoundingClientRect();h.current=b.height,x.current=b.width,v.current||(j.style.transitionDuration=y.current.transitionDuration,j.style.animationName=y.current.animationName),c(n)}},[o.open,n]),e.jsx(Se.div,{"data-state":lm(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!f,...i,ref:u,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...s.style},children:f&&a})});function lm(s){return s?"open":"closed"}var GF=jC,QF=wC,ZF=NC,Tr="Accordion",YF=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[cm,XF,JF]=Vi(Tr),[Ql,tU]=fs(Tr,[JF,yC]),dm=yC(),SC=Pe.forwardRef((s,t)=>{const{type:r,...n}=s,a=n,i=n;return e.jsx(cm.Provider,{scope:s.__scopeAccordion,children:r==="multiple"?e.jsx(r5,{...i,ref:t}):e.jsx(s5,{...a,ref:t})})});SC.displayName=Tr;var[CC,e5]=Ql(Tr),[kC,t5]=Ql(Tr,{collapsible:!1}),s5=Pe.forwardRef((s,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=s,[l,c]=ms({prop:r,defaultProp:n,onChange:a});return e.jsx(CC,{scope:s.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Pe.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(kC,{scope:s.__scopeAccordion,collapsible:i,children:e.jsx(TC,{...o,ref:t})})})}),r5=Pe.forwardRef((s,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=s,[o=[],l]=ms({prop:r,defaultProp:n,onChange:a}),c=Pe.useCallback(u=>l((h=[])=>[...h,u]),[l]),d=Pe.useCallback(u=>l((h=[])=>h.filter(m=>m!==u)),[l]);return e.jsx(CC,{scope:s.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:e.jsx(kC,{scope:s.__scopeAccordion,collapsible:!0,children:e.jsx(TC,{...i,ref:t})})})}),[n5,Zl]=Ql(Tr),TC=Pe.forwardRef((s,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=s,l=Pe.useRef(null),c=We(l,t),d=XF(r),h=On(a)==="ltr",m=ge(s.onKeyDown,x=>{var C;if(!YF.includes(x.key))return;const g=x.target,f=d().filter(E=>{var I;return!((I=E.ref.current)!=null&&I.disabled)}),v=f.findIndex(E=>E.ref.current===g),y=f.length;if(v===-1)return;x.preventDefault();let j=v;const b=0,k=y-1,S=()=>{j=v+1,j>k&&(j=b)},D=()=>{j=v-1,j<b&&(j=k)};switch(x.key){case"Home":j=b;break;case"End":j=k;break;case"ArrowRight":i==="horizontal"&&(h?S():D());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(h?D():S());break;case"ArrowUp":i==="vertical"&&D();break}const T=j%y;(C=f[T].ref.current)==null||C.focus()});return e.jsx(n5,{scope:r,disabled:n,direction:a,orientation:i,children:e.jsx(cm.Slot,{scope:r,children:e.jsx(Se.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:m})})})}),al="AccordionItem",[a5,um]=Ql(al),PC=Pe.forwardRef((s,t)=>{const{__scopeAccordion:r,value:n,...a}=s,i=Zl(al,r),o=e5(al,r),l=dm(r),c=mr(),d=n&&o.value.includes(n)||!1,u=i.disabled||s.disabled;return e.jsx(a5,{scope:r,open:d,disabled:u,triggerId:c,children:e.jsx(GF,{"data-orientation":i.orientation,"data-state":RC(d),...l,...a,ref:t,disabled:u,open:d,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});PC.displayName=al;var EC="AccordionHeader",DC=Pe.forwardRef((s,t)=>{const{__scopeAccordion:r,...n}=s,a=Zl(Tr,r),i=um(EC,r);return e.jsx(Se.h3,{"data-orientation":a.orientation,"data-state":RC(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});DC.displayName=EC;var Od="AccordionTrigger",AC=Pe.forwardRef((s,t)=>{const{__scopeAccordion:r,...n}=s,a=Zl(Tr,r),i=um(Od,r),o=t5(Od,r),l=dm(r);return e.jsx(cm.ItemSlot,{scope:r,children:e.jsx(QF,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:t})})});AC.displayName=Od;var IC="AccordionContent",_C=Pe.forwardRef((s,t)=>{const{__scopeAccordion:r,...n}=s,a=Zl(Tr,r),i=um(IC,r),o=dm(r);return e.jsx(ZF,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});_C.displayName=IC;function RC(s){return s?"open":"closed"}var i5=SC,o5=PC,l5=DC,OC=AC,MC=_C;const c5=i5,FC=p.forwardRef(({className:s,...t},r)=>e.jsx(o5,{ref:r,className:J("border-b",s),...t}));FC.displayName="AccordionItem";const LC=p.forwardRef(({className:s,children:t,...r},n)=>e.jsx(l5,{className:"flex",children:e.jsxs(OC,{ref:n,className:J("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...r,children:[t,e.jsx(ns,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));LC.displayName=OC.displayName;const $C=p.forwardRef(({className:s,children:t,...r},n)=>e.jsx(MC,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:e.jsx("div",{className:J("pb-4 pt-0",s),children:t})}));$C.displayName=MC.displayName;function BC({orderId:s,customerId:t,limit:r=5}){const{orderNotifications:n,customerNotifications:a,isLoadingOrderNotifications:i,isLoadingCustomerNotifications:o}=Qi({orderId:s,customerId:t}),l=x=>x==="status_update"?e.jsx(vi,{className:"h-4 w-4"}):x==="estimated_completion"?e.jsx(Vr,{className:"h-4 w-4"}):x.includes("status_change")?e.jsx(vi,{className:"h-4 w-4"}):x.includes("due_date")?e.jsx(Vr,{className:"h-4 w-4"}):x.includes("completion")?e.jsx(ls,{className:"h-4 w-4"}):x.includes("delay")?e.jsx(Dt,{className:"h-4 w-4"}):e.jsx(Fr,{className:"h-4 w-4"}),c=x=>{switch(x){case"email":return e.jsx(hu,{className:"h-4 w-4"});case"sms":return e.jsx(dj,{className:"h-4 w-4"});default:return e.jsx(Fr,{className:"h-4 w-4"})}},d=s?n:t?a:[],u=[...d].sort((x,g)=>new Date(g.sentAt).getTime()-new Date(x.sentAt).getTime()),h=r?u.slice(0,r):u;return(s?i:o)?e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Notification History"}),e.jsx(ee,{children:"Recent updates about your order"})]}),e.jsx(H,{children:e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"animate-spin h-6 w-6 border-4 border-primary border-t-transparent rounded-full"})})})]}):d.length===0?e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Notification History"}),e.jsx(ee,{children:"Recent updates about your order"})]}),e.jsx(H,{children:e.jsxs("div",{className:"py-6 text-center",children:[e.jsx(Fr,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No notifications have been sent yet."})]})})]}):e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Notification History"}),e.jsx(ee,{children:"Recent updates about your order"})]}),e.jsx(H,{children:e.jsx(c5,{type:"single",collapsible:!0,className:"w-full",children:h.map(x=>e.jsxs(FC,{value:`notification-${x.id}`,children:[e.jsx(LC,{children:e.jsxs("div",{className:"flex items-center text-left",children:[e.jsx("span",{className:"mr-2",children:l(x.notificationType)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:x.subject}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:lr(new Date(x.sentAt),"PPP p")})]})]})]})}),e.jsx($C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 pt-2",children:[e.jsx("div",{className:"bg-muted p-2 rounded-full",children:c(x.channel)}),e.jsxs("div",{children:[e.jsx("p",{className:"whitespace-pre-line",children:x.message}),e.jsx("div",{className:"flex items-center mt-2 text-xs text-muted-foreground",children:e.jsx("span",{className:"flex items-center",children:x.successful?e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"h-3 w-3 mr-1 text-green-500"}),e.jsx("span",{className:"text-green-600",children:"Delivered"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-3 w-3 mr-1 text-amber-500"}),e.jsx("span",{className:"text-amber-600",children:"Delivery failed"})]})})})]})]}),x.previousStatus&&x.newStatus&&e.jsx("div",{className:"mt-2 text-xs text-muted-foreground border-t pt-2",children:e.jsxs("p",{children:["Status changed from ",e.jsx("strong",{children:x.previousStatus})," to ",e.jsx("strong",{children:x.newStatus})]})})]})})]},x.id))})})]})}function Sp(){const{orderId:s}=kl(),[t]=Cs();Be(),console.log("OrderProgressPage received orderId:",s),console.log("Current location:",t);const{order:r,isLoadingOrder:n,orderError:a,orderNotifications:i,isLoadingOrderNotifications:o}=Qi({orderId:s?parseInt(s):void 0});return n?e.jsx("div",{className:"container mx-auto py-10 space-y-6",children:e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading order details..."})]})})}):a||!n&&!r?e.jsx("div",{className:"container mx-auto py-10 space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Not Found"}),e.jsxs(ee,{children:["Order #",s," could not be found in the system."]})]}),e.jsxs(H,{className:"flex flex-col items-center justify-center py-10",children:[e.jsx($t,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-center mb-6",children:"The order you're looking for doesn't exist. Please check the order number and try again."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(P,{asChild:!0,variant:"outline",children:e.jsxs(Rt,{href:"/orders",children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"View All Orders"]})}),e.jsx(P,{asChild:!0,children:e.jsxs(Rt,{href:"/",children:[e.jsx(Gc,{className:"mr-2 h-4 w-4"}),"Return Home"]})})]})]})]})}):e.jsxs("div",{className:"container mx-auto py-10 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Order Progress"}),e.jsx("p",{className:"text-muted-foreground",children:"Track the status of your custom framing order"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(P,{variant:"outline",asChild:!0,children:e.jsxs(Rt,{href:"/orders",children:[e.jsx(ma,{className:"mr-2 h-4 w-4"}),"All Orders"]})})})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(V,{className:"md:col-span-1",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Summary"}),e.jsxs(ee,{children:["Order #",r.id]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Artwork Dimensions"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.artworkWidth,'" x ',r.artworkHeight,'"']})]}),r.artworkDescription&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Artwork Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.artworkDescription})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[e.jsx(Nt,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Order Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"Not available"})]})]}),e.jsxs("div",{className:"space-y-1 border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm",children:"Subtotal"}),e.jsxs("p",{className:"text-sm font-medium",children:["$",parseFloat(r.subtotal||"0").toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm",children:"Tax"}),e.jsxs("p",{className:"text-sm font-medium",children:["$",parseFloat(r.tax||"0").toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center font-medium mt-2",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["$",parseFloat(r.total||"0").toFixed(2)]})]})]})]}),e.jsx(ht,{className:"border-t pt-6",children:e.jsx(P,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(Rt,{href:"/orders",children:"View All Orders"})})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(vC,{order:r,showHistory:!1}),e.jsx("div",{className:"mt-6",children:e.jsx(BC,{orderId:r.id})})]})]})]})}const VC=()=>ue({queryKey:["materials","pick-list"],queryFn:async()=>{try{const s=await fetch("/api/materials/pick-list");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();return Array.isArray(t)?t:[]}catch(s){return console.error("Error fetching materials pick list:",s),[]}},retry:1,retryDelay:1e3}),d5=()=>{const s=ss();return Ae({mutationFn:async({id:t,data:r})=>{try{const n=await fetch(`/api/materials/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:r})});if(!n.ok){const a=await n.text();throw new Error(`Failed to update material: ${a}`)}return n.json()}catch(n){throw console.error("Error updating material:",n),n}},onSuccess:()=>{s.invalidateQueries({queryKey:["materials"]})}})},u5=()=>{const s=ss();return Ae({mutationFn:async({materialIds:t,expectedDeliveryDate:r})=>{try{const n=await fetch("/api/materials/purchase-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materialIds:t,expectedDeliveryDate:r})});if(!n.ok){const a=await n.text();throw new Error(`Failed to create purchase order: ${a}`)}return n.json()}catch(n){throw console.error("Error creating purchase order:",n),n}},onSuccess:()=>{s.invalidateQueries({queryKey:["materials"]}),s.invalidateQueries({queryKey:["purchase-orders"]})}})},m5=()=>ue({queryKey:["materials","types"],queryFn:async()=>{try{const s=await fetch("/api/materials/types");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();return Array.isArray(t)?t:[]}catch(s){return console.error("Error fetching material types:",s),["frame","mat","glass","hardware"]}},retry:1}),h5=()=>ue({queryKey:["materials","suppliers"],queryFn:async()=>{try{const s=await fetch("/api/materials/suppliers");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();return Array.isArray(t)?t:[]}catch(s){return console.error("Error fetching material suppliers:",s),["Larson-Juhl","Crescent","Tru Vue"]}},retry:1}),p5=["pending","ordered","received","backorder","cancelled"],f5=()=>{const[s,t]=p.useState("all"),[r,n]=p.useState("all"),[a,i]=p.useState(""),{data:o=[],isLoading:l,error:c,refetch:d}=VC(),{data:u=[]}=m5();h5();const h=async()=>{try{const v=await(await fetch("/api/orders/generate-all-materials",{method:"POST",headers:{"Content-Type":"application/json"}})).json();v.success?(d(),console.log("Materials generated successfully:",v.message)):console.error("Failed to generate materials:",v.error)}catch(f){console.error("Error generating materials:",f)}},m=o.filter(f=>{const v=s==="all"||f.status===s,y=r==="all"||f.type===r,j=a===""||f.name.toLowerCase().includes(a.toLowerCase())||f.sku.toLowerCase().includes(a.toLowerCase())||f.supplier.toLowerCase().includes(a.toLowerCase());return v&&y&&j}),x=f=>{const v={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",ordered:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",received:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",backorder:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return e.jsx(pe,{className:v[f]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200",children:f.replace("_"," ")})},g=f=>{const v={high:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",low:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"};return e.jsx(pe,{variant:"outline",className:v[f]||"",children:f})};return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Material Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track material orders for your framing business"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:h,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Generate Materials"]}),e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-4 w-4"}),"New Order"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(Bt,{value:s,onValueChange:f=>t(f),className:"w-full",children:e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"all",children:"All"}),p5.map(f=>e.jsx(ve,{value:f,children:f.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase())},f))]})})}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6 md:flex-row md:items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx(q,{placeholder:"Search materials, SKUs, or suppliers...",value:a,onChange:f=>i(f.target.value)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{htmlFor:"type-filter",className:"whitespace-nowrap",children:"Filter by type:"}),e.jsxs(qe,{value:r,onValueChange:n,children:[e.jsx(Ve,{id:"type-filter",className:"w-[180px]",children:e.jsx(ze,{placeholder:"Select type"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Types"}),u.map(f=>e.jsx(te,{value:f,children:f.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase())},f))]})]})]})]}),c?e.jsx(V,{children:e.jsxs(H,{className:"py-12 text-center",children:[e.jsx(Dt,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error loading materials"}),e.jsx("p",{className:"text-muted-foreground",children:c instanceof Error?c.message:"Unable to load material orders. Please try again."})]})}):l?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsx("div",{className:"grid gap-4",children:m.length===0?e.jsx(V,{children:e.jsxs(H,{className:"py-12 text-center",children:[e.jsx(Gs,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials found"}),e.jsx("p",{className:"text-muted-foreground",children:a||r!=="all"||s!=="all"?"Try adjusting your filters to see more results.":"No material orders have been created yet."})]})}):m.map(f=>e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(G,{className:"text-lg",children:f.name}),e.jsxs(ee,{children:["SKU: ",f.sku," | Supplier: ",f.supplier]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x(f.status),e.jsx(pe,{variant:"outline",children:f.type}),g(f.priority)]})]})}),e.jsxs(H,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{className:"text-sm font-medium",children:"Quantity"}),e.jsx("p",{className:"text-2xl font-bold",children:f.quantity})]}),e.jsxs("div",{children:[e.jsx(O,{className:"text-sm font-medium",children:"Related Orders"}),e.jsxs("p",{className:"text-sm",children:[f.orderIds.length," order",f.orderIds.length!==1?"s":""]})]}),e.jsxs("div",{children:[e.jsx(O,{className:"text-sm font-medium",children:"Order Date"}),e.jsx("p",{className:"text-sm",children:f.orderDate?new Date(f.orderDate).toLocaleDateString():"Not ordered"})]}),e.jsxs("div",{children:[e.jsx(O,{className:"text-sm font-medium",children:"Receive Date"}),e.jsx("p",{className:"text-sm",children:f.receiveDate?new Date(f.receiveDate).toLocaleDateString():"Not received"})]})]}),f.notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(O,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.notes})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",children:"Edit Order"}),e.jsx(P,{variant:"outline",size:"sm",children:"Update Status"}),e.jsx(P,{variant:"ghost",size:"sm",children:"View Details"})]})]})]},f.id))})]})},Gn=l2,Qn=c2,x5=p.forwardRef(({className:s,inset:t,children:r,...n},a)=>e.jsxs(Hy,{ref:a,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...n,children:[r,e.jsx(Cl,{className:"ml-auto h-4 w-4"})]}));x5.displayName=Hy.displayName;const g5=p.forwardRef(({className:s,...t},r)=>e.jsx(qy,{ref:r,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));g5.displayName=qy.displayName;const dn=p.forwardRef(({className:s,sideOffset:t=4,...r},n)=>e.jsx(o2,{children:e.jsx(zy,{ref:n,sideOffset:t,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));dn.displayName=zy.displayName;const Rs=p.forwardRef(({className:s,inset:t,...r},n)=>e.jsx(Wy,{ref:n,className:J("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r}));Rs.displayName=Wy.displayName;const v5=p.forwardRef(({className:s,children:t,checked:r,...n},a)=>e.jsxs(Ky,{ref:a,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gy,{children:e.jsx(ls,{className:"h-4 w-4"})})}),t]}));v5.displayName=Ky.displayName;const y5=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Qy,{ref:n,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gy,{children:e.jsx(aj,{className:"h-2 w-2 fill-current"})})}),t]}));y5.displayName=Qy.displayName;const UC=p.forwardRef(({className:s,inset:t,...r},n)=>e.jsx(Zy,{ref:n,className:J("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));UC.displayName=Zy.displayName;const HC=p.forwardRef(({className:s,...t},r)=>e.jsx(Yy,{ref:r,className:J("-mx-1 my-1 h-px bg-muted",s),...t}));HC.displayName=Yy.displayName;const nn=[{value:"pending",label:"Pending",color:"default"},{value:"ordered",label:"Ordered",color:"secondary"},{value:"received",label:"Received",color:"success"},{value:"backorder",label:"Back Ordered",color:"warning"},{value:"cancelled",label:"Cancelled",color:"destructive"}],Cp=[{value:"in_stock",label:"In Stock",color:"success",icon:ls},{value:"low_stock",label:"Low Stock",color:"warning",icon:Dt},{value:"out_of_stock",label:"Out of Stock",color:"destructive",icon:Dt},{value:"unknown",label:"Check Stock",color:"default",icon:Nt}],j5=({onCreateOrder:s})=>{const[t,r]=p.useState([]),[n,a]=p.useState(""),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState("name"),[x,g]=p.useState("asc"),[f,v]=p.useState("all"),[y,j]=p.useState(!1),[b,k]=p.useState(null),[S,D]=p.useState(""),[T,C]=p.useState(""),{toast:E}=Be(),{data:I=[],isLoading:w,error:N}=VC(),A=d5(),[F,Z]=p.useState(!1),[Q,L]=p.useState(null),ae=Array.from(new Set(I.map(W=>W.supplier))),M=Array.from(new Set(I.map(W=>W.type))),re=I.filter(W=>{const ye=n===""||W.name.toLowerCase().includes(n.toLowerCase())||W.sku.toLowerCase().includes(n.toLowerCase())||W.supplier.toLowerCase().includes(n.toLowerCase()),rt=i===null||W.supplier===i,ft=l===null||W.type===l,fe=d===null||W.status===d,kt=f==="all"||f==="pending"&&W.status==="pending"||f==="ordered"&&W.status==="ordered"||f==="received"&&W.status==="received";return ye&&rt&&ft&&fe&&kt}).sort((W,ye)=>{if(h==="name")return x==="asc"?W.name.localeCompare(ye.name):ye.name.localeCompare(W.name);if(h==="supplier")return x==="asc"?W.supplier.localeCompare(ye.supplier):ye.supplier.localeCompare(W.supplier);if(h==="type")return x==="asc"?W.type.localeCompare(ye.type):ye.type.localeCompare(W.type);if(h==="quantity")return x==="asc"?W.quantity-ye.quantity:ye.quantity-W.quantity;if(h==="status")return x==="asc"?W.status.localeCompare(ye.status):ye.status.localeCompare(W.status);if(h==="priority"){const rt=ft=>ft==="high"?3:ft==="medium"?2:1;return x==="asc"?rt(W.priority)-rt(ye.priority):rt(ye.priority)-rt(W.priority)}return 0}),Ce=()=>{t.length===re.length?r([]):r(re.map(W=>W.id))},st=W=>{t.includes(W)?r(t.filter(ye=>ye!==W)):r([...t,W])},nt=W=>{h===W?g(x==="asc"?"desc":"asc"):(m(W),g("asc"))},B=async(W,ye=!1)=>{if(t.length===0){E({title:"No items selected",description:"Please select materials to update.",variant:"destructive"});return}try{const rt=await fetch("/api/materials/bulk-update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materialIds:t,status:W,adminApproval:ye})}),ft=await rt.json();if(!rt.ok){if(ft.error==="DOUBLE_ORDER_PREVENTION"){L({materialIds:t,status:W,alreadyOrderedMaterials:ft.alreadyOrderedMaterials}),Z(!0);return}throw new Error(ft.message||"Failed to update materials")}E({title:"Success",description:ft.message,variant:"default"}),r([]),window.location.reload()}catch(rt){E({title:"Error",description:rt.message,variant:"destructive"})}},oe=async()=>{Q&&(await B(Q.status,!0),Z(!1),L(null))},Y=async()=>{try{const ye=await(await fetch("/api/orders/generate-all-materials",{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(ye.success)E({title:"Materials Generated",description:`Created ${ye.totalMaterialOrders} material orders from ${ye.processedOrders} orders`}),window.location.reload();else throw new Error(ye.error||"Failed to generate materials")}catch{E({title:"Error",description:"Failed to generate materials from orders",variant:"destructive"})}},z=async(W,ye,rt)=>{try{await A.mutateAsync({id:W,data:{stockStatus:ye,stockQuantity:(rt==null?void 0:rt.toString())||"0"}}),E({title:"Stock status updated",description:"Material stock status updated"}),window.location.reload()}catch{E({title:"Error",description:"Failed to update stock status",variant:"destructive"})}},ce=W=>{const ye=Cp.find(ft=>ft.value===(W.stockStatus||"unknown")),rt=(ye==null?void 0:ye.icon)||Nt;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,children:e.jsxs(P,{variant:"ghost",size:"sm",className:"flex items-center gap-1 h-6 px-2",children:[e.jsx(rt,{className:"h-3 w-3"}),ye==null?void 0:ye.label]})}),e.jsx(dn,{children:Cp.map(ft=>e.jsxs(Rs,{onClick:()=>z(W.id,ft.value),className:"flex items-center gap-2",children:[e.jsx(ft.icon,{className:"h-3 w-3"}),ft.label]},ft.value))})]}),W.stockQuantity&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Qty: ",W.stockQuantity]})]})},je=async(W="")=>{if(t.length===0){E({title:"No items selected",description:"Please select materials to mark as out of stock.",variant:"destructive"});return}try{const ye=await fetch("/api/materials/mark-out-of-stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materialIds:t,notes:W})}),rt=await ye.json();if(!ye.ok)throw new Error(rt.error||"Failed to mark materials as out of stock");E({title:"Success",description:rt.message,variant:"default"}),r([]),window.location.reload()}catch(ye){E({title:"Error",description:ye.message,variant:"destructive"})}},he=W=>{k(W),D(W.status),C(W.notes||""),j(!0)},be=()=>{!b||!S||A.mutate({id:b.id,data:{status:S,notes:T,orderDate:S==="ordered"?new Date().toISOString():b.orderDate,receiveDate:S==="received"?new Date().toISOString():b.receiveDate}},{onSuccess:()=>{var W;E({title:"Status updated",description:`Material "${b.name}" is now ${((W=nn.find(ye=>ye.value===S))==null?void 0:W.label)||S}`}),j(!1)},onError:W=>{E({title:"Error updating status",description:W.message,variant:"destructive"})}})},Ne=W=>{const ye=nn.find(rt=>rt.value===W)||nn[0];return e.jsx(pe,{variant:ye.color,children:ye.label})},Ke=W=>{let ye;switch(W){case"high":ye="destructive";break;case"medium":ye="warning";break;default:ye="outline"}return e.jsx(pe,{variant:ye,children:W})},ke=u5(),gt=()=>{if(t.length===0){E({title:"No items selected",description:"Please select at least one item to create a purchase order",variant:"destructive"});return}ke.mutate({materialIds:t,expectedDeliveryDate:new Date(Date.now()+14*24*60*60*1e3).toISOString()},{onSuccess:()=>{B("ordered"),s&&s()}})},vt=()=>{const W=t.length>0?I.filter(Kt=>t.includes(Kt.id)):re;if(W.length===0){E({title:"No items to export",description:"The current filtered list is empty",variant:"destructive"});return}const ye=["SKU","Name","Supplier","Type","Quantity","Status","Priority","Notes"],rt=W.map(Kt=>{var Js;return[Kt.sku,Kt.name,Kt.supplier,Kt.type,Kt.quantity.toString(),((Js=nn.find(ao=>ao.value===Kt.status))==null?void 0:Js.label)||Kt.status,Kt.priority,Kt.notes||""]}),ft=[ye.join(","),...rt.map(Kt=>Kt.map(Js=>`"${Js.replace(/"/g,'""')}"`).join(","))].join(`
`),fe=new Blob([ft],{type:"text/csv;charset=utf-8;"}),kt=URL.createObjectURL(fe),rs=document.createElement("a");rs.setAttribute("href",kt),rs.setAttribute("download",`materials-pick-list-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(rs),rs.click(),document.body.removeChild(rs),E({title:"Pick list exported",description:`Exported ${W.length} items to CSV file`})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Materials Pick List"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage materials needed for orders"})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[e.jsxs(P,{variant:"outline",onClick:vt,className:"flex items-center gap-2",children:[e.jsx(Sl,{className:"h-4 w-4"}),"Export"]}),e.jsxs(P,{onClick:()=>B("ordered"),disabled:t.length===0,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[e.jsx(ls,{className:"h-4 w-4"}),"Mark as Ordered"]}),e.jsxs(P,{variant:"outline",onClick:()=>je(),disabled:t.length===0,className:"flex items-center gap-2 border-red-500 text-red-600 hover:bg-red-50",children:[e.jsx(Dt,{className:"h-4 w-4"}),"Out of Stock"]}),e.jsxs(P,{onClick:gt,disabled:t.length===0,className:"flex items-center gap-2",children:[e.jsx(wl,{className:"h-4 w-4"}),"Create Purchase Order"]}),e.jsxs(P,{onClick:Y,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-4 w-4"}),"Generate Materials from Orders"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fn,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search materials, SKUs, or suppliers...",className:"pl-8",value:n,onChange:W=>a(W.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ni,{className:"h-4 w-4"}),"Supplier",e.jsx(ns,{className:"h-4 w-4"})]})}),e.jsxs(dn,{align:"end",children:[e.jsx(Rs,{onClick:()=>o(null),children:"All Suppliers"}),ae.map(W=>e.jsx(Rs,{onClick:()=>o(W),children:W},W))]})]}),e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ni,{className:"h-4 w-4"}),"Type",e.jsx(ns,{className:"h-4 w-4"})]})}),e.jsxs(dn,{align:"end",children:[e.jsx(Rs,{onClick:()=>c(null),children:"All Types"}),M.map(W=>e.jsx(Rs,{onClick:()=>c(W),children:W},W))]})]}),e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,children:e.jsxs(P,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ni,{className:"h-4 w-4"}),"Status",e.jsx(ns,{className:"h-4 w-4"})]})}),e.jsxs(dn,{align:"end",children:[e.jsx(Rs,{onClick:()=>u(null),children:"All Statuses"}),nn.map(W=>e.jsx(Rs,{onClick:()=>u(W.value),children:W.label},W.value))]})]})]})]}),e.jsx(Bt,{value:f,onValueChange:v,children:e.jsxs(Lt,{children:[e.jsxs(ve,{value:"all",className:"flex items-center gap-2",children:[e.jsx(cj,{className:"h-4 w-4"}),"All Materials"]}),e.jsxs(ve,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Pending"]}),e.jsxs(ve,{value:"ordered",className:"flex items-center gap-2",children:[e.jsx(Gr,{className:"h-4 w-4"}),"Ordered"]}),e.jsxs(ve,{value:"received",className:"flex items-center gap-2",children:[e.jsx(ls,{className:"h-4 w-4"}),"Received"]})]})}),e.jsx(V,{children:e.jsx(H,{className:"p-0",children:N?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Dt,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-red-600",children:"Error loading materials"}),e.jsx("p",{className:"text-muted-foreground",children:N instanceof Error?N.message:"Unable to load materials pick list. Please try again."})]}):w?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):re.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No materials found"}),e.jsx("p",{className:"text-muted-foreground",children:n||i||l||d?"Try adjusting your filters":"No materials in the pick list"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{className:"w-12",children:e.jsx(os,{checked:re.length>0&&t.length===re.length,onCheckedChange:Ce,"aria-label":"Select all"})}),e.jsx(de,{className:"w-[180px]",children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>nt("name"),children:["Material",h==="name"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>nt("supplier"),children:["Supplier",h==="supplier"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>nt("type"),children:["Type",h==="type"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end cursor-pointer",onClick:()=>nt("quantity"),children:["Quantity",h==="quantity"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>nt("priority"),children:["Priority",h==="priority"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>nt("status"),children:["Order Status",h==="status"&&e.jsx(ns,{className:`h-4 w-4 ml-1 ${x==="desc"?"rotate-180":""} transition-transform`})]})}),e.jsx(de,{children:"Stock Status"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(ys,{children:re.map(W=>e.jsxs(tt,{children:[e.jsx(ie,{children:e.jsx(os,{checked:t.includes(W.id),onCheckedChange:()=>st(W.id),"aria-label":`Select ${W.name}`})}),e.jsxs(ie,{children:[e.jsx("div",{className:"font-medium",children:W.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["SKU: ",W.sku]})]}),e.jsx(ie,{children:W.supplier}),e.jsx(ie,{children:W.type}),e.jsx(ie,{className:"text-right",children:W.quantity}),e.jsx(ie,{children:Ke(W.priority)}),e.jsx(ie,{children:Ne(W.status)}),e.jsx(ie,{children:ce(W)}),e.jsx(ie,{className:"text-right",children:e.jsxs(P,{variant:"ghost",size:"icon",onClick:()=>he(W),children:[e.jsx(M2,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Update status"})]})})]},W.id))})]})})})}),t.length>0&&e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t p-4 flex items-center justify-between shadow-lg",children:[e.jsx("div",{children:e.jsxs("span",{className:"font-medium",children:[t.length," items selected"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>r([]),children:"Clear Selection"}),e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,children:e.jsxs(P,{size:"sm",className:"flex items-center gap-2",children:["Update Status",e.jsx(ns,{className:"h-4 w-4"})]})}),e.jsx(dn,{align:"end",children:nn.map(W=>e.jsx(Rs,{onClick:()=>B(W.value),children:W.label},W.value))})]})]})]}),e.jsx(Yt,{open:y,onOpenChange:j,children:e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Update Material Status"}),e.jsx(bs,{children:"Change the status and add notes for this material."})]}),b&&e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:b.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["SKU: ",b.sku]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:nn.map(W=>e.jsxs("div",{className:`
                        flex items-center space-x-2 rounded-md border p-2 cursor-pointer
                        ${S===W.value?"border-primary":""}
                      `,onClick:()=>D(W.value),children:[e.jsx(os,{checked:S===W.value,onCheckedChange:()=>D(W.value)}),e.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[e.jsx("span",{children:W.label}),Ne(W.value)]})]},W.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes"}),e.jsx("textarea",{className:"w-full h-24 p-2 rounded-md border",placeholder:"Add notes about this order...",value:T,onChange:W=>C(W.target.value)})]})]}),e.jsxs(En,{children:[e.jsx(P,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(P,{onClick:be,children:"Update Status"})]})]})}),e.jsx(Yt,{open:F,onOpenChange:Z,children:e.jsxs(Wt,{className:"sm:max-w-[600px]",children:[e.jsxs(Xt,{children:[e.jsx(Jt,{className:"text-red-600 font-bold",children:" DOUBLE ORDER PREVENTION ALERT"}),e.jsx(bs,{className:"text-red-700",children:"Some materials are already ordered. Admin approval required to proceed."})]}),Q&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Already Ordered Materials:"}),e.jsx("ul",{className:"space-y-1",children:Q.alreadyOrderedMaterials.map(W=>e.jsxs("li",{className:"text-sm text-red-700",children:[" ",W.name," (SKU: ",W.sku,") - Status: ",W.status]},W.id))})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Action Requested:"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Mark ",Q.materialIds.length,' materials as "',Q.status,'"']})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Admin Override Options:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:" Approve if duplicate ordering is intentional"}),e.jsx("li",{children:" Cancel if this was an error"}),e.jsx("li",{children:" Review material status before proceeding"})]})]})]}),e.jsxs(En,{className:"gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{Z(!1),L(null)},children:"Cancel"}),e.jsx(P,{variant:"destructive",onClick:oe,className:"bg-red-600 hover:bg-red-700",children:"Admin Approve Override"})]})]})})]})},b5=()=>{const[,s]=Cs(),t=()=>{s("/materials")};return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(j5,{onCreateOrder:t})})};function w5(s){if(typeof Proxy>"u")return s;const t=new Map,r=(...n)=>s(...n);return new Proxy(r,{get:(n,a)=>a==="create"?s:(t.has(a)||t.set(a,s(a)),t.get(a))})}function Yl(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const Md=s=>Array.isArray(s);function qC(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let n=0;n<r;n++)if(t[n]!==s[n])return!1;return!0}function Mi(s){return typeof s=="string"||Array.isArray(s)}function kp(s){const t=[{},{}];return s==null||s.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function mm(s,t,r,n){if(typeof t=="function"){const[a,i]=kp(n);t=t(r!==void 0?r:s.custom,a,i)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[a,i]=kp(n);t=t(r!==void 0?r:s.custom,a,i)}return t}function Xl(s,t,r){const n=s.getProps();return mm(n,t,r!==void 0?r:n.custom,s)}const hm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pm=["initial",...hm],to=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vn=new Set(to),wr=s=>s*1e3,Nr=s=>s/1e3,N5={type:"spring",stiffness:500,damping:25,restSpeed:10},S5=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),C5={type:"keyframes",duration:.8},k5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T5=(s,{keyframes:t})=>t.length>2?C5:Vn.has(s)?s.startsWith("scale")?S5(t[1]):N5:k5;function fm(s,t){return s?s[t]||s.default||s:void 0}const P5={skipAnimations:!1,useManualTiming:!1},E5=s=>s!==null;function Jl(s,{repeat:t,repeatType:r="loop"},n){const a=s.filter(E5),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const es=s=>s;let Fd=es;function D5(s){let t=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),s()),d(o)}const c={schedule:(d,u=!1,h=!1)=>{const x=h&&n?t:r;return u&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(o=d,n){a=!0;return}n=!0,[t,r]=[r,t],r.clear(),t.forEach(l),n=!1,a&&(a=!1,c.process(d))}};return c}const vo=["read","resolveKeyframes","update","preRender","render","postRender"],A5=40;function zC(s,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=vo.reduce((y,j)=>(y[j]=D5(i),y),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:h,postRender:m}=o,x=()=>{const y=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(y-a.timestamp,A5),1),a.timestamp=y,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),h.process(a),m.process(a),a.isProcessing=!1,r&&t&&(n=!1,s(x))},g=()=>{r=!0,n=!0,a.isProcessing||s(x)};return{schedule:vo.reduce((y,j)=>{const b=o[j];return y[j]=(k,S=!1,D=!1)=>(r||g(),b.schedule(k,S,D)),y},{}),cancel:y=>{for(let j=0;j<vo.length;j++)o[vo[j]].cancel(y)},state:a,steps:o}}const{schedule:mt,cancel:Wr,state:qt,steps:Ic}=zC(typeof requestAnimationFrame<"u"?requestAnimationFrame:es,!0),WC=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,I5=1e-7,_5=12;function R5(s,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=WC(o,n,a)-s,i>0?r=o:t=o;while(Math.abs(i)>I5&&++l<_5);return o}function so(s,t,r,n){if(s===t&&r===n)return es;const a=i=>R5(i,0,1,s,r);return i=>i===0||i===1?i:WC(a(i),t,n)}const KC=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,GC=s=>t=>1-s(1-t),QC=so(.33,1.53,.69,.99),xm=GC(QC),ZC=KC(xm),YC=s=>(s*=2)<1?.5*xm(s):.5*(2-Math.pow(2,-10*(s-1))),gm=s=>1-Math.sin(Math.acos(s)),XC=GC(gm),JC=KC(gm),e1=s=>/^0[^.\s]+$/u.test(s);function O5(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||e1(s):!0}const t1=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s),s1=s=>t=>typeof t=="string"&&t.startsWith(s),r1=s1("--"),M5=s1("var(--"),vm=s=>M5(s)?F5.test(s.split("/*")[0].trim()):!1,F5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,L5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $5(s){const t=L5.exec(s);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function n1(s,t,r=1){const[n,a]=$5(s);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return t1(o)?parseFloat(o):o}return vm(a)?n1(a,t,r+1):a}const kr=(s,t,r)=>r>t?t:r<s?s:r,Ba={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Fi={...Ba,transform:s=>kr(0,1,s)},yo={...Ba,default:1},ro=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Ir=ro("deg"),ir=ro("%"),Te=ro("px"),B5=ro("vh"),V5=ro("vw"),Tp={...ir,parse:s=>ir.parse(s)/100,transform:s=>ir.transform(s*100)},U5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Pp=s=>s===Ba||s===Te,Ep=(s,t)=>parseFloat(s.split(", ")[t]),Dp=(s,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return Ep(a[1],t);{const i=n.match(/^matrix\((.+)\)$/u);return i?Ep(i[1],s):0}},H5=new Set(["x","y","z"]),q5=to.filter(s=>!H5.has(s));function z5(s){const t=[];return q5.forEach(r=>{const n=s.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const wa={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:Dp(4,13),y:Dp(5,14)};wa.translateX=wa.x;wa.translateY=wa.y;const a1=s=>t=>t.test(s),W5={test:s=>s==="auto",parse:s=>s},i1=[Ba,Te,ir,Ir,V5,B5,W5],Ap=s=>i1.find(a1(s)),Cn=new Set;let Ld=!1,$d=!1;function o1(){if($d){const s=Array.from(Cn).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=z5(n);a.length&&(r.set(n,a),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}$d=!1,Ld=!1,Cn.forEach(s=>s.complete()),Cn.clear()}function l1(){Cn.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&($d=!0)})}function K5(){l1(),o1()}class ym{constructor(t,r,n,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cn.add(this),Ld||(Ld=!0,mt.read(l1),mt.resolveKeyframes(o1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const c=n.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const di=s=>Math.round(s*1e5)/1e5,jm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G5(s){return s==null}const Q5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bm=(s,t)=>r=>!!(typeof r=="string"&&Q5.test(r)&&r.startsWith(s)||t&&!G5(r)&&Object.prototype.hasOwnProperty.call(r,t)),c1=(s,t,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(jm);return{[s]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Z5=s=>kr(0,255,s),_c={...Ba,transform:s=>Math.round(Z5(s))},fn={test:bm("rgb","red"),parse:c1("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:n=1})=>"rgba("+_c.transform(s)+", "+_c.transform(t)+", "+_c.transform(r)+", "+di(Fi.transform(n))+")"};function Y5(s){let t="",r="",n="",a="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),n=s.substring(5,7),a=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),n=s.substring(3,4),a=s.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Bd={test:bm("#"),parse:Y5,transform:fn.transform},Xn={test:bm("hsl","hue"),parse:c1("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(s)+", "+ir.transform(di(t))+", "+ir.transform(di(r))+", "+di(Fi.transform(n))+")"},Gt={test:s=>fn.test(s)||Bd.test(s)||Xn.test(s),parse:s=>fn.test(s)?fn.parse(s):Xn.test(s)?Xn.parse(s):Bd.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?fn.transform(s):Xn.transform(s)},X5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function J5(s){var t,r;return isNaN(s)&&typeof s=="string"&&(((t=s.match(jm))===null||t===void 0?void 0:t.length)||0)+(((r=s.match(X5))===null||r===void 0?void 0:r.length)||0)>0}const d1="number",u1="color",eL="var",tL="var(",Ip="${}",sL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Li(s){const t=s.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(sL,c=>(Gt.test(c)?(n.color.push(i),a.push(u1),r.push(Gt.parse(c))):c.startsWith(tL)?(n.var.push(i),a.push(eL),r.push(c)):(n.number.push(i),a.push(d1),r.push(parseFloat(c))),++i,Ip)).split(Ip);return{values:r,split:l,indexes:n,types:a}}function m1(s){return Li(s).values}function h1(s){const{split:t,types:r}=Li(s),n=t.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],a[o]!==void 0){const l=r[o];l===d1?i+=di(a[o]):l===u1?i+=Gt.transform(a[o]):i+=a[o]}return i}}const rL=s=>typeof s=="number"?0:s;function nL(s){const t=m1(s);return h1(s)(t.map(rL))}const Kr={test:J5,parse:m1,createTransformer:h1,getAnimatableNone:nL},aL=new Set(["brightness","contrast","saturate","opacity"]);function iL(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=r.match(jm)||[];if(!n)return s;const a=r.replace(n,"");let i=aL.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const oL=/\b([a-z-]*)\(.*?\)/gu,Vd={...Kr,getAnimatableNone:s=>{const t=s.match(oL);return t?t.map(iL).join(" "):s}},lL={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,backgroundPositionX:Te,backgroundPositionY:Te},cL={rotate:Ir,rotateX:Ir,rotateY:Ir,rotateZ:Ir,scale:yo,scaleX:yo,scaleY:yo,scaleZ:yo,skew:Ir,skewX:Ir,skewY:Ir,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Fi,originX:Tp,originY:Tp,originZ:Te},_p={...Ba,transform:Math.round},wm={...lL,...cL,zIndex:_p,size:Te,fillOpacity:Fi,strokeOpacity:Fi,numOctaves:_p},dL={...wm,color:Gt,backgroundColor:Gt,outlineColor:Gt,fill:Gt,stroke:Gt,borderColor:Gt,borderTopColor:Gt,borderRightColor:Gt,borderBottomColor:Gt,borderLeftColor:Gt,filter:Vd,WebkitFilter:Vd},Nm=s=>dL[s];function p1(s,t){let r=Nm(s);return r!==Vd&&(r=Kr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const uL=new Set(["auto","none","0"]);function mL(s,t,r){let n=0,a;for(;n<s.length&&!a;){const i=s[n];typeof i=="string"&&!uL.has(i)&&Li(i).values.length&&(a=s[n]),n++}if(a&&r)for(const i of t)s[i]=p1(r,a)}class f1 extends ym{constructor(t,r,n,a,i){super(t,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),vm(d))){const u=n1(d,r.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!U5.has(n)||t.length!==2)return;const[a,i]=t,o=Ap(a),l=Ap(i);if(o!==l)if(Pp(o)&&Pp(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)O5(t[a])&&n.push(a);n.length&&mL(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wa[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=wa[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function Sm(s){return typeof s=="function"}let Ro;function hL(){Ro=void 0}const or={now:()=>(Ro===void 0&&or.set(qt.isProcessing||P5.useManualTiming?qt.timestamp:performance.now()),Ro),set:s=>{Ro=s,queueMicrotask(hL)}},Rp=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Kr.test(s)||s==="0")&&!s.startsWith("url("));function pL(s){const t=s[0];if(s.length===1)return!0;for(let r=0;r<s.length;r++)if(s[r]!==t)return!0}function fL(s,t,r,n){const a=s[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=s[s.length-1],o=Rp(a,t),l=Rp(i,t);return!o||!l?!1:pL(s)||(r==="spring"||Sm(r))&&n}const xL=40;class x1{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=or.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&K5(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=or.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!fL(t,n,a,i))if(o)this.options.duration=0;else{c==null||c(Jl(t,this.options,r)),l==null||l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,r);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Na=(s,t,r)=>{const n=t-s;return n===0?1:(r-s)/n},g1=(s,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)n+=s(Na(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function v1(s,t){return t?s*(1e3/t):0}const gL=5;function y1(s,t,r){const n=Math.max(t-gL,0);return v1(r-s(n),t-n)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rc=.001;function vL({duration:s=Ct.duration,bounce:t=Ct.bounce,velocity:r=Ct.velocity,mass:n=Ct.mass}){let a,i,o=1-t;o=kr(Ct.minDamping,Ct.maxDamping,o),s=kr(Ct.minDuration,Ct.maxDuration,Nr(s)),o<1?(a=d=>{const u=d*o,h=u*s,m=u-r,x=Ud(d,o),g=Math.exp(-h);return Rc-m/x*g},i=d=>{const h=d*o*s,m=h*r+r,x=Math.pow(o,2)*Math.pow(d,2)*s,g=Math.exp(-h),f=Ud(Math.pow(d,2),o);return(-a(d)+Rc>0?-1:1)*((m-x)*g)/f}):(a=d=>{const u=Math.exp(-d*s),h=(d-r)*s+1;return-Rc+u*h},i=d=>{const u=Math.exp(-d*s),h=(r-d)*(s*s);return u*h});const l=5/s,c=jL(a,i,l);if(s=wr(s),isNaN(c))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:s};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:s}}}const yL=12;function jL(s,t,r){let n=r;for(let a=1;a<yL;a++)n=n-s(n)/t(n);return n}function Ud(s,t){return s*Math.sqrt(1-t*t)}const Hd=2e4;function j1(s){let t=0;const r=50;let n=s.next(t);for(;!n.done&&t<Hd;)t+=r,n=s.next(t);return t>=Hd?1/0:t}const bL=["duration","bounce"],wL=["stiffness","damping","mass"];function Op(s,t){return t.some(r=>s[r]!==void 0)}function NL(s){let t={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...s};if(!Op(s,wL)&&Op(s,bL))if(s.visualDuration){const r=s.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*kr(.05,1,1-s.bounce)*Math.sqrt(a);t={...t,mass:Ct.mass,stiffness:a,damping:i}}else{const r=vL(s);t={...t,...r,mass:Ct.mass},t.isResolvedFromDuration=!0}return t}function b1(s=Ct.visualDuration,t=Ct.bounce){const r=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:x}=NL({...r,velocity:-Nr(r.velocity||0)}),g=m||0,f=d/(2*Math.sqrt(c*u)),v=o-i,y=Nr(Math.sqrt(c/u)),j=Math.abs(v)<5;n||(n=j?Ct.restSpeed.granular:Ct.restSpeed.default),a||(a=j?Ct.restDelta.granular:Ct.restDelta.default);let b;if(f<1){const S=Ud(y,f);b=D=>{const T=Math.exp(-f*y*D);return o-T*((g+f*y*v)/S*Math.sin(S*D)+v*Math.cos(S*D))}}else if(f===1)b=S=>o-Math.exp(-y*S)*(v+(g+y*v)*S);else{const S=y*Math.sqrt(f*f-1);b=D=>{const T=Math.exp(-f*y*D),C=Math.min(S*D,300);return o-T*((g+f*y*v)*Math.sinh(C)+S*v*Math.cosh(C))/S}}const k={calculatedDuration:x&&h||null,next:S=>{const D=b(S);if(x)l.done=S>=h;else{let T=0;f<1&&(T=S===0?wr(g):y1(b,S,D));const C=Math.abs(T)<=n,E=Math.abs(o-D)<=a;l.done=C&&E}return l.value=l.done?o:D,l},toString:()=>{const S=Math.min(j1(k),Hd),D=g1(T=>k.next(S*T).value,S,30);return S+"ms "+D}};return k}function Mp({keyframes:s,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=s[0],m={done:!1,value:h},x=C=>l!==void 0&&C<l||c!==void 0&&C>c,g=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let f=r*t;const v=h+f,y=o===void 0?v:o(v);y!==v&&(f=y-h);const j=C=>-f*Math.exp(-C/n),b=C=>y+j(C),k=C=>{const E=j(C),I=b(C);m.done=Math.abs(E)<=d,m.value=m.done?y:I};let S,D;const T=C=>{x(m.value)&&(S=C,D=b1({keyframes:[m.value,g(m.value)],velocity:y1(b,C,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return T(0),{calculatedDuration:null,next:C=>{let E=!1;return!D&&S===void 0&&(E=!0,k(C),T(C)),S!==void 0&&C>=S?D.next(C-S):(!E&&k(C),m)}}}const SL=so(.42,0,1,1),CL=so(0,0,.58,1),w1=so(.42,0,.58,1),kL=s=>Array.isArray(s)&&typeof s[0]!="number",Cm=s=>Array.isArray(s)&&typeof s[0]=="number",Fp={linear:es,easeIn:SL,easeInOut:w1,easeOut:CL,circIn:gm,circInOut:JC,circOut:XC,backIn:xm,backInOut:ZC,backOut:QC,anticipate:YC},Lp=s=>{if(Cm(s)){Fd(s.length===4);const[t,r,n,a]=s;return so(t,r,n,a)}else if(typeof s=="string")return Fd(Fp[s]!==void 0),Fp[s];return s},TL=(s,t)=>r=>t(s(r)),$r=(...s)=>s.reduce(TL),wt=(s,t,r)=>s+(t-s)*r;function Oc(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function PL({hue:s,saturation:t,lightness:r,alpha:n}){s/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=Oc(c,l,s+1/3),i=Oc(c,l,s),o=Oc(c,l,s-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function il(s,t){return r=>r>0?t:s}const Mc=(s,t,r)=>{const n=s*s,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},EL=[Bd,fn,Xn],DL=s=>EL.find(t=>t.test(s));function $p(s){const t=DL(s);if(!t)return!1;let r=t.parse(s);return t===Xn&&(r=PL(r)),r}const Bp=(s,t)=>{const r=$p(s),n=$p(t);if(!r||!n)return il(s,t);const a={...r};return i=>(a.red=Mc(r.red,n.red,i),a.green=Mc(r.green,n.green,i),a.blue=Mc(r.blue,n.blue,i),a.alpha=wt(r.alpha,n.alpha,i),fn.transform(a))},qd=new Set(["none","hidden"]);function AL(s,t){return qd.has(s)?r=>r<=0?s:t:r=>r>=1?t:s}function IL(s,t){return r=>wt(s,t,r)}function km(s){return typeof s=="number"?IL:typeof s=="string"?vm(s)?il:Gt.test(s)?Bp:OL:Array.isArray(s)?N1:typeof s=="object"?Gt.test(s)?Bp:_L:il}function N1(s,t){const r=[...s],n=r.length,a=s.map((i,o)=>km(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function _L(s,t){const r={...s,...t},n={};for(const a in r)s[a]!==void 0&&t[a]!==void 0&&(n[a]=km(s[a])(s[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function RL(s,t){var r;const n=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=s.indexes[o][a[o]],c=(r=s.values[l])!==null&&r!==void 0?r:0;n[i]=c,a[o]++}return n}const OL=(s,t)=>{const r=Kr.createTransformer(t),n=Li(s),a=Li(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?qd.has(s)&&!a.values.length||qd.has(t)&&!n.values.length?AL(s,t):$r(N1(RL(n,a),a.values),r):il(s,t)};function S1(s,t,r){return typeof s=="number"&&typeof t=="number"&&typeof r=="number"?wt(s,t,r):km(s)(s,t)}function ML(s,t,r){const n=[],a=r||S1,i=s.length-1;for(let o=0;o<i;o++){let l=a(s[o],s[o+1]);if(t){const c=Array.isArray(t)?t[o]||es:t;l=$r(c,l)}n.push(l)}return n}function FL(s,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=s.length;if(Fd(i===t.length),i===1)return()=>t[0];if(i===2&&s[0]===s[1])return()=>t[1];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const o=ML(t,n,a),l=o.length,c=d=>{let u=0;if(l>1)for(;u<s.length-2&&!(d<s[u+1]);u++);const h=Na(s[u],s[u+1],d);return o[u](h)};return r?d=>c(kr(s[0],s[i-1],d)):c}function LL(s,t){const r=s[s.length-1];for(let n=1;n<=t;n++){const a=Na(0,t,n);s.push(wt(r,1,a))}}function $L(s){const t=[0];return LL(t,s.length-1),t}function BL(s,t){return s.map(r=>r*t)}function VL(s,t){return s.map(()=>t||w1).splice(0,s.length-1)}function ol({duration:s=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=kL(n)?n.map(Lp):Lp(n),i={done:!1,value:t[0]},o=BL(r&&r.length===t.length?r:$L(t),s),l=FL(o,t,{ease:Array.isArray(a)?a:VL(t,a)});return{calculatedDuration:s,next:c=>(i.value=l(c),i.done=c>=s,i)}}const UL=s=>{const t=({timestamp:r})=>s(r);return{start:()=>mt.update(t,!0),stop:()=>Wr(t),now:()=>qt.isProcessing?qt.timestamp:or.now()}},HL={decay:Mp,inertia:Mp,tween:ol,keyframes:ol,spring:b1},qL=s=>s/100;class Tm extends x1{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||ym,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,l,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=Sm(r)?r:HL[r]||ol;let c,d;l!==ol&&typeof t[0]!="number"&&(c=$r(qL,S1(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});i==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=j1(u));const{calculatedDuration:h}=u,m=h+a,x=m*(n+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:m,totalDuration:x}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=n;if(this.startTime===null)return i.next(0);const{delay:m,repeat:x,repeatType:g,repeatDelay:f,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-m*(this.speed>=0?1:-1),j=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,k=i;if(x){const C=Math.min(this.currentTime,u)/h;let E=Math.floor(C),I=C%1;!I&&C>=1&&(I=1),I===1&&E--,E=Math.min(E,x+1),!!(E%2)&&(g==="reverse"?(I=1-I,f&&(I-=f/h)):g==="mirror"&&(k=o)),b=kr(0,1,I)*h}const S=j?{done:!1,value:c[0]}:k.next(b);l&&(S.value=l(S.value));let{done:D}=S;!j&&d!==null&&(D=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return T&&a!==void 0&&(S.value=Jl(c,this.options,a)),v&&v(S.value),T&&this.finish(),S}get duration(){const{resolved:t}=this;return t?Nr(t.calculatedDuration):0}get time(){return Nr(this.currentTime)}set time(t){t=wr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=UL,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const zL=new Set(["opacity","clipPath","filter","transform"]);function Pm(s){let t;return()=>(t===void 0&&(t=s()),t)}const WL={linearEasing:void 0};function KL(s,t){const r=Pm(s);return()=>{var n;return(n=WL[t])!==null&&n!==void 0?n:r()}}const ll=KL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function C1(s){return!!(typeof s=="function"&&ll()||!s||typeof s=="string"&&(s in zd||ll())||Cm(s)||Array.isArray(s)&&s.every(C1))}const ti=([s,t,r,n])=>`cubic-bezier(${s}, ${t}, ${r}, ${n})`,zd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ti([0,.65,.55,1]),circOut:ti([.55,0,1,.45]),backIn:ti([.31,.01,.66,-.59]),backOut:ti([.33,1.53,.69,.99])};function k1(s,t){if(s)return typeof s=="function"&&ll()?g1(s,t):Cm(s)?ti(s):Array.isArray(s)?s.map(r=>k1(r,t)||zd.easeOut):zd[s]}function GL(s,t,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:r};c&&(d.offset=c);const u=k1(l,a);return Array.isArray(u)&&(d.easing=u),s.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Vp(s,t){s.timeline=t,s.onfinish=null}const QL=Pm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cl=10,ZL=2e4;function YL(s){return Sm(s.type)||s.type==="spring"||!C1(s.ease)}function XL(s,t){const r=new Tm({...t,keyframes:s,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:s[0]};const a=[];let i=0;for(;!n.done&&i<ZL;)n=r.sample(i),a.push(n.value),i+=cl;return{times:void 0,keyframes:a,duration:i-cl,ease:"linear"}}const T1={anticipate:YC,backInOut:ZC,circInOut:JC};function JL(s){return s in T1}class Up extends x1{constructor(t){super(t);const{name:r,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new f1(i,(o,l)=>this.onKeyframesResolved(o,l),r,n,a),this.resolver.scheduleResolve()}initPlayback(t,r){var n;let{duration:a=300,times:i,ease:o,type:l,motionValue:c,name:d,startTime:u}=this.options;if(!(!((n=c.owner)===null||n===void 0)&&n.current))return!1;if(typeof o=="string"&&ll()&&JL(o)&&(o=T1[o]),YL(this.options)){const{onComplete:m,onUpdate:x,motionValue:g,element:f,...v}=this.options,y=XL(t,v);t=y.keyframes,t.length===1&&(t[1]=t[0]),a=y.duration,i=y.times,o=y.ease,l="keyframes"}const h=GL(c.owner.current,d,t,{...this.options,duration:a,times:i,ease:o});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(Vp(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:m}=this.options;c.set(Jl(t,this.options,r)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:a,times:i,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return Nr(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return Nr(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=wr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return es;const{animation:n}=r;Vp(n,t)}return es}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:a,type:i,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:m,...x}=this.options,g=new Tm({...x,keyframes:n,duration:a,type:i,ease:o,times:l,isGenerator:!0}),f=wr(this.time);d.setWithVelocity(g.sample(f-cl).value,g.sample(f).value,cl)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:a,repeatType:i,damping:o,type:l}=t;return QL()&&n&&zL.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const e3=Pm(()=>window.ScrollTimeline!==void 0);class t3{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,r){return Promise.all(this.animations).then(t).catch(r)}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(a=>e3()&&a.attachTimeline?a.attachTimeline(t):r(a));return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function s3({when:s,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Em=(s,t,r,n={},a,i)=>o=>{const l=fm(n,s)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-wr(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:s,motionValue:t,element:i?void 0:a};s3(l)||(u={...u,...T5(s,u)}),u.duration&&(u.duration=wr(u.duration)),u.repeatDelay&&(u.repeatDelay=wr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!i&&t.get()!==void 0){const m=Jl(u.keyframes,l);if(m!==void 0)return mt.update(()=>{u.onUpdate(m),u.onComplete()}),new t3([])}return!i&&Up.supports(u)?new Up(u):new Tm(u)},r3=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),n3=s=>Md(s)?s[s.length-1]||0:s;function Dm(s,t){s.indexOf(t)===-1&&s.push(t)}function Am(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}class Im{constructor(){this.subscriptions=[]}add(t){return Dm(this.subscriptions,t),()=>Am(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hp=30,a3=s=>!isNaN(parseFloat(s));class i3{constructor(t,r={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=or.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=or.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=a3(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Im);const n=this.events[t].add(r);return t==="change"?()=>{n(),mt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=or.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Hp)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Hp);return v1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $i(s,t){return new i3(s,t)}function o3(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,$i(r))}function l3(s,t){const r=Xl(s,t);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const l=n3(i[o]);o3(s,o,l)}}const _m=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),c3="framerAppearId",P1="data-"+_m(c3);function E1(s){return s.props[P1]}const Zt=s=>!!(s&&s.getVelocity);function d3(s){return!!(Zt(s)&&s.add)}function Wd(s,t){const r=s.getValue("willChange");if(d3(r))return r.add(t)}function u3({protectedKeys:s,needsAnimating:t},r){const n=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function D1(s,t,{delay:r=0,transitionOverride:n,type:a}={}){var i;let{transition:o=s.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const d=[],u=a&&s.animationState&&s.animationState.getState()[a];for(const h in c){const m=s.getValue(h,(i=s.latestValues[h])!==null&&i!==void 0?i:null),x=c[h];if(x===void 0||u&&u3(u,h))continue;const g={delay:r,...fm(o||{},h)};let f=!1;if(window.MotionHandoffAnimation){const y=E1(s);if(y){const j=window.MotionHandoffAnimation(y,h,mt);j!==null&&(g.startTime=j,f=!0)}}Wd(s,h),m.start(Em(h,m,x,s.shouldReduceMotion&&Vn.has(h)?{type:!1}:g,s,f));const v=m.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{mt.update(()=>{l&&l3(s,l)})}),d}function Kd(s,t,r={}){var n;const a=Xl(s,t,r.type==="exit"?(n=s.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const o=a?()=>Promise.all(D1(s,a,r)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=i;return m3(s,t,u+d,h,m,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(r.delay)])}function m3(s,t,r=0,n=0,a=1,i){const o=[],l=(s.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(s.variantChildren).sort(h3).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Kd(d,t,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function h3(s,t){return s.sortNodePosition(t)}function p3(s,t,r={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>Kd(s,i,r));n=Promise.all(a)}else if(typeof t=="string")n=Kd(s,t,r);else{const a=typeof t=="function"?Xl(s,t,r.custom):t;n=Promise.all(D1(s,a,r))}return n.then(()=>{s.notify("AnimationComplete",t)})}const f3=pm.length;function A1(s){if(!s)return;if(!s.isControllingVariants){const r=s.parent?A1(s.parent)||{}:{};return s.props.initial!==void 0&&(r.initial=s.props.initial),r}const t={};for(let r=0;r<f3;r++){const n=pm[r],a=s.props[n];(Mi(a)||a===!1)&&(t[n]=a)}return t}const x3=[...hm].reverse(),g3=hm.length;function v3(s){return t=>Promise.all(t.map(({animation:r,options:n})=>p3(s,r,n)))}function y3(s){let t=v3(s),r=qp(),n=!0;const a=c=>(d,u)=>{var h;const m=Xl(s,u,c==="exit"?(h=s.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:x,transitionEnd:g,...f}=m;d={...d,...f,...g}}return d};function i(c){t=c(s)}function o(c){const{props:d}=s,u=A1(s.parent)||{},h=[],m=new Set;let x={},g=1/0;for(let v=0;v<g3;v++){const y=x3[v],j=r[y],b=d[y]!==void 0?d[y]:u[y],k=Mi(b),S=y===c?j.isActive:null;S===!1&&(g=v);let D=b===u[y]&&b!==d[y]&&k;if(D&&n&&s.manuallyAnimateOnMount&&(D=!1),j.protectedKeys={...x},!j.isActive&&S===null||!b&&!j.prevProp||Yl(b)||typeof b=="boolean")continue;const T=j3(j.prevProp,b);let C=T||y===c&&j.isActive&&!D&&k||v>g&&k,E=!1;const I=Array.isArray(b)?b:[b];let w=I.reduce(a(y),{});S===!1&&(w={});const{prevResolvedValues:N={}}=j,A={...N,...w},F=L=>{C=!0,m.has(L)&&(E=!0,m.delete(L)),j.needsAnimating[L]=!0;const ae=s.getValue(L);ae&&(ae.liveStyle=!1)};for(const L in A){const ae=w[L],M=N[L];if(x.hasOwnProperty(L))continue;let re=!1;Md(ae)&&Md(M)?re=!qC(ae,M):re=ae!==M,re?ae!=null?F(L):m.add(L):ae!==void 0&&m.has(L)?F(L):j.protectedKeys[L]=!0}j.prevProp=b,j.prevResolvedValues=w,j.isActive&&(x={...x,...w}),n&&s.blockInitialAnimation&&(C=!1),C&&(!(D&&T)||E)&&h.push(...I.map(L=>({animation:L,options:{type:y}})))}if(m.size){const v={};m.forEach(y=>{const j=s.getBaseTarget(y),b=s.getValue(y);b&&(b.liveStyle=!0),v[y]=j??null}),h.push({animation:v})}let f=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!s.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(h):Promise.resolve()}function l(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=s.variantChildren)===null||u===void 0||u.forEach(m=>{var x;return(x=m.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),r[c].isActive=d;const h=o(c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=qp(),n=!0}}}function j3(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!qC(t,s):!1}function an(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qp(){return{animate:an(!0),whileInView:an(),whileHover:an(),whileTap:an(),whileDrag:an(),whileFocus:an(),exit:an()}}class en{constructor(t){this.isMounted=!1,this.node=t}update(){}}class b3 extends en{constructor(t){super(t),t.animationState||(t.animationState=y3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let w3=0;class N3 extends en{constructor(){super(...arguments),this.id=w3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const S3={animation:{Feature:b3},exit:{Feature:N3}};function C3(s,t,r){var n;if(s instanceof Element)return[s];if(typeof s=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const Bs={x:!1,y:!1};function I1(){return Bs.x||Bs.y}function zp(s){return t=>{t.pointerType==="touch"||I1()||s(t)}}function k3(s,t,r={}){const n=new AbortController,a={passive:!0,...r,signal:n.signal},i=zp(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const d=zp(u=>{c(u),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,a)});return C3(s).forEach(o=>{o.addEventListener("pointerenter",i,a)}),()=>n.abort()}function T3(s){return s==="x"||s==="y"?Bs[s]?null:(Bs[s]=!0,()=>{Bs[s]=!1}):Bs.x||Bs.y?null:(Bs.x=Bs.y=!0,()=>{Bs.x=Bs.y=!1})}const _1=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function no(s){return{point:{x:s.pageX,y:s.pageY}}}const P3=s=>t=>_1(t)&&s(t,no(t));function jr(s,t,r,n={passive:!0}){return s.addEventListener(t,r,n),()=>s.removeEventListener(t,r)}function Br(s,t,r,n){return jr(s,t,P3(r),n)}const Wp=(s,t)=>Math.abs(s-t);function E3(s,t){const r=Wp(s.x,t.x),n=Wp(s.y,t.y);return Math.sqrt(r**2+n**2)}class R1{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Lc(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,x=E3(h.offset,{x:0,y:0})>=3;if(!m&&!x)return;const{point:g}=h,{timestamp:f}=qt;this.history.push({...g,timestamp:f});const{onStart:v,onMove:y}=this.handlers;m||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Fc(m,this.transformPagePoint),mt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Lc(h.type==="pointercancel"?this.lastMoveEventInfo:Fc(m,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,v),g&&g(h,v)},!_1(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=no(t),l=Fc(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=qt;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(t,Lc(l,this.history)),this.removeListeners=$r(Br(this.contextWindow,"pointermove",this.handlePointerMove),Br(this.contextWindow,"pointerup",this.handlePointerUp),Br(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wr(this.updatePoint)}}function Fc(s,t){return t?{point:t(s.point)}:s}function Kp(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Lc({point:s},t){return{point:s,delta:Kp(s,O1(t)),offset:Kp(s,D3(t)),velocity:A3(t,.1)}}function D3(s){return s[0]}function O1(s){return s[s.length-1]}function A3(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,n=null;const a=O1(s);for(;r>=0&&(n=s[r],!(a.timestamp-n.timestamp>wr(t)));)r--;if(!n)return{x:0,y:0};const i=Nr(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Jn(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}const M1=1e-4,I3=1-M1,_3=1+M1,F1=.01,R3=0-F1,O3=0+F1;function ks(s){return s.max-s.min}function M3(s,t,r){return Math.abs(s-t)<=r}function Gp(s,t,r,n=.5){s.origin=n,s.originPoint=wt(t.min,t.max,s.origin),s.scale=ks(r)/ks(t),s.translate=wt(r.min,r.max,s.origin)-s.originPoint,(s.scale>=I3&&s.scale<=_3||isNaN(s.scale))&&(s.scale=1),(s.translate>=R3&&s.translate<=O3||isNaN(s.translate))&&(s.translate=0)}function ui(s,t,r,n){Gp(s.x,t.x,r.x,n?n.originX:void 0),Gp(s.y,t.y,r.y,n?n.originY:void 0)}function Qp(s,t,r){s.min=r.min+t.min,s.max=s.min+ks(t)}function F3(s,t,r){Qp(s.x,t.x,r.x),Qp(s.y,t.y,r.y)}function Zp(s,t,r){s.min=t.min-r.min,s.max=s.min+ks(t)}function mi(s,t,r){Zp(s.x,t.x,r.x),Zp(s.y,t.y,r.y)}function L3(s,{min:t,max:r},n){return t!==void 0&&s<t?s=n?wt(t,s,n.min):Math.max(s,t):r!==void 0&&s>r&&(s=n?wt(r,s,n.max):Math.min(s,r)),s}function Yp(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function $3(s,{top:t,left:r,bottom:n,right:a}){return{x:Yp(s.x,r,a),y:Yp(s.y,t,n)}}function Xp(s,t){let r=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,n]=[n,r]),{min:r,max:n}}function B3(s,t){return{x:Xp(s.x,t.x),y:Xp(s.y,t.y)}}function V3(s,t){let r=.5;const n=ks(s),a=ks(t);return a>n?r=Na(t.min,t.max-n,s.min):n>a&&(r=Na(s.min,s.max-a,t.min)),kr(0,1,r)}function U3(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const Gd=.35;function H3(s=Gd){return s===!1?s=0:s===!0&&(s=Gd),{x:Jp(s,"left","right"),y:Jp(s,"top","bottom")}}function Jp(s,t,r){return{min:ef(s,t),max:ef(s,r)}}function ef(s,t){return typeof s=="number"?s:s[t]||0}const tf=()=>({translate:0,scale:1,origin:0,originPoint:0}),ea=()=>({x:tf(),y:tf()}),sf=()=>({min:0,max:0}),Tt=()=>({x:sf(),y:sf()});function Is(s){return[s("x"),s("y")]}function L1({top:s,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:s,max:n}}}function q3({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function z3(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function $c(s){return s===void 0||s===1}function Qd({scale:s,scaleX:t,scaleY:r}){return!$c(s)||!$c(t)||!$c(r)}function ln(s){return Qd(s)||$1(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function $1(s){return rf(s.x)||rf(s.y)}function rf(s){return s&&s!=="0%"}function dl(s,t,r){const n=s-r,a=t*n;return r+a}function nf(s,t,r,n,a){return a!==void 0&&(s=dl(s,a,n)),dl(s,r,n)+t}function Zd(s,t=0,r=1,n,a){s.min=nf(s.min,t,r,n,a),s.max=nf(s.max,t,r,n,a)}function B1(s,{x:t,y:r}){Zd(s.x,t.translate,t.scale,t.originPoint),Zd(s.y,r.translate,r.scale,r.originPoint)}const af=.999999999999,of=1.0000000000001;function W3(s,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&sa(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,B1(s,o)),n&&ln(i.latestValues)&&sa(s,i.latestValues))}t.x<of&&t.x>af&&(t.x=1),t.y<of&&t.y>af&&(t.y=1)}function ta(s,t){s.min=s.min+t,s.max=s.max+t}function lf(s,t,r,n,a=.5){const i=wt(s.min,s.max,a);Zd(s,t,r,i,n)}function sa(s,t){lf(s.x,t.x,t.scaleX,t.scale,t.originX),lf(s.y,t.y,t.scaleY,t.scale,t.originY)}function V1(s,t){return L1(z3(s.getBoundingClientRect(),t))}function K3(s,t,r){const n=V1(s,r),{scroll:a}=t;return a&&(ta(n.x,a.offset.x),ta(n.y,a.offset.y)),n}const U1=({current:s})=>s?s.ownerDocument.defaultView:null,G3=new WeakMap;class Q3{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(no(u).point)},i=(u,h)=>{const{drag:m,dragPropagation:x,onDragStart:g}=this.getProps();if(m&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=T3(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(v=>{let y=this.getAxisMotionValue(v).get()||0;if(ir.test(y)){const{projection:j}=this.visualElement;if(j&&j.layout){const b=j.layout.layoutBox[v];b&&(y=ks(b)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&mt.postRender(()=>g(u,h)),Wd(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:x,onDirectionLock:g,onDrag:f}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:v}=h;if(x&&this.currentDirection===null){this.currentDirection=Z3(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),f&&f(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Is(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new R1(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:U1(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&mt.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!jo(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=L3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&Jn(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=$3(a.layoutBox,r):this.constraints=!1,this.elastic=H3(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Is(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=U3(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Jn(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=K3(n,a.root,this.visualElement.getTransformPagePoint());let o=B3(a.layout.layoutBox,i);if(r){const l=r(q3(o));this.hasMutatedConstraints=!!l,l&&(o=L1(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Is(u=>{if(!jo(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,x=a?40:1e7,g={type:"inertia",velocity:n?t[u]:0,bounceStiffness:m,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Wd(this.visualElement,t),n.start(Em(t,n,0,r,this.visualElement,!1))}stopAnimation(){Is(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Is(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Is(r=>{const{drag:n}=this.getProps();if(!jo(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-wt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Jn(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Is(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=V3({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Is(o=>{if(!jo(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(wt(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;G3.set(this.visualElement,this);const t=this.visualElement.current,r=Br(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Jn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),mt.read(n);const o=jr(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Is(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Gd,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function jo(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function Z3(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class Y3 extends en{constructor(t){super(t),this.removeGroupControls=es,this.removeListeners=es,this.controls=new Q3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||es}unmount(){this.removeGroupControls(),this.removeListeners()}}const cf=s=>(t,r)=>{s&&mt.postRender(()=>s(t,r))};class X3 extends en{constructor(){super(...arguments),this.removePointerDownListener=es}onPointerDown(t){this.session=new R1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:U1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:cf(t),onStart:cf(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&mt.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Br(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ec=p.createContext(null);function J3(){const s=p.useContext(ec);if(s===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=s,a=p.useId();p.useEffect(()=>n(a),[]);const i=p.useCallback(()=>r&&r(a),[a,r]);return!t&&r?[!1,i]:[!0]}const Rm=p.createContext({}),H1=p.createContext({}),Oo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function df(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Ga={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Te.test(s))s=parseFloat(s);else return s;const r=df(s,t.target.x),n=df(s,t.target.y);return`${r}% ${n}%`}},e$={correct:(s,{treeScale:t,projectionDelta:r})=>{const n=s,a=Kr.parse(s);if(a.length>5)return n;const i=Kr.createTransformer(s),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=wt(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}},ul={};function t$(s){Object.assign(ul,s)}const{schedule:Om,cancel:sU}=zC(queueMicrotask,!1);class s$ extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;t$(r$),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Oo.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||mt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Om.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function q1(s){const[t,r]=J3(),n=p.useContext(Rm);return e.jsx(s$,{...s,layoutGroup:n,switchLayoutGroup:p.useContext(H1),isPresent:t,safeToRemove:r})}const r$={borderRadius:{...Ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ga,borderTopRightRadius:Ga,borderBottomLeftRadius:Ga,borderBottomRightRadius:Ga,boxShadow:e$},z1=["TopLeft","TopRight","BottomLeft","BottomRight"],n$=z1.length,uf=s=>typeof s=="string"?parseFloat(s):s,mf=s=>typeof s=="number"||Te.test(s);function a$(s,t,r,n,a,i){a?(s.opacity=wt(0,r.opacity!==void 0?r.opacity:1,i$(n)),s.opacityExit=wt(t.opacity!==void 0?t.opacity:1,0,o$(n))):i&&(s.opacity=wt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<n$;o++){const l=`border${z1[o]}Radius`;let c=hf(t,l),d=hf(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||mf(c)===mf(d)?(s[l]=Math.max(wt(uf(c),uf(d),n),0),(ir.test(d)||ir.test(c))&&(s[l]+="%")):s[l]=d}(t.rotate||r.rotate)&&(s.rotate=wt(t.rotate||0,r.rotate||0,n))}function hf(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const i$=W1(0,.5,XC),o$=W1(.5,.95,es);function W1(s,t,r){return n=>n<s?0:n>t?1:r(Na(s,t,n))}function pf(s,t){s.min=t.min,s.max=t.max}function As(s,t){pf(s.x,t.x),pf(s.y,t.y)}function ff(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function xf(s,t,r,n,a){return s-=t,s=dl(s,1/r,n),a!==void 0&&(s=dl(s,1/a,n)),s}function l$(s,t=0,r=1,n=.5,a,i=s,o=s){if(ir.test(t)&&(t=parseFloat(t),t=wt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=wt(i.min,i.max,n);s===i&&(l-=t),s.min=xf(s.min,t,r,l,a),s.max=xf(s.max,t,r,l,a)}function gf(s,t,[r,n,a],i,o){l$(s,t[r],t[n],t[a],t.scale,i,o)}const c$=["x","scaleX","originX"],d$=["y","scaleY","originY"];function vf(s,t,r,n){gf(s.x,t,c$,r?r.x:void 0,n?n.x:void 0),gf(s.y,t,d$,r?r.y:void 0,n?n.y:void 0)}function yf(s){return s.translate===0&&s.scale===1}function K1(s){return yf(s.x)&&yf(s.y)}function jf(s,t){return s.min===t.min&&s.max===t.max}function u$(s,t){return jf(s.x,t.x)&&jf(s.y,t.y)}function bf(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function G1(s,t){return bf(s.x,t.x)&&bf(s.y,t.y)}function wf(s){return ks(s.x)/ks(s.y)}function Nf(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class m${constructor(){this.members=[]}add(t){Dm(this.members,t),t.scheduleRender()}remove(t){if(Am(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h$(s,t,r){let n="";const a=s.x.translate/t.x,i=s.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:x,skewY:g}=r;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),x&&(n+=`skewX(${x}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=s.x.scale*t.x,c=s.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const p$=(s,t)=>s.depth-t.depth;class f${constructor(){this.children=[],this.isDirty=!1}add(t){Dm(this.children,t),this.isDirty=!0}remove(t){Am(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(p$),this.isDirty=!1,this.children.forEach(t)}}function Mo(s){const t=Zt(s)?s.get():s;return r3(t)?t.toValue():t}function x$(s,t){const r=or.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Wr(n),s(i-t))};return mt.read(n,!0),()=>Wr(n)}function g$(s){return s instanceof SVGElement&&s.tagName!=="svg"}function v$(s,t,r){const n=Zt(s)?s:$i(s);return n.start(Em("",n,t,r)),n.animation}const cn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},si=typeof window<"u"&&window.MotionDebug!==void 0,Bc=["","X","Y","Z"],y$={visibility:"hidden"},Sf=1e3;let j$=0;function Vc(s,t,r,n){const{latestValues:a}=t;a[s]&&(r[s]=a[s],t.setStaticValue(s,0),n&&(n[s]=0))}function Q1(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const r=E1(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=s.options;window.MotionCancelOptimisedAnimation(r,"transform",mt,!(a||i))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&Q1(n)}function Z1({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=j$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,si&&(cn.totalNodes=cn.resolvedTargetDeltas=cn.recalculatedProjection=0),this.nodes.forEach(N$),this.nodes.forEach(P$),this.nodes.forEach(E$),this.nodes.forEach(S$),si&&window.MotionDebug.record(cn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new f$)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Im),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=g$(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),s){let h;const m=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=x$(m,250),Oo.hasAnimatedSinceResize&&(Oo.hasAnimatedSinceResize=!1,this.nodes.forEach(kf))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||R$,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),j=!this.targetLayout||!G1(this.targetLayout,g)||x,b=!m&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const k={...fm(f,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||kf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(D$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cf);return}this.isUpdating||this.nodes.forEach(k$),this.isUpdating=!1,this.nodes.forEach(T$),this.nodes.forEach(b$),this.nodes.forEach(w$),this.clearAllSnapshots();const l=or.now();qt.delta=kr(0,1e3/60,l-qt.timestamp),qt.timestamp=l,qt.isProcessing=!0,Ic.update.process(qt),Ic.preRender.process(qt),Ic.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Om.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(C$),this.sharedNodes.forEach(A$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!K1(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||ln(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),O$(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Tt();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(M$))){const{scroll:u}=this.root;u&&(ta(c.x,u.offset.x),ta(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=Tt();if(As(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&As(c,o),ta(c.x,h.offset.x),ta(c.y,h.offset.y))}return c}applyTransform(o,l=!1){const c=Tt();As(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&sa(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ln(u.latestValues)&&sa(c,u.latestValues)}return ln(this.latestValues)&&sa(c,this.latestValues),c}removeTransform(o){const l=Tt();As(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ln(d.latestValues))continue;Qd(d.latestValues)&&d.updateSnapshot();const u=Tt(),h=d.measurePageBox();As(u,h),vf(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return ln(this.latestValues)&&vf(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),mi(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),As(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):As(this.target,this.layout.layoutBox),B1(this.target,this.targetDelta)):As(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),mi(this.relativeTargetOrigin,this.target,x.target),As(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}si&&cn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qd(this.parent.latestValues)||$1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;As(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;W3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Tt());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ff(this.prevProjectionDelta.x,this.projectionDelta.x),ff(this.prevProjectionDelta.y,this.projectionDelta.y)),ui(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!Nf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Nf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),si&&cn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ea(),this.projectionDelta=ea(),this.projectionDeltaWithTransform=ea()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=ea();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Tt(),x=c?c.source:void 0,g=this.layout?this.layout.source:void 0,f=x!==g,v=this.getStack(),y=!v||v.members.length<=1,j=!!(f&&!y&&this.options.crossfade===!0&&!this.path.some(_$));this.animationProgress=0;let b;this.mixTargetDelta=k=>{const S=k/1e3;Tf(h.x,o.x,S),Tf(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mi(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),I$(this.relativeTarget,this.relativeTargetOrigin,m,S),b&&u$(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Tt()),As(b,this.relativeTarget)),f&&(this.animationValues=u,a$(u,d,this.latestValues,S,j,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mt.update(()=>{Oo.hasAnimatedSinceResize=!0,this.currentAnimation=v$(0,Sf,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Y1(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Tt();const h=ks(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=ks(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}As(l,c),sa(l,u),ui(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new m$),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Vc("z",o,d,this.animationValues);for(let u=0;u<Bc.length;u++)Vc(`rotate${Bc[u]}`,o,d,this.animationValues),Vc(`skew${Bc[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return y$;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Mo(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=Mo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ln(this.latestValues)&&(f.transform=u?u({},""):"none",this.hasProjected=!1),f}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=h$(this.projectionDeltaWithTransform,this.treeScale,m),u&&(d.transform=u(m,d.transform));const{x,y:g}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:d.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const f in ul){if(m[f]===void 0)continue;const{correct:v,applyTo:y}=ul[f],j=d.transform==="none"?m[f]:v(m[f],h);if(y){const b=y.length;for(let k=0;k<b;k++)d[y[k]]=j}else d[f]=j}return this.options.layoutId&&(d.pointerEvents=h===this?Mo(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Cf),this.root.sharedNodes.clear()}}}function b$(s){s.updateLayout()}function w$(s){var t;const r=((t=s.resumeFrom)===null||t===void 0?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=s.layout,{animationType:i}=s.options,o=r.source!==s.layout.source;i==="size"?Is(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],x=ks(m);m.min=n[h].min,m.max=m.min+x}):Y1(i,r.layoutBox,n)&&Is(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],x=ks(n[h]);m.max=m.min+x,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[h].max=s.relativeTarget[h].min+x)});const l=ea();ui(l,n,r.layoutBox);const c=ea();o?ui(c,s.applyTransform(a,!0),r.measuredBox):ui(c,n,r.layoutBox);const d=!K1(l);let u=!1;if(!s.resumeFrom){const h=s.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:x}=h;if(m&&x){const g=Tt();mi(g,r.layoutBox,m.layoutBox);const f=Tt();mi(f,n,x.layoutBox),G1(g,f)||(u=!0),h.options.layoutRoot&&(s.relativeTarget=f,s.relativeTargetOrigin=g,s.relativeParent=h)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function N$(s){si&&cn.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function S$(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function C$(s){s.clearSnapshot()}function Cf(s){s.clearMeasurements()}function k$(s){s.isLayoutDirty=!1}function T$(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function kf(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function P$(s){s.resolveTargetDelta()}function E$(s){s.calcProjection()}function D$(s){s.resetSkewAndRotation()}function A$(s){s.removeLeadSnapshot()}function Tf(s,t,r){s.translate=wt(t.translate,0,r),s.scale=wt(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Pf(s,t,r,n){s.min=wt(t.min,r.min,n),s.max=wt(t.max,r.max,n)}function I$(s,t,r,n){Pf(s.x,t.x,r.x,n),Pf(s.y,t.y,r.y,n)}function _$(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const R$={duration:.45,ease:[.4,0,.1,1]},Ef=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),Df=Ef("applewebkit/")&&!Ef("chrome/")?Math.round:es;function Af(s){s.min=Df(s.min),s.max=Df(s.max)}function O$(s){Af(s.x),Af(s.y)}function Y1(s,t,r){return s==="position"||s==="preserve-aspect"&&!M3(wf(t),wf(r),.2)}function M$(s){var t;return s!==s.root&&((t=s.scroll)===null||t===void 0?void 0:t.wasRoot)}const F$=Z1({attachResizeListener:(s,t)=>jr(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uc={current:void 0},X1=Z1({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Uc.current){const s=new F$({});s.mount(window),s.setOptions({layoutScroll:!0}),Uc.current=s}return Uc.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),L$={pan:{Feature:X3},drag:{Feature:Y3,ProjectionNode:X1,MeasureLayout:q1}};function If(s,t,r){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",r);const a=n[r?"onHoverStart":"onHoverEnd"];a&&mt.postRender(()=>a(t,no(t)))}class $$ extends en{mount(){const{current:t,props:r}=this.node;t&&(this.unmount=k3(t,n=>(If(this.node,n,!0),a=>If(this.node,a,!1)),{passive:!r.onHoverStart&&!r.onHoverEnd}))}unmount(){}}class B$ extends en{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$r(jr(this.node.current,"focus",()=>this.onFocus()),jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const J1=(s,t)=>t?s===t?!0:J1(s,t.parentElement):!1;function Hc(s,t){if(!t)return;const r=new PointerEvent("pointer"+s);t(r,no(r))}class V$ extends en{constructor(){super(...arguments),this.removeStartListeners=es,this.removeEndListeners=es,this.removeAccessibleListeners=es,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Br(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),m=!h&&!J1(this.node.current,l.target)?u:d;m&&mt.update(()=>m(l,c))},{passive:!(n.onTap||n.onPointerUp)}),o=Br(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=$r(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Hc("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&mt.postRender(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=jr(this.node.current,"keyup",o),Hc("down",(l,c)=>{this.startPress(l,c)})},r=jr(this.node.current,"keydown",t),n=()=>{this.isPressing&&Hc("cancel",(i,o)=>this.cancelPress(i,o))},a=jr(this.node.current,"blur",n);this.removeAccessibleListeners=$r(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&mt.postRender(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!I1()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&mt.postRender(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Br(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=jr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$r(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Yd=new WeakMap,qc=new WeakMap,U$=s=>{const t=Yd.get(s.target);t&&t(s)},H$=s=>{s.forEach(U$)};function q$({root:s,...t}){const r=s||document;qc.has(r)||qc.set(r,{});const n=qc.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(H$,{root:s,...t})),n[a]}function z$(s,t,r){const n=q$(t);return Yd.set(s,r),n.observe(s),()=>{Yd.delete(s),n.unobserve(s)}}const W$={some:0,all:1};class K$ extends en{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:W$[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return z$(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(G$(t,r))&&this.startObserver()}unmount(){}}function G$({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const Q$={inView:{Feature:K$},tap:{Feature:V$},focus:{Feature:B$},hover:{Feature:$$}},Z$={layout:{ProjectionNode:X1,MeasureLayout:q1}},Mm=p.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),tc=p.createContext({}),Fm=typeof window<"u",ek=Fm?p.useLayoutEffect:p.useEffect,tk=p.createContext({strict:!1});function Y$(s,t,r,n,a){var i,o;const{visualElement:l}=p.useContext(tc),c=p.useContext(tk),d=p.useContext(ec),u=p.useContext(Mm).reducedMotion,h=p.useRef();n=n||c.renderer,!h.current&&n&&(h.current=n(s,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const m=h.current,x=p.useContext(H1);m&&!m.projection&&a&&(m.type==="html"||m.type==="svg")&&X$(h.current,r,a,x);const g=p.useRef(!1);p.useInsertionEffect(()=>{m&&g.current&&m.update(r,d)});const f=r[P1],v=p.useRef(!!f&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,f))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,f)));return ek(()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Om.render(m.render),v.current&&m.animationState&&m.animationState.animateChanges())}),p.useEffect(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,f)}),v.current=!1))}),m}function X$(s,t,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;s.projection=new r(s.latestValues,t["data-framer-portal-id"]?void 0:sk(s.parent)),s.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Jn(l),visualElement:s,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function sk(s){if(s)return s.options.allowProjection!==!1?s.projection:sk(s.parent)}function J$(s,t,r){return p.useCallback(n=>{n&&s.mount&&s.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Jn(r)&&(r.current=n))},[t])}function sc(s){return Yl(s.animate)||pm.some(t=>Mi(s[t]))}function rk(s){return!!(sc(s)||s.variants)}function eB(s,t){if(sc(s)){const{initial:r,animate:n}=s;return{initial:r===!1||Mi(r)?r:void 0,animate:Mi(n)?n:void 0}}return s.inherit!==!1?t:{}}function tB(s){const{initial:t,animate:r}=eB(s,p.useContext(tc));return p.useMemo(()=>({initial:t,animate:r}),[_f(t),_f(r)])}function _f(s){return Array.isArray(s)?s.join(" "):s}const Rf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sa={};for(const s in Rf)Sa[s]={isEnabled:t=>Rf[s].some(r=>!!t[r])};function sB(s){for(const t in s)Sa[t]={...Sa[t],...s[t]}}const rB=Symbol.for("motionComponentSymbol");function nB({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){s&&sB(s);function i(l,c){let d;const u={...p.useContext(Mm),...l,layoutId:aB(l)},{isStatic:h}=u,m=tB(l),x=n(l,h);if(!h&&Fm){iB();const g=oB(u);d=g.MeasureLayout,m.visualElement=Y$(a,x,u,t,g.ProjectionNode)}return e.jsxs(tc.Provider,{value:m,children:[d&&m.visualElement?e.jsx(d,{visualElement:m.visualElement,...u}):null,r(a,l,J$(x,m.visualElement,c),x,h,m.visualElement)]})}const o=p.forwardRef(i);return o[rB]=a,o}function aB({layoutId:s}){const t=p.useContext(Rm).id;return t&&s!==void 0?t+"-"+s:s}function iB(s,t){p.useContext(tk).strict}function oB(s){const{drag:t,layout:r}=Sa;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(s)||r!=null&&r.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const lB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lm(s){return typeof s!="string"||s.includes("-")?!1:!!(lB.indexOf(s)>-1||/[A-Z]/u.test(s))}function nk(s,{style:t,vars:r},n,a){Object.assign(s.style,t,a&&a.getProjectionStyles(n));for(const i in r)s.style.setProperty(i,r[i])}const ak=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ik(s,t,r,n){nk(s,t,void 0,n);for(const a in t.attrs)s.setAttribute(ak.has(a)?a:_m(a),t.attrs[a])}function ok(s,{layout:t,layoutId:r}){return Vn.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!ul[s]||s==="opacity")}function $m(s,t,r){var n;const{style:a}=s,i={};for(const o in a)(Zt(a[o])||t.style&&Zt(t.style[o])||ok(o,s)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function lk(s,t,r){const n=$m(s,t,r);for(const a in s)if(Zt(s[a])||Zt(t[a])){const i=to.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=s[a]}return n}function Bm(s){const t=p.useRef(null);return t.current===null&&(t.current=s()),t.current}function cB({scrapeMotionValuesFromProps:s,createRenderState:t,onMount:r},n,a,i){const o={latestValues:dB(n,a,i,s),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const ck=s=>(t,r)=>{const n=p.useContext(tc),a=p.useContext(ec),i=()=>cB(s,t,n,a);return r?i():Bm(i)};function dB(s,t,r,n){const a={},i=n(s,{});for(const m in i)a[m]=Mo(i[m]);let{initial:o,animate:l}=s;const c=sc(s),d=rk(s);t&&d&&!c&&s.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!Yl(h)){const m=Array.isArray(h)?h:[h];for(let x=0;x<m.length;x++){const g=mm(s,m[x]);if(g){const{transitionEnd:f,transition:v,...y}=g;for(const j in y){let b=y[j];if(Array.isArray(b)){const k=u?b.length-1:0;b=b[k]}b!==null&&(a[j]=b)}for(const j in f)a[j]=f[j]}}}return a}const Vm=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dk=()=>({...Vm(),attrs:{}}),uk=(s,t)=>t&&typeof s=="number"?t.transform(s):s,uB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mB=to.length;function hB(s,t,r){let n="",a=!0;for(let i=0;i<mB;i++){const o=to[i],l=s[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=uk(l,wm[o]);if(!c){a=!1;const u=uB[o]||o;n+=`${u}(${d}) `}r&&(t[o]=d)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function Um(s,t,r){const{style:n,vars:a,transformOrigin:i}=s;let o=!1,l=!1;for(const c in t){const d=t[c];if(Vn.has(c)){o=!0;continue}else if(r1(c)){a[c]=d;continue}else{const u=uk(d,wm[c]);c.startsWith("origin")?(l=!0,i[c]=u):n[c]=u}}if(t.transform||(o||r?n.transform=hB(t,s.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}function Of(s,t,r){return typeof s=="string"?s:Te.transform(t+r*s)}function pB(s,t,r){const n=Of(t,s.x,s.width),a=Of(r,s.y,s.height);return`${n} ${a}`}const fB={offset:"stroke-dashoffset",array:"stroke-dasharray"},xB={offset:"strokeDashoffset",array:"strokeDasharray"};function gB(s,t,r=1,n=0,a=!0){s.pathLength=1;const i=a?fB:xB;s[i.offset]=Te.transform(-n);const o=Te.transform(t),l=Te.transform(r);s[i.array]=`${o} ${l}`}function Hm(s,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h){if(Um(s,d,h),u){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:x,dimensions:g}=s;m.transform&&(g&&(x.transform=m.transform),delete m.transform),g&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=pB(g,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),o!==void 0&&gB(m,o,l,c,!1)}const qm=s=>typeof s=="string"&&s.toLowerCase()==="svg",vB={useVisualState:ck({scrapeMotionValuesFromProps:lk,createRenderState:dk,onMount:(s,t,{renderState:r,latestValues:n})=>{mt.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),mt.render(()=>{Hm(r,n,qm(t.tagName),s.transformTemplate),ik(t,r)})}})},yB={useVisualState:ck({scrapeMotionValuesFromProps:$m,createRenderState:Vm})};function mk(s,t,r){for(const n in t)!Zt(t[n])&&!ok(n,r)&&(s[n]=t[n])}function jB({transformTemplate:s},t){return p.useMemo(()=>{const r=Vm();return Um(r,t,s),Object.assign({},r.vars,r.style)},[t])}function bB(s,t){const r=s.style||{},n={};return mk(n,r,s),Object.assign(n,jB(s,t)),n}function wB(s,t){const r={},n=bB(s,t);return s.drag&&s.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(r.tabIndex=0),r.style=n,r}const NB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ml(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||NB.has(s)}let hk=s=>!ml(s);function SB(s){s&&(hk=t=>t.startsWith("on")?!ml(t):s(t))}try{SB(require("@emotion/is-prop-valid").default)}catch{}function CB(s,t,r){const n={};for(const a in s)a==="values"&&typeof s.values=="object"||(hk(a)||r===!0&&ml(a)||!t&&!ml(a)||s.draggable&&a.startsWith("onDrag"))&&(n[a]=s[a]);return n}function kB(s,t,r,n){const a=p.useMemo(()=>{const i=dk();return Hm(i,t,qm(n),s.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};mk(i,s.style,s),a.style={...i,...a.style}}return a}function TB(s=!1){return(r,n,a,{latestValues:i},o)=>{const c=(Lm(r)?kB:wB)(n,i,o,r),d=CB(n,typeof r=="string",s),u=r!==p.Fragment?{...d,...c,ref:a}:{},{children:h}=n,m=p.useMemo(()=>Zt(h)?h.get():h,[h]);return p.createElement(r,{...u,children:m})}}function PB(s,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...Lm(n)?vB:yB,preloadedFeatures:s,useRender:TB(a),createVisualElement:t,Component:n};return nB(o)}}const Xd={current:null},pk={current:!1};function EB(){if(pk.current=!0,!!Fm)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Xd.current=s.matches;s.addListener(t),t()}else Xd.current=!1}function DB(s,t,r){for(const n in t){const a=t[n],i=r[n];if(Zt(a))s.addValue(n,a);else if(Zt(i))s.addValue(n,$i(a,{owner:s}));else if(i!==a)if(s.hasValue(n)){const o=s.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=s.getStaticValue(n);s.addValue(n,$i(o!==void 0?o:a,{owner:s}))}}for(const n in r)t[n]===void 0&&s.removeValue(n);return t}const Mf=new WeakMap,AB=[...i1,Gt,Kr],IB=s=>AB.find(a1(s)),Ff=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _B{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ym,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=or.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,mt.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=sc(r),this.isVariantNode=rk(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in h){const x=h[m];c[m]!==void 0&&Zt(x)&&x.set(c[m],!1)}}mount(t){this.current=t,Mf.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),pk.current||EB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Mf.delete(this.current),this.projection&&this.projection.unmount(),Wr(this.notifyUpdate),Wr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Vn.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&mt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Sa){const r=Sa[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Ff.length;n++){const a=Ff[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=DB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=$i(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(t1(a)||e1(a))?a=parseFloat(a):!IB(a)&&Kr.test(r)&&(a=p1(t,r)),this.setBaseTarget(t,Zt(a)?a.get():a)),Zt(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=mm(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zt(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Im),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class fk extends _B{constructor(){super(...arguments),this.KeyframeResolver=f1}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function RB(s){return window.getComputedStyle(s)}class OB extends fk{constructor(){super(...arguments),this.type="html",this.renderInstance=nk}readValueFromInstance(t,r){if(Vn.has(r)){const n=Nm(r);return n&&n.default||0}else{const n=RB(t),a=(r1(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return V1(t,r)}build(t,r,n){Um(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return $m(t,r,n)}}class MB extends fk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Vn.has(r)){const n=Nm(r);return n&&n.default||0}return r=ak.has(r)?r:_m(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return lk(t,r,n)}build(t,r,n){Hm(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,a){ik(t,r,n,a)}mount(t){this.isSVGTag=qm(t.tagName),super.mount(t)}}const FB=(s,t)=>Lm(s)?new MB(t):new OB(t,{allowProjection:s!==p.Fragment}),LB=PB({...S3,...Q$,...L$,...Z$},FB),zc=w5(LB);class $B extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function BB({children:s,isPresent:t}){const r=p.useId(),n=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=p.useContext(Mm);return p.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=a.current;if(t||!n.current||!o||!l)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),e.jsx($B,{isPresent:t,childRef:n,sizeRef:a,children:p.cloneElement(s,{ref:n})})}const VB=({children:s,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=Bm(UB),c=p.useId(),d=p.useCallback(h=>{l.set(h,!0);for(const m of l.values())if(!m)return;n&&n()},[l,n]),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d,register:h=>(l.set(h,!1),()=>l.delete(h))}),i?[Math.random(),d]:[r,d]);return p.useMemo(()=>{l.forEach((h,m)=>l.set(m,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(s=e.jsx(BB,{isPresent:r,children:s})),e.jsx(ec.Provider,{value:u,children:s})};function UB(){return new Map}const bo=s=>s.key||"";function Lf(s){const t=[];return p.Children.forEach(s,r=>{p.isValidElement(r)&&t.push(r)}),t}const HB=({children:s,exitBeforeEnter:t,custom:r,initial:n=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useMemo(()=>Lf(s),[s]),c=l.map(bo),d=p.useRef(!0),u=p.useRef(l),h=Bm(()=>new Map),[m,x]=p.useState(l),[g,f]=p.useState(l);ek(()=>{d.current=!1,u.current=l;for(let j=0;j<g.length;j++){const b=bo(g[j]);c.includes(b)?h.delete(b):h.get(b)!==!0&&h.set(b,!1)}},[g,c.length,c.join("-")]);const v=[];if(l!==m){let j=[...l];for(let b=0;b<g.length;b++){const k=g[b],S=bo(k);c.includes(S)||(j.splice(b,0,k),v.push(k))}o==="wait"&&v.length&&(j=v),f(Lf(j)),x(l);return}const{forceRender:y}=p.useContext(Rm);return e.jsx(e.Fragment,{children:g.map(j=>{const b=bo(j),k=l===g||c.includes(b),S=()=>{if(h.has(b))h.set(b,!0);else return;let D=!0;h.forEach(T=>{T||(D=!1)}),D&&(y==null||y(),f(u.current),a&&a())};return e.jsx(VB,{isPresent:k,initial:!d.current||n?void 0:!1,custom:k?void 0:r,presenceAffectsLayout:i,mode:o,onExitComplete:k?void 0:S,children:j},b)})})},Wn=OF,qB={pending:"Ready to be ordered",processed:"Order processed",ordered:"Order placed with supplier",arrived:"Materials arrived",frame_cut:"Frame cutting complete",mat_cut:"Mat cutting complete",prepped:"Materials prepped",completed:"Order completed",delayed:"Order delayed",canceled:"Order canceled"},zB=({status:s})=>{switch(s){case"pending":return e.jsx(Nt,{className:"h-5 w-5"});case"processed":return e.jsx(Kc,{className:"h-5 w-5"});case"ordered":return e.jsx(Kc,{className:"h-5 w-5"});case"arrived":return e.jsx(Gr,{className:"h-5 w-5"});case"frame_cut":return e.jsx(No,{className:"h-5 w-5"});case"mat_cut":return e.jsx(No,{className:"h-5 w-5"});case"prepped":return e.jsx(No,{className:"h-5 w-5"});case"completed":return e.jsx(ls,{className:"h-5 w-5"});case"delayed":return e.jsx(Nt,{className:"h-5 w-5"});case"canceled":return e.jsx(Ln,{className:"h-5 w-5"});default:return e.jsx(F2,{className:"h-5 w-5"})}},WB=({status:s,className:t})=>{const[r,n]=p.useState(0);p.useEffect(()=>{if(s==="canceled"){n(100);return}if(s==="delayed"){n(50);return}const i=Wn.filter(l=>l!=="canceled"&&l!=="delayed"),o=i.findIndex(l=>l===s);if(o===-1)n(0);else{const l=(o+1)/i.length*100;let c=0;(()=>{const u=setInterval(()=>{c+=2,n(Math.min(c,l)),c>=l&&clearInterval(u)},20);return()=>clearInterval(u)})()}},[s]);const a=i=>{switch(i){case"pending":return"bg-yellow-500";case"processed":return"bg-blue-300";case"ordered":return"bg-blue-500";case"arrived":return"bg-purple-500";case"frame_cut":return"bg-indigo-500";case"mat_cut":return"bg-teal-500";case"prepped":return"bg-cyan-500";case"completed":return"bg-green-500";case"delayed":return"bg-orange-500";case"canceled":return"bg-red-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:J("space-y-4",t),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zB,{status:s}),e.jsx(pe,{className:a(s),children:s.replace("_"," ")}),e.jsx(zc.span,{className:"text-sm font-medium",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.3},children:qB[s]})]}),e.jsx(ia,{value:r,className:J("h-2 w-full",{"bg-red-200":s==="canceled","bg-orange-200":s==="delayed"})}),e.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:e.jsx(HB,{children:Wn.filter(i=>i!=="canceled"&&i!=="delayed").map((i,o)=>e.jsxs(zc.div,{className:J("flex flex-col items-center",{"text-primary font-medium":s===i,"text-muted-foreground":s!==i}),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:o*.1},children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("div",{className:J("size-2 rounded-full",{"bg-primary":Wn.indexOf(i)<=Wn.indexOf(s),"bg-muted-foreground":Wn.indexOf(i)>Wn.indexOf(s)})})}),e.jsx("span",{className:"capitalize",children:i.replace("_"," ")})]},i))})}),(s==="canceled"||s==="delayed")&&e.jsx(zc.div,{className:"text-sm p-2 rounded-md bg-muted",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:e.jsx("p",{className:"font-medium",children:s==="canceled"?"This order has been canceled":"This order is delayed"})})]})};function Vs({className:s,...t}){return e.jsx("div",{className:J("animate-pulse rounded-md bg-muted",s),...t})}function KB({refreshTrigger:s=0}){const{toast:t}=Be(),[r,n]=p.useState(!1),{data:a,isLoading:i,isError:o,refetch:l}=ue({queryKey:["/api/hub/connection-status",s],queryFn:async()=>{try{return await new Promise(d=>setTimeout(d,1e3)),{connected:!1,error:"Missing HUB_API_KEY environment variable",lastChecked:new Date().toISOString()}}catch{throw new Error("Failed to check connection status")}},refetchInterval:r?6e4:!1}),c=Ae({mutationFn:async()=>{throw await new Promise(d=>setTimeout(d,1500)),new Error("Connection failed: API key not found")},onSuccess:()=>{t({title:"Connection Test Successful",description:"Successfully connected to Jays Frames Hub",variant:"default"}),l()},onError:d=>{t({title:"Connection Test Failed",description:d.message||"Failed to connect to Jays Frames Hub",variant:"destructive"})}});return e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center",children:[e.jsx(mu,{className:"mr-2 h-5 w-5"}),"Hub Connection Status"]}),e.jsx(ee,{children:"Connection information for Jays Frames Hub integration"})]}),e.jsx(H,{children:i?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Vs,{className:"h-4 w-[250px]"}),e.jsx(Vs,{className:"h-4 w-[200px]"}),e.jsx(Vs,{className:"h-4 w-[150px]"})]}):o?e.jsxs(hs,{variant:"destructive",children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Connection Error"}),e.jsx(ps,{children:"Failed to check Hub connection status. Please try again."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Connection Status:"}),a!=null&&a.connected?e.jsx(pe,{className:"bg-green-500",children:"Connected"}):e.jsx(pe,{className:"bg-red-500",children:"Disconnected"})]}),a!=null&&a.connected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Hub Name:"}),e.jsx("span",{children:a.hubName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"API Version:"}),e.jsx("span",{children:a.apiVersion})]})]}):e.jsxs(hs,{variant:"destructive",className:"mt-4",children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Connection Issue"}),e.jsx(ps,{children:(a==null?void 0:a.error)||"Failed to connect to Jays Frames Hub. Please check your API credentials."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Last Checked:"}),e.jsx("span",{children:a!=null&&a.lastChecked?new Date(a.lastChecked).toLocaleString():"Never"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(br,{id:"auto-sync",checked:r,onCheckedChange:n}),e.jsx(O,{htmlFor:"auto-sync",children:"Auto-refresh connection status"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[e.jsx("h4",{className:"font-medium mb-1",children:"System Integration Info"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"This POS system functions as part of the Hub ecosystem, handling customer orders and inventory management."}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"POS Role:"})," Primary point of sale and custom framing calculation engine"]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Production Link:"})," ",e.jsx(Rt,{to:"/production",className:"text-primary hover:underline",children:"Production Kanban"})," connects directly to Hub's production system"]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Materials Link:"})," ",e.jsx(Rt,{to:"/materials",className:"text-primary hover:underline",children:"Materials Page"})," syncs with Hub's inventory management"]})]})]})]})}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsxs(P,{variant:"outline",onClick:()=>l(),children:[e.jsx(L2,{className:"mr-2 h-4 w-4"}),"Refresh Status"]}),e.jsxs(P,{onClick:()=>c.mutate(),disabled:c.isPending,children:[c.isPending?e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Test Connection"]})]})]})}const GB=s=>{switch(s){case"synced":return"bg-green-500";case"failed":return"bg-red-500";case"not_synced":return"bg-yellow-500";default:return"bg-gray-500"}};function QB(){const s=ss(),{toast:t}=Be(),[r,n]=p.useState(null),[a,i]=p.useState(!1),[o,l]=p.useState("all"),[c,d]=p.useState(0);p.useState(""),p.useState(!1),p.useState("unknown");const[u,h]=p.useState(""),[m,x]=p.useState(""),[g,f]=p.useState(!1),[v,y]=p.useState("not_configured"),{data:j,isLoading:b,isError:k,error:S}=ue({queryKey:["/api/hub/material-orders"],queryFn:()=>le("GET","/api/hub/material-orders").then(A=>A.json())}),D=Ae({mutationFn:A=>le("POST",`/api/hub/material-orders/${A}/sync`).then(F=>F.json()),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/hub/material-orders"]}),t({title:"Order synced with Jays Frames Hub",description:"The material order has been successfully synced with the Hub",variant:"default"})},onError:A=>{t({title:"Sync failed",description:A.message||"Failed to sync order with Jays Frames Hub",variant:"destructive"})}}),T=Ae({mutationFn:()=>le("POST","/api/hub/material-orders/sync-all").then(A=>A.json()),onSuccess:A=>{s.invalidateQueries({queryKey:["/api/hub/material-orders"]}),t({title:"Bulk sync completed",description:`Successfully synced ${A.succeeded} out of ${A.total} orders with the Hub`,variant:"default"})},onError:A=>{t({title:"Bulk sync failed",description:A.message||"Failed to sync orders with Jays Frames Hub",variant:"destructive"})}}),C=Ae({mutationFn:A=>le("GET",`/api/hub/material-orders/${A}/status`).then(F=>F.json()),onSuccess:A=>{s.invalidateQueries({queryKey:["/api/hub/material-orders"]}),A.order&&(n(A.order),i(!0)),t({title:"Status updated",description:"The latest status has been retrieved from Jays Frames Hub",variant:"default"})},onError:A=>{t({title:"Status update failed",description:A.message||"Failed to get order status from Jays Frames Hub",variant:"destructive"})}}),E=async()=>{if(!u||!m){t({title:"Missing Configuration",description:"Please provide both Kanban API URL and API Key",variant:"destructive"});return}f(!0);try{const A=await fetch("/api/integration/configure-kanban",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kanbanApiUrl:u,kanbanApiKey:m})});if(!A.ok)throw new Error("Failed to configure Kanban connection");const F=await A.json();if(F.success)y("connected"),t({title:"Kanban Connected",description:"Successfully connected to Kanban app for order fetching."});else throw new Error(F.error||"Failed to configure Kanban connection")}catch(A){console.error("Error configuring Kanban:",A),y("error"),t({title:"Configuration Failed",description:A.message||"Failed to configure Kanban connection",variant:"destructive"})}finally{f(!1)}},I=async()=>{try{const F=await(await fetch("/api/kanban/external/test-connection",{method:"POST",headers:{"Content-Type":"application/json"}})).json();F.success?(y("connected"),t({title:"Kanban Connection Test",description:`Successfully connected! Found ${F.ordersTest.orderCount} orders.`})):(y("error"),t({title:"Connection Test Failed",description:F.error||"Failed to connect to Kanban API",variant:"destructive"}))}catch(A){y("error"),t({title:"Connection Test Failed",description:A.message||"Failed to test Kanban connection",variant:"destructive"})}},N=(()=>{if(!j)return[];switch(o){case"not_synced":return j.filter(A=>!A.hubOrderId||A.hubSyncStatus==="not_synced");case"synced":return j.filter(A=>A.hubSyncStatus==="synced");case"failed":return j.filter(A=>A.hubSyncStatus==="failed");case"pending":return j.filter(A=>A.status==="pending");default:return j}})();return b?e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading Hub integration data..."})]}):k?e.jsxs(hs,{variant:"destructive",className:"max-w-2xl mx-auto mt-8",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Error loading data"}),e.jsx(ps,{children:S instanceof Error?S.message:"Failed to load material orders"})]}):e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Jays Frames Hub Integration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage material orders integration with Jays Frames Hub. This POS system automatically synchronizes orders, inventory, and statuses with the Hub."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(P,{variant:"outline",onClick:()=>{s.invalidateQueries({queryKey:["/api/hub/material-orders"]}),d(A=>A+1)},disabled:b,children:[e.jsx(nr,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(P,{onClick:()=>T.mutate(),disabled:T.isPending||!(j!=null&&j.some(A=>!A.hubOrderId||A.hubSyncStatus==="not_synced")),children:[T.isPending?e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Sync All Pending Orders"]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(KB,{refreshTrigger:c})}),e.jsxs(Bt,{defaultValue:"all",className:"mb-6",onValueChange:l,children:[e.jsxs(Lt,{className:"grid grid-cols-5 w-full max-w-md mb-2",children:[e.jsx(ve,{value:"all",children:"All Orders"}),e.jsx(ve,{value:"not_synced",children:"Not Synced"}),e.jsx(ve,{value:"synced",children:"Synced"}),e.jsx(ve,{value:"failed",children:"Failed"}),e.jsx(ve,{value:"pending",children:"Pending"})]}),e.jsx(Ee,{value:o,children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{children:["Material Orders ",o!=="all"&&`- ${o.replace("_"," ")}`]}),e.jsxs(ee,{children:[N.length," ",N.length===1?"order":"orders"," found"]})]}),e.jsx(H,{children:N.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No material orders found with the selected filter."}):e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"ID"}),e.jsx(de,{children:"Material"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Hub Status"}),e.jsx(de,{children:"Last Synced"}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(ys,{children:N.map(A=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:A.id}),e.jsx(ie,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:A.materialName}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[A.materialType," - ",A.materialId]})]})}),e.jsx(ie,{children:e.jsx(pe,{variant:"outline",className:`px-2 ${$f(A.status)}`,children:Bf(A.status)})}),e.jsxs(ie,{children:[e.jsx(pe,{variant:"outline",className:`px-2 ${GB(A.hubSyncStatus||"not_synced")}`,children:A.hubSyncStatus?A.hubSyncStatus.replace("_"," "):"Not Synced"}),A.hubOrderId&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hub ID: ",A.hubOrderId]})]}),e.jsx(ie,{children:A.hubLastSyncDate?new Date(A.hubLastSyncDate).toLocaleString():"Never"}),e.jsx(ie,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>C.mutate(A.id),disabled:C.isPending||!A.hubOrderId,title:A.hubOrderId?"Check status from Hub":"Order not yet synced with Hub",children:C.isPending&&C.variables===A.id?e.jsx(Ye,{className:"h-4 w-4 animate-spin"}):e.jsx(mn,{className:"h-4 w-4"})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>D.mutate(A.id),disabled:D.isPending,children:D.isPending&&D.variables===A.id?e.jsx(Ye,{className:"h-4 w-4 animate-spin"}):e.jsx(Mr,{className:"h-4 w-4"})})]})})]},A.id))})]})})]})})]}),e.jsx(Yt,{open:a,onOpenChange:i,children:e.jsxs(Wt,{className:"sm:max-w-md",children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Material Order Status"}),e.jsx(bs,{children:"Current status information from Jays Frames Hub"})]}),r&&e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Order ID:"}),e.jsx("span",{children:r.id})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Material:"}),e.jsx("span",{children:r.materialName})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Hub Order ID:"}),e.jsx("span",{children:r.hubOrderId||"Not synced"})]}),e.jsx(Ot,{className:"my-4"}),e.jsx("div",{className:"mb-4",children:e.jsx(WB,{status:r.status})}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(pe,{variant:"outline",className:`px-2 ${$f(r.status)}`,children:Bf(r.status)})]}),r.expectedArrival&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Expected Arrival:"}),e.jsx("span",{children:new Date(r.expectedArrival).toLocaleDateString()})]}),r.hubTrackingInfo&&e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Tracking:"}),e.jsx("span",{children:r.hubTrackingInfo})]}),r.hubSupplierNotes&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Supplier Notes:"}),e.jsx("p",{className:"mt-1 text-sm bg-muted p-2 rounded",children:r.hubSupplierNotes})]})]})]})}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Nl,{className:"h-5 w-5"}),"Kanban App Integration"]}),e.jsx(ee,{children:"Connect to your external Kanban app to fetch real-world orders"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"kanban-url",children:"Kanban API URL"}),e.jsx(q,{id:"kanban-url",value:u,onChange:A=>h(A.target.value),placeholder:"https://your-kanban-app.replit.app"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"kanban-key",children:"Kanban API Key"}),e.jsx(q,{id:"kanban-key",type:"password",value:m,onChange:A=>x(A.target.value),placeholder:"Enter Kanban API key"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(P,{onClick:E,disabled:g||!u||!m,className:"w-full",children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 mr-2 animate-spin"}),"Configuring..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xi,{className:"h-4 w-4 mr-2"}),"Configure Kanban Connection"]})}),e.jsx(P,{onClick:I,variant:"outline",className:"w-full",children:"Test Connection"})]}),e.jsxs(hs,{children:[e.jsx(vi,{className:"h-4 w-4"}),e.jsx(Qs,{children:"Kanban Integration"}),e.jsx(ps,{children:"When configured, the system will automatically fetch orders from your Kanban app instead of using local storage. This allows you to see real-world production orders in the system."})]})]})]})]})}function $f(s){switch(s){case"pending":return"bg-yellow-500";case"processed":return"bg-blue-500";case"ordered":return"bg-purple-500";case"arrived":return"bg-indigo-500";case"frame_cut":return"bg-teal-500";case"mat_cut":return"bg-cyan-500";case"prepped":return"bg-lime-500";case"completed":return"bg-green-500";case"delayed":return"bg-orange-500";case"canceled":return"bg-red-500";default:return"bg-gray-500"}}function Bf(s){return s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}async function ZB(){try{return await(await le("POST","/api/admin/generate-api-key")).json()}catch(s){throw console.error("Error generating API key:",s),s}}async function YB(){try{return await(await le("GET","/api/admin/integration-status")).json()}catch(s){throw console.error("Error getting integration status:",s),s}}async function XB(){try{return await(await le("GET","/api/admin/integration-docs")).json()}catch(s){throw console.error("Error getting integration documentation:",s),s}}async function JB(s){try{return await(await le("POST","/api/admin/test-webhook",{webhookUrl:s})).json()}catch(t){throw console.error("Error testing webhook:",t),t}}async function e6(){try{return await(await le("GET","/api/webhooks")).json()}catch(s){throw console.error("Error getting webhook endpoints:",s),s}}async function t6(s){try{return await(await le("POST","/api/webhooks",s)).json()}catch(t){throw console.error("Error creating webhook endpoint:",t),t}}async function s6(s){try{return await(await le("DELETE",`/api/webhooks/${s}`)).json()}catch(t){throw console.error("Error deleting webhook endpoint:",t),t}}function r6(s,t){return p.useReducer((r,n)=>t[r][n]??r,s)}var zm="ScrollArea",[xk,nU]=fs(zm),[n6,Fs]=xk(zm),gk=p.forwardRef((s,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=s,[l,c]=p.useState(null),[d,u]=p.useState(null),[h,m]=p.useState(null),[x,g]=p.useState(null),[f,v]=p.useState(null),[y,j]=p.useState(0),[b,k]=p.useState(0),[S,D]=p.useState(!1),[T,C]=p.useState(!1),E=We(t,w=>c(w)),I=On(a);return e.jsx(n6,{scope:r,type:n,dir:I,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:m,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:D,scrollbarY:f,onScrollbarYChange:v,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:j,onCornerHeightChange:k,children:e.jsx(Se.div,{dir:I,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...s.style}})})});gk.displayName=zm;var vk="ScrollAreaViewport",yk=p.forwardRef((s,t)=>{const{__scopeScrollArea:r,children:n,asChild:a,nonce:i,...o}=s,l=Fs(vk,r),c=p.useRef(null),d=We(t,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),e.jsx(Se.div,{"data-radix-scroll-area-viewport":"",...o,asChild:a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...s.style},children:p6({asChild:a,children:n},u=>e.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});yk.displayName=vk;var hr="ScrollAreaScrollbar",Wm=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=Fs(hr,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=s.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?e.jsx(a6,{...n,ref:t,forceMount:r}):a.type==="scroll"?e.jsx(i6,{...n,ref:t,forceMount:r}):a.type==="auto"?e.jsx(jk,{...n,ref:t,forceMount:r}):a.type==="always"?e.jsx(Km,{...n,ref:t}):null});Wm.displayName=hr;var a6=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=Fs(hr,s.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(ds,{present:r||i,children:e.jsx(jk,{"data-state":i?"visible":"hidden",...n,ref:t})})}),i6=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=Fs(hr,s.__scopeScrollArea),i=s.orientation==="horizontal",o=nc(()=>c("SCROLL_END"),100),[l,c]=r6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const m=()=>{const x=d[u];h!==x&&(c("SCROLL"),o()),h=x};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),e.jsx(ds,{present:r||l!=="hidden",children:e.jsx(Km,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:ge(s.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ge(s.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),jk=p.forwardRef((s,t)=>{const r=Fs(hr,s.__scopeScrollArea),{forceMount:n,...a}=s,[i,o]=p.useState(!1),l=s.orientation==="horizontal",c=nc(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Ca(r.viewport,c),Ca(r.content,c),e.jsx(ds,{present:n||i,children:e.jsx(Km,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Km=p.forwardRef((s,t)=>{const{orientation:r="vertical",...n}=s,a=Fs(hr,s.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Ck(l.viewport,l.content),u={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,x){return m6(m,o.current,l,x)}return r==="horizontal"?e.jsx(o6,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,x=Vf(m,l,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):r==="vertical"?e.jsx(l6,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,x=Vf(m,l);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),o6=p.forwardRef((s,t)=>{const{sizes:r,onSizesChange:n,...a}=s,i=Fs(hr,s.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=We(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(wk,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":rc(r)+"px",...s.style},onThumbPointerDown:u=>s.onThumbPointerDown(u.x),onDragScroll:u=>s.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+u.deltaX;s.onWheelScroll(m),Tk(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:pl(o.paddingLeft),paddingEnd:pl(o.paddingRight)}})}})}),l6=p.forwardRef((s,t)=>{const{sizes:r,onSizesChange:n,...a}=s,i=Fs(hr,s.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=We(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),e.jsx(wk,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":rc(r)+"px",...s.style},onThumbPointerDown:u=>s.onThumbPointerDown(u.y),onDragScroll:u=>s.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const m=i.viewport.scrollTop+u.deltaY;s.onWheelScroll(m),Tk(m,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:pl(o.paddingTop),paddingEnd:pl(o.paddingBottom)}})}})}),[c6,bk]=xk(hr),wk=p.forwardRef((s,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...m}=s,x=Fs(hr,r),[g,f]=p.useState(null),v=We(t,E=>f(E)),y=p.useRef(null),j=p.useRef(""),b=x.viewport,k=n.content-n.viewport,S=as(u),D=as(c),T=nc(h,10);function C(E){if(y.current){const I=E.clientX-y.current.left,w=E.clientY-y.current.top;d({x:I,y:w})}}return p.useEffect(()=>{const E=I=>{const w=I.target;(g==null?void 0:g.contains(w))&&S(I,k)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[b,g,k,S]),p.useEffect(D,[n,D]),Ca(g,T),Ca(x.content,T),e.jsx(c6,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:as(i),onThumbPointerUp:as(o),onThumbPositionChange:D,onThumbPointerDown:as(l),children:e.jsx(Se.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:ge(s.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),y.current=g.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),C(E))}),onPointerMove:ge(s.onPointerMove,C),onPointerUp:ge(s.onPointerUp,E=>{const I=E.target;I.hasPointerCapture(E.pointerId)&&I.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=j.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),hl="ScrollAreaThumb",Nk=p.forwardRef((s,t)=>{const{forceMount:r,...n}=s,a=bk(hl,s.__scopeScrollArea);return e.jsx(ds,{present:r||a.hasThumb,children:e.jsx(d6,{ref:t,...n})})}),d6=p.forwardRef((s,t)=>{const{__scopeScrollArea:r,style:n,...a}=s,i=Fs(hl,r),o=bk(hl,r),{onThumbPositionChange:l}=o,c=We(t,h=>o.onThumbChange(h)),d=p.useRef(),u=nc(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(u(),!d.current){const x=h6(h,l);d.current=x,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,u,l]),e.jsx(Se.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:ge(s.onPointerDownCapture,h=>{const x=h.target.getBoundingClientRect(),g=h.clientX-x.left,f=h.clientY-x.top;o.onThumbPointerDown({x:g,y:f})}),onPointerUp:ge(s.onPointerUp,o.onThumbPointerUp)})});Nk.displayName=hl;var Gm="ScrollAreaCorner",Sk=p.forwardRef((s,t)=>{const r=Fs(Gm,s.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(u6,{...s,ref:t}):null});Sk.displayName=Gm;var u6=p.forwardRef((s,t)=>{const{__scopeScrollArea:r,...n}=s,a=Fs(Gm,r),[i,o]=p.useState(0),[l,c]=p.useState(0),d=!!(i&&l);return Ca(a.scrollbarX,()=>{var h;const u=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ca(a.scrollbarY,()=>{var h;const u=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?e.jsx(Se.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function pl(s){return s?parseInt(s,10):0}function Ck(s,t){const r=s/t;return isNaN(r)?0:r}function rc(s){const t=Ck(s.viewport,s.content),r=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-r)*t;return Math.max(n,18)}function m6(s,t,r,n="ltr"){const a=rc(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,h=n==="ltr"?[0,u]:[u*-1,0];return kk([c,d],h)(s)}function Vf(s,t,r="ltr"){const n=rc(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=ji(s,c);return kk([0,o],[0,l])(d)}function kk(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(s[1]-s[0]);return t[0]+n*(r-s[0])}}function Tk(s,t){return s>0&&s<t}var h6=(s,t=()=>{})=>{let r={left:s.scrollLeft,top:s.scrollTop},n=0;return function a(){const i={left:s.scrollLeft,top:s.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function nc(s,t){const r=as(s),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ca(s,t){const r=as(t);Ss(()=>{let n=0;if(s){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(s),()=>{window.cancelAnimationFrame(n),a.unobserve(s)}}},[s,r])}function p6(s,t){const{asChild:r,children:n}=s;if(!r)return typeof t=="function"?t(n):t;const a=p.Children.only(n);return p.cloneElement(a,{children:typeof t=="function"?t(a.props.children):t})}var Pk=gk,f6=yk,x6=Sk;const ra=p.forwardRef(({className:s,children:t,...r},n)=>e.jsxs(Pk,{ref:n,className:J("relative overflow-hidden",s),...r,children:[e.jsx(f6,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Ek,{}),e.jsx(x6,{})]}));ra.displayName=Pk.displayName;const Ek=p.forwardRef(({className:s,orientation:t="vertical",...r},n)=>e.jsx(Wm,{ref:n,orientation:t,className:J("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(Nk,{className:"relative flex-1 rounded-full bg-border"})}));Ek.displayName=Wm.displayName;function g6(){const s=ss(),{toast:t}=Be(),[r,n]=p.useState(null),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(["order.created"]),[u,h]=p.useState(!1),[m,x]=p.useState("webhooks"),{data:g,isLoading:f}=ue({queryKey:["/api/admin/integration-status"],queryFn:YB}),{data:v,isLoading:y}=ue({queryKey:["/api/webhooks"],queryFn:e6}),{data:j,isLoading:b}=ue({queryKey:["/api/admin/integration-docs"],queryFn:XB}),k=Ae({mutationFn:ZB,onSuccess:w=>{n(w),t({title:"API Key Generated",description:"Your new API key has been created. Make sure to save it securely."})},onError:w=>{t({title:"Error Generating API Key",description:w.message||"Failed to generate API key",variant:"destructive"})}}),S=Ae({mutationFn:w=>JB(w),onSuccess:()=>{t({title:"Webhook Test Success",description:"The webhook endpoint responded successfully."})},onError:w=>{t({title:"Webhook Test Failed",description:w.message||"Failed to test webhook",variant:"destructive"})}}),D=Ae({mutationFn:w=>t6(w),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/webhooks"]}),t({title:"Webhook Created",description:"Your webhook endpoint has been created successfully."}),i(""),l("")},onError:w=>{t({title:"Error Creating Webhook",description:w.message||"Failed to create webhook endpoint",variant:"destructive"})}}),T=Ae({mutationFn:w=>s6(w),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/webhooks"]}),t({title:"Webhook Deleted",description:"The webhook endpoint has been removed."})},onError:w=>{t({title:"Error Deleting Webhook",description:w.message||"Failed to delete webhook endpoint",variant:"destructive"})}});p.useEffect(()=>{g!=null&&g.apiKey&&n(g.apiKey)},[g]);const C=()=>{r&&(navigator.clipboard.writeText(r.key),h(!0),setTimeout(()=>h(!1),2e3))},E=w=>{if(w.preventDefault(),!a||!o){t({title:"Missing Information",description:"Please provide both a name and URL for the webhook.",variant:"destructive"});return}D.mutate({name:o,url:a,events:c})},I=w=>{d(N=>N.includes(w)?N.filter(A=>A!==w):[...N,w])};return e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"API & Webhook Integration"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Configure API access and webhook endpoints to integrate with external systems."}),e.jsxs(Bt,{value:m,onValueChange:x,className:"w-full",children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"webhooks",children:"Webhooks"}),e.jsx(ve,{value:"api-keys",children:"API Keys"}),e.jsx(ve,{value:"documentation",children:"Documentation"})]}),e.jsx(Ee,{value:"webhooks",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Webhook Endpoints"}),e.jsx(ee,{children:"Configure webhook endpoints to receive notifications from Jay's Frames."})]}),e.jsx(H,{children:y?e.jsx("div",{className:"py-4 text-center",children:"Loading webhook endpoints..."}):v&&v.length>0?e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:v.map(w=>e.jsxs(tt,{children:[e.jsxs(ie,{children:[e.jsx("div",{className:"font-medium",children:w.name}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:w.url})]}),e.jsx(ie,{children:e.jsx(pe,{variant:w.active?"default":"secondary",children:w.active?"Active":"Inactive"})}),e.jsxs(ie,{className:"space-x-2",children:[e.jsx(P,{size:"sm",variant:"outline",onClick:()=>S.mutate(w.url),children:"Test"}),e.jsx(P,{size:"sm",variant:"destructive",onClick:()=>T.mutate(w.id),children:e.jsx(pu,{className:"h-4 w-4"})})]})]},w.id))})]}):e.jsx("div",{className:"py-4 text-center",children:"No webhook endpoints configured. Add one below."})})]}),e.jsx(V,{children:e.jsxs("form",{onSubmit:E,children:[e.jsxs(K,{children:[e.jsx(G,{children:"Add New Webhook"}),e.jsx(ee,{children:"Create a new webhook endpoint to receive event notifications."})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"webhookName",children:"Webhook Name"}),e.jsx(q,{id:"webhookName",placeholder:"My Application Webhook",value:o,onChange:w=>l(w.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"webhookUrl",children:"Webhook URL"}),e.jsx(q,{id:"webhookUrl",placeholder:"https://example.com/webhook",value:a,onChange:w=>i(w.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Events to Subscribe"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["order.created","order.updated","order.completed","payment.received","material.ordered","material.arrived"].map(w=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(br,{id:`event-${w}`,checked:c.includes(w),onCheckedChange:()=>I(w)}),e.jsx(O,{htmlFor:`event-${w}`,children:w})]},w))})]})]}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",type:"button",onClick:()=>S.mutate(a),children:"Test Endpoint"}),e.jsxs(P,{type:"submit",children:[e.jsx(Tn,{className:"mr-2 h-4 w-4"}),"Add Webhook"]})]})]})})]})}),e.jsx(Ee,{value:"api-keys",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"API Keys"}),e.jsx(ee,{children:"Generate and manage API keys for external applications to authenticate with Jay's Frames API."})]}),e.jsx(H,{className:"space-y-4",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"apiKey",children:"Your API Key"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(q,{id:"apiKey",value:r.key,readOnly:!0,type:"password"}),e.jsx(P,{variant:"outline",onClick:C,children:u?e.jsx(ls,{className:"h-4 w-4"}):e.jsx(lj,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(r.createdAt).toLocaleString(),r.lastUsed&&`  Last used: ${new Date(r.lastUsed).toLocaleString()}`]})]}),e.jsx("div",{className:"pt-2 pb-2",children:e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx($t,{className:"h-4 w-4 inline mr-1"}),"For security reasons, the API key is only shown once when generated. Store it securely."]})})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500 mb-4",children:"No API key has been generated yet."})})}),e.jsx(ht,{children:e.jsx(P,{onClick:()=>k.mutate(),className:"w-full",children:r?"Regenerate API Key":"Generate New API Key"})})]})}),e.jsx(Ee,{value:"documentation",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"API Documentation"}),e.jsx(ee,{children:"Reference documentation for the Jay's Frames API and webhook events."})]}),e.jsx(H,{children:b?e.jsx("div",{className:"py-4 text-center",children:"Loading documentation..."}):e.jsx(ra,{className:"h-[500px] w-full rounded-md border p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Authentication"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All API requests require authentication using an API key in the request header."}),e.jsx("div",{className:"mt-2 p-3 bg-gray-100 rounded-md",children:e.jsx("code",{className:"text-sm",children:"Authorization: Bearer YOUR_API_KEY"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Endpoints"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Orders"}),e.jsxs("div",{className:"mt-1 space-y-2",children:[e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"GET /api/integration/orders"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Get all orders with QR codes"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"GET /api/integration/orders/:id"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Get order information with QR code"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"PATCH /api/integration/orders/:id/status"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Update order status from external system"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Webhooks"}),e.jsx("div",{className:"mt-1 space-y-2",children:e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"POST /api/integration/webhook"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Receive webhook notifications from external systems"})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Webhook Events"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"order.created"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when a new order is created"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"order.updated"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when an order is updated"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"order.completed"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when an order is marked as completed"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"payment.received"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when a payment is received"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"material.ordered"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when materials are ordered"})]}),e.jsxs("div",{className:"p-2 bg-gray-100 rounded-md",children:[e.jsx("div",{className:"font-medium",children:"material.arrived"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Triggered when ordered materials arrive"})]})]})]})]})})}),e.jsx(ht,{children:e.jsx("a",{href:"https://docs.jaysframes.com/api",target:"_blank",rel:"noopener noreferrer",className:"w-full",children:e.jsxs(P,{variant:"outline",className:"w-full",children:[e.jsx(uj,{className:"mr-2 h-4 w-4"}),"View Full API Documentation"]})})})]})})]})]})}const v6=()=>{const[s,t]=p.useState(!1),r=()=>{t(!s)};return e.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[e.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px",color:"#333"},children:"Mat Options Test Page"}),e.jsxs("div",{style:{backgroundColor:"#f0f4ff",padding:"20px",borderRadius:"8px",border:"2px solid #3b82f6",marginBottom:"20px"},children:[e.jsx("h2",{style:{fontSize:"18px",marginBottom:"15px"},children:"Bottom Mat Option"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("input",{type:"checkbox",id:"bottomMatToggle",checked:s,onChange:r,style:{width:"24px",height:"24px",marginRight:"12px",cursor:"pointer"}}),e.jsxs("label",{htmlFor:"bottomMatToggle",style:{fontWeight:"bold",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center"},children:[e.jsx(mj,{style:{marginRight:"8px"}}),"Add Bottom Mat (Double Matting)"]})]}),s&&e.jsx("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"white",borderRadius:"6px"},children:e.jsx("p",{children:"Bottom mat settings would appear here"})})]}),e.jsx("div",{children:e.jsxs("p",{children:["Status: Bottom mat is ",s?"enabled":"disabled"]})})]})},Xs="/api/inventory",y6=async()=>(await le("GET",`${Xs}/items`)).json(),j6=async s=>(await le("POST",`${Xs}/items`,s)).json(),b6=async(s,t)=>(await le("PATCH",`${Xs}/items/${s}`,t)).json(),w6=async s=>{await le("DELETE",`${Xs}/items/${s}`)},N6=async()=>(await le("GET",`${Xs}/items/low-stock`)).json(),S6=async()=>(await le("GET",`${Xs}/suppliers`)).json(),C6=async s=>(await le("GET",`${Xs}/suppliers/${s}`)).json(),k6=async()=>(await le("GET",`${Xs}/locations`)).json(),T6=async s=>(await le("GET",`${Xs}/locations/${s}`)).json(),P6=async()=>(await le("GET",`${Xs}/metrics`)).json(),E6=async(s="month")=>(await le("GET",`${Xs}/activity?timeframe=${s}`)).json(),Bi="/api/inventory/items",Dk="/api/inventory/suppliers",Ak="/api/inventory/locations",D6="/api/inventory/items/low-stock",A6="/api/inventory/metrics",I6="/api/inventory/activity",Ik=()=>ue({queryKey:[Bi],queryFn:y6}),_6=()=>{const s=ss();return Ae({mutationFn:t=>j6(t),onSuccess:()=>{s.invalidateQueries({queryKey:[Bi]}),js({title:"Item created",description:"Inventory item has been successfully created."})},onError:t=>{js({title:"Error creating item",description:t.message,variant:"destructive"})}})},R6=s=>{const t=ss();return Ae({mutationFn:r=>b6(s,r),onSuccess:()=>{t.invalidateQueries({queryKey:[Bi,s]}),t.invalidateQueries({queryKey:[Bi]}),js({title:"Item updated",description:"Inventory item has been successfully updated."})},onError:r=>{js({title:"Error updating item",description:r.message,variant:"destructive"})}})},_k=()=>{const s=ss();return Ae({mutationFn:t=>w6(t),onSuccess:()=>{s.invalidateQueries({queryKey:[Bi]}),js({title:"Item deleted",description:"Inventory item has been successfully deleted."})},onError:t=>{js({title:"Error deleting item",description:t.message,variant:"destructive"})}})},Rk=()=>ue({queryKey:[D6],queryFn:N6}),Ok=()=>ue({queryKey:[Dk],queryFn:S6}),O6=s=>ue({queryKey:[Dk,s],queryFn:()=>C6(s),enabled:!!s}),Mk=()=>ue({queryKey:[Ak],queryFn:k6}),M6=s=>ue({queryKey:[Ak,s],queryFn:()=>T6(s),enabled:!!s}),F6=()=>ue({queryKey:[A6],queryFn:P6}),L6=(s="month")=>ue({queryKey:[I6,s],queryFn:()=>E6(s)});var Fk="AlertDialog",[$6,aU]=fs(Fk,[Xy]),Pr=Xy(),Lk=s=>{const{__scopeAlertDialog:t,...r}=s,n=Pr(t);return e.jsx(lu,{...n,...r,modal:!0})};Lk.displayName=Fk;var B6="AlertDialogTrigger",$k=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,a=Pr(r);return e.jsx(cu,{...a,...n,ref:t})});$k.displayName=B6;var V6="AlertDialogPortal",Bk=s=>{const{__scopeAlertDialog:t,...r}=s,n=Pr(t);return e.jsx(ou,{...n,...r})};Bk.displayName=V6;var U6="AlertDialogOverlay",Vk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,a=Pr(r);return e.jsx(Ui,{...a,...n,ref:t})});Vk.displayName=U6;var ua="AlertDialogContent",[H6,q6]=$6(ua),Uk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,children:n,...a}=s,i=Pr(r),o=p.useRef(null),l=We(t,o),c=p.useRef(null);return e.jsx(d2,{contentName:ua,titleName:Hk,docsSlug:"alert-dialog",children:e.jsx(H6,{scope:r,cancelRef:c,children:e.jsxs(Hi,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ge(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(Jy,{children:n}),e.jsx(W6,{contentRef:o})]})})})});Uk.displayName=ua;var Hk="AlertDialogTitle",qk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,a=Pr(r);return e.jsx(qi,{...a,...n,ref:t})});qk.displayName=Hk;var zk="AlertDialogDescription",Wk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,a=Pr(r);return e.jsx(zi,{...a,...n,ref:t})});Wk.displayName=zk;var z6="AlertDialogAction",Kk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,a=Pr(r);return e.jsx(Pa,{...a,...n,ref:t})});Kk.displayName=z6;var Gk="AlertDialogCancel",Qk=p.forwardRef((s,t)=>{const{__scopeAlertDialog:r,...n}=s,{cancelRef:a}=q6(Gk,r),i=Pr(r),o=We(t,a);return e.jsx(Pa,{...i,...n,ref:o})});Qk.displayName=Gk;var W6=({contentRef:s})=>{const t=`\`${ua}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ua}\` by passing a \`${zk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ua}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=s.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},K6=Lk,G6=$k,Q6=Bk,Zk=Vk,Yk=Uk,Xk=Kk,Jk=Qk,eT=qk,tT=Wk;const na=K6,aa=G6,Z6=Q6,sT=p.forwardRef(({className:s,...t},r)=>e.jsx(Zk,{className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));sT.displayName=Zk.displayName;const xn=p.forwardRef(({className:s,...t},r)=>e.jsxs(Z6,{children:[e.jsx(sT,{}),e.jsx(Yk,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));xn.displayName=Yk.displayName;const gn=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",s),...t});gn.displayName="AlertDialogHeader";const vn=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});vn.displayName="AlertDialogFooter";const yn=p.forwardRef(({className:s,...t},r)=>e.jsx(eT,{ref:r,className:J("text-lg font-semibold",s),...t}));yn.displayName=eT.displayName;const jn=p.forwardRef(({className:s,...t},r)=>e.jsx(tT,{ref:r,className:J("text-sm text-muted-foreground",s),...t}));jn.displayName=tT.displayName;const bn=p.forwardRef(({className:s,...t},r)=>e.jsx(Xk,{ref:r,className:J(yu(),s),...t}));bn.displayName=Xk.displayName;const wn=p.forwardRef(({className:s,...t},r)=>e.jsx(Jk,{ref:r,className:J(yu({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));wn.displayName=Jk.displayName;function Y6({onAdd:s,onEdit:t,onView:r}){const[n,a]=p.useState(""),[i,o]=p.useState(1),[l,c]=p.useState(10),[d,u]=p.useState("name"),[h,m]=p.useState("asc"),[x,g]=p.useState(null),{data:f=[],isLoading:v,error:y}=Ik(),j=_k(),b=Pe.useMemo(()=>{const w=new Set;return f.forEach(N=>{N.categoryId&&w.add(N.categoryId.toString())}),Array.from(w)},[f]),k=Pe.useMemo(()=>f.filter(w=>{var F;const N=n===""||w.name.toLowerCase().includes(n.toLowerCase())||w.sku.toLowerCase().includes(n.toLowerCase())||w.description&&w.description.toLowerCase().includes(n.toLowerCase()),A=x===null||((F=w.categoryId)==null?void 0:F.toString())===x;return N&&A}),[f,n,x]),S=Pe.useMemo(()=>[...k].sort((w,N)=>{const A=w[d],F=N[d];return A==null?h==="asc"?-1:1:F==null?h==="asc"?1:-1:typeof A=="string"&&typeof F=="string"?h==="asc"?A.localeCompare(F):F.localeCompare(A):A<F?h==="asc"?-1:1:A>F?h==="asc"?1:-1:0}),[k,d,h]),D=Math.ceil(S.length/l),T=S.slice((i-1)*l,i*l),C=w=>{w===d?m(h==="asc"?"desc":"asc"):(u(w),m("asc"))},E=w=>{j.mutate(w)},I=()=>{a(""),g(null),u("name"),m("asc"),o(1)};return v?e.jsx("div",{className:"flex justify-center p-8",children:"Loading inventory items..."}):y?e.jsxs("div",{className:"text-destructive p-8",children:["Error loading inventory items: ",y.message]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search by name, SKU, or description...",value:n,onChange:w=>a(w.target.value),className:"pl-8"}),n&&e.jsx(P,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>a(""),children:e.jsx(Mn,{className:"h-4 w-4"})})]}),e.jsxs(qe,{value:x||"all",onValueChange:w=>g(w==="all"?null:w),children:[e.jsx(Ve,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"All Categories"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Categories"}),b.map(w=>e.jsxs(te,{value:w,children:["Category ",w]},w))]})]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:I,children:[e.jsx(rj,{className:"h-4 w-4 mr-1"}),"Reset"]})]}),e.jsxs(P,{onClick:s,children:[e.jsx(Tn,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{className:"w-[100px]",children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>C("sku"),children:["SKU",e.jsx(qa,{className:"ml-1 h-4 w-4"})]})}),e.jsx(de,{children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>C("name"),children:["Name",e.jsx(qa,{className:"ml-1 h-4 w-4"})]})}),e.jsx(de,{children:"Category"}),e.jsx(de,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end cursor-pointer",onClick:()=>C("costPerUnit"),children:["Cost",e.jsx(qa,{className:"ml-1 h-4 w-4"})]})}),e.jsx(de,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end cursor-pointer",onClick:()=>C("retailPrice"),children:["Retail Price",e.jsx(qa,{className:"ml-1 h-4 w-4"})]})}),e.jsx(de,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center cursor-pointer",onClick:()=>C("minimumStockLevel"),children:["Stock Level",e.jsx(qa,{className:"ml-1 h-4 w-4"})]})}),e.jsx(de,{className:"text-right",children:"Actions"})]})}),e.jsx(ys,{children:T.length===0?e.jsx(tt,{children:e.jsx(ie,{colSpan:7,className:"text-center py-8",children:"No inventory items found."})}):T.map(w=>e.jsxs(tt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>r(w),children:[e.jsx(ie,{className:"font-medium",children:w.sku}),e.jsx(ie,{children:w.name}),e.jsx(ie,{children:w.categoryId||"-"}),e.jsxs(ie,{className:"text-right",children:["$",parseFloat(w.costPerUnit.toString()).toFixed(2)]}),e.jsx(ie,{className:"text-right",children:w.retailPrice?`$${parseFloat(w.retailPrice.toString()).toFixed(2)}`:"-"}),e.jsx(ie,{className:"text-center",children:e.jsx(pe,{variant:J6(w),children:X6(w)})}),e.jsx(ie,{className:"text-right",children:e.jsxs(Gn,{children:[e.jsx(Qn,{asChild:!0,onClick:N=>N.stopPropagation(),children:e.jsxs(P,{variant:"ghost",size:"sm",children:[e.jsx($2,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Actions"})]})}),e.jsxs(dn,{align:"end",children:[e.jsx(UC,{children:"Actions"}),e.jsx(Rs,{onClick:N=>{N.stopPropagation(),r(w)},children:"View details"}),e.jsxs(Rs,{onClick:N=>{N.stopPropagation(),t(w)},children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(HC,{}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsxs(Rs,{className:"text-destructive focus:text-destructive",onClick:N=>N.stopPropagation(),children:[e.jsx(pu,{className:"h-4 w-4 mr-2"}),"Delete"]})}),e.jsxs(xn,{onClick:N=>N.stopPropagation(),children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Are you absolutely sure?"}),e.jsxs(jn,{children:['This action cannot be undone. This will permanently delete the inventory item "',w.name,'" and remove its data from the server.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{className:"bg-destructive hover:bg-destructive/90",onClick:()=>E(w.id),children:"Delete"})]})]})]})]})]})})]},w.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",T.length," of ",k.length," items"]}),e.jsxs(qe,{value:l.toString(),onValueChange:w=>{c(parseInt(w,10)),o(1)},children:[e.jsx(Ve,{className:"w-[100px]",children:e.jsx(ze,{placeholder:"10 items"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"5",children:"5 items"}),e.jsx(te,{value:"10",children:"10 items"}),e.jsx(te,{value:"20",children:"20 items"}),e.jsx(te,{value:"50",children:"50 items"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(w=>Math.max(1,w-1)),disabled:i===1,children:[e.jsx(hj,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous page"})]}),e.jsxs("p",{className:"text-sm font-medium",children:["Page ",i," of ",D||1]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>o(w=>Math.min(D,w+1)),disabled:i===D||D===0,children:[e.jsx(Cl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next page"})]})]})]})]})}function X6(s){return`${s.minimumStockLevel.toString()}`}function J6(s){const t=parseFloat(s.minimumStockLevel.toString()),r=parseFloat(s.reorderLevel.toString());return t<=r*.5?"destructive":t<=r?"secondary":"default"}var eV=function(s,t){for(var r={};s.length;){var n=s[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return s.push(h)})}),t){var c=r[o].types,d=c&&c[n.code];r[o]=tP(o,t,r,a,d?[].concat(d,n.message):n.message)}s.shift()}return r},rT=function(s,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(s[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(d){return i.shouldUseNativeValidation&&J2({},i),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:eP(eV(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const nT=rP,aT=p.createContext({}),dt=({...s})=>e.jsx(aT.Provider,{value:{name:s.name},children:e.jsx(nP,{...s})}),ac=()=>{const s=p.useContext(aT),t=p.useContext(iT),{getFieldState:r,formState:n}=sP(),a=r(s.name,n);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:s.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},iT=p.createContext({}),at=p.forwardRef(({className:s,...t},r)=>{const n=p.useId();return e.jsx(iT.Provider,{value:{id:n},children:e.jsx("div",{ref:r,className:J("space-y-2",s),...t})})});at.displayName="FormItem";const it=p.forwardRef(({className:s,...t},r)=>{const{error:n,formItemId:a}=ac();return e.jsx(O,{ref:r,className:J(n&&"text-destructive",s),htmlFor:a,...t})});it.displayName="FormLabel";const ot=p.forwardRef(({...s},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=ac();return e.jsx(gl,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...s})});ot.displayName="FormControl";const tr=p.forwardRef(({className:s,...t},r)=>{const{formDescriptionId:n}=ac();return e.jsx("p",{ref:r,id:n,className:J("text-sm text-muted-foreground",s),...t})});tr.displayName="FormDescription";const pt=p.forwardRef(({className:s,children:t,...r},n)=>{const{error:a,formMessageId:i}=ac(),o=a?String(a==null?void 0:a.message):t;return o?e.jsx("p",{ref:n,id:i,className:J("text-sm font-medium text-destructive",s),...r,children:o}):null});pt.displayName="FormMessage";const tV=Ge.object({sku:Ge.string().min(1,"SKU is required"),name:Ge.string().min(1,"Name is required"),description:Ge.string().optional(),categoryId:Ge.number().optional().nullable(),supplierId:Ge.number().optional().nullable(),supplierSku:Ge.string().optional(),unitOfMeasure:Ge.enum(["each","inch","foot","united_inch","square_inch","sheet","roll","pound","liter","gallon"]),costPerUnit:Ge.string().min(1,"Cost per unit is required"),retailPrice:Ge.string().optional(),minimumStockLevel:Ge.string().min(1,"Minimum stock level is required"),reorderLevel:Ge.string().min(1,"Reorder level is required"),reorderQuantity:Ge.string().optional(),locationId:Ge.number().optional().nullable(),barcode:Ge.string().optional(),notes:Ge.string().optional(),tags:Ge.array(Ge.string()).optional(),isActive:Ge.boolean().default(!0),autoBatchReorder:Ge.boolean().default(!1),materialType:Ge.string().optional(),materialId:Ge.string().optional()});function sV({isOpen:s,onClose:t,onSubmit:r,editItem:n,categories:a,isSubmitting:i}){var u,h;const{data:o=[]}=Ok(),{data:l=[]}=Mk(),c=gj({resolver:rT(tV),defaultValues:n?{...n,costPerUnit:n.costPerUnit.toString(),retailPrice:((u=n.retailPrice)==null?void 0:u.toString())||"",minimumStockLevel:n.minimumStockLevel.toString(),reorderLevel:n.reorderLevel.toString(),reorderQuantity:((h=n.reorderQuantity)==null?void 0:h.toString())||"",tags:n.tags||[]}:{sku:"",name:"",description:"",categoryId:null,supplierId:null,supplierSku:"",unitOfMeasure:"each",costPerUnit:"0",retailPrice:"",minimumStockLevel:"0",reorderLevel:"5",reorderQuantity:"10",locationId:null,barcode:"",notes:"",tags:[],isActive:!0,autoBatchReorder:!1,materialType:"",materialId:""}}),d=m=>{const x={...m,costPerUnit:parseFloat(m.costPerUnit),retailPrice:m.retailPrice?parseFloat(m.retailPrice):null,minimumStockLevel:parseFloat(m.minimumStockLevel),reorderLevel:parseFloat(m.reorderLevel),reorderQuantity:m.reorderQuantity?parseFloat(m.reorderQuantity):null};r(x)};return e.jsx(Yt,{open:s,onOpenChange:m=>!m&&t(),children:e.jsxs(Wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto text-foreground bg-background light-form-text",children:[e.jsxs(Xt,{children:[e.jsx(Jt,{className:"text-foreground",children:n?"Edit Inventory Item":"Add New Inventory Item"}),e.jsx(bs,{className:"text-muted-foreground",children:n?"Update the details of this inventory item.":"Fill in the details for the new inventory item."})]}),e.jsx(nT,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4 py-2 text-foreground form-labels",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(dt,{control:c.control,name:"sku",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"SKU*"}),e.jsx(ot,{children:e.jsx(q,{placeholder:"Enter SKU",...m})}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"name",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Name*"}),e.jsx(ot,{children:e.jsx(q,{placeholder:"Enter name",...m})}),e.jsx(pt,{})]})})]}),e.jsx(dt,{control:c.control,name:"description",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Description"}),e.jsx(ot,{children:e.jsx(cr,{placeholder:"Enter description",...m,value:m.value||""})}),e.jsx(pt,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(dt,{control:c.control,name:"categoryId",render:({field:m})=>{var x;return e.jsxs(at,{children:[e.jsx(it,{children:"Category"}),e.jsxs(qe,{onValueChange:g=>m.onChange(g==="none"?null:g?parseInt(g,10):null),value:((x=m.value)==null?void 0:x.toString())||"none",children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select category"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"None"}),a.map(g=>e.jsx(te,{value:g.id.toString(),children:g.name},g.id))]})]}),e.jsx(pt,{})]})}}),e.jsx(dt,{control:c.control,name:"unitOfMeasure",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Unit of Measure*"}),e.jsxs(qe,{onValueChange:m.onChange,value:m.value,children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select unit"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"each",children:"Each"}),e.jsx(te,{value:"inch",children:"Inch"}),e.jsx(te,{value:"foot",children:"Foot"}),e.jsx(te,{value:"united_inch",children:"United Inch"}),e.jsx(te,{value:"square_inch",children:"Square Inch"}),e.jsx(te,{value:"sheet",children:"Sheet"}),e.jsx(te,{value:"roll",children:"Roll"}),e.jsx(te,{value:"pound",children:"Pound"}),e.jsx(te,{value:"liter",children:"Liter"}),e.jsx(te,{value:"gallon",children:"Gallon"})]})]}),e.jsx(pt,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(dt,{control:c.control,name:"supplierId",render:({field:m})=>{var x;return e.jsxs(at,{children:[e.jsx(it,{children:"Supplier"}),e.jsxs(qe,{onValueChange:g=>m.onChange(g==="none"?null:g?parseInt(g,10):null),value:((x=m.value)==null?void 0:x.toString())||"none",children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select supplier"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"None"}),o.map(g=>e.jsx(te,{value:g.id.toString(),children:g.name},g.id))]})]}),e.jsx(pt,{})]})}}),e.jsx(dt,{control:c.control,name:"supplierSku",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Supplier SKU"}),e.jsx(ot,{children:e.jsx(q,{placeholder:"Enter supplier SKU",...m,value:m.value||""})}),e.jsx(pt,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(dt,{control:c.control,name:"costPerUnit",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Cost Per Unit*"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"0.01",placeholder:"0.00",...m})}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"retailPrice",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Retail Price"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"0.01",placeholder:"0.00",...m,value:m.value||""})}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"barcode",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Barcode"}),e.jsx(ot,{children:e.jsx(q,{placeholder:"Enter barcode",...m,value:m.value||""})}),e.jsx(pt,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(dt,{control:c.control,name:"minimumStockLevel",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Minimum Stock*"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"1",placeholder:"0",...m})}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"reorderLevel",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Reorder Level*"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"1",placeholder:"5",...m})}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"reorderQuantity",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Reorder Quantity"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"1",placeholder:"10",...m,value:m.value||""})}),e.jsx(pt,{})]})})]}),e.jsx(dt,{control:c.control,name:"locationId",render:({field:m})=>{var x;return e.jsxs(at,{children:[e.jsx(it,{children:"Storage Location"}),e.jsxs(qe,{onValueChange:g=>m.onChange(g==="none"?null:g?parseInt(g,10):null),value:((x=m.value)==null?void 0:x.toString())||"none",children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select location"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"None"}),l.map(g=>e.jsx(te,{value:g.id.toString(),children:g.name},g.id))]})]}),e.jsx(pt,{})]})}}),e.jsx(dt,{control:c.control,name:"notes",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Notes"}),e.jsx(ot,{children:e.jsx(cr,{placeholder:"Enter notes",...m,value:m.value||""})}),e.jsx(pt,{})]})}),c.watch("materialType")&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(dt,{control:c.control,name:"materialType",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Material Type"}),e.jsxs(qe,{onValueChange:x=>m.onChange(x==="none"?null:x),value:m.value||"none",children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select material type"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"None"}),e.jsx(te,{value:"frame",children:"Frame"}),e.jsx(te,{value:"matboard",children:"Matboard"}),e.jsx(te,{value:"glass",children:"Glass"}),e.jsx(te,{value:"backing_board",children:"Backing Board"}),e.jsx(te,{value:"hardware",children:"Hardware"}),e.jsx(te,{value:"specialty_materials",children:"Specialty Materials"})]})]}),e.jsx(pt,{})]})}),e.jsx(dt,{control:c.control,name:"materialId",render:({field:m})=>e.jsxs(at,{children:[e.jsx(it,{children:"Material ID"}),e.jsx(ot,{children:e.jsx(q,{placeholder:"Enter material ID",...m,value:m.value||""})}),e.jsx(pt,{})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(dt,{control:c.control,name:"isActive",render:({field:m})=>e.jsxs(at,{className:"flex flex-row items-center space-x-2 space-y-0",children:[e.jsx(ot,{children:e.jsx(os,{checked:m.value,onCheckedChange:m.onChange})}),e.jsx(it,{className:"font-normal",children:"Active"})]})}),e.jsx(dt,{control:c.control,name:"autoBatchReorder",render:({field:m})=>e.jsxs(at,{className:"flex flex-row items-center space-x-2 space-y-0",children:[e.jsx(ot,{children:e.jsx(os,{checked:m.value,onCheckedChange:m.onChange})}),e.jsx(it,{className:"font-normal",children:"Add to batch reorders"})]})})]}),e.jsxs(En,{children:[e.jsx(P,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsxs(P,{type:"submit",disabled:i,children:[i&&e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Update":"Create"]})]})]})})]})})}function rV({item:s,isOpen:t,onClose:r,onEdit:n,onDelete:a}){const{data:i}=O6(s.supplierId||0),{data:o}=M6(s.locationId||0);return e.jsx(Yt,{open:t,onOpenChange:l=>!l&&r(),children:e.jsxs(Wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Xt,{children:[e.jsxs(Jt,{className:"flex items-center",children:[e.jsx(Gs,{className:"h-5 w-5 mr-2"}),s.name]}),e.jsx(bs,{children:"Item details and inventory information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"SKU:"}),e.jsx("span",{className:"text-sm ml-2",children:s.sku})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Status:"}),e.jsx(pe,{className:"ml-2",variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})]}),s.barcode&&e.jsxs("div",{className:"col-span-2 flex items-center",children:[e.jsx(B2,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Barcode:"}),e.jsx("span",{className:"text-sm ml-2",children:s.barcode})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Description:"}),e.jsx("p",{className:"text-sm mt-1",children:s.description||"No description provided."})]})]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Pricing Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(kn,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Cost Per Unit:"}),e.jsxs("span",{className:"text-sm ml-2",children:["$",parseFloat(s.costPerUnit.toString()).toFixed(2)]})]}),s.retailPrice&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(kn,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Retail Price:"}),e.jsxs("span",{className:"text-sm ml-2",children:["$",parseFloat(s.retailPrice.toString()).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Unit of Measure:"}),e.jsx("span",{className:"text-sm ml-2",children:nV(s.unitOfMeasure)})]}),s.retailPrice&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Margin:"}),e.jsxs("span",{className:"text-sm ml-2",children:[aV(s.costPerUnit.toString(),s.retailPrice.toString()),"%"]})]})]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Stock Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Minimum Stock Level:"}),e.jsx("span",{className:"text-sm ml-2",children:s.minimumStockLevel.toString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Reorder Level:"}),e.jsx("span",{className:"text-sm ml-2",children:s.reorderLevel.toString()})]}),s.reorderQuantity&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Reorder Quantity:"}),e.jsx("span",{className:"text-sm ml-2",children:s.reorderQuantity.toString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Auto Batch Reorder:"}),e.jsx("span",{className:"text-sm ml-2",children:s.autoBatchReorder?"Yes":"No"})]})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Supplier Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Supplier:"}),e.jsx("span",{className:"text-sm ml-2",children:i.name})]}),s.supplierSku&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Supplier SKU:"}),e.jsx("span",{className:"text-sm ml-2",children:s.supplierSku})]}),i.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Email:"}),e.jsx("span",{className:"text-sm ml-2",children:i.email})]}),i.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),e.jsx("span",{className:"text-sm ml-2",children:i.phone})]})]})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e.jsx(gi,{className:"h-4 w-4 mr-2"}),"Storage Location"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Location:"}),e.jsx("span",{className:"text-sm ml-2",children:o.name})]}),o.description&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Details:"}),e.jsx("span",{className:"text-sm ml-2",children:o.description})]})]})]})]}),(s.notes||s.tags&&s.tags.length>0||s.lastCountDate)&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Additional Information"}),e.jsxs("div",{className:"space-y-2",children:[s.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Notes:"}),e.jsx("p",{className:"text-sm mt-1",children:s.notes})]}),s.tags&&Array.isArray(s.tags)&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(V2,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Tags:"}),s.tags.map((l,c)=>e.jsx(pe,{variant:"outline",children:l},c))]}),s.lastCountDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ij,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Last Counted:"}),e.jsx("span",{className:"text-sm ml-2",children:new Date(s.lastCountDate).toLocaleDateString()})]})]})]})]})]}),e.jsxs(En,{className:"flex justify-between sm:justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{onClick:n,variant:"outline",size:"sm",children:[e.jsx(Ea,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsxs(P,{variant:"destructive",size:"sm",children:[e.jsx(pu,{className:"h-4 w-4 mr-1"}),"Delete"]})}),e.jsxs(xn,{children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Are you absolutely sure?"}),e.jsxs(jn,{children:['This action cannot be undone. This will permanently delete the inventory item "',s.name,'" and remove its data from the server.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{className:"bg-destructive hover:bg-destructive/90",onClick:a,children:"Delete"})]})]})]})]}),e.jsx(P,{onClick:r,variant:"secondary",children:"Close"})]})]})})}function nV(s){return{each:"Each",inch:"Inch",foot:"Foot",united_inch:"United Inch",square_inch:"Square Inch",sheet:"Sheet",roll:"Roll",pound:"Pound",liter:"Liter",gallon:"Gallon"}[s]||s}function aV(s,t){const r=parseFloat(s),n=parseFloat(t);return!r||!n||r===0?"0":((n-r)/n*100).toFixed(2)}const wo=["#00ADB5","#3A55D9","#FF5722","#7C4DFF","#4CAF50","#FFC107"],iV=()=>{var m,x,g;const[s,t]=p.useState("month"),{data:r,isLoading:n}=F6(),{data:a,isLoading:i}=Rk(),{data:o,isLoading:l}=L6(s),c=r!=null&&r.totalValue&&(r!=null&&r.averageDailyUsage)?Math.round(r.totalValue/(r.averageDailyUsage||1)):0,d=((m=r==null?void 0:r.categoryDistribution)==null?void 0:m.map(f=>({name:f.name,value:f.itemCount})))||[],u=((x=r==null?void 0:r.locationValues)==null?void 0:x.map(f=>({name:f.name,value:f.totalValue})))||[],h=((g=o==null?void 0:o.dailyActivity)==null?void 0:g.map(f=>({date:f.date,received:f.received,consumed:f.consumed,net:f.received-f.consumed})))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(V,{children:e.jsx(H,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Items"}),n?e.jsx(Vs,{className:"h-9 w-20 mt-1"}):e.jsx("h3",{className:"text-3xl font-bold",children:(r==null?void 0:r.totalItems)||0})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(U2,{className:"h-6 w-6 text-primary"})})]})})}),e.jsx(V,{children:e.jsx(H,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Inventory Value"}),n?e.jsx(Vs,{className:"h-9 w-24 mt-1"}):e.jsx("h3",{className:"text-3xl font-bold",children:Pn((r==null?void 0:r.totalValue)||0)})]}),e.jsx("div",{className:"p-2 bg-secondary/10 rounded-full",children:e.jsx(kn,{className:"h-6 w-6 text-secondary"})})]})})}),e.jsx(V,{children:e.jsx(H,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Days of Inventory"}),n?e.jsx(Vs,{className:"h-9 w-16 mt-1"}):e.jsx("h3",{className:"text-3xl font-bold",children:c})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(Vr,{className:"h-6 w-6 text-primary"})})]})})}),e.jsx(V,{children:e.jsx(H,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Low Stock Items"}),i?e.jsx(Vs,{className:"h-9 w-16 mt-1"}):e.jsx("h3",{className:"text-3xl font-bold",children:(a==null?void 0:a.length)||0})]}),e.jsx("div",{className:"p-2 bg-destructive/10 rounded-full",children:e.jsx(Dt,{className:"h-6 w-6 text-destructive"})})]})})})]}),e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Inventory Activity"}),e.jsx(ee,{children:"Tracking receiving and consumption over time"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{variant:s==="week"?"default":"outline",size:"sm",onClick:()=>t("week"),children:"Week"}),e.jsx(P,{variant:s==="month"?"default":"outline",size:"sm",onClick:()=>t("month"),children:"Month"}),e.jsx(P,{variant:s==="quarter"?"default":"outline",size:"sm",onClick:()=>t("quarter"),children:"Quarter"})]})]})}),e.jsx(H,{children:l?e.jsx(Vs,{className:"h-80 w-full"}):e.jsx(_r,{width:"100%",height:320,children:e.jsxs(fj,{data:h,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ai,{strokeDasharray:"3 3"}),e.jsx(ii,{dataKey:"date"}),e.jsx(Zn,{}),e.jsx(Rr,{}),e.jsx(xj,{}),e.jsx(oi,{type:"monotone",dataKey:"received",stroke:"#00ADB5",name:"Received",strokeWidth:2}),e.jsx(oi,{type:"monotone",dataKey:"consumed",stroke:"#FF5722",name:"Consumed",strokeWidth:2}),e.jsx(oi,{type:"monotone",dataKey:"net",stroke:"#3A55D9",name:"Net Change",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Category Distribution"}),e.jsx(ee,{children:"Breakdown of inventory items by category"})]}),e.jsx(H,{children:n?e.jsx(Vs,{className:"h-64 w-full"}):e.jsx(_r,{width:"100%",height:300,children:e.jsxs(Xc,{children:[e.jsx(Jc,{data:d,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:f,percent:v})=>`${f}: ${(v*100).toFixed(0)}%`,children:d.map((f,v)=>e.jsx(Vo,{fill:wo[v%wo.length]},`cell-${v}`))}),e.jsx(Rr,{formatter:f=>[`${f} items`,"Count"]})]})})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Value by Location"}),e.jsx(ee,{children:"Distribution of inventory value across locations"})]}),e.jsx(H,{children:n?e.jsx(Vs,{className:"h-64 w-full"}):e.jsx(_r,{width:"100%",height:300,children:e.jsxs(Zc,{data:u,children:[e.jsx(ai,{strokeDasharray:"3 3"}),e.jsx(ii,{dataKey:"name"}),e.jsx(Zn,{tickFormatter:f=>`$${f}`}),e.jsx(Rr,{formatter:f=>[`$${f}`,"Value"]}),e.jsx(Yc,{dataKey:"value",fill:"#3A55D9",children:u.map((f,v)=>e.jsx(Vo,{fill:wo[v%wo.length]},`cell-${v}`))})]})})})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Low Stock Items"}),e.jsx(ee,{children:"Items that need reordering soon"})]}),e.jsxs(H,{children:[i?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((f,v)=>e.jsx(Vs,{className:"h-12 w-full"},v))}):(a==null?void 0:a.length)===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(No,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"All items have adequate stock levels"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Current Stock"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Minimum Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-muted-foreground",children:"Status"})]})}),e.jsx("tbody",{className:"bg-popover divide-y divide-border",children:a==null?void 0:a.slice(0,5).map(f=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:f.name}),e.jsxs("td",{className:"px-4 py-3 text-sm",children:[f.currentQuantity," ",f.unitOfMeasure]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.minimumStockLevel}),e.jsx("td",{className:"px-4 py-3 text-sm",children:f.reorderLevel}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx(pe,{variant:f.currentQuantity<=f.minimumStockLevel?"destructive":f.currentQuantity<=f.reorderLevel?"secondary":"outline",children:f.currentQuantity<=f.minimumStockLevel?"Critical":f.currentQuantity<=f.reorderLevel?"Reorder Now":"Adequate"})})]},f.id))})]})}),a&&a.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(P,{variant:"link",children:["View all ",a.length," low stock items"]})})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Procurement Status"}),e.jsx(ee,{children:"Status of recent and pending purchase orders"})]}),e.jsx(H,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Gr,{className:"h-12 w-12 mx-auto mb-2"}),e.jsx("p",{children:"Purchase order data will be displayed here"})]})})]})]})};function oV(){const[s,t]=p.useState(!1),[r,n]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState("inventory");Ik();const{data:c,isLoading:d}=Rk(),{data:u,isLoading:h}=Ok(),{data:m,isLoading:x}=Mk(),g=Array.isArray(c)?c:[],f=Array.isArray(u)?u:[],v=Array.isArray(m)?m:[],y=_6(),j=R6((a==null?void 0:a.id)||0),b=_k(),{toast:k}=Be(),S=()=>{i(null),t(!0)},D=N=>{i(N),t(!0)},T=N=>{i(N),n(!0)},C=()=>{t(!1)},E=()=>{n(!1)},I=N=>{a?j.mutate(N,{onSuccess:()=>{t(!1),i(null),k({title:"Item updated",description:"The inventory item has been successfully updated."})}}):y.mutate(N,{onSuccess:()=>{t(!1),k({title:"Item created",description:"The inventory item has been successfully created."})}})},w=()=>{a&&b.mutate(a.id,{onSuccess:()=>{n(!1),i(null),k({title:"Item deleted",description:"The inventory item has been permanently deleted."})}})};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your inventory items, suppliers, and locations"})]}),e.jsxs(P,{onClick:S,children:[e.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Add New Item"]})]}),e.jsxs(Bt,{value:o,onValueChange:l,children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsxs(ve,{value:"dashboard",className:"flex items-center",children:[e.jsx(uu,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),e.jsxs(ve,{value:"inventory",className:"flex items-center",children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Inventory Items"]}),e.jsxs(ve,{value:"low-stock",className:"flex items-center",children:[e.jsx($t,{className:"h-4 w-4 mr-2"}),"Low Stock (",g.length,")"]}),e.jsxs(ve,{value:"suppliers",className:"flex items-center",children:[e.jsx(Gr,{className:"h-4 w-4 mr-2"}),"Suppliers (",f.length,")"]}),e.jsxs(ve,{value:"locations",className:"flex items-center",children:[e.jsx(gi,{className:"h-4 w-4 mr-2"}),"Storage Locations (",v.length,")"]})]}),e.jsx(Ee,{value:"dashboard",children:e.jsx(iV,{})}),e.jsx(Ee,{value:"inventory",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Inventory Items"}),e.jsx(ee,{children:"View and manage all inventory items in your database"})]}),e.jsx(H,{children:e.jsx(Y6,{onAdd:S,onEdit:D,onView:T})})]})}),e.jsx(Ee,{value:"low-stock",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Low Stock Items"}),e.jsx(ee,{children:"Items that are at or below their reorder level"})]}),e.jsx(H,{children:d?e.jsx("div",{className:"flex justify-center p-8",children:"Loading low stock items..."}):g.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No items are currently at or below their reorder level."}):e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"SKU"}),e.jsx("th",{className:"text-left py-2",children:"Name"}),e.jsx("th",{className:"text-right py-2",children:"Current Stock"}),e.jsx("th",{className:"text-right py-2",children:"Reorder Level"}),e.jsx("th",{className:"text-right py-2",children:"Reorder Quantity"}),e.jsx("th",{className:"text-right py-2",children:"Actions"})]})}),e.jsx("tbody",{children:g.map(N=>{var A;return e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"py-2",children:N.sku}),e.jsx("td",{className:"py-2",children:N.name}),e.jsx("td",{className:"text-right py-2",children:N.minimumStockLevel.toString()}),e.jsx("td",{className:"text-right py-2",children:N.reorderLevel.toString()}),e.jsx("td",{className:"text-right py-2",children:((A=N.reorderQuantity)==null?void 0:A.toString())||"-"}),e.jsx("td",{className:"text-right py-2",children:e.jsx(P,{variant:"outline",size:"sm",onClick:()=>T(N),children:"View"})})]},N.id)})})]})})]})}),e.jsx(Ee,{value:"suppliers",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Suppliers"}),e.jsx(ee,{children:"View and manage your suppliers"})]}),e.jsx(H,{children:h?e.jsx("div",{className:"flex justify-center p-8",children:"Loading suppliers..."}):f.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No suppliers found. Add suppliers to track inventory from different vendors."}):e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Name"}),e.jsx("th",{className:"text-left py-2",children:"Contact Person"}),e.jsx("th",{className:"text-left py-2",children:"Email"}),e.jsx("th",{className:"text-left py-2",children:"Phone"}),e.jsx("th",{className:"text-right py-2",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(N=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"py-2",children:N.name}),e.jsx("td",{className:"py-2",children:N.contactName||"-"}),e.jsx("td",{className:"py-2",children:N.email||"-"}),e.jsx("td",{className:"py-2",children:N.phone||"-"}),e.jsx("td",{className:"text-right py-2",children:e.jsx(P,{variant:"outline",size:"sm",children:"View"})})]},N.id))})]})})]})}),e.jsx(Ee,{value:"locations",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Storage Locations"}),e.jsx(ee,{children:"Manage storage locations in your facility"})]}),e.jsx(H,{children:x?e.jsx("div",{className:"flex justify-center p-8",children:"Loading storage locations..."}):v.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No storage locations found. Define locations to better organize your inventory."}):e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Name"}),e.jsx("th",{className:"text-left py-2",children:"Type"}),e.jsx("th",{className:"text-left py-2",children:"Description"}),e.jsx("th",{className:"text-center py-2",children:"Status"}),e.jsx("th",{className:"text-right py-2",children:"Actions"})]})}),e.jsx("tbody",{children:v.map(N=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"py-2",children:N.name}),e.jsx("td",{className:"py-2",children:N.type||"-"}),e.jsx("td",{className:"py-2",children:N.description||"-"}),e.jsx("td",{className:"text-center py-2",children:e.jsx("span",{className:`inline-block h-2 w-2 rounded-full ${N.active?"bg-green-500":"bg-gray-300"}`})}),e.jsx("td",{className:"text-right py-2",children:e.jsx(P,{variant:"outline",size:"sm",children:"View"})})]},N.id))})]})})]})})]}),s&&e.jsx(sV,{isOpen:s,onClose:C,onSubmit:I,editItem:a||void 0,categories:[],isSubmitting:y.isPending||j.isPending}),r&&a&&e.jsx(rV,{item:a,isOpen:r,onClose:E,onEdit:()=>{n(!1),t(!0)},onDelete:w})]})}function Uf({type:s="inventory_location",entityId:t="",title:r="",description:n="",onGenerate:a,className:i}){const[o,l]=p.useState(""),[c,d]=p.useState(r),[u,h]=p.useState(n),[m,x]=p.useState(s),[g,f]=p.useState(t),[v,y]=p.useState(!1),[j,b]=p.useState(!1),[k,S]=p.useState(null),{toast:D}=Be(),T=async()=>{if(!c.trim()){D({title:"Error",description:"Please enter a title for the QR code",variant:"destructive"});return}if(!g.trim()){D({title:"Error",description:"Please enter an entity ID",variant:"destructive"});return}try{y(!0);const I=await le("POST","/api/qr-codes",{type:m,entityId:g,title:c,description:u});if(!I.ok)throw new Error("Failed to generate QR code");const w=await I.json();S(w),l(w.code),b(!0),a&&a(w),D({title:"QR Code Generated",description:`QR code for "${c}" has been created successfully.`})}catch(I){console.error("Error generating QR code:",I),D({title:"Error",description:`Failed to generate QR code: ${I.message}`,variant:"destructive"})}finally{y(!1)}},C=()=>{const I=document.getElementById("qr-code-svg");if(I){const w=new XMLSerializer().serializeToString(I),N=new Blob([w],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(N),F=document.createElement("a");F.href=A,F.download=`qrcode-${m}-${g}.svg`,document.body.appendChild(F),F.click(),document.body.removeChild(F)}},E=()=>{const I=window.open("","_blank");if(I){const w=document.getElementById("qr-code-svg");if(w){const N=new XMLSerializer().serializeToString(w);I.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>QR Code: ${c}</title>
              <style>
                body {
                  font-family: Arial, sans-serif;
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  justify-content: center;
                  padding: 20px;
                }
                .container {
                  max-width: 400px;
                  text-align: center;
                }
                .qr-code {
                  margin: 20px 0;
                }
                .title {
                  font-size: 18px;
                  font-weight: bold;
                  margin-bottom: 8px;
                }
                .code {
                  font-family: monospace;
                  margin-bottom: 10px;
                }
                .description {
                  color: #555;
                  margin-bottom: 10px;
                }
                .type {
                  font-size: 12px;
                  color: #777;
                }
                @media print {
                  body {
                    margin: 0;
                    padding: 0;
                  }
                  button {
                    display: none;
                  }
                }
              </style>
            </head>
            <body>
              <div class="container">
                <div class="title">${c}</div>
                <div class="code">${o}</div>
                <div class="qr-code">${N}</div>
                <div class="description">${u}</div>
                <div class="type">Type: ${m}</div>
                <button onclick="window.print();return false;">Print</button>
              </div>
              <script>
                // Auto-print
                setTimeout(() => {
                  window.print();
                }, 500);
              <\/script>
            </body>
          </html>
        `),I.document.close()}}};return e.jsxs(V,{className:i,children:[e.jsx(K,{children:e.jsx(G,{children:"QR Code Generator"})}),e.jsx(H,{children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(O,{htmlFor:"qr-type",children:"QR Code Type"}),e.jsxs(qe,{value:m,onValueChange:I=>x(I),children:[e.jsx(Ve,{id:"qr-type",children:e.jsx(ze,{placeholder:"Select type"})}),e.jsx(Ue,{children:VF.map(I=>e.jsx(te,{value:I,children:I.replace("_"," ").replace(/\b\w/g,w=>w.toUpperCase())},I))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(O,{htmlFor:"qr-entity-id",children:"Entity ID"}),e.jsx(q,{id:"qr-entity-id",placeholder:"Enter entity ID",value:g,onChange:I=>f(I.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(O,{htmlFor:"qr-title",children:"Title"}),e.jsx(q,{id:"qr-title",placeholder:"Enter QR code title",value:c,onChange:I=>d(I.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(O,{htmlFor:"qr-description",children:"Description (Optional)"}),e.jsx(q,{id:"qr-description",placeholder:"Enter description",value:u,onChange:I=>h(I.target.value)})]}),j&&o&&e.jsxs("div",{className:"flex flex-col items-center mt-4",children:[e.jsx("div",{id:"qr-code-container",className:"bg-white p-4 rounded-md",children:e.jsx(Eu,{id:"qr-code-svg",value:o,size:200,level:"H"})}),e.jsx("div",{className:"text-center mt-2 font-mono text-sm",children:o})]})]})}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>b(!1),disabled:!j||v,children:"Reset"}),j?e.jsxs("div",{className:"space-x-2",children:[e.jsx(P,{variant:"outline",onClick:E,disabled:v,children:"Print"}),e.jsx(P,{variant:"secondary",onClick:C,disabled:v,children:"Download"})]}):e.jsx(P,{onClick:T,disabled:v,children:v?"Generating...":"Generate QR Code"})]})]})}function lV({onScan:s,className:t}){const[r,n]=p.useState(!1),[a,i]=p.useState(null),o=p.useRef(null),l=p.useRef(null),{toast:c}=Be(),[d,u]=p.useState(!1),[h,m]=p.useState(null),[x,g]=p.useState(null);p.useEffect(()=>()=>{a&&a.getTracks().forEach(S=>S.stop())},[a]);const f=async()=>{try{const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}}});i(S),n(!0),o.current&&(o.current.srcObject=S,o.current.play()),y()}catch(S){console.error("Error accessing camera:",S),c({title:"Camera Error",description:"Could not access your camera. Please check permissions.",variant:"destructive"})}},v=()=>{n(!1),a&&(a.getTracks().forEach(S=>S.stop()),i(null))},y=()=>{if(!r||!o.current||!l.current)return;const S=l.current,D=o.current;if(D.readyState===D.HAVE_ENOUGH_DATA){S.width=D.videoWidth,S.height=D.videoHeight;const T=S.getContext("2d");T&&T.drawImage(D,0,0,S.width,S.height)}r&&requestAnimationFrame(y)},j=()=>{if(!l.current)return;l.current.toDataURL("image/jpeg");const D=prompt("Scanning functionality requires a QR code reader library. For now, please enter the QR code manually:");D&&k(D)},b=S=>{if(!S.target.files||S.target.files.length===0)return;const D=S.target.files[0],T=new FileReader;T.onload=C=>{if(!C.target)return;const E=prompt("Enter the QR code from the uploaded image:");E&&k(E)},T.readAsDataURL(D)},k=async S=>{try{m(S),u(!0);const D=await le("GET",`/api/qr-codes/${encodeURIComponent(S)}`);if(!D.ok)throw new Error("QR code not found or invalid");let T;const C=D.headers.get("content-type");if(C&&C.includes("application/json"))T=await D.json();else{const E=await D.text();throw new Error("Invalid response format. Expected JSON but got: "+(E.substring(0,50)+(E.length>50?"...":"")))}g(T),await le("POST","/api/qr-codes/scan",{qrCodeId:T.id,location:"POS System"}),s&&s(T),c({title:"QR Code Scanned",description:`Successfully scanned: ${T.title}`})}catch(D){console.error("Error processing QR code:",D),c({title:"Error",description:`Failed to process QR code: ${D.message}`,variant:"destructive"})}finally{u(!1)}};return e.jsxs(V,{className:t,children:[e.jsx(K,{children:e.jsx(G,{children:"QR Code Scanner"})}),e.jsx(H,{children:e.jsxs("div",{className:"grid gap-4",children:[r?e.jsxs("div",{className:"relative",children:[e.jsx("video",{ref:o,style:{width:"100%",borderRadius:"8px"},autoPlay:!0,playsInline:!0,muted:!0}),e.jsx("canvas",{ref:l,style:{display:"none"}}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-dashed border-primary rounded-lg"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-10 border-2 border-dashed border-border rounded-lg",children:[e.jsx("p",{className:"mb-4 text-center text-sm text-muted-foreground",children:"Start the camera to scan a QR code, or upload an image containing a QR code."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",onClick:()=>{var S;return(S=document.getElementById("qr-file-input"))==null?void 0:S.click()},children:"Upload Image"}),e.jsx("input",{id:"qr-file-input",type:"file",accept:"image/*",className:"hidden",onChange:b})]})]}),d&&e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}),x&&!d&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:x.title}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",x.type.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Code:"})," ",x.code]}),x.description&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Description:"})," ",x.description]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Scan Count:"})," ",x.scanCount]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Last Scanned:"})," ",x.lastScanned?new Date(x.lastScanned).toLocaleString():"Never"]})]})]})]})}),e.jsx(ht,{className:"flex justify-between",children:r?e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(P,{variant:"outline",className:"flex-1",onClick:v,children:"Stop Camera"}),e.jsx(P,{className:"flex-1",onClick:j,children:"Capture & Analyze"})]}):e.jsx(P,{className:"w-full",onClick:f,disabled:d,children:"Start Camera"})})]})}const cV=()=>{const[s,t]=p.useState("locations"),[r,n]=p.useState(""),[a,i]=p.useState("all"),[o,l]=p.useState("all"),[c,d]=p.useState(!1),[u,h]=p.useState(null),{toast:m}=Be(),x=ss(),{data:g,isLoading:f,error:v}=ue({queryKey:["/api/inventory/locations"],queryFn:A({endpoint:"/api/inventory/locations"})}),{data:y,isLoading:j,error:b}=ue({queryKey:["/api/inventory/items"],queryFn:A({endpoint:"/api/inventory/items"})}),{data:k,isLoading:S,error:D}=ue({queryKey:["/api/inventory/suppliers"],queryFn:A({endpoint:"/api/inventory/suppliers"})}),{data:T,isLoading:C,error:E}=ue({queryKey:["/api/inventory/items/low-stock"],queryFn:A({endpoint:"/api/inventory/items/low-stock"})}),{data:I,isLoading:w,error:N}=ue({queryKey:["qrCodes"],queryFn:A({endpoint:"/api/qr-codes"}),retry:2,retryDelay:1e3,onError:M=>{console.error("Error fetching QR codes:",M)}});function A({endpoint:M}){return async()=>{try{const re=await le("GET",M);if(!re.ok){let Ce;try{Ce=(await re.json()).message||`Error fetching data from ${M}: ${re.status} ${re.statusText}`}catch{Ce=`Error fetching data from ${M}: ${re.status} ${re.statusText}`}throw new Error(Ce)}return await re.json()}catch(re){return console.error(`Error loading data from ${M}:`,re),m({title:"Error loading data",description:re.message||"Unknown error occurred",variant:"destructive"}),[]}}}Ae({mutationFn:async M=>{const re=await le("POST","/api/inventory/locations",M);if(!re.ok){const Ce=await re.json();throw new Error(Ce.message||"Failed to create location")}return await re.json()},onSuccess:()=>{x.invalidateQueries({queryKey:["/api/inventory/locations"]}),m({title:"Location Created",description:"New inventory location has been created successfully."})},onError:M=>{m({title:"Error",description:M.message,variant:"destructive"})}}),Ae({mutationFn:async M=>{const re=await le("POST","/api/qr-codes",M);if(!re.ok){const Ce=await re.json();throw new Error(Ce.message||"Failed to create QR code")}return await re.json()},onSuccess:()=>{x.invalidateQueries({queryKey:["/api/qr-codes"]}),m({title:"QR Code Created",description:"New QR code has been generated successfully."}),d(!1)},onError:M=>{m({title:"Error",description:M.message,variant:"destructive"})}});const F=async M=>{if(!(!M||!M.code))try{const re=M.type,Ce=M.entityId;re==="inventory_location"&&m({title:"Location Found",description:`Scanned location: ${M.title}`})}catch(re){console.error("Error processing scanned QR code:",re),m({title:"Error",description:"Could not process the scanned QR code",variant:"destructive"})}},Z=(M,re)=>{h({entity:M,type:re,title:M.name||`${re} #${M.id}`,entityId:M.id.toString()}),d(!0)},Q=()=>{let M=[];switch(s){case"locations":M=g||[];break;case"inventory":M=y||[];break;case"suppliers":M=k||[];break;case"qrcodes":M=I||[];break;default:M=[]}if(r.trim()){const re=r.toLowerCase();M=M.filter(Ce=>Object.values(Ce).map(nt=>nt?String(nt).toLowerCase():"").some(nt=>nt.includes(re)))}return M},L=f||j||S||w,ae=v||b||D||N;return L?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):ae?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[e.jsx("p",{className:"font-bold",children:"Error loading data"}),e.jsx("p",{children:ae.message})]})}):e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Tracking System"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage inventory locations, items, suppliers, and QR code tracking"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Yt,{children:[e.jsx(yi,{asChild:!0,children:e.jsxs(P,{variant:"outline",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Generate QR Code"]})}),e.jsxs(Wt,{className:"sm:max-w-[425px]",children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Generate QR Code"}),e.jsx(bs,{children:"Create a new QR code for inventory tracking."})]}),e.jsx(Uf,{})]})]}),e.jsxs(Yt,{children:[e.jsx(yi,{asChild:!0,children:e.jsxs(P,{children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Scan QR Code"]})}),e.jsxs(Wt,{className:"sm:max-w-[425px]",children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Scan QR Code"}),e.jsx(bs,{children:"Scan a QR code to look up inventory items or locations."})]}),e.jsx(lV,{onScan:F})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(V,{children:[e.jsx(K,{className:"pb-2",children:e.jsx(G,{children:"Inventory Locations"})}),e.jsx(H,{children:e.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.length)||0})})]}),e.jsxs(V,{children:[e.jsx(K,{className:"pb-2",children:e.jsx(G,{children:"Inventory Items"})}),e.jsx(H,{children:e.jsx("div",{className:"text-2xl font-bold",children:(y==null?void 0:y.length)||0})})]}),e.jsxs(V,{children:[e.jsx(K,{className:"pb-2",children:e.jsx(G,{children:"Low Stock Items"})}),e.jsx(H,{children:e.jsx("div",{className:"text-2xl font-bold",children:(T==null?void 0:T.length)||0})})]}),e.jsxs(V,{children:[e.jsx(K,{className:"pb-2",children:e.jsx(G,{children:"QR Codes"})}),e.jsx(H,{children:e.jsx("div",{className:"text-2xl font-bold",children:(I==null?void 0:I.length)||0})})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Inventory Management"}),e.jsx(ee,{children:"Manage your inventory locations, items, suppliers, and QR codes"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fn,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search...",className:"pl-8",value:r,onChange:M=>n(M.target.value)})]}),s==="locations"&&e.jsxs(qe,{value:a,onValueChange:i,children:[e.jsx(Ve,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Filter by type"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Locations"}),e.jsx(te,{value:"storage",children:"Storage"}),e.jsx(te,{value:"display",children:"Display"}),e.jsx(te,{value:"production",children:"Production"})]})]}),s==="qrcodes"&&e.jsxs(qe,{value:o,onValueChange:l,children:[e.jsx(Ve,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Filter by type"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:"All Types"}),e.jsx(te,{value:"inventory_location",children:"Locations"}),e.jsx(te,{value:"inventory_item",children:"Items"}),e.jsx(te,{value:"material_order",children:"Orders"}),e.jsx(te,{value:"customer_order",children:"Customer Orders"})]})]})]})]}),e.jsx(H,{children:e.jsxs(Bt,{defaultValue:"locations",value:s,onValueChange:t,children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"locations",children:"Locations"}),e.jsx(ve,{value:"inventory",children:"Inventory"}),e.jsx(ve,{value:"suppliers",children:"Suppliers"}),e.jsx(ve,{value:"qrcodes",children:"QR Codes"})]}),e.jsx(Ee,{value:"locations",children:e.jsx(ra,{className:"h-[500px]",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Description"}),e.jsx(de,{children:"QR Code"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:Q().length>0?Q().map(M=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:M.name}),e.jsx(ie,{children:M.type}),e.jsx(ie,{children:M.description}),e.jsx(ie,{children:M.qrCodeId?e.jsxs(pe,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Hs,{className:"h-3 w-3"}),"Assigned"]}):e.jsx(pe,{variant:"outline",className:"bg-muted",children:"None"})}),e.jsx(ie,{children:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>Z(M,"inventory_location"),children:[e.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Generate QR"]})})]},M.id)):e.jsx(tt,{children:e.jsx(ie,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No locations found."})})})]})})}),e.jsx(Ee,{value:"inventory",children:e.jsx(ra,{className:"h-[500px]",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"SKU"}),e.jsx(de,{children:"Category"}),e.jsx(de,{children:"Quantity"}),e.jsx(de,{children:"Location"}),e.jsx(de,{children:"QR Code"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:Q().length>0?Q().map(M=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:M.name}),e.jsx(ie,{children:M.sku}),e.jsx(ie,{children:M.categoryName}),e.jsxs(ie,{children:[M.currentStock," ",M.unitOfMeasure,M.currentStock<=M.reorderPoint&&e.jsx(pe,{variant:"destructive",className:"ml-2",children:"Low Stock"})]}),e.jsx(ie,{children:M.locationName}),e.jsx(ie,{children:M.qrCodeId?e.jsxs(pe,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Hs,{className:"h-3 w-3"}),"Assigned"]}):e.jsx(pe,{variant:"outline",className:"bg-muted",children:"None"})}),e.jsx(ie,{children:e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>Z(M,"inventory_item"),children:[e.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Generate QR"]})})]},M.id)):e.jsx(tt,{children:e.jsx(ie,{colSpan:7,className:"text-center py-4 text-muted-foreground",children:"No inventory items found."})})})]})})}),e.jsx(Ee,{value:"suppliers",children:e.jsx(ra,{className:"h-[500px]",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Name"}),e.jsx(de,{children:"Contact"}),e.jsx(de,{children:"Email"}),e.jsx(de,{children:"Phone"}),e.jsx(de,{children:"Status"}),e.jsx(de,{children:"Last Order"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:Q().length>0?Q().map(M=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:M.name}),e.jsx(ie,{children:M.contactName}),e.jsx(ie,{children:M.email}),e.jsx(ie,{children:M.phone}),e.jsx(ie,{children:e.jsx(pe,{variant:M.active?"success":"secondary",children:M.active?"Active":"Inactive"})}),e.jsx(ie,{children:M.lastOrderDate?lr(new Date(M.lastOrderDate),"MMM d, yyyy"):"Never"}),e.jsx(ie,{children:e.jsx(P,{variant:"outline",size:"sm",children:"View Details"})})]},M.id)):e.jsx(tt,{children:e.jsx(ie,{colSpan:7,className:"text-center py-4 text-muted-foreground",children:"No suppliers found."})})})]})})}),e.jsx(Ee,{value:"qrcodes",children:e.jsx(ra,{className:"h-[500px]",children:e.jsxs(gs,{children:[e.jsx(vs,{children:e.jsxs(tt,{children:[e.jsx(de,{children:"Title"}),e.jsx(de,{children:"Code"}),e.jsx(de,{children:"Type"}),e.jsx(de,{children:"Scans"}),e.jsx(de,{children:"Last Scanned"}),e.jsx(de,{children:"Actions"})]})}),e.jsx(ys,{children:Q().length>0?Q().map(M=>e.jsxs(tt,{children:[e.jsx(ie,{className:"font-medium",children:M.title}),e.jsx(ie,{children:e.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-sm",children:M.code})}),e.jsx(ie,{children:M.type}),e.jsx(ie,{children:M.scanCount}),e.jsx(ie,{children:M.lastScanned?lr(new Date(M.lastScanned),"MMM d, yyyy HH:mm"):"Never"}),e.jsx(ie,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(P,{variant:"outline",size:"sm",children:[e.jsx(Hs,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(P,{variant:"outline",size:"sm",children:[e.jsx(Lo,{className:"h-3 w-3 mr-1"}),"Print"]})]})})]},M.id)):e.jsx(tt,{children:e.jsx(ie,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No QR codes found."})})})]})})})]})})]}),u&&e.jsx(Yt,{open:c,onOpenChange:d,children:e.jsxs(Wt,{children:[e.jsxs(Xt,{children:[e.jsx(Jt,{children:"Generate QR Code"}),e.jsxs(bs,{children:["Create a QR code for ",u.title]})]}),e.jsx(Uf,{type:u.type,entityId:u.entityId,title:u.title,onGenerate:M=>{m({title:"QR Code Generated",description:`QR code for ${u.title} has been created.`}),d(!1)}})]})})]})},dV=cC({frameId:vr().optional(),matColorId:vr().optional(),glassOptionId:vr().optional(),artworkWidth:vr().transform(s=>parseFloat(s)).refine(s=>!isNaN(s)&&s>0,{message:"Width must be a positive number"}),artworkHeight:vr().transform(s=>parseFloat(s)).refine(s=>!isNaN(s)&&s>0,{message:"Height must be a positive number"}),matWidth:vr().transform(s=>parseFloat(s)).refine(s=>!isNaN(s)&&s>=0,{message:"Mat width must be a non-negative number"}),quantity:vr().transform(s=>parseInt(s)).refine(s=>!isNaN(s)&&s>0,{message:"Quantity must be a positive integer"}),includeWholesalePrices:nl().default(!1),addToWholesaleOrder:nl().default(!0)});function uV(){const{toast:s}=Be(),[t,r]=p.useState(null),n=gj({resolver:rT(dV),defaultValues:{frameId:"",matColorId:"",glassOptionId:"",artworkWidth:"16",artworkHeight:"20",matWidth:"2",quantity:"1",includeWholesalePrices:!0,addToWholesaleOrder:!0}}),{data:a=[],isLoading:i}=ue({queryKey:["/api/frames"]}),{data:o=[],isLoading:l}=ue({queryKey:["/api/larson-catalog/crescent"]}),{data:c=[],isLoading:d}=ue({queryKey:["/api/glass-options"],queryFn:async()=>[{id:"regular",name:"Regular Glass",price:"0.08"},{id:"non-glare",name:"Non-glare Glass",price:"0.15"},{id:"museum",name:"Museum Glass",price:"0.30"},{id:"uv",name:"Museum Non-glare",price:"0.40"}]}),u=Ae({mutationFn:async x=>{const g=await le("POST","/api/pricing/calculate",{...x,include_wholesale_prices:x.includeWholesalePrices});if(!g.ok){const f=await g.json();throw new Error(f.message||"Failed to calculate price")}return g.json()},onSuccess:x=>{r(x),s({title:"Price calculation successful",description:"The pricing has been calculated based on Houston Heights specifications."})},onError:x=>{s({title:"Error calculating price",description:x.message,variant:"destructive"})}}),h=x=>{u.mutate(x)},m=i||l||d||u.isPending;return e.jsxs("div",{className:"container max-w-6xl mx-auto py-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Houston Heights Custom Framing Price Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Frame Specifications"}),e.jsx(ee,{children:"Enter the artwork dimensions and select materials for accurate pricing"})]}),e.jsx(H,{children:e.jsx(nT,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(h),className:"space-y-4",children:[e.jsx(dt,{control:n.control,name:"frameId",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Frame Style"}),e.jsxs(qe,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a frame style"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"No Frame"}),a.map(g=>e.jsxs(te,{value:g.id,children:[g.name," ($",g.price,"/ft)"]},g.id))]})]}),e.jsx(tr,{children:"Choose from our selection of frames or select none"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"matColorId",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Mat Color"}),e.jsxs(qe,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a mat color"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"No Mat"}),o.map(g=>e.jsx(te,{value:g.id,children:g.name},g.id))]})]}),e.jsx(tr,{children:"Choose a mat color for your artwork"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"glassOptionId",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Glass Option"}),e.jsxs(qe,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(ot,{children:e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a glass option"})})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"none",children:"No Glass"}),c.map(g=>e.jsx(te,{value:g.id,children:g.name},g.id))]})]}),e.jsx(tr,{children:"Choose the type of glass for your frame"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"artworkWidth",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Artwork Width (inches)"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"0.25",...x})}),e.jsx(tr,{children:"Enter the width of your artwork in inches"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"artworkHeight",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Artwork Height (inches)"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"0.25",...x})}),e.jsx(tr,{children:"Enter the height of your artwork in inches"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"matWidth",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Mat Width (inches)"}),e.jsx(ot,{children:e.jsx(q,{type:"number",step:"0.25",...x})}),e.jsx(tr,{children:"Enter the width of the mat border in inches"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"quantity",render:({field:x})=>e.jsxs(at,{children:[e.jsx(it,{children:"Quantity"}),e.jsx(ot,{children:e.jsx(q,{type:"number",min:"1",step:"1",...x})}),e.jsx(tr,{children:"Enter the number of frames to order"}),e.jsx(pt,{})]})}),e.jsx(dt,{control:n.control,name:"includeWholesalePrices",render:({field:x})=>e.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(it,{children:"Show Wholesale Prices"}),e.jsx(tr,{children:"Include wholesale price details in calculation"})]}),e.jsx(ot,{children:e.jsx("input",{type:"checkbox",checked:x.value,onChange:x.onChange,className:"accent-primary h-4 w-4"})})]})}),e.jsx(dt,{control:n.control,name:"addToWholesaleOrder",render:({field:x})=>e.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm bg-primary/10",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(it,{className:"font-bold",children:"Add to Wholesale Order"}),e.jsx(tr,{children:"This will create a material order for the frame shop"})]}),e.jsx(ot,{children:e.jsx("input",{type:"checkbox",checked:x.value,onChange:x.onChange,className:"accent-primary h-4 w-4",disabled:!0})})]})}),e.jsx(P,{type:"submit",disabled:m,className:"w-full",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Calculating..."]}):"Calculate Price"})]})})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Pricing Results"}),e.jsx(ee,{children:"Houston Heights location-specific price calculation"})]}),e.jsx(H,{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"text-sm font-medium",children:"Frame Price:"}),e.jsxs("div",{className:"text-sm font-mono text-right",children:["$",t.framePrice.toFixed(2)]}),e.jsx("div",{className:"text-sm font-medium",children:"Mat Price:"}),e.jsxs("div",{className:"text-sm font-mono text-right",children:["$",t.matPrice.toFixed(2)]}),e.jsx("div",{className:"text-sm font-medium",children:"Glass Price:"}),e.jsxs("div",{className:"text-sm font-mono text-right",children:["$",t.glassPrice.toFixed(2)]}),e.jsx("div",{className:"text-sm font-medium",children:"Labor Cost:"}),e.jsxs("div",{className:"text-sm font-mono text-right",children:["$",t.laborCost.toFixed(2)]}),e.jsx("div",{className:"text-sm font-medium",children:"Material Cost:"}),e.jsxs("div",{className:"text-sm font-mono text-right",children:["$",t.materialCost.toFixed(2)]}),e.jsx("div",{className:"border-t pt-2 text-base font-semibold",children:"Subtotal:"}),e.jsxs("div",{className:"border-t pt-2 text-base font-semibold font-mono text-right",children:["$",t.subtotal.toFixed(2)]}),e.jsx("div",{className:"text-base font-bold",children:"Total Price:"}),e.jsxs("div",{className:"text-base font-bold font-mono text-right",children:["$",t.totalPrice.toFixed(2)]})]}),t.wholesalePrices&&e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Wholesale Prices"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsx("div",{children:"Frame Wholesale:"}),e.jsxs("div",{className:"font-mono text-right",children:["$",t.wholesalePrices.frame]}),e.jsx("div",{children:"Mat Wholesale:"}),e.jsxs("div",{className:"font-mono text-right",children:["$",t.wholesalePrices.mat]}),e.jsx("div",{children:"Glass Wholesale:"}),e.jsxs("div",{className:"font-mono text-right",children:["$",t.wholesalePrices.glass]})]})]}),t.laborRates&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Labor Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsx("div",{children:"Base Rate:"}),e.jsxs("div",{className:"font-mono text-right",children:["$",t.laborRates.baseRate.toFixed(2),"/hour"]}),e.jsx("div",{children:"Regional Factor:"}),e.jsxs("div",{className:"font-mono text-right",children:[t.laborRates.regionalFactor.toFixed(2),"x"]}),e.jsx("div",{className:"col-span-2 mt-2 mb-1 text-xs font-medium",children:"Time Estimates:"}),e.jsx("div",{children:"Frame Assembly:"}),e.jsxs("div",{className:"font-mono text-right",children:[(t.laborRates.estimates.frameAssembly*60).toFixed(0)," min"]}),e.jsx("div",{children:"Mat Cutting:"}),e.jsxs("div",{className:"font-mono text-right",children:[(t.laborRates.estimates.matCutting*60).toFixed(0)," min"]}),e.jsx("div",{children:"Glass Cutting:"}),e.jsxs("div",{className:"font-mono text-right",children:[(t.laborRates.estimates.glassCutting*60).toFixed(0)," min"]}),e.jsx("div",{children:"Fitting:"}),e.jsxs("div",{className:"font-mono text-right",children:[(t.laborRates.estimates.fitting*60).toFixed(0)," min"]}),e.jsx("div",{children:"Finishing:"}),e.jsxs("div",{className:"font-mono text-right",children:[(t.laborRates.estimates.finishing*60).toFixed(0)," min"]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[e.jsx("p",{className:"mb-4",children:'Enter frame specifications and click "Calculate Price" to see pricing details.'}),e.jsx("p",{className:"text-sm",children:"All prices are calculated using Houston Heights location-specific pricing formulas."})]})}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Prices updated: April 25, 2025"}),t&&e.jsx(P,{variant:"outline",onClick:()=>window.print(),children:"Print Quote"})]})]})]})]})}function mV(){const[s,t]=p.useState(!1),[r,n]=p.useState({larsonApiKey:"",larsonApiSecret:"",romaApiKey:"",romaApiSecret:"",bellaApiKey:"",bellaApiSecret:""}),[a,i]=p.useState({larson:{connected:!1,message:"Not connected"},roma:{connected:!1,message:"Not connected"},bella:{connected:!1,message:"Not connected"}}),{toast:o}=Be();p.useEffect(()=>{(async()=>{try{const m=await(await le("GET","/api/vendor-api/settings")).json(),x={...r};m.larsonApiKey&&(x.larsonApiKey=m.larsonApiKey),m.larsonApiSecret&&(x.larsonApiSecret=""),m.romaApiKey&&(x.romaApiKey=m.romaApiKey),m.romaApiSecret&&(x.romaApiSecret=""),m.bellaApiKey&&(x.bellaApiKey=m.bellaApiKey),m.bellaApiSecret&&(x.bellaApiSecret=""),n(x),i({larson:{connected:!!m.larsonApiKey&&m.larsonStatus==="connected",message:m.larsonStatus==="connected"?"Connected":"Not connected"},roma:{connected:!!m.romaApiKey&&m.romaStatus==="connected",message:m.romaStatus==="connected"?"Connected":"Not connected"},bella:{connected:!!m.bellaApiKey&&m.bellaStatus==="connected",message:m.bellaStatus==="connected"?"Connected":"Not connected"}})}catch(h){console.error("Failed to fetch vendor API settings:",h),o({title:"Error",description:"Failed to load vendor API settings",variant:"destructive"})}})()},[]);const l=u=>{const{name:h,value:m}=u.target;n(x=>({...x,[h]:m}))},c=async u=>{t(!0);try{const h={};switch(u){case"larson":h.larsonApiKey=r.larsonApiKey,r.larsonApiSecret&&r.larsonApiSecret!==""&&(h.larsonApiSecret=r.larsonApiSecret);break;case"roma":h.romaApiKey=r.romaApiKey,r.romaApiSecret&&r.romaApiSecret!==""&&(h.romaApiSecret=r.romaApiSecret);break;case"bella":h.bellaApiKey=r.bellaApiKey,r.bellaApiSecret&&r.bellaApiSecret!==""&&(h.bellaApiSecret=r.bellaApiSecret);break}const x=await(await le("POST","/api/vendor-api/settings",h)).json();i(g=>({...g,[u]:{connected:x[`${u}Status`]==="connected",message:x[`${u}Status`]==="connected"?"Connected":"Not connected"}})),o({title:"Settings Saved",description:`${u.charAt(0).toUpperCase()+u.slice(1)} API settings updated successfully!`}),await d(u)}catch(h){console.error(`Failed to save ${u} API settings:`,h),o({title:"Error",description:`Failed to save ${u} API settings. Please try again.`,variant:"destructive"})}finally{t(!1)}},d=async u=>{try{const m=await(await le("POST",`/api/vendor-api/test-connection/${u}`)).json();i(x=>({...x,[u]:{connected:m.success,message:m.success?"Connected":m.message||"Connection failed"}})),m.success?o({title:"Connection Successful",description:`Connected to ${u.charAt(0).toUpperCase()+u.slice(1)} API successfully!`}):o({title:"Connection Failed",description:m.message||`Failed to connect to ${u.charAt(0).toUpperCase()+u.slice(1)} API.`,variant:"destructive"})}catch(h){console.error(`Failed to test ${u} API connection:`,h),o({title:"Connection Error",description:`Failed to test ${u} API connection. Please check your settings.`,variant:"destructive"}),i(m=>({...m,[u]:{connected:!1,message:"Connection failed"}}))}};return e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Vendor API Settings"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Configure API connections to frame vendor catalogs to access complete product data and wholesale pricing."}),e.jsxs(Bt,{defaultValue:"larson",className:"w-full",children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"larson",children:"Larson-Juhl"}),e.jsx(ve,{value:"roma",children:"Roma Moulding"}),e.jsx(ve,{value:"bella",children:"Bella Moulding"})]}),e.jsx(Ee,{value:"larson",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center",children:["Larson-Juhl API Connection",a.larson.connected?e.jsx(ls,{className:"ml-2 h-5 w-5 text-green-500"}):e.jsx(Dt,{className:"ml-2 h-5 w-5 text-amber-500"})]}),e.jsxs(ee,{children:["Connect to Larson-Juhl's API for real-time frame catalog data and pricing. Status: ",e.jsx("span",{className:a.larson.connected?"text-green-500":"text-amber-500",children:a.larson.message})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"larsonApiKey",children:"API Key"}),e.jsx(q,{id:"larsonApiKey",name:"larsonApiKey",placeholder:"Enter your Larson-Juhl API key",value:r.larsonApiKey,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"larsonApiSecret",children:"API Secret"}),e.jsx(q,{id:"larsonApiSecret",name:"larsonApiSecret",type:"password",placeholder:"Enter your Larson-Juhl API secret",value:r.larsonApiSecret,onChange:l})]})]}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>d("larson"),disabled:s,children:"Test Connection"}),e.jsx(P,{onClick:()=>c("larson"),disabled:s,children:"Save Settings"})]})]})}),e.jsx(Ee,{value:"roma",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center",children:["Roma Moulding API Connection",a.roma.connected?e.jsx(ls,{className:"ml-2 h-5 w-5 text-green-500"}):e.jsx(Dt,{className:"ml-2 h-5 w-5 text-amber-500"})]}),e.jsxs(ee,{children:["Connect to Roma Moulding's API for real-time frame catalog data and pricing. Status: ",e.jsx("span",{className:a.roma.connected?"text-green-500":"text-amber-500",children:a.roma.message})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"romaApiKey",children:"API Key"}),e.jsx(q,{id:"romaApiKey",name:"romaApiKey",placeholder:"Enter your Roma Moulding API key",value:r.romaApiKey,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"romaApiSecret",children:"API Secret"}),e.jsx(q,{id:"romaApiSecret",name:"romaApiSecret",type:"password",placeholder:"Enter your Roma Moulding API secret",value:r.romaApiSecret,onChange:l})]})]}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>d("roma"),disabled:s,children:"Test Connection"}),e.jsx(P,{onClick:()=>c("roma"),disabled:s,children:"Save Settings"})]})]})}),e.jsx(Ee,{value:"bella",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center",children:["Bella Moulding API Connection",a.bella.connected?e.jsx(ls,{className:"ml-2 h-5 w-5 text-green-500"}):e.jsx(Dt,{className:"ml-2 h-5 w-5 text-amber-500"})]}),e.jsxs(ee,{children:["Connect to Bella Moulding's API for real-time frame catalog data and pricing. Status: ",e.jsx("span",{className:a.bella.connected?"text-green-500":"text-amber-500",children:a.bella.message})]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"bellaApiKey",children:"API Key"}),e.jsx(q,{id:"bellaApiKey",name:"bellaApiKey",placeholder:"Enter your Bella Moulding API key",value:r.bellaApiKey,onChange:l})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"bellaApiSecret",children:"API Secret"}),e.jsx(q,{id:"bellaApiSecret",name:"bellaApiSecret",type:"password",placeholder:"Enter your Bella Moulding API secret",value:r.bellaApiSecret,onChange:l})]})]}),e.jsxs(ht,{className:"flex justify-between",children:[e.jsx(P,{variant:"outline",onClick:()=>d("bella"),disabled:s,children:"Test Connection"}),e.jsx(P,{onClick:()=>c("bella"),disabled:s,children:"Save Settings"})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-slate-50 p-6 rounded-lg border border-slate-200",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vendor API Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Larson-Juhl"}),e.jsx("span",{className:`${a.larson.connected?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"} px-2 py-1 rounded text-xs font-medium`,children:a.larson.connected?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:a.larson.message})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Roma Moulding"}),e.jsx("span",{className:`${a.roma.connected?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"} px-2 py-1 rounded text-xs font-medium`,children:a.roma.connected?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:a.roma.message})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Bella Moulding"}),e.jsx("span",{className:`${a.bella.connected?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"} px-2 py-1 rounded text-xs font-medium`,children:a.bella.connected?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:a.bella.message})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Note: To obtain API keys, please contact each vendor's account manager or visit their developer portal:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm text-gray-500",children:[e.jsx("li",{children:e.jsx("a",{href:"https://www.larsonjuhl.com/api",className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Larson-Juhl Developer Portal"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.romamoulding.com/api",className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Roma Moulding Developer Portal"})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.bellamoulding.com/api",className:"text-blue-500 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"Bella Moulding Developer Portal"})})]})]})]})]})}const oT={pending:e.jsx(Nt,{className:"h-4 w-4"}),processed:e.jsx(H2,{className:"h-4 w-4"}),ordered:e.jsx(Gs,{className:"h-4 w-4"}),arrived:e.jsx(Gr,{className:"h-4 w-4"}),frame_cut:e.jsx(ha,{className:"h-4 w-4"}),mat_cut:e.jsx(ha,{className:"h-4 w-4"}),prepped:e.jsx(Gs,{className:"h-4 w-4"}),completed:e.jsx(Ks,{className:"h-4 w-4"}),delayed:e.jsx(Dt,{className:"h-4 w-4"}),canceled:e.jsx(Ln,{className:"h-4 w-4"})},fl={pending:"bg-yellow-500",processed:"bg-blue-300",ordered:"bg-blue-500",arrived:"bg-purple-500",frame_cut:"bg-indigo-500",mat_cut:"bg-teal-500",prepped:"bg-cyan-500",completed:"bg-green-500",delayed:"bg-orange-500",canceled:"bg-red-500"};function hV({orderId:s,limit:t=10}){const{data:r,isLoading:n,error:a}=ue({queryKey:[`/api/status-history/orders/${s}/status-history`],queryFn:()=>le("GET",`/api/status-history/orders/${s}/status-history`).then(i=>i.json()).then(i=>i.slice(0,t)),enabled:!!s});return n?e.jsx(V,{className:"w-full",children:e.jsxs(K,{children:[e.jsx(G,{children:"Status History"}),e.jsx(ee,{children:"Loading status history..."})]})}):a||!r?e.jsx(V,{className:"w-full",children:e.jsxs(K,{children:[e.jsx(G,{children:"Status History"}),e.jsx(ee,{children:"Error loading status history"})]})}):e.jsxs(V,{className:"w-full",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Status History"}),e.jsx(ee,{children:"Status changes for this order"})]}),e.jsx(H,{children:r.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No status changes recorded yet."}):e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-md border",children:[e.jsx("div",{className:J("p-2 rounded-full",fl[i.new_status]||"bg-gray-500"),children:oT[i.new_status]||e.jsx(Nt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:fl[i.new_status]||"bg-gray-500",children:i.new_status.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:lr(new Date(i.changed_at),"MMM d, yyyy h:mm a")})]}),i.previous_status&&e.jsxs("p",{className:"text-sm mt-1",children:["Changed from ",e.jsx("span",{className:"font-medium",children:i.previous_status.replace("_"," ")})]}),i.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.notes})]})]},i.id))})})]})}function iU({customerId:s,limit:t=20}){const{data:r,isLoading:n,error:a}=ue({queryKey:[`/api/status-history/customers/${s}/status-history`],queryFn:()=>le("GET",`/api/status-history/customers/${s}/status-history`).then(o=>o.json()).then(o=>o.slice(0,t)),enabled:!!s});if(n)return e.jsx(V,{className:"w-full",children:e.jsxs(K,{children:[e.jsx(G,{children:"Your Orders Status History"}),e.jsx(ee,{children:"Loading status history..."})]})});if(a||!r)return e.jsx(V,{className:"w-full",children:e.jsxs(K,{children:[e.jsx(G,{children:"Your Orders Status History"}),e.jsx(ee,{children:"Error loading status history"})]})});const i={};return r.forEach(o=>{i[o.order_id]||(i[o.order_id]=[]),i[o.order_id].push(o)}),e.jsxs(V,{className:"w-full",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Your Orders Status History"}),e.jsx(ee,{children:"Recent status changes for all your orders"})]}),e.jsx(H,{children:Object.keys(i).length===0?e.jsx("p",{className:"text-muted-foreground",children:"No status changes recorded for your orders yet."}):e.jsx("div",{className:"space-y-6",children:Object.entries(i).map(([o,l])=>e.jsxs("div",{className:"border rounded-md p-4",children:[e.jsxs("h3",{className:"font-medium mb-2",children:["Order #",o," - ",l[0].frame_name||"Custom Frame"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:l[0].artwork_description||"Artwork"}),e.jsx("div",{className:"space-y-3",children:l.slice(0,5).map(c=>e.jsxs("div",{className:"flex items-start gap-3 p-2 bg-muted/50 rounded-md",children:[e.jsx("div",{className:J("p-1.5 rounded-full",fl[c.new_status]||"bg-gray-500"),children:oT[c.new_status]||e.jsx(Nt,{className:"h-3 w-3"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:fl[c.new_status]||"bg-gray-500",children:c.new_status.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:lr(new Date(c.changed_at),"MMM d, yyyy h:mm a")})]})})]},c.id))})]},o))})})]})}const pV=({orderId:s,onFileUploaded:t})=>{const r=Be(),[n,a]=p.useState([]),[i,o]=p.useState("artwork"),[l,c]=p.useState(!1),[d,u]=p.useState("other"),[h,m]=p.useState(null),[x,g]=p.useState(null),[f,v]=p.useState(!0),y=async()=>{try{v(!0);const N=await le("GET",`/api/orders/${s}/files`);if(N.ok){const A=await N.json();a(A)}else console.error("Error fetching files")}catch(N){console.error("Error fetching files:",N)}finally{v(!1)}};p.useEffect(()=>{s&&y()},[s]);const j=N=>{N.target.files&&N.target.files.length>0&&m(N.target.files[0])},b=N=>{N.target.files&&N.target.files.length>0&&g(N.target.files[0])},k=async()=>{if(!h){r({title:"Error",description:"Please select a file to upload",variant:"destructive"});return}c(!0);try{const N=new FormData;N.append("artwork",h);const A=await fetch(`/api/orders/${s}/artwork`,{method:"POST",body:N,credentials:"include"});if(A.ok)r({title:"Success",description:"Artwork uploaded successfully"}),m(null),y(),t&&t();else{const F=await A.json();r({title:"Upload Failed",description:F.message||"Failed to upload artwork",variant:"destructive"})}}catch(N){console.error("Error uploading artwork:",N),r({title:"Error",description:"An error occurred while uploading",variant:"destructive"})}finally{c(!1)}},S=async()=>{if(!x){r({title:"Error",description:"Please select a file to upload",variant:"destructive"});return}c(!0);try{const N=new FormData;N.append("file",x),N.append("fileType",d);const A=await fetch(`/api/orders/${s}/files`,{method:"POST",body:N,credentials:"include"});if(A.ok)r({title:"Success",description:"File uploaded successfully"}),g(null),y(),t&&t();else{const F=await A.json();r({title:"Upload Failed",description:F.message||"Failed to upload file",variant:"destructive"})}}catch(N){console.error("Error uploading file:",N),r({title:"Error",description:"An error occurred while uploading",variant:"destructive"})}finally{c(!1)}},D=async N=>{try{const A=await le("DELETE",`/api/files/${N}`);if(A.ok)r({title:"Success",description:"File deleted successfully"}),a(n.filter(F=>F.id!==N));else{const F=await A.json();r({title:"Delete Failed",description:F.message||"Failed to delete file",variant:"destructive"})}}catch(A){console.error("Error deleting file:",A),r({title:"Error",description:"An error occurred while deleting the file",variant:"destructive"})}},T=N=>{const F=`${window.location.origin}/uploads/${N.file_path}`,Z=document.createElement("a");Z.href=F,Z.download=N.file_name,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},C=(N,A)=>{switch(N){case"qr-code":return e.jsx(Hs,{className:"h-5 w-5"});case"work-order":return e.jsx(Sl,{className:"h-5 w-5"});case"invoice":return e.jsx(z2,{className:"h-5 w-5"});case"virtual-frame":return e.jsx(pi,{className:"h-5 w-5"});default:return A.startsWith("image/")?e.jsx(pi,{className:"h-5 w-5"}):e.jsx(q2,{className:"h-5 w-5"})}},E=N=>N<1024?N+" bytes":N<1048576?(N/1024).toFixed(1)+" KB":(N/1048576).toFixed(1)+" MB",I=N=>{const A=new Date(N);return A.toLocaleDateString()+" "+A.toLocaleTimeString()},w=()=>i==="artwork"?n.filter(N=>N.mime_type.startsWith("image/")&&N.file_type!=="qr-code"&&N.file_type!=="virtual-frame"):i==="qr-codes"?n.filter(N=>N.file_type==="qr-code"):i==="documents"?n.filter(N=>N.file_type==="work-order"||N.file_type==="invoice"||N.mime_type==="application/pdf"):n.filter(N=>N.file_type==="other"&&!N.mime_type.startsWith("image/")&&N.mime_type!=="application/pdf");return e.jsxs(V,{className:"w-full",children:[e.jsx(K,{children:e.jsx(G,{children:"Order Files"})}),e.jsx(H,{children:e.jsxs(Bt,{defaultValue:"artwork",value:i,onValueChange:o,children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"artwork",children:"Artwork"}),e.jsx(ve,{value:"qr-codes",children:"QR Codes"}),e.jsx(ve,{value:"documents",children:"Documents"}),e.jsx(ve,{value:"other",children:"Other Files"})]}),e.jsx(Ee,{value:"artwork",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Upload Artwork"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{type:"file",accept:"image/*",onChange:j,className:"flex-1"}),e.jsxs(P,{onClick:k,disabled:!h||l,children:[l?"Uploading...":"Upload"," ",e.jsx(Mr,{className:"ml-2 h-4 w-4"})]})]}),h&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",h.name," (",E(h.size),")"]})]}),e.jsx("div",{className:"file-list",children:f?e.jsx("div",{className:"text-center py-4",children:"Loading files..."}):w().length>0?e.jsx("div",{className:"grid gap-2",children:w().map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C(N.file_type,N.mime_type),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.file_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E(N.file_size),"  ",I(N.upload_date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>T(N),children:e.jsx(mn,{className:"h-4 w-4"})}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(P,{variant:"ghost",size:"sm",children:e.jsx(lo,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(xn,{children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Delete File"}),e.jsxs(jn,{children:['Are you sure you want to delete "',N.file_name,'"? This action cannot be undone.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{onClick:()=>D(N.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]},N.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No artwork files uploaded"})})]})}),e.jsx(Ee,{value:"qr-codes",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"file-list",children:f?e.jsx("div",{className:"text-center py-4",children:"Loading files..."}):w().length>0?e.jsx("div",{className:"grid gap-2",children:w().map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hs,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.file_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E(N.file_size),"  ",I(N.upload_date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>T(N),children:e.jsx(mn,{className:"h-4 w-4"})}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(P,{variant:"ghost",size:"sm",children:e.jsx(lo,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(xn,{children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Delete File"}),e.jsxs(jn,{children:['Are you sure you want to delete "',N.file_name,'"? This action cannot be undone.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{onClick:()=>D(N.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]},N.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No QR codes uploaded"})})})}),e.jsx(Ee,{value:"documents",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Upload Document"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(qe,{value:d,onValueChange:u,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select file type"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"work-order",children:"Work Order"}),e.jsx(te,{value:"invoice",children:"Invoice"}),e.jsx(te,{value:"other",children:"Other Document"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt",onChange:b,className:"flex-1"}),e.jsxs(P,{onClick:S,disabled:!x||l,children:[l?"Uploading...":"Upload"," ",e.jsx(Mr,{className:"ml-2 h-4 w-4"})]})]})]}),x&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",x.name," (",E(x.size),")"]})]}),e.jsx("div",{className:"file-list",children:f?e.jsx("div",{className:"text-center py-4",children:"Loading files..."}):w().length>0?e.jsx("div",{className:"grid gap-2",children:w().map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C(N.file_type,N.mime_type),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.file_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E(N.file_size),"  ",I(N.upload_date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>T(N),children:e.jsx(mn,{className:"h-4 w-4"})}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(P,{variant:"ghost",size:"sm",children:e.jsx(lo,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(xn,{children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Delete File"}),e.jsxs(jn,{children:['Are you sure you want to delete "',N.file_name,'"? This action cannot be undone.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{onClick:()=>D(N.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]},N.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No documents uploaded"})})]})}),e.jsx(Ee,{value:"other",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Upload Other File"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(qe,{value:d,onValueChange:u,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select file type"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"virtual-frame",children:"Virtual Frame Design"}),e.jsx(te,{value:"other",children:"Other File"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{type:"file",onChange:b,className:"flex-1"}),e.jsxs(P,{onClick:S,disabled:!x||l,children:[l?"Uploading...":"Upload"," ",e.jsx(Mr,{className:"ml-2 h-4 w-4"})]})]})]}),x&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Selected: ",x.name," (",E(x.size),")"]})]}),e.jsx("div",{className:"file-list",children:f?e.jsx("div",{className:"text-center py-4",children:"Loading files..."}):w().length>0?e.jsx("div",{className:"grid gap-2",children:w().map(N=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C(N.file_type,N.mime_type),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:N.file_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E(N.file_size),"  ",I(N.upload_date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>T(N),children:e.jsx(mn,{className:"h-4 w-4"})}),e.jsxs(na,{children:[e.jsx(aa,{asChild:!0,children:e.jsx(P,{variant:"ghost",size:"sm",children:e.jsx(lo,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(xn,{children:[e.jsxs(gn,{children:[e.jsx(yn,{children:"Delete File"}),e.jsxs(jn,{children:['Are you sure you want to delete "',N.file_name,'"? This action cannot be undone.']})]}),e.jsxs(vn,{children:[e.jsx(wn,{children:"Cancel"}),e.jsx(bn,{onClick:()=>D(N.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]},N.id))}):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No other files uploaded"})})]})})]})})]})};async function fV(s,t){try{const r=await le("GET",`/api/qr-codes/search?type=${s}&entityId=${t}`);if(r.status===404)return null;if(!r.ok)throw new Error("Failed to fetch QR code");return await r.json()}catch(r){return console.error("Error fetching QR code:",r),null}}function xV(){var g,f;const{orderId:s}=kl(),{toast:t}=Be(),r=ss(),[n,a]=p.useState(!1),[i,o]=p.useState(null),{order:l,isLoadingOrder:c,orderError:d,orderNotifications:u,isLoadingOrderNotifications:h}=Qi({orderId:s?parseInt(s):void 0}),m=Ae({mutationFn:async({id:v,status:y})=>le("PATCH",`/api/orders/${v}`,{status:y}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/orders"]}),r.invalidateQueries({queryKey:[`/api/production/orders/${s}`]}),t({title:"Status Updated",description:"Order status has been updated successfully"})},onError:v=>{t({title:"Update Failed",description:v.message||"Failed to update order status",variant:"destructive"})}});p.useEffect(()=>{d&&t({title:"Error",description:"Failed to load order details. Please try again.",variant:"destructive"})},[d,t]);const x=v=>{l&&m.mutate({id:l.id,status:v})};return p.useEffect(()=>{(async()=>{if(s&&l)try{const y=await fV("order",s);o((y==null?void 0:y.code)||null)}catch(y){console.error("Error loading QR code:",y)}})()},[s,l]),c?e.jsx("div",{className:"container mx-auto py-10 space-y-6",children:e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading order details..."})]})})}):l?e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Order #",l.id]}),e.jsxs("p",{className:"text-muted-foreground",children:["Customer: ",l.customerName||"Unknown"," | Created: ",new Date(l.createdAt||"").toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",asChild:!0,children:e.jsxs(Rt,{href:"/orders",children:[e.jsx(Gc,{className:"mr-2 h-4 w-4"}),"Back to Orders"]})}),e.jsxs(P,{onClick:()=>a(!0),children:[e.jsx(Ea,{className:"mr-2 h-4 w-4"}),"Edit Order"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Details"}),e.jsx(ee,{children:"Specifications and pricing information"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Frame"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.frameName||l.frameId||"None"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Material"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.frameMaterial||"Standard"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Mat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.matColorName||l.matColorId||"None"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Glass"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.glassOptionName||l.glassOptionId||"None"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Image Size"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.artworkWidth,'"  ',l.artworkHeight,'"']})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Mat Width"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.matWidth,'" all around']})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Quantity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.quantity||1})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.artworkDescription||"No description"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Art Type"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.artworkType||"Not specified"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                    ${l.status==="pending"?"bg-yellow-100 text-yellow-800":l.status==="in_progress"?"bg-blue-100 text-blue-800":l.status==="completed"?"bg-green-100 text-green-800":l.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:((g=l.status)==null?void 0:g.charAt(0).toUpperCase())+((f=l.status)==null?void 0:f.slice(1).replace("_"," "))}),e.jsxs(qe,{value:l.status||"pending",onValueChange:x,disabled:m.isPending,children:[e.jsx(Ve,{className:"w-[140px]",children:e.jsx(ze,{placeholder:"Change status"})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"pending",children:"Pending"}),e.jsx(te,{value:"in_progress",children:"In Progress"}),e.jsx(te,{value:"completed",children:"Completed"}),e.jsx(te,{value:"cancelled",children:"Cancelled"})]})]})]})]}),i&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-1 text-foreground",children:"QR Code"}),e.jsx("div",{className:"bg-white p-2 rounded inline-block",children:e.jsx(Eu,{value:i,size:128,level:"H"})})]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subtotal"}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["$",parseFloat(l.subtotal||"0").toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax"}),e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["$",parseFloat(l.tax||"0").toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center font-medium mt-2",children:[e.jsx("p",{className:"text-foreground",children:"Total"}),e.jsxs("p",{className:"text-foreground",children:["$",parseFloat(l.total||"0").toFixed(2)]})]})]})]}),e.jsx(ht,{className:"border-t pt-6",children:e.jsx(P,{variant:"outline",className:"w-full",asChild:!0,children:e.jsxs(Rt,{href:`/order-progress/${l.id}`,children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Track Progress"]})})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(vC,{order:l,showHistory:!1}),e.jsxs("div",{className:"mt-6",children:[e.jsx(BC,{orderId:l.id}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status History"}),e.jsx(hV,{orderId:l.id})]}),e.jsx("div",{className:"mt-6",children:e.jsx(pV,{orderId:l.id})})]})]})]}),e.jsx(p0,{isOpen:n,onClose:()=>a(!1),order:l})]}):e.jsx("div",{className:"container mx-auto py-10 space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Not Found"}),e.jsx(ee,{children:"We couldn't find the order you're looking for."})]}),e.jsxs(H,{className:"flex flex-col items-center justify-center py-10",children:[e.jsx($t,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-center mb-6",children:"The order you're looking for doesn't exist or you don't have permission to view it."}),e.jsx(P,{asChild:!0,children:e.jsxs(Rt,{href:"/orders",children:[e.jsx(Gc,{className:"mr-2 h-4 w-4"}),"Return to Orders"]})})]})]})})}function gV(){const[s,t]=p.useState("create"),{toast:r}=Be(),n=ss(),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(""),[m,x]=p.useState("7"),[g,f]=p.useState(""),[v,y]=p.useState(""),[j,b]=p.useState(!1),{data:k}=ue({queryKey:["/api/customers"]}),{data:S}=ue({queryKey:["/api/orders"]}),[D,T]=p.useState(""),[C,E]=p.useState(""),[I,w]=p.useState(null),{data:N,isLoading:A}=ue({queryKey:["/api/payment-links"],retry:1}),F=Ae({mutationFn:async M=>(await le("POST","/api/payment-links",M)).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/payment-links"]}),r({title:"Payment link created",description:"The payment link has been created successfully."}),i(""),l(""),d(""),h(""),x("7"),f(""),y(""),b(!1),t("view")},onError:M=>{r({title:"Error creating payment link",description:M.message||"There was an error creating the payment link.",variant:"destructive"})}}),Z=Ae({mutationFn:async({id:M,email:re,phone:Ce})=>(await le("POST",`/api/payment-links/${M}/notify`,{email:re,phone:Ce,notificationType:re&&Ce?"both":re?"email":"sms"})).json(),onSuccess:M=>{r({title:"Notification sent",description:"The payment link notification has been sent."}),T(""),E(""),w(null)},onError:M=>{r({title:"Error sending notification",description:M.message||"There was an error sending the notification.",variant:"destructive"})}}),Q=M=>{if(M.preventDefault(),!a||isNaN(parseFloat(a))||parseFloat(a)<=0){r({title:"Invalid amount",description:"Please enter a valid payment amount.",variant:"destructive"});return}const re={amount:parseFloat(a),expiresInDays:parseInt(m),sendNotification:j};o&&(re.description=o),u&&!isNaN(parseInt(u))&&(re.customerId=parseInt(u)),j&&(g&&(re.email=g),v&&(re.phone=v)),F.mutate(re)},L=M=>{if(!D&&!C){r({title:"Missing contact information",description:"Please provide either an email address or phone number to send the notification.",variant:"destructive"});return}Z.mutate({id:M,email:D||void 0,phone:C||void 0})},ae=M=>`${window.location.origin}/payment/${M}`;return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Payment Links"}),e.jsxs(Bt,{defaultValue:"create",value:s,onValueChange:t,children:[e.jsxs(Lt,{className:"mb-4",children:[e.jsx(ve,{value:"create",children:"Create Payment Link"}),e.jsx(ve,{value:"view",children:"View Payment Links"})]}),e.jsx(Ee,{value:"create",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Create New Payment Link"}),e.jsx(ee,{children:"Generate a payment link for a custom amount that can be sent to customers."})]}),e.jsxs("form",{onSubmit:Q,children:[e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"amount",children:"Amount ($)"}),e.jsx(q,{id:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"Amount",value:a,onChange:M=>i(M.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"expiresInDays",children:"Expires In (days)"}),e.jsx(q,{id:"expiresInDays",type:"number",min:"1",placeholder:"7",value:m,onChange:M=>x(M.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"description",children:"Description"}),e.jsx(cr,{id:"description",placeholder:"Payment description",value:o,onChange:M=>l(M.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"customerName",children:"Customer Name"}),e.jsxs(qe,{value:c,onValueChange:d,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select customer"})}),e.jsx(Ue,{children:Array.isArray(k)&&k.map(M=>e.jsx(te,{value:M.name,children:M.name},M.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"selectedOrderId",children:"Related Order (optional)"}),e.jsxs(qe,{value:u,onValueChange:h,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select order"})}),e.jsx(Ue,{children:Array.isArray(S)&&S.map(M=>e.jsxs(te,{value:M.id.toString(),children:["Order #",M.id," - $",M.total]},M.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"sendNotification",checked:j,onCheckedChange:M=>b(!!M)}),e.jsx(O,{htmlFor:"sendNotification",children:"Send notification immediately"})]}),j&&e.jsxs("div",{className:"pl-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",placeholder:"customer@example.com",value:g,onChange:M=>f(M.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"phone",children:"Phone Number"}),e.jsx(q,{id:"phone",type:"tel",placeholder:"+1 (123) 456-7890",value:v,onChange:M=>y(M.target.value)})]})]})]})]}),e.jsx(ht,{children:e.jsx(P,{type:"submit",disabled:F.isPending,children:F.isPending?"Creating...":"Create Payment Link"})})]})]})}),e.jsx(Ee,{value:"view",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Payment Links"}),e.jsx(ee,{children:"View and manage your existing payment links."})]}),e.jsx(H,{children:A?e.jsx("p",{children:"Loading payment links..."}):!N||N.length===0?e.jsx("p",{children:"No payment links found. Create one to get started."}):e.jsx("div",{className:"space-y-6",children:N.map(M=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Amount"}),e.jsx("p",{className:"text-lg",children:Pn(parseFloat(M.amount))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Status"}),e.jsx("p",{className:`font-medium ${M.used?"text-green-600":"text-amber-600"}`,children:M.used?`Used (${M.paymentStatus})`:"Pending"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Description"}),e.jsx("p",{children:M.description||"No description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Created"}),e.jsx("p",{children:new Date(M.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Expires"}),e.jsx("p",{children:new Date(M.expiresAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Payment URL"}),e.jsxs("div",{className:"flex mt-1",children:[e.jsx(q,{value:ae(M.token),readOnly:!0,className:"mr-2"}),e.jsx(P,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(ae(M.token)),r({title:"URL copied",description:"Payment link URL copied to clipboard"})},children:"Copy"})]})]}),!M.used&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Send Notification"}),I===M.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:`notifyEmail-${M.id}`,children:"Email"}),e.jsx(q,{id:`notifyEmail-${M.id}`,type:"email",placeholder:"customer@example.com",value:D,onChange:re=>T(re.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:`notifyPhone-${M.id}`,children:"Phone Number"}),e.jsx(q,{id:`notifyPhone-${M.id}`,type:"tel",placeholder:"+1 (123) 456-7890",value:C,onChange:re=>E(re.target.value)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{onClick:()=>L(M.id),disabled:Z.isPending,children:Z.isPending?"Sending...":"Send"}),e.jsx(P,{variant:"outline",onClick:()=>{w(null),T(""),E("")},children:"Cancel"})]})]}):e.jsx(P,{variant:"outline",onClick:()=>w(M.id),children:"Send to Customer"})]})]},M.id))})})]})})]})]})}const vV=Zw("pk_live_51QC3rtP1hEy5reEdyiTbL1JCiuLRsrZmHHk83DW17gkXCYfPTBJcxMHjV35TZcjlvOuXDqDxd4ckktLBtwAWtl4K00o0kkZ50c"),yV=({token:s,amount:t,description:r})=>{const n=nN(),a=sN(),{toast:i}=Be(),[o,l]=p.useState(!1),c=async d=>{if(d.preventDefault(),!(!n||!a)){l(!0);try{const{paymentIntent:u,error:h}=await n.confirmPayment({elements:a,confirmParams:{return_url:`${window.location.origin}/payment-status?token=${s}`},redirect:"if_required"});if(h){i({title:"Payment Failed",description:h.message||"An error occurred while processing your payment.",variant:"destructive"}),l(!1);return}if(u&&u.status==="succeeded")try{console.log("Payment succeeded, marking payment link as used");const m=await le("POST",`/api/payment/${s}/complete`,{paymentIntentId:u.id,status:u.status});m.ok?console.log("Payment completion successful"):console.error("Error completing payment:",await m.text()),i({title:"Payment Successful",description:"Your payment has been processed successfully."}),window.location.href=`/payment-status?status=success&token=${s}`}catch(m){console.error("Error completing payment:",m),i({title:"Payment Status Update Failed",description:"Your payment processed, but we had trouble updating our records.",variant:"destructive"}),window.location.href=`/payment-status?status=success&token=${s}`}else window.location.href=`/payment-status?status=processing&token=${s}`}catch(u){i({title:"Error",description:u.message||"An unexpected error occurred.",variant:"destructive"}),l(!1)}}};return e.jsxs("form",{onSubmit:c,className:"mt-4",children:[e.jsx(aN,{className:"mb-6"}),e.jsx(P,{type:"submit",disabled:!n||o,className:"w-full",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):`Pay ${Pn(parseFloat(t))}`})]})},jV=()=>{const[,s]=_P("/payment/:token"),{toast:t}=Be(),r=(s==null?void 0:s.token)||"",[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(null);return p.useEffect(()=>{(async()=>{try{console.log(`Attempting to validate token: ${r}`);const m=await le("GET",`/api/payment/${r}/validate`);if(!m.ok){const g=await m.text();console.error("Validation response not OK:",g),o("This payment link is invalid or has expired."),a(!1);return}const x=await m.json();if(console.log("Validation response:",x),!x.valid){o(x.message||"This payment link is invalid or has expired."),a(!1);return}if(!x.canProcess){o(x.message||"Unable to process this payment at the moment."),a(!1);return}c(x.clientSecret),u(x.paymentLink),a(!1)}catch(m){console.error("Error validating payment link:",m),o("Failed to validate payment link. Please try again later."),a(!1)}})()},[r,t]),n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary"})}):i?e.jsx("div",{className:"container mx-auto py-12 max-w-md",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{className:"text-destructive",children:"Payment Error"}),e.jsx(ee,{children:"We couldn't process your payment."})]}),e.jsx(H,{children:e.jsx("p",{className:"text-destructive",children:i})}),e.jsx(ht,{children:e.jsx(P,{variant:"outline",onClick:()=>window.location.href="/",className:"w-full",children:"Return to Home"})})]})}):e.jsx("div",{className:"container mx-auto py-12 max-w-md",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Complete Your Payment"}),e.jsx(ee,{children:"Please provide your payment details to complete the transaction."})]}),e.jsxs(H,{children:[d&&e.jsxs("div",{className:"mb-6 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("span",{className:"text-lg font-semibold",children:Pn(parseFloat(d.amount))})]}),d.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("p",{className:"mt-1",children:d.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Expires:"}),e.jsx("p",{className:"mt-1",children:new Date(d.expiresAt).toLocaleDateString()})]})]}),l&&d&&e.jsx(Fu,{stripe:vV,options:{clientSecret:l,appearance:{theme:"stripe"}},children:e.jsx(yV,{token:r,amount:d.amount,description:d.description})})]})]})})};var lT=["PageUp","PageDown"],cT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Va="Slider",[Jd,bV,wV]=Vi(Va),[uT,oU]=fs(Va,[wV]),[NV,ic]=uT(Va),mT=p.forwardRef((s,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:u,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:x=!1,form:g,...f}=s,v=p.useRef(new Set),y=p.useRef(0),b=o==="horizontal"?SV:CV,[k=[],S]=ms({prop:u,defaultProp:d,onChange:w=>{var A;(A=[...v.current][y.current])==null||A.focus(),h(w)}}),D=p.useRef(k);function T(w){const N=DV(k,w);I(w,N)}function C(w){I(w,y.current)}function E(){const w=D.current[y.current];k[y.current]!==w&&m(k)}function I(w,N,{commit:A}={commit:!1}){const F=RV(i),Z=OV(Math.round((w-n)/i)*i+n,F),Q=ji(Z,[n,a]);S((L=[])=>{const ae=PV(L,Q,N);if(_V(ae,c*i)){y.current=ae.indexOf(Q);const M=String(ae)!==String(L);return M&&A&&m(ae),M?ae:L}else return L})}return e.jsx(NV,{scope:s.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:y,thumbs:v.current,values:k,orientation:o,form:g,children:e.jsx(Jd.Provider,{scope:s.__scopeSlider,children:e.jsx(Jd.Slot,{scope:s.__scopeSlider,children:e.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...f,ref:t,onPointerDown:ge(f.onPointerDown,()=>{l||(D.current=k)}),min:n,max:a,inverted:x,onSlideStart:l?void 0:T,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:E,onHomeKeyDown:()=>!l&&I(n,0,{commit:!0}),onEndKeyDown:()=>!l&&I(a,k.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:N})=>{if(!l){const Z=lT.includes(w.key)||w.shiftKey&&cT.includes(w.key)?10:1,Q=y.current,L=k[Q],ae=i*Z*N;I(L+ae,Q,{commit:!0})}}})})})})});mT.displayName=Va;var[hT,pT]=uT(Va,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SV=p.forwardRef((s,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=s,[h,m]=p.useState(null),x=We(t,b=>m(b)),g=p.useRef(),f=On(a),v=f==="ltr",y=v&&!i||!v&&i;function j(b){const k=g.current||h.getBoundingClientRect(),S=[0,k.width],T=Qm(S,y?[r,n]:[n,r]);return g.current=k,T(b-k.left)}return e.jsx(hT,{scope:s.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(fT,{dir:f,"data-orientation":"horizontal",...u,ref:x,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const k=j(b.clientX);o==null||o(k)},onSlideMove:b=>{const k=j(b.clientX);l==null||l(k)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:b=>{const S=dT[y?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:S?-1:1})}})})}),CV=p.forwardRef((s,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=s,u=p.useRef(null),h=We(t,u),m=p.useRef(),x=!a;function g(f){const v=m.current||u.current.getBoundingClientRect(),y=[0,v.height],b=Qm(y,x?[n,r]:[r,n]);return m.current=v,b(f-v.top)}return e.jsx(hT,{scope:s.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:e.jsx(fT,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:f=>{const v=g(f.clientY);i==null||i(v)},onSlideMove:f=>{const v=g(f.clientY);o==null||o(v)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:f=>{const y=dT[x?"from-bottom":"from-top"].includes(f.key);c==null||c({event:f,direction:y?-1:1})}})})}),fT=p.forwardRef((s,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=s,u=ic(Va,r);return e.jsx(Se.span,{...d,ref:t,onKeyDown:ge(s.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):lT.concat(cT).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ge(s.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(m)?m.focus():n(h)}),onPointerMove:ge(s.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:ge(s.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),xT="SliderTrack",gT=p.forwardRef((s,t)=>{const{__scopeSlider:r,...n}=s,a=ic(xT,r);return e.jsx(Se.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});gT.displayName=xT;var eu="SliderRange",vT=p.forwardRef((s,t)=>{const{__scopeSlider:r,...n}=s,a=ic(eu,r),i=pT(eu,r),o=p.useRef(null),l=We(t,o),c=a.values.length,d=a.values.map(m=>jT(m,a.min,a.max)),u=c>1?Math.min(...d):0,h=100-Math.max(...d);return e.jsx(Se.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...s.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});vT.displayName=eu;var tu="SliderThumb",yT=p.forwardRef((s,t)=>{const r=bV(s.__scopeSlider),[n,a]=p.useState(null),i=We(t,l=>a(l)),o=p.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return e.jsx(kV,{...s,ref:i,index:o})}),kV=p.forwardRef((s,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=s,o=ic(tu,r),l=pT(tu,r),[c,d]=p.useState(null),u=We(t,j=>d(j)),h=c?o.form||!!c.closest("form"):!0,m=yl(c),x=o.values[n],g=x===void 0?0:jT(x,o.min,o.max),f=EV(n,o.values.length),v=m==null?void 0:m[l.size],y=v?AV(v,g,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${y}px)`},children:[e.jsx(Jd.ItemSlot,{scope:s.__scopeSlider,children:e.jsx(Se.span,{role:"slider","aria-label":s["aria-label"]||f,"aria-valuemin":o.min,"aria-valuenow":x,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:x===void 0?{display:"none"}:s.style,onFocus:ge(s.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&e.jsx(TV,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:x},n)]})});yT.displayName=tu;var TV=s=>{const{value:t,...r}=s,n=p.useRef(null),a=Aa(t);return p.useEffect(()=>{const i=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(i,t),i.dispatchEvent(d)}},[a,t]),e.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function PV(s=[],t,r){const n=[...s];return n[r]=t,n.sort((a,i)=>a-i)}function jT(s,t,r){const i=100/(r-t)*(s-t);return ji(i,[0,100])}function EV(s,t){return t>2?`Value ${s+1} of ${t}`:t===2?["Minimum","Maximum"][s]:void 0}function DV(s,t){if(s.length===1)return 0;const r=s.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function AV(s,t,r){const n=s/2,i=Qm([0,50],[0,n]);return(n-i(t)*r)*r}function IV(s){return s.slice(0,-1).map((t,r)=>s[r+1]-t)}function _V(s,t){if(t>0){const r=IV(s);return Math.min(...r)>=t}return!0}function Qm(s,t){return r=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(s[1]-s[0]);return t[0]+n*(r-s[0])}}function RV(s){return(String(s).split(".")[1]||"").length}function OV(s,t){const r=Math.pow(10,t);return Math.round(s*r)/r}var bT=mT,MV=gT,FV=vT,LV=yT;const ri=p.forwardRef(({className:s,...t},r)=>e.jsxs(bT,{ref:r,className:J("relative flex w-full touch-none select-none items-center",s),...t,children:[e.jsx(MV,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(FV,{className:"absolute h-full bg-primary"})}),e.jsx(LV,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ri.displayName=bT.displayName;const Ar=[{id:"mat-1",name:"White",color:"#FFFFFF",category:"Standard",manufacturer:"Crescent",price:"2.50",code:"WH123",description:"Pure white matboard"},{id:"mat-2",name:"Black",color:"#000000",category:"Standard",manufacturer:"Crescent",price:"2.50",code:"BK123",description:"Deep black matboard"},{id:"mat-3",name:"Soft Blue",color:"#A4C2F4",category:"Colors",manufacturer:"Crescent",price:"3.00",code:"BL123",description:"Gentle blue matboard"},{id:"mat-4",name:"Forest Green",color:"#38761D",category:"Colors",manufacturer:"Crescent",price:"3.00",code:"GR123",description:"Rich green matboard"},{id:"mat-5",name:"Burgundy",color:"#85200C",category:"Colors",manufacturer:"Crescent",price:"3.00",code:"BU123",description:"Deep red matboard"},{id:"mat-6",name:"Cream",color:"#F9F2E7",category:"Standard",manufacturer:"Crescent",price:"2.50",code:"CR123",description:"Subtle cream matboard"}],Qa=[{id:"frame-1",name:"Classic Black",width:"1.25",depth:"0.75",color:"#000000",manufacturer:"Larson",material:"Wood",price:"12.50",catalogImage:"/images/frame-black.jpg",edgeTexture:null,corner:null},{id:"frame-2",name:"Gold Leaf",width:"1.5",depth:"0.75",color:"#D4AF37",manufacturer:"Larson",material:"Metal",price:"15.00",catalogImage:"/images/frame-gold.jpg",edgeTexture:null,corner:null},{id:"frame-3",name:"Walnut",width:"1.0",depth:"0.5",color:"#5C4033",manufacturer:"Roma",material:"Wood",price:"10.00",catalogImage:"/images/frame-walnut.jpg",edgeTexture:null,corner:null},{id:"frame-4",name:"Silver Modern",width:"0.75",depth:"0.5",color:"#C0C0C0",manufacturer:"Nielsen",material:"Metal",price:"9.50",catalogImage:"/images/frame-silver.jpg",edgeTexture:null,corner:null}],$V=()=>{const[s,t]=p.useState(16),[r,n]=p.useState(20),[a,i]=p.useState(!0),[o,l]=p.useState(!1),[c,d]=p.useState([{matboard:Ar[0],position:3,width:2,offset:0},{matboard:Ar[2],position:2,width:.5,offset:.25},{matboard:Ar[4],position:1,width:.25,offset:.25}]),[u,h]=p.useState([{frame:Qa[0],position:1,distance:0},{frame:Qa[1],position:2,distance:.5}]),m=(f,v)=>{const y=Ar.find(j=>j.id===v);if(y){const j=c.map(b=>b.position===f?{...b,matboard:y}:b);d(j)}},x=(f,v)=>{const y=c.map(j=>j.position===f?{...j,width:v}:j);d(y)},g=(f,v)=>{const y=Qa.find(j=>j.id===v);if(y){const j=u.map(b=>b.position===f?{...b,frame:y}:b);h(j)}};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Mat Border Enhancement Demo"}),e.jsx("p",{className:"mb-8 text-muted-foreground",children:"This demo shows the new thin contrast lines along the inside edges of mats, making it easier to distinguish between different mats when using multiple mats."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-7",children:e.jsxs(V,{className:"shadow-md",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Frame Preview"}),e.jsx(ee,{children:"See how your artwork will look with the selected mats and frames"})]}),e.jsx(H,{className:"flex justify-center items-center",children:e.jsx(sw,{frames:o?u:[u[0]],mats:a?c:[c[0]],artworkWidth:s,artworkHeight:r,artworkImage:null,useMultipleMats:a,useMultipleFrames:o})})]})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs(V,{className:"shadow-md",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Configuration"}),e.jsx(ee,{children:"Customize your framing options"})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Artwork Dimensions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"width",children:"Width (inches)"}),e.jsx(q,{id:"width",type:"number",value:s,onChange:f=>t(Number(f.target.value)),min:1,max:60})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"height",children:"Height (inches)"}),e.jsx(q,{id:"height",type:"number",value:r,onChange:f=>n(Number(f.target.value)),min:1,max:60})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{htmlFor:"multiple-mats",children:"Use Multiple Mats"}),e.jsx(br,{id:"multiple-mats",checked:a,onCheckedChange:i})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{htmlFor:"multiple-frames",children:"Use Multiple Frames"}),e.jsx(br,{id:"multiple-frames",checked:o,onCheckedChange:l})]})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Mat Configuration"}),e.jsxs("div",{className:"space-y-3 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium",children:"Bottom Mat (closest to artwork)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"bottom-mat-color",children:"Color"}),e.jsxs(qe,{value:c[0].matboard.id.toString(),onValueChange:f=>m(3,Number(f)),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a color"})}),e.jsx(Ue,{children:Ar.map(f=>e.jsx(te,{value:f.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs(O,{htmlFor:"bottom-mat-width",children:["Width: ",c[0].width,'"']})}),e.jsx(ri,{id:"bottom-mat-width",min:1,max:4,step:.25,value:[c[0].width],onValueChange:f=>x(3,f[0])})]})]}),e.jsxs("div",{className:"space-y-3 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium",children:"Middle Mat"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"middle-mat-color",children:"Color"}),e.jsxs(qe,{value:c[1].matboard.id,onValueChange:f=>m(2,f),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a color"})}),e.jsx(Ue,{children:Ar.map(f=>e.jsx(te,{value:f.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs(O,{htmlFor:"middle-mat-width",children:["Width: ",c[1].width,'"']})}),e.jsx(ri,{id:"middle-mat-width",min:.25,max:1,step:.25,value:[c[1].width],onValueChange:f=>x(2,f[0])})]})]}),e.jsxs("div",{className:"space-y-3 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium",children:"Top Mat (furthest from artwork)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"top-mat-color",children:"Color"}),e.jsxs(qe,{value:c[2].matboard.id,onValueChange:f=>m(1,f),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a color"})}),e.jsx(Ue,{children:Ar.map(f=>e.jsx(te,{value:f.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs(O,{htmlFor:"top-mat-width",children:["Width: ",c[2].width,'"']})}),e.jsx(ri,{id:"top-mat-width",min:.25,max:1,step:.25,value:[c[2].width],onValueChange:f=>x(1,f[0])})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Single Mat Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"single-mat-color",children:"Color"}),e.jsxs(qe,{value:c[0].matboard.id.toString(),onValueChange:f=>m(3,Number(f)),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a color"})}),e.jsx(Ue,{children:Ar.map(f=>e.jsx(te,{value:f.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs(O,{htmlFor:"single-mat-width",children:["Width: ",c[0].width,'"']})}),e.jsx(ri,{id:"single-mat-width",min:1,max:4,step:.25,value:[c[0].width],onValueChange:f=>x(3,f[0])})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Frame Configuration"}),e.jsxs("div",{className:"space-y-3 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium",children:"Inner Frame"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"inner-frame",children:"Style"}),e.jsxs(qe,{value:u[0].frame.id,onValueChange:f=>g(1,f),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a frame"})}),e.jsx(Ue,{children:Qa.map(f=>e.jsx(te,{value:f.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]})]}),o&&e.jsxs("div",{className:"space-y-3 p-3 border rounded-md",children:[e.jsx("h4",{className:"font-medium",children:"Outer Frame"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"outer-frame",children:"Style"}),e.jsxs(qe,{value:u[1].frame.id,onValueChange:f=>g(2,f),children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a frame"})}),e.jsx(Ue,{children:Qa.map(f=>e.jsx(te,{value:f.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm border",style:{backgroundColor:f.color}}),e.jsx("span",{children:f.name})]})},f.id))})]})]})]})]})]}),e.jsx(ht,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notice the thin contrast lines along the inside edges of each mat, making it easier to distinguish the different mat layers."})})]})})]})]})};function BV(){const{toast:s}=Be(),[t,r]=p.useState([{name:"Database Connection",status:"checking",message:"Checking database connectivity...",lastChecked:new Date},{name:"Larson Catalog API",status:"checking",message:"Testing Larson wholesale catalog...",lastChecked:new Date},{name:"Nielsen Catalog API",status:"checking",message:"Testing Nielsen catalog...",lastChecked:new Date},{name:"Roma Catalog API",status:"checking",message:"Testing Roma catalog...",lastChecked:new Date},{name:"Frame Design Image System",status:"checking",message:"Testing frame design image saving...",lastChecked:new Date}]),[n,a]=p.useState(!1),[i,o]=p.useState(!0),l=async()=>{a(!0);const m=[];try{const f=performance.now(),v=await fetch("/api/auth/status"),y=performance.now();v.ok?m.push({name:"Database Connection",status:"healthy",message:"Database is connected and responding",lastChecked:new Date,responseTime:Math.round(y-f)}):m.push({name:"Database Connection",status:"error",message:"Database connection failed",lastChecked:new Date})}catch{m.push({name:"Database Connection",status:"error",message:"Unable to connect to database",lastChecked:new Date})}try{const f=performance.now(),v=await fetch("/api/vendor-catalog/larson"),y=performance.now();if(v.ok){const j=await v.json();j&&j.length>0?m.push({name:"Larson Catalog API",status:"healthy",message:`Larson catalog loaded: ${j.length} items`,lastChecked:new Date,responseTime:Math.round(y-f)}):m.push({name:"Larson Catalog API",status:"warning",message:"Larson catalog is empty",lastChecked:new Date,responseTime:Math.round(y-f)})}else m.push({name:"Larson Catalog API",status:"error",message:"Larson catalog API failed",lastChecked:new Date})}catch{m.push({name:"Larson Catalog API",status:"error",message:"Unable to reach Larson catalog",lastChecked:new Date})}try{const f=performance.now(),v=await fetch("/api/vendor-catalog/nielsen"),y=performance.now();if(v.ok){const j=await v.json();j&&j.length>0?m.push({name:"Nielsen Catalog API",status:"healthy",message:`Nielsen catalog loaded: ${j.length} items`,lastChecked:new Date,responseTime:Math.round(y-f)}):m.push({name:"Nielsen Catalog API",status:"warning",message:"Nielsen catalog is empty",lastChecked:new Date,responseTime:Math.round(y-f)})}else m.push({name:"Nielsen Catalog API",status:"error",message:"Nielsen catalog API failed",lastChecked:new Date})}catch{m.push({name:"Nielsen Catalog API",status:"error",message:"Unable to reach Nielsen catalog",lastChecked:new Date})}try{const f=performance.now(),v=await fetch("/api/vendor-catalog/roma"),y=performance.now();if(v.ok){const j=await v.json();j&&j.length>0?m.push({name:"Roma Catalog API",status:"healthy",message:`Roma catalog loaded: ${j.length} items`,lastChecked:new Date,responseTime:Math.round(y-f)}):m.push({name:"Roma Catalog API",status:"warning",message:"Roma catalog is empty",lastChecked:new Date,responseTime:Math.round(y-f)})}else m.push({name:"Roma Catalog API",status:"error",message:"Roma catalog API failed",lastChecked:new Date})}catch{m.push({name:"Roma Catalog API",status:"error",message:"Unable to reach Roma catalog",lastChecked:new Date})}try{const f=document.createElement("canvas"),v=f.getContext("2d");if(v){f.width=100,f.height=100,v.fillStyle="#000",v.fillRect(0,0,100,100);const y=f.toDataURL("image/jpeg",.85);y&&y.startsWith("data:image/")?m.push({name:"Frame Design Image System",status:"healthy",message:"Frame design image saving is working",lastChecked:new Date}):m.push({name:"Frame Design Image System",status:"error",message:"Frame design image generation failed",lastChecked:new Date})}else m.push({name:"Frame Design Image System",status:"error",message:"Canvas context not available",lastChecked:new Date})}catch{m.push({name:"Frame Design Image System",status:"error",message:"Frame design image system error",lastChecked:new Date})}r(m),a(!1);const x=m.filter(f=>f.status==="error").length,g=m.filter(f=>f.status==="warning").length;x>0?s({title:"System Health Alert",description:`${x} critical issue(s) detected`,variant:"destructive"}):g>0?s({title:"System Health Warning",description:`${g} warning(s) detected`,variant:"default"}):s({title:"System Health Good",description:"All systems are running smoothly",variant:"default"})};p.useEffect(()=>{if(i){l();const m=setInterval(l,3e4);return()=>clearInterval(m)}},[i]);const c=m=>{switch(m){case"healthy":return e.jsx(Ks,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx($t,{className:"h-5 w-5 text-yellow-500"});case"error":return e.jsx(Ln,{className:"h-5 w-5 text-red-500"});case"checking":return e.jsx(nr,{className:"h-5 w-5 text-blue-500 animate-spin"});default:return e.jsx($t,{className:"h-5 w-5 text-gray-500"})}},d=m=>{switch(m){case"healthy":return e.jsx(pe,{variant:"default",className:"bg-green-100 text-green-800",children:"Healthy"});case"warning":return e.jsx(pe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Warning"});case"error":return e.jsx(pe,{variant:"destructive",children:"Error"});case"checking":return e.jsx(pe,{variant:"outline",children:"Checking..."});default:return e.jsx(pe,{variant:"outline",children:"Unknown"})}},u=m=>m.includes("Database")?e.jsx(Nl,{className:"h-4 w-4"}):m.includes("Image")?e.jsx(pi,{className:"h-4 w-4"}):e.jsx(mu,{className:"h-4 w-4"}),h=t.every(m=>m.status==="healthy")?"healthy":t.some(m=>m.status==="error")?"error":"warning";return e.jsxs(V,{className:"w-full",children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c(h),e.jsx(G,{children:"System Health Monitor"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>o(!i),children:i?"Auto: ON":"Auto: OFF"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:l,disabled:n,children:[n?e.jsx(nr,{className:"h-4 w-4 animate-spin"}):e.jsx(nr,{className:"h-4 w-4"}),"Refresh"]})]})]})}),e.jsxs(H,{children:[e.jsx("div",{className:"space-y-4",children:t.map((m,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u(m.name),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:m.name}),d(m.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.message}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last checked: ",m.lastChecked.toLocaleTimeString(),m.responseTime&&` (${m.responseTime}ms)`]})]})]}),c(m.status)]},x))}),e.jsx("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This monitor continuously checks your framing business's critical systems to ensure smooth operation when serving customers. Auto-refresh checks every 30 seconds, or click Refresh for immediate updates."})})]})]})}function VV(){return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"System Health Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-time monitoring of your framing business's critical systems"})]}),e.jsx(BV,{})]})}const UV=({orderId:s,customerId:t,defaultMessage:r})=>{const[n,a]=p.useState(r||""),[i,o]=p.useState("order_update"),[l,c]=p.useState(""),[d,u]=p.useState(""),[h,m]=p.useState(!1),[x,g]=p.useState(null),f={order_update:"Hi! Your custom frame order has been updated. We're currently working on your piece and making great progress!",completion_notice:"Great news! Your custom frame is ready for pickup. Please come by the shop at your convenience.",estimate_update:"We wanted to update you on the timeline for your custom frame. Your piece is progressing nicely!",custom:""},v=async()=>{if(!n.trim()){js({title:"Message Required",description:"Please enter a message to send",variant:"destructive"});return}m(!0);try{if((await fetch("/api/test/test-customer-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t||1,orderId:s||Math.floor(Math.random()*1e3),type:i,email:l||"customer@jaysframes.com",discordUsername:d,message:n})})).ok)js({title:"Notification Sent!",description:"Customer has been notified via Discord and email"}),g(new Date().toLocaleTimeString()),a("");else throw new Error("Failed to send notification")}catch{js({title:"Failed to Send",description:"There was an error sending the notification",variant:"destructive"})}finally{m(!1)}},y=j=>{o(j),a(f[j])};return e.jsxs(V,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(dj,{className:"w-5 h-5"}),"Quick Customer Notification"]}),x&&e.jsxs(pe,{variant:"outline",className:"w-fit",children:[e.jsx(Ks,{className:"w-3 h-3 mr-1"}),"Last sent: ",x]})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(O,{className:"text-sm font-medium mb-2 block",children:"Quick Templates"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(f).map(([j,b])=>e.jsx(P,{variant:"outline",size:"sm",onClick:()=>y(j),className:"text-xs",children:j.replace("_"," ").replace(/\b\w/g,k=>k.toUpperCase())},j))})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"messageType",children:"Notification Type"}),e.jsxs(qe,{value:i,onValueChange:j=>o(j),children:[e.jsx(Ve,{children:e.jsx(ze,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"order_update",children:"Order Progress Update"}),e.jsx(te,{value:"completion_notice",children:"Ready for Pickup"}),e.jsx(te,{value:"estimate_update",children:"Timeline Update"}),e.jsx(te,{value:"custom",children:"Custom Message"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"customerEmail",children:"Customer Email"}),e.jsx(q,{id:"customerEmail",value:l,onChange:j=>c(j.target.value),placeholder:"customer@example.com"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"discordUsername",children:"Discord Username (Optional)"}),e.jsx(q,{id:"discordUsername",value:d,onChange:j=>u(j.target.value),placeholder:"@username"})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"message",children:"Message"}),e.jsx(cr,{id:"message",value:n,onChange:j=>a(j.target.value),placeholder:"Enter your message to the customer...",rows:4})]}),e.jsx(P,{onClick:v,disabled:h,className:"w-full",size:"lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Send Notification"]})}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-start gap-2",children:[e.jsx($t,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"This will send notifications via Discord (if username provided), email, and in-app notifications. SMS will be available once Twilio approval is complete."})]})]})]})};function HV(){const[s,t]=p.useState(!1),[r,n]=p.useState({customerId:"",orderId:"",type:"order_update",email:"",phone:"",discordUserId:"",message:"",title:"",channels:{email:!0,discord:!1,inApp:!0,sms:!1}}),a=[{value:"order_update",label:"Order Status Update"},{value:"completion",label:"Order Completion Notice"},{value:"estimate",label:"Estimate Update"},{value:"custom",label:"Custom Message"}],i=(d,u)=>{n(h=>({...h,[d]:u}))},o=(d,u)=>{n(h=>({...h,channels:{...h.channels,[d]:u}}))},l=async(d=!1)=>{t(!0);try{const u=d?"/api/test-notifications/test-customer-notification":"/api/notifications/send-customer-notification",h={customerId:parseInt(r.customerId)||1,orderId:parseInt(r.orderId)||123,type:r.type,email:r.email,phone:r.phone,discordUserId:r.discordUserId,message:r.message,title:r.title,channels:r.channels},m=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),x=await m.json();if(m.ok)js({title:d?"Test Notification Sent!":"Notification Sent!",description:`Successfully sent ${r.type} notification`,variant:"default"});else throw new Error(x.error||"Failed to send notification")}catch(u){js({title:"Error",description:u instanceof Error?u.message:"Failed to send notification",variant:"destructive"})}finally{t(!1)}},c=()=>{n({customerId:"1",orderId:"123",type:"order_update",email:"test@jaysframes.com",phone:"",discordUserId:"",message:"Your custom frame is now being crafted by our artisans.",title:"Frame Production Update",channels:{email:!0,discord:!1,inApp:!0,sms:!1}})};return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Fr,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Notification Center"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Send Customer Notification"}),e.jsx(CardDescription,{children:"Send notifications to customers via email, Discord, SMS, or in-app alerts"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"customerId",children:"Customer ID"}),e.jsx(q,{id:"customerId",value:r.customerId,onChange:d=>i("customerId",d.target.value),placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"orderId",children:"Order ID"}),e.jsx(q,{id:"orderId",value:r.orderId,onChange:d=>i("orderId",d.target.value),placeholder:"123"})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"type",children:"Notification Type"}),e.jsxs(qe,{value:r.type,onValueChange:d=>i("type",d),children:[e.jsx(Ve,{children:e.jsx(ze,{})}),e.jsx(Ue,{children:a.map(d=>e.jsx(te,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"email",children:"Email"}),e.jsx(q,{id:"email",type:"email",value:r.email,onChange:d=>i("email",d.target.value),placeholder:"customer@example.com"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone",children:"Phone (for SMS)"}),e.jsx(q,{id:"phone",value:r.phone,onChange:d=>i("phone",d.target.value),placeholder:"+1234567890"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"discordUserId",children:"Discord User ID"}),e.jsx(q,{id:"discordUserId",value:r.discordUserId,onChange:d=>i("discordUserId",d.target.value),placeholder:"123456789012345678"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"title",children:"Title"}),e.jsx(q,{id:"title",value:r.title,onChange:d=>i("title",d.target.value),placeholder:"Order Update"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"message",children:"Message"}),e.jsx(cr,{id:"message",value:r.message,onChange:d=>i("message",d.target.value),placeholder:"Your frame is being processed...",rows:4})]}),e.jsxs("div",{children:[e.jsx(O,{className:"text-base font-medium",children:"Notification Channels"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"email-channel",checked:r.channels.email,onCheckedChange:d=>o("email",!!d)}),e.jsx(O,{htmlFor:"email-channel",children:"Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"discord-channel",checked:r.channels.discord,onCheckedChange:d=>o("discord",!!d)}),e.jsx(O,{htmlFor:"discord-channel",children:"Discord"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"inapp-channel",checked:r.channels.inApp,onCheckedChange:d=>o("inApp",!!d)}),e.jsx(O,{htmlFor:"inapp-channel",children:"In-App"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{id:"sms-channel",checked:r.channels.sms,onCheckedChange:d=>o("sms",!!d)}),e.jsx(O,{htmlFor:"sms-channel",children:"SMS"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(P,{onClick:c,variant:"outline",className:"flex-1",children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Fill Test Data"]}),e.jsxs(P,{onClick:()=>l(!0),disabled:s,variant:"outline",className:"flex-1",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Test Send"]}),e.jsxs(P,{onClick:()=>l(!1),disabled:s,className:"flex-1",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Send Live"]})]})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Quick Actions"}),e.jsx(CardDescription,{children:"Common notification templates and actions"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsx(P,{className:"w-full justify-start",variant:"outline",onClick:()=>{n(d=>({...d,type:"order_update",title:"Production Update",message:"Your frame is now in production and being carefully crafted by our artisans."}))},children:" Production Started"}),e.jsx(P,{className:"w-full justify-start",variant:"outline",onClick:()=>{n(d=>({...d,type:"completion",title:"Order Complete",message:"Great news! Your custom frame is ready for pickup at our studio."}))},children:" Order Complete"}),e.jsx(P,{className:"w-full justify-start",variant:"outline",onClick:()=>{n(d=>({...d,type:"estimate",title:"Timeline Update",message:"We wanted to update you on your frame timeline."}))},children:" Timeline Update"}),e.jsx(P,{className:"w-full justify-start",variant:"outline",onClick:()=>{n(d=>({...d,type:"custom",title:"Quality Check",message:"Your frame has passed our rigorous quality inspection and looks amazing!"}))},children:" Quality Check"})]})]}),e.jsx(UV,{})]})]})}function qV(){var f;const{toast:s}=Be(),[t,r]=p.useState(null),[n,a]=p.useState([]),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1);p.useEffect(()=>{h(),m()},[]);const h=async()=>{try{const y=await(await fetch("/api/kanban/status")).json();y.success&&r(y.status)}catch(v){console.error("Error fetching Kanban status:",v)}},m=async()=>{try{const y=await(await fetch("/api/orders")).json();y.success&&a(y.orders||[])}catch(v){console.error("Error fetching orders:",v)}},x=async()=>{if(!i){s({title:"Order Required",description:"Please select an order to test synchronization.",variant:"destructive"});return}u(!0),c("");try{const y=await(await fetch(`/api/orders/${i}/test-kanban-sync`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();y.success?(c("success"),s({title:"Sync Successful",description:`Order ${i} synced to Kanban successfully`})):(c("error"),s({title:"Sync Failed",description:y.error||"Failed to sync order to Kanban",variant:"destructive"}))}catch{c("error"),s({title:"Sync Error",description:"Network error occurred during sync test",variant:"destructive"})}finally{u(!1)}},g=async(v,y)=>{try{const b=await(await fetch(`/api/orders/${v}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:y,notes:`Status updated via Kanban test interface to ${y}`})})).json();b.success?(s({title:"Status Updated",description:`Order ${v} status updated to ${y} and synced to Kanban`}),m()):s({title:"Update Failed",description:b.error||"Failed to update order status",variant:"destructive"})}catch{s({title:"Update Error",description:"Failed to update order status",variant:"destructive"})}};return e.jsxs("div",{className:"container mx-auto py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W2,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Kanban Integration Test"})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"h-5 w-5"}),"Kanban Connection Status"]}),e.jsx(ee,{children:"Current status of the Kanban app integration"})]}),e.jsx(H,{className:"space-y-4",children:t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Connection Status"}),e.jsx(pe,{variant:t.configured?"default":"destructive",children:t.configured?"Configured":"Not Configured"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"API Key Status"}),e.jsx(pe,{variant:t.hasApiKey?"default":"destructive",children:t.hasApiKey?"Present":"Missing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"API URL"}),e.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:t.apiUrl||"Not configured"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Orders Endpoint"}),e.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:((f=t.endpoints)==null?void 0:f.orders)||"Not available"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nr,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading Kanban status..."})]})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Qc,{className:"h-5 w-5"}),"Test Order Synchronization"]}),e.jsx(ee,{children:"Test syncing a specific order to the Kanban app"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"order-select",children:"Select Order to Test"}),e.jsxs("select",{id:"order-select",value:i,onChange:v=>o(v.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Choose an order..."}),n.map(v=>e.jsxs("option",{value:v.id,children:["Order #",v.id," - ",v.artworkDescription," (",v.productionStatus,")"]},v.id))]})]}),e.jsx(P,{onClick:x,disabled:!i||d,className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx(nr,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing Sync..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Test Order Sync"]})}),l&&e.jsxs(hs,{children:[l==="success"?e.jsx(Ks,{className:"h-4 w-4"}):e.jsx(Ln,{className:"h-4 w-4"}),e.jsx(Qs,{children:l==="success"?"Sync Successful":"Sync Failed"}),e.jsx(ps,{children:l==="success"?"Order has been successfully synced to the Kanban app.":"Failed to sync order to Kanban app. Check the connection settings."})]})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Test Status Updates"}),e.jsx(ee,{children:"Update order status and test Kanban synchronization"})]}),e.jsx(H,{children:e.jsx("div",{className:"grid gap-4",children:n.slice(0,3).map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Order #",v.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.artworkDescription," - ",v.artworkWidth,"x",v.artworkHeight]}),e.jsx(pe,{variant:"outline",className:"mt-1",children:v.productionStatus})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>g(v.id.toString(),"in_production"),children:"Set In Production"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>g(v.id.toString(),"completed"),children:"Set Completed"})]})]},v.id))})})]})]})}function zV(){const[s,t]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState("alice"),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(""),[m,x]=p.useState(""),[g,f]=p.useState([]),{toast:v}=Be();ss();const{data:y,isLoading:j}=ue({queryKey:["/api/voice-calls/configuration"],queryFn:async()=>{const L=await fetch("/api/voice-calls/configuration");if(!L.ok)throw new Error("Failed to fetch configuration");return L.json()}}),b=Ae({mutationFn:async L=>{const ae=await fetch("/api/voice-calls/make-call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!ae.ok)throw new Error("Failed to make call");return ae.json()},onSuccess:L=>{v({title:"Call Initiated",description:`Voice call to ${s} started successfully`}),C("custom",s,L.callSid,"initiated"),t(""),n("")},onError:L=>{v({title:"Call Failed",description:L.message||"Failed to initiate voice call",variant:"destructive"})}}),k=Ae({mutationFn:async L=>{const ae=await fetch("/api/voice-calls/order-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!ae.ok)throw new Error("Failed to make order status call");return ae.json()},onSuccess:L=>{v({title:"Order Status Call Initiated",description:`Called customer about order ${o}`}),C("order-status",s,L.callSid,"initiated")},onError:L=>{v({title:"Call Failed",description:L.message||"Failed to make order status call",variant:"destructive"})}}),S=Ae({mutationFn:async L=>{const ae=await fetch("/api/voice-calls/payment-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!ae.ok)throw new Error("Failed to make payment reminder call");return ae.json()},onSuccess:L=>{v({title:"Payment Reminder Call Initiated",description:`Called ${c} about payment`}),C("payment-reminder",s,L.callSid,"initiated")},onError:L=>{v({title:"Call Failed",description:L.message||"Failed to make payment reminder call",variant:"destructive"})}}),D=Ae({mutationFn:async L=>{const ae=await fetch("/api/voice-calls/pickup-reminder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!ae.ok)throw new Error("Failed to make pickup reminder call");return ae.json()},onSuccess:L=>{v({title:"Pickup Reminder Call Initiated",description:`Called ${c} about pickup`}),C("pickup-reminder",s,L.callSid,"initiated")},onError:L=>{v({title:"Call Failed",description:L.message||"Failed to make pickup reminder call",variant:"destructive"})}}),T=Ae({mutationFn:async L=>{const ae=await fetch("/api/voice-calls/order-complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!ae.ok)throw new Error("Failed to make order complete call");return ae.json()},onSuccess:L=>{v({title:"Order Complete Call Initiated",description:`Called ${c} about order completion`}),C("order-complete",s,L.callSid,"initiated")},onError:L=>{v({title:"Call Failed",description:L.message||"Failed to make order complete call",variant:"destructive"})}}),C=(L,ae,M,re)=>{const Ce={id:Date.now().toString(),to:ae,callSid:M,type:L,status:re,timestamp:new Date().toISOString()};f(st=>[Ce,...st.slice(0,9)])},E=L=>{const ae=L.replace(/\D/g,"");return ae.length===10?`+1${ae}`:L.startsWith("+")?L:`+${ae}`},I=()=>{if(!s||!r){v({title:"Missing Information",description:"Please enter both phone number and message",variant:"destructive"});return}b.mutate({to:E(s),message:r,voice:a})},w=()=>{if(!s||!o){v({title:"Missing Information",description:"Please enter phone number and order number",variant:"destructive"});return}k.mutate({to:E(s),orderNumber:o,status:"ready for pickup"})},N=()=>{if(!s||!c||!u||!o){v({title:"Missing Information",description:"Please fill in all payment reminder fields",variant:"destructive"});return}S.mutate({to:E(s),customerName:c,amount:parseFloat(u),orderNumber:o})},A=()=>{if(!s||!c||!o||!m){v({title:"Missing Information",description:"Please fill in all pickup reminder fields",variant:"destructive"});return}D.mutate({to:E(s),customerName:c,orderNumber:o,daysWaiting:parseInt(m)})},F=()=>{if(!s||!c||!o){v({title:"Missing Information",description:"Please fill in all order complete fields",variant:"destructive"});return}T.mutate({to:E(s),customerName:c,orderNumber:o})},Z=L=>{switch(L){case"initiated":case"queued":case"ringing":return e.jsx(Nt,{className:"h-4 w-4 text-yellow-500"});case"in-progress":return e.jsx(K2,{className:"h-4 w-4 text-blue-500"});case"completed":return e.jsx(Ks,{className:"h-4 w-4 text-green-500"});case"failed":case"busy":case"no-answer":return e.jsx(Ln,{className:"h-4 w-4 text-red-500"});default:return e.jsx($t,{className:"h-4 w-4 text-gray-500"})}},Q=L=>{switch(L){case"completed":return"default";case"failed":case"busy":case"no-answer":return"destructive";case"initiated":case"queued":case"ringing":case"in-progress":return"secondary";default:return"outline"}};return j?e.jsx("div",{className:"p-4",children:"Loading voice call configuration..."}):y!=null&&y.configured?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Voice Call Manager"}),e.jsx("p",{className:"text-gray-600",children:"Make automated voice calls to customers"})]}),e.jsxs(pe,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(Us,{className:"h-3 w-3 mr-1"}),"Twilio Connected"]})]}),e.jsxs(Bt,{defaultValue:"custom",className:"space-y-4",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-5",children:[e.jsx(ve,{value:"custom",children:"Custom Call"}),e.jsx(ve,{value:"order-status",children:"Order Status"}),e.jsx(ve,{value:"payment",children:"Payment"}),e.jsx(ve,{value:"pickup",children:"Pickup"}),e.jsx(ve,{value:"complete",children:"Order Complete"})]}),e.jsx(Ee,{value:"custom",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Custom Voice Call"}),e.jsx(ee,{children:"Make a personalized voice call with your own message"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone",children:"Phone Number"}),e.jsx(q,{id:"phone",placeholder:"+1234567890",value:s,onChange:L=>t(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"voice",children:"Voice"}),e.jsxs(qe,{value:a,onValueChange:i,children:[e.jsx(Ve,{children:e.jsx(ze,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"alice",children:"Alice (Default)"}),e.jsx(te,{value:"man",children:"Man"}),e.jsx(te,{value:"woman",children:"Woman"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"message",children:"Message"}),e.jsx(cr,{id:"message",placeholder:"Enter your custom message here...",value:r,onChange:L=>n(L.target.value),rows:4})]}),e.jsxs(P,{onClick:I,disabled:b.isPending,className:"w-full",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),b.isPending?"Making Call...":"Make Voice Call"]})]})]})}),e.jsx(Ee,{value:"order-status",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Status Update Call"}),e.jsx(ee,{children:"Call customer with order status update"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone-order",children:"Phone Number"}),e.jsx(q,{id:"phone-order",placeholder:"+1234567890",value:s,onChange:L=>t(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"order-number",children:"Order Number"}),e.jsx(q,{id:"order-number",placeholder:"ORD-001",value:o,onChange:L=>l(L.target.value)})]})]}),e.jsxs(P,{onClick:w,disabled:k.isPending,className:"w-full",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),k.isPending?"Making Call...":"Call Order Status"]})]})]})}),e.jsx(Ee,{value:"payment",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Payment Reminder Call"}),e.jsx(ee,{children:"Call customer about outstanding payment"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone-payment",children:"Phone Number"}),e.jsx(q,{id:"phone-payment",placeholder:"+1234567890",value:s,onChange:L=>t(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"customer-name",children:"Customer Name"}),e.jsx(q,{id:"customer-name",placeholder:"John Doe",value:c,onChange:L=>d(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"amount",children:"Amount Due"}),e.jsx(q,{id:"amount",placeholder:"125.00",type:"number",step:"0.01",value:u,onChange:L=>h(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"order-number-payment",children:"Order Number"}),e.jsx(q,{id:"order-number-payment",placeholder:"ORD-001",value:o,onChange:L=>l(L.target.value)})]})]}),e.jsxs(P,{onClick:N,disabled:S.isPending,className:"w-full",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),S.isPending?"Making Call...":"Call Payment Reminder"]})]})]})}),e.jsx(Ee,{value:"pickup",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Pickup Reminder Call"}),e.jsx(ee,{children:"Call customer about ready order pickup"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone-pickup",children:"Phone Number"}),e.jsx(q,{id:"phone-pickup",placeholder:"+1234567890",value:s,onChange:L=>t(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"customer-name-pickup",children:"Customer Name"}),e.jsx(q,{id:"customer-name-pickup",placeholder:"John Doe",value:c,onChange:L=>d(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"order-number-pickup",children:"Order Number"}),e.jsx(q,{id:"order-number-pickup",placeholder:"ORD-001",value:o,onChange:L=>l(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"days-waiting",children:"Days Waiting"}),e.jsx(q,{id:"days-waiting",placeholder:"3",type:"number",value:m,onChange:L=>x(L.target.value)})]})]}),e.jsxs(P,{onClick:A,disabled:D.isPending,className:"w-full",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),D.isPending?"Making Call...":"Call Pickup Reminder"]})]})]})}),e.jsx(Ee,{value:"complete",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Order Complete Call"}),e.jsx(ee,{children:"Call customer when order is ready for pickup"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"phone-complete",children:"Phone Number"}),e.jsx(q,{id:"phone-complete",placeholder:"+1234567890",value:s,onChange:L=>t(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"customer-name-complete",children:"Customer Name"}),e.jsx(q,{id:"customer-name-complete",placeholder:"John Doe",value:c,onChange:L=>d(L.target.value)})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"order-number-complete",children:"Order Number"}),e.jsx(q,{id:"order-number-complete",placeholder:"ORD-001",value:o,onChange:L=>l(L.target.value)})]})]}),e.jsxs(P,{onClick:F,disabled:T.isPending,className:"w-full",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),T.isPending?"Making Call...":"Call Order Complete"]})]})]})})]}),g.length>0&&e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Recent Call Log"}),e.jsx(ee,{children:"Last 10 voice calls made"})]}),e.jsx(H,{children:e.jsx("div",{className:"space-y-2",children:g.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Z(L.status),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:L.to}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:L.type.replace("-"," ")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(pe,{variant:Q(L.status),children:L.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(L.timestamp).toLocaleString()})]})]},L.id))})})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5"}),"Voice Call System"]}),e.jsx(ee,{children:"Twilio voice calling is not configured"})]}),e.jsx(H,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border rounded-lg bg-yellow-50",children:e.jsx("p",{className:"text-sm text-yellow-800",children:(y==null?void 0:y.message)||"Voice calling requires Twilio credentials to be configured."})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Contact your administrator to set up Twilio credentials for voice calling functionality."})]})})]})})}function WV(){var I,w,N,A;const[s,t]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState("Test Customer"),[o,l]=p.useState("AUTO-001"),[c,d]=p.useState("125.50"),[u,h]=p.useState("3"),[m,x]=p.useState(""),{toast:g}=Be();ss();const{data:f,isLoading:v}=ue({queryKey:["/api/order-notifications/status"],queryFn:async()=>{const F=await fetch("/api/order-notifications/status");if(!F.ok)throw new Error("Failed to fetch notification status");return F.json()}}),y=Ae({mutationFn:async F=>{const Z=await fetch("/api/order-notifications/trigger",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!Z.ok)throw new Error("Failed to trigger notification");return Z.json()},onSuccess:F=>{g({title:"Notification Sent",description:F.message})},onError:F=>{g({title:"Notification Failed",description:F.message||"Failed to send notification",variant:"destructive"})}}),j=Ae({mutationFn:async F=>{const Z=await fetch("/api/order-notifications/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!Z.ok)throw new Error("Failed to schedule notification");return Z.json()},onSuccess:F=>{g({title:"Notification Scheduled",description:F.message})},onError:F=>{g({title:"Scheduling Failed",description:F.message||"Failed to schedule notification",variant:"destructive"})}}),b=Ae({mutationFn:async F=>{const Z=await fetch("/api/order-notifications/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!Z.ok)throw new Error("Failed to send test notification");return Z.json()},onSuccess:F=>{g({title:"Test Notification Sent",description:F.message})},onError:F=>{g({title:"Test Failed",description:F.message||"Failed to send test notification",variant:"destructive"})}}),k=()=>{if(!s||!r){g({title:"Missing Information",description:"Please fill in phone number and select event type",variant:"destructive"});return}const F={orderId:"AUTO-001",orderNumber:o,customerName:a,customerPhone:s,eventType:r,metadata:{amount:parseFloat(c),daysWaiting:parseInt(u),dueDate:"Friday",estimatedCompletion:"2-3 business days"}};y.mutate(F)},S=()=>{if(!s||!r||!m){g({title:"Missing Information",description:"Please fill in all fields for scheduling",variant:"destructive"});return}const F={orderId:"AUTO-001",orderNumber:o,customerName:a,customerPhone:s,eventType:r,delayMinutes:parseInt(m),metadata:{amount:parseFloat(c),daysWaiting:parseInt(u),dueDate:"Friday",estimatedCompletion:"2-3 business days"}};j.mutate(F)},D=()=>{if(!s){g({title:"Missing Phone Number",description:"Please enter a phone number for testing",variant:"destructive"});return}b.mutate({phone:s,eventType:r||"ready_for_pickup"})},T=F=>{const Z=F.replace(/\D/g,"");return Z.length===10?`+1${Z}`:F.startsWith("+")?F:`+${Z}`},C=()=>v?e.jsx(Nt,{className:"h-5 w-5 text-yellow-500"}):f!=null&&f.configured?e.jsx(Ks,{className:"h-5 w-5 text-green-500"}):e.jsx(Ln,{className:"h-5 w-5 text-red-500"}),E=()=>v?"Checking status...":f!=null&&f.configured?"System Ready":"Configuration Required";return v?e.jsx("div",{className:"p-4",children:"Loading automated notification system..."}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Fr,{className:"h-8 w-8"}),"Automated Order Notifications"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Set up voice calls for order events like completion, payment reminders, and pickup notifications"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(),e.jsx("span",{className:"font-medium",children:E()})]})]}),e.jsxs(Bt,{defaultValue:"trigger",className:"space-y-6",children:[e.jsxs(Lt,{className:"grid w-full grid-cols-4",children:[e.jsx(ve,{value:"trigger",children:"Trigger Now"}),e.jsx(ve,{value:"schedule",children:"Schedule Later"}),e.jsx(ve,{value:"events",children:"Event Types"}),e.jsx(ve,{value:"integration",children:"Integration"})]}),e.jsx(Ee,{value:"trigger",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5"}),"Trigger Immediate Notification"]}),e.jsx(ee,{children:"Send a voice call notification immediately for testing or urgent notifications"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"phone",children:"Phone Number"}),e.jsx(q,{id:"phone",placeholder:"+1234567890",value:s,onChange:F=>t(F.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"eventType",children:"Event Type"}),e.jsxs(qe,{value:r,onValueChange:n,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select event type"})}),e.jsx(Ue,{children:(I=f==null?void 0:f.supportedEventTypes)==null?void 0:I.map(F=>e.jsx(te,{value:F.type,children:F.description},F.type))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(q,{id:"customerName",value:a,onChange:F=>i(F.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"orderNumber",children:"Order Number"}),e.jsx(q,{id:"orderNumber",value:o,onChange:F=>l(F.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"amount",children:"Amount (for payment reminders)"}),e.jsx(q,{id:"amount",type:"number",step:"0.01",value:c,onChange:F=>d(F.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"daysWaiting",children:"Days Waiting (for pickup reminders)"}),e.jsx(q,{id:"daysWaiting",type:"number",value:u,onChange:F=>h(F.target.value)})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(P,{onClick:k,disabled:y.isPending,className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-4 w-4"}),y.isPending?"Sending...":"Send Notification"]}),e.jsx(P,{variant:"outline",onClick:D,disabled:b.isPending,children:b.isPending?"Testing...":"Quick Test"})]})]})]})}),e.jsx(Ee,{value:"schedule",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5"}),"Schedule Delayed Notification"]}),e.jsx(ee,{children:"Schedule notifications for future delivery (useful for pickup reminders, follow-ups)"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"delayMinutes",children:"Delay (minutes)"}),e.jsx(q,{id:"delayMinutes",type:"number",placeholder:"5",value:m,onChange:F=>x(F.target.value)})]}),e.jsxs(P,{onClick:S,disabled:j.isPending,className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),j.isPending?"Scheduling...":"Schedule Notification"]})]})]})}),e.jsx(Ee,{value:"events",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Supported Event Types"}),e.jsx(ee,{children:"These events can trigger automated voice notifications to customers"})]}),e.jsx(H,{children:e.jsx("div",{className:"grid gap-4",children:(w=f==null?void 0:f.supportedEventTypes)==null?void 0:w.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:F.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F.example})]}),e.jsx(pe,{variant:"outline",children:F.type})]},F.type))})})]})}),e.jsx(Ee,{value:"integration",className:"space-y-6",children:e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(xi,{className:"h-5 w-5"}),"Integration Guide"]}),e.jsx(ee,{children:"How to integrate automated notifications into your order workflow"})]}),e.jsx(H,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"API Endpoints"}),e.jsxs("div",{className:"bg-gray-100 p-3 rounded-md font-mono text-sm",children:[e.jsx("div",{children:"POST /api/order-notifications/trigger"}),e.jsx("div",{children:"POST /api/order-notifications/schedule"}),e.jsx("div",{children:"POST /api/order-notifications/bulk"}),e.jsx("div",{children:"GET /api/order-notifications/status"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Example Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Add this to your order status update functions:"}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-md font-mono text-sm",children:`// When order status changes to "ready_for_pickup"
await fetch('/api/order-notifications/trigger', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    orderId: order.id,
    orderNumber: order.orderNumber,
    customerName: order.customerName,
    customerPhone: order.customerPhone,
    eventType: 'ready_for_pickup'
  })
});`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Automated Workflows"}),e.jsxs("ul",{className:"text-sm space-y-1 ml-4",children:[e.jsx("li",{children:" Order confirmation calls when orders are placed"}),e.jsx("li",{children:" Payment confirmation when payments are received"}),e.jsx("li",{children:" Progress updates during production phases"}),e.jsx("li",{children:" Pickup notifications when orders are complete"}),e.jsx("li",{children:" Payment reminders for outstanding balances"}),e.jsx("li",{children:" Pickup reminders for completed orders"})]})]})]})})]})})]}),s&&e.jsxs(V,{children:[e.jsx(K,{children:e.jsx(G,{children:"Preview"})}),e.jsxs(H,{children:[e.jsxs("p",{className:"text-sm",children:["Phone number: ",e.jsx(pe,{variant:"outline",children:T(s)})]}),r&&e.jsxs("p",{className:"text-sm mt-2",children:["Selected event: ",e.jsx(pe,{children:(A=(N=f==null?void 0:f.supportedEventTypes)==null?void 0:N.find(F=>F.type===r))==null?void 0:A.description})]})]})]})]})}var[oc,lU]=fs("Tooltip",[Ta]),lc=Ta(),wT="TooltipProvider",KV=700,su="tooltip.open",[GV,Zm]=oc(wT),NT=s=>{const{__scopeTooltip:t,delayDuration:r=KV,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=s,[o,l]=p.useState(!0),c=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),e.jsx(GV,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:p.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:i})};NT.displayName=wT;var cc="Tooltip",[QV,dc]=oc(cc),ST=s=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=s,c=Zm(cc,s.__scopeTooltip),d=lc(t),[u,h]=p.useState(null),m=mr(),x=p.useRef(0),g=o??c.disableHoverableContent,f=l??c.delayDuration,v=p.useRef(!1),[y=!1,j]=ms({prop:n,defaultProp:a,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(su))):c.onClose(),i==null||i(T)}}),b=p.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),k=p.useCallback(()=>{window.clearTimeout(x.current),v.current=!1,j(!0)},[j]),S=p.useCallback(()=>{window.clearTimeout(x.current),j(!1)},[j]),D=p.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,j(!0)},f)},[f,j]);return p.useEffect(()=>()=>window.clearTimeout(x.current),[]),e.jsx(iu,{...d,children:e.jsx(QV,{scope:t,contentId:m,open:y,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?D():k()},[c.isOpenDelayed,D,k]),onTriggerLeave:p.useCallback(()=>{g?S():window.clearTimeout(x.current)},[S,g]),onOpen:k,onClose:S,disableHoverableContent:g,children:r})})};ST.displayName=cc;var ru="TooltipTrigger",CT=p.forwardRef((s,t)=>{const{__scopeTooltip:r,...n}=s,a=dc(ru,r),i=Zm(ru,r),o=lc(r),l=p.useRef(null),c=We(t,l,a.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),h=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),e.jsx(bl,{asChild:!0,...o,children:e.jsx(Se.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:ge(s.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ge(s.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ge(s.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ge(s.onFocus,()=>{d.current||a.onOpen()}),onBlur:ge(s.onBlur,a.onClose),onClick:ge(s.onClick,a.onClose)})})});CT.displayName=ru;var ZV="TooltipPortal",[cU,YV]=oc(ZV,{forceMount:void 0}),ka="TooltipContent",kT=p.forwardRef((s,t)=>{const r=YV(ka,s.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=s,o=dc(ka,s.__scopeTooltip);return e.jsx(ds,{present:n||o.open,children:o.disableHoverableContent?e.jsx(TT,{side:a,...i,ref:t}):e.jsx(XV,{side:a,...i,ref:t})})}),XV=p.forwardRef((s,t)=>{const r=dc(ka,s.__scopeTooltip),n=Zm(ka,s.__scopeTooltip),a=p.useRef(null),i=We(t,a),[o,l]=p.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,m=p.useCallback(()=>{l(null),h(!1)},[h]),x=p.useCallback((g,f)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},j=s8(y,v.getBoundingClientRect()),b=r8(y,j),k=n8(f.getBoundingClientRect()),S=i8([...b,...k]);l(S),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&u){const g=v=>x(v,u),f=v=>x(v,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",f)}}},[c,u,x,m]),p.useEffect(()=>{if(o){const g=f=>{const v=f.target,y={x:f.clientX,y:f.clientY},j=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),b=!a8(y,o);j?m():b&&(m(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,m]),e.jsx(TT,{...s,ref:i})}),[JV,e8]=oc(cc,{isInside:!1}),TT=p.forwardRef((s,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=s,c=dc(ka,r),d=lc(r),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(su,u),()=>document.removeEventListener(su,u)),[u]),p.useEffect(()=>{if(c.trigger){const h=m=>{const x=m.target;x!=null&&x.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),e.jsx(vl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:e.jsxs(nu,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Jy,{children:n}),e.jsx(JV,{scope:r,isInside:!0,children:e.jsx(Oy,{id:c.contentId,role:"tooltip",children:a||n})})]})})});kT.displayName=ka;var PT="TooltipArrow",t8=p.forwardRef((s,t)=>{const{__scopeTooltip:r,...n}=s,a=lc(r);return e8(PT,r).isInside?null:e.jsx(au,{...a,...n,ref:t})});t8.displayName=PT;function s8(s,t){const r=Math.abs(t.top-s.y),n=Math.abs(t.bottom-s.y),a=Math.abs(t.right-s.x),i=Math.abs(t.left-s.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function r8(s,t,r=5){const n=[];switch(t){case"top":n.push({x:s.x-r,y:s.y+r},{x:s.x+r,y:s.y+r});break;case"bottom":n.push({x:s.x-r,y:s.y-r},{x:s.x+r,y:s.y-r});break;case"left":n.push({x:s.x+r,y:s.y-r},{x:s.x+r,y:s.y+r});break;case"right":n.push({x:s.x-r,y:s.y-r},{x:s.x-r,y:s.y+r});break}return n}function n8(s){const{top:t,right:r,bottom:n,left:a}=s;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function a8(s,t){const{x:r,y:n}=s;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function i8(s){const t=s.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),o8(t)}function o8(s){if(s.length<=1)return s.slice();const t=[];for(let n=0;n<s.length;n++){const a=s[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=s.length-1;n>=0;n--){const a=s[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var l8=NT,c8=ST,d8=CT,ET=kT;const DT=l8,u8=c8,m8=d8,AT=p.forwardRef(({className:s,sideOffset:t=4,...r},n)=>e.jsx(ET,{ref:n,sideOffset:t,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));AT.displayName=ET.displayName;const IT=lu,h8=cu,p8=Pa,f8=ou,_T=p.forwardRef(({className:s,...t},r)=>e.jsx(Ui,{className:J("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));_T.displayName=Ui.displayName;const x8=$n("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ym=p.forwardRef(({side:s="right",className:t,children:r,...n},a)=>e.jsxs(f8,{children:[e.jsx(_T,{}),e.jsxs(Hi,{ref:a,className:J(x8({side:s}),t),...n,children:[r,e.jsxs(Pa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Mn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ym.displayName=Hi.displayName;const RT=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",s),...t});RT.displayName="SheetHeader";const OT=({className:s,...t})=>e.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});OT.displayName="SheetFooter";const MT=p.forwardRef(({className:s,...t},r)=>e.jsx(qi,{ref:r,className:J("text-lg font-semibold text-foreground",s),...t}));MT.displayName=qi.displayName;const g8=p.forwardRef(({className:s,...t},r)=>e.jsx(zi,{ref:r,className:J("text-sm text-muted-foreground",s),...t}));g8.displayName=zi.displayName;const v8=()=>{const[s,t]=p.useState(!1),[r,n]=p.useState([]),[a,i]=p.useState(""),[o,l]=p.useState(!1),c=p.useRef(null),d=p.useRef(null),{toast:u}=Be(),[h,m]=p.useState([]),[x,g]=p.useState(!1);p.useEffect(()=>{s&&r.length===0&&n([{id:"greeting",content:"Hello! I can help you find frames, matboards, and navigate through the system. What are you looking for today?",sender:"system",timestamp:new Date}])},[s,r.length]),p.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[r]),p.useEffect(()=>{s&&d.current&&d.current.focus()},[s]);const f=()=>{t(!s)},v=S=>{i(S.target.value)},y=async()=>{if(!a.trim())return;const S={id:`user-${Date.now()}`,content:a,sender:"user",timestamp:new Date};n(D=>[...D,S]),i(""),l(!0),g(!0);try{const D=await le("POST","/api/chat",{message:S.content});if(!D.ok)throw new Error("Failed to get response from assistant");const T=await D.json(),C={id:`system-${Date.now()}`,content:T.response,sender:"system",timestamp:new Date};n(E=>[...E,C]),T.searchResults&&T.searchResults.length>0?m(T.searchResults):m([])}catch(D){console.error("Chat search error:",D);const T={id:`msg-${Date.now()}`,type:"bot",content:"I apologize, but I'm having trouble searching right now. Please try again in a moment, or try searching with different keywords.",timestamp:new Date,searchResults:[]};n(C=>[...C,T]),u({title:"Search Temporarily Unavailable",description:"Search is experiencing issues. Please try again shortly.",variant:"destructive"})}finally{l(!1),g(!1),m([])}},j=S=>{S.key==="Enter"&&y()},b=S=>{S&&(window.location.href=S,t(!1))},k=S=>S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx(DT,{children:e.jsxs(u8,{children:[e.jsx(m8,{asChild:!0,children:e.jsx(P,{onClick:f,className:"rounded-full h-12 w-12 fixed bottom-6 right-6 shadow-lg",size:"icon",variant:"default",children:e.jsx(G2,{className:"h-6 w-6"})})}),e.jsx(AT,{side:"left",children:e.jsx("p",{children:"Chat Assistant"})})]})}),e.jsx(IT,{open:s,onOpenChange:t,children:e.jsxs(Ym,{className:"sm:max-w-md p-0",children:[e.jsxs(RT,{className:"px-4 py-3 border-b",children:[e.jsx(MT,{className:"text-lg",children:"Chat Assistant"}),e.jsxs(p8,{className:"absolute right-4 top-4",children:[e.jsx(Mn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]}),e.jsxs("div",{ref:c,className:"px-4 py-2 overflow-y-auto flex-1",style:{height:"calc(100vh - 140px)"},children:[r.map(S=>e.jsx("div",{className:`mb-4 ${S.sender==="user"?"ml-auto":"mr-auto"}`,children:e.jsx(V,{className:`max-w-[80%] ${S.sender==="user"?"ml-auto bg-primary text-primary-foreground":"mr-auto"}`,children:e.jsxs(H,{className:"p-3",children:[e.jsx("div",{children:S.content}),e.jsx("div",{className:"text-xs mt-1 opacity-70 text-right",children:k(S.timestamp)})]})})},S.id)),o&&e.jsx("div",{className:"mb-4",children:e.jsx(V,{className:"max-w-[80%] mr-auto",children:e.jsx(H,{className:"p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{children:"Typing..."})]})})})}),h.length>0&&!x&&e.jsxs("div",{className:"mt-4 mb-2",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Search Results:"}),e.jsx("div",{className:"space-y-2",children:h.map(S=>e.jsx(V,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>S.route&&b(S.route),children:e.jsxs(H,{className:"p-3 flex items-center",children:[S.thumbnail?e.jsx("img",{src:S.thumbnail,alt:S.name,className:"w-10 h-10 object-cover mr-3 rounded-sm"}):e.jsx("div",{className:"w-10 h-10 bg-muted flex items-center justify-center mr-3 rounded-sm",children:e.jsx(Fn,{className:"h-5 w-5 text-muted-foreground/70"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.name}),S.description&&e.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:S.description}),e.jsx("div",{className:"text-xs text-primary/70",children:S.type.charAt(0).toUpperCase()+S.type.slice(1)})]})]})},S.id))})]})]}),e.jsx(OT,{className:"px-4 py-3 border-t",children:e.jsxs("div",{className:"flex w-full",children:[e.jsx(q,{ref:d,value:a,onChange:v,onKeyDown:j,placeholder:"Type your question...",className:"mr-2",disabled:o}),e.jsx(P,{onClick:y,size:"icon",disabled:!a.trim()||o,children:e.jsx(Sr,{className:"h-4 w-4"})})]})})]})})]})};function y8(){const[s,t]=p.useState("styles"),[r,n]=p.useState(0),a=[{id:"styles",title:"Frame Styles",sections:[{title:"Modern",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Modern frames feature clean lines, minimalist designs, and often come in metal finishes or simple wood styles with neutral tones."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Perfect for contemporary artwork or photography"}),e.jsx("li",{children:"Creates a sleek, unobtrusive presentation"}),e.jsx("li",{children:"Popular choices include simple black, white, or metal profiles"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(on,{className:"text-primary h-24 w-24",strokeWidth:1}),e.jsx(on,{className:"text-primary/30 h-28 w-28 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",strokeWidth:1})]})})},{title:"Traditional",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Traditional frames offer classic styling with ornate details, carved designs, and rich finishes like gold, silver, or dark wood tones."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Ideal for classic artwork, portraits, or oil paintings"}),e.jsx("li",{children:"Adds a sense of elegance and formality"}),e.jsx("li",{children:"Often features decorative corners and intricate patterns"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(on,{className:"text-primary h-24 w-24",strokeWidth:1}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:e.jsx(Bo,{className:"text-primary/30 h-16 w-16"})})]})})},{title:"Rustic",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Rustic frames feature natural wood textures, distressed finishes, and a handcrafted appearance, celebrating the beauty of imperfection."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Great for nature photography, landscapes, or casual art"}),e.jsx("li",{children:"Creates a warm, organic, and relaxed aesthetic"}),e.jsx("li",{children:"Often showcases natural wood grain patterns"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"border-4 border-primary/70 h-24 w-24 border-dashed rounded-sm"}),e.jsx(Q2,{className:"text-primary/30 h-16 w-16 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]})})},{title:"Floating",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Floating frames create the illusion that artwork is suspended within the frame, with space between the art and frame edge."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Ideal for canvas art, contemporary pieces, or gallery displays"}),e.jsx("li",{children:"Creates a three-dimensional, modern presentation"}),e.jsx("li",{children:"Allows all edges of artwork to remain visible"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(on,{className:"text-primary/30 h-28 w-28",strokeWidth:1}),e.jsx(on,{className:"text-primary h-20 w-20 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",strokeWidth:2})]})})}]},{id:"materials",title:"Frame Materials",sections:[{title:"Wood",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Wood frames are timeless classics that come in countless styles, finishes, and profiles to suit any decor or artwork."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hardwoods:"})," Oak, maple, walnut (durable, refined grain patterns)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Softwoods:"})," Pine, cedar (more economical, casual appearance)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Finishes:"})," Natural, stained, painted, distressed, or gilded"]}),e.jsx("li",{children:"Provides warmth and a natural aesthetic"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 bg-gradient-to-r from-amber-700 to-amber-500 rounded-sm"}),e.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(6)].map((d,u)=>e.jsx("div",{className:"w-full h-4 border-b border-amber-900/30"},u))})]})})},{title:"Metal",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Metal frames offer a sleek, contemporary look with excellent durability and precise, clean lines."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Aluminum:"})," Lightweight, doesn't rust, available in many colors"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Steel:"})," Very strong, often with a powder-coated finish"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Finishes:"})," Matte, glossy, brushed, antiqued, or anodized"]}),e.jsx("li",{children:"Ideal for modern art, photography, and diplomas"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 bg-gradient-to-r from-gray-400 to-gray-300 rounded-sm"}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx("div",{className:"w-[90%] h-[90%] border-2 border-gray-500"})})]})})},{title:"Composite",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Composite frames blend materials like polystyrene and resin to mimic the look of wood or metal at a more affordable price point."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Highly resistant to warping, moisture damage, and fading"}),e.jsx("li",{children:"Available in a wide variety of styles and finishes"}),e.jsx("li",{children:"Lighter weight than solid wood frames"}),e.jsx("li",{children:"Good option for larger frames where weight is a concern"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 bg-gradient-to-r from-neutral-300 to-stone-200 rounded-sm"}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx(mj,{className:"text-primary/30 h-14 w-14"})})]})})},{title:"Acrylic",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Acrylic frames provide a modern, minimalist look with excellent durability and lightweight properties."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Shatter-resistant alternative to glass"}),e.jsx("li",{children:"Available in clear, colored, or frosted finishes"}),e.jsx("li",{children:"Creates an open, floating appearance"}),e.jsx("li",{children:"Ideal for contemporary spaces and gallery walls"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 border-2 border-primary/30 bg-primary/5 rounded-sm"}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-sm"})})]})})}]},{id:"preservation",title:"Preservation Benefits",sections:[{title:"UV Protection",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"UV-protective glass and acrylic block harmful ultraviolet rays that cause artwork fading and deterioration."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Blocks 97-99% of UV rays, depending on the quality"}),e.jsx("li",{children:"Prevents paper yellowing and ink fading"}),e.jsx("li",{children:"Critical for valuable art, historical documents, and photographs"}),e.jsx("li",{children:"Higher quality UV glass is virtually invisible to the viewer"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wc,{className:"text-amber-500 h-20 w-20"}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx(Bo,{className:"text-primary/50 h-24 w-24"})})]})})},{title:"Acid-Free Materials",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Acid-free mat boards and backing materials prevent chemical damage and discoloration of artwork over time."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:'Prevents "mat burn" - the brown line that forms where mat meets artwork'}),e.jsx("li",{children:"Conservation-grade mats have neutral pH (6.5-7.5)"}),e.jsx("li",{children:"Museum-grade mats are alkaline-buffered for extra protection"}),e.jsx("li",{children:"Essential for preserving valuable art and photographs"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-24 w-24 border-2 border-primary rounded-sm bg-white"}),e.jsx("div",{className:"h-16 w-16 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-neutral-100 border border-primary"}),e.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-green-100 text-green-800 font-bold text-xs",children:"pH 7"})})]})})},{title:"Archival Mounting",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Archival mounting techniques secure artwork without damaging it, using reversible methods that won't compromise value."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Hinging:"})," Attaching art with acid-free paper strips and wheat paste"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Corners:"})," Using archival photo corners that don't touch the artwork"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Conservation Mounting:"})," Methods that are completely reversible"]}),e.jsx("li",{children:"Prevents buckling, rippling, and movement within the frame"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"relative",children:[e.jsx(on,{className:"text-primary h-24 w-24",strokeWidth:1}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-primary/70"}),e.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-primary/70"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-primary/70"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-primary/70"})]})]})})},{title:"Climate Control",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Proper framing creates a microenvironment that helps protect artwork from humidity fluctuations and airborne pollutants."}),e.jsxs("ul",{className:"list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Sealed frames provide a barrier against dust and pollutants"}),e.jsx("li",{children:"Spacers prevent artwork from touching glass (important to prevent mold)"}),e.jsx("li",{children:"Backing boards with vapor barriers protect against humidity"}),e.jsx("li",{children:"Museum-quality packages may include silica gel for humidity control"})]})]}),illustration:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"h-24 w-24 border-2 border-primary rounded-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(Wc,{className:"text-amber-400 h-8 w-8"}),e.jsx(ej,{className:"text-blue-400 h-8 w-8"})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-blue-100 to-transparent"})]})})})}]}],i=a.find(d=>d.id===s)||a[0],o=i.sections[r],l=()=>{if(r<i.sections.length-1)n(r+1);else{const d=a.findIndex(u=>u.id===s);d<a.length-1&&(t(a[d+1].id),n(0))}},c=()=>{if(r>0)n(r-1);else{const d=a.findIndex(u=>u.id===s);d>0&&(t(a[d-1].id),n(a[d-1].sections.length-1))}};return e.jsxs(V,{className:"w-full",children:[e.jsxs(K,{children:[e.jsx(G,{children:"Frame Education Guide"}),e.jsx(ee,{children:"Learn about different frame styles, materials, and preservation benefits"})]}),e.jsx(H,{children:e.jsxs(Bt,{value:s,onValueChange:t,className:"w-full",children:[e.jsx(Lt,{className:"grid grid-cols-3 mb-4",children:a.map(d=>e.jsx(ve,{value:d.id,onClick:()=>n(0),children:d.title},d.id))}),a.map(d=>e.jsx(Ee,{value:d.id,className:"mt-0",children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsx("div",{className:"bg-muted/50 p-3 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:o.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r+1," of ",i.sections.length]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx("div",{children:o.content}),e.jsx("div",{className:"flex justify-center md:border-l md:pl-6",children:o.illustration})]})}),e.jsxs("div",{className:"flex justify-between p-4 border-t",children:[e.jsxs(P,{variant:"outline",size:"sm",onClick:c,disabled:r===0&&a.findIndex(u=>u.id===s)===0,children:[e.jsx(hj,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:l,disabled:r===i.sections.length-1&&a.findIndex(u=>u.id===s)===a.length-1,children:["Next",e.jsx(Cl,{className:"h-4 w-4 ml-1"})]})]})]})},d.id))]})}),e.jsx(ht,{className:"flex justify-between",children:e.jsxs(P,{variant:"link",size:"sm",className:"text-sm text-muted-foreground",children:[e.jsx(uj,{className:"h-3 w-3 mr-1"}),"Learn More About Framing"]})})]})}function j8(){return e.jsxs("div",{className:"container mx-auto py-6 max-w-5xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Frame Education Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Everything you need to know about custom framing to make informed decisions"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(y8,{}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-muted/30 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Framing Glossary"}),e.jsx("p",{className:"mb-3",children:"Essential framing terms to know:"}),e.jsxs("dl",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"United Inches"}),e.jsx("dd",{className:"text-sm text-muted-foreground",children:"The sum of the width and height of your framed piece, used for pricing."})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"Mat Board"}),e.jsx("dd",{className:"text-sm text-muted-foreground",children:"The paper-based border between artwork and frame that adds visual space."})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"Conservation Framing"}),e.jsx("dd",{className:"text-sm text-muted-foreground",children:"Techniques that protect artwork from environmental damage and deterioration."})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"Rabbet"}),e.jsx("dd",{className:"text-sm text-muted-foreground",children:"The groove in a frame where the glass, mat, artwork, and backing fit."})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium",children:"Fillet"}),e.jsx("dd",{className:"text-sm text-muted-foreground",children:"A small decorative molding inside the main frame or between artwork and mat."})]})]})]}),e.jsxs("div",{className:"bg-muted/30 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Framing FAQ"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"How do I choose the right frame color?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a color from your artwork, match your decor, or choose a neutral that complements the artwork's tones."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Is UV glass worth the extra cost?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes, especially for valuable artwork, photographs, or pieces displayed in bright areas where fading is a concern."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Should I frame without a mat?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mats provide visual space around artwork and prevent it from touching the glass. Frameless mounting works best for canvas and modern art."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"How often should I reframe artwork?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Every 10-15 years for valuable pieces, or when you notice yellowing, warping, or other signs of deterioration."})]})]})]})]})]})]})}function b8({className:s=""}){const[t,r]=p.useState(!1),n=[{to:"/",label:"Home",icon:Z2},{to:"/pos-system",label:"POS System",icon:wl},{to:"/orders",label:"Orders",icon:Gs},{to:"/customers",label:"Customers",icon:Y2},{to:"/inventory",label:"Inventory",icon:uu},{to:"/production",label:"Production",icon:xi}];return e.jsx("div",{className:`md:hidden ${s}`,children:e.jsxs(IT,{open:t,onOpenChange:r,children:[e.jsx(h8,{asChild:!0,children:e.jsxs(P,{variant:"ghost",size:"icon",className:"text-gray-700 dark:text-gray-200",children:[e.jsx(tj,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsx(Ym,{side:"left",className:"w-64 p-0",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b",children:e.jsxs(Rt,{to:"/",onClick:()=>r(!1),className:"flex items-center space-x-2",children:[e.jsx("img",{src:"/images/toolman-jay-avatar.png",alt:"Jay's Frames",className:"w-8 h-8 rounded-full",onError:a=>{a.currentTarget.style.display="none"}}),e.jsx("span",{className:"text-lg font-bold",children:"Jay's Frames"})]})}),e.jsx("nav",{className:"flex-1 py-4",children:e.jsx("ul",{className:"space-y-2 px-4",children:n.map(a=>{const i=a.icon;return e.jsx("li",{children:e.jsx(Rt,{to:a.to,onClick:()=>r(!1),children:e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(i,{className:"h-5 w-5"}),e.jsx("span",{children:a.label})]})})},a.to)})})})]})})]})})}function w8(){const{toast:s}=vu(),t=ss(),[r,n]=p.useState(!1),{data:a,isLoading:i,error:o}=ue({queryKey:["/api/pricing-monitor/status"],refetchInterval:3e5}),l=Ae({mutationFn:async()=>{const h=await fetch("/api/pricing-monitor/check",{method:"POST",headers:{"Content-Type":"application/json"}});if(!h.ok)throw new Error("Failed to trigger pricing check");return h.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/pricing-monitor/status"]}),s({title:"Pricing Check Complete",description:"Latest pricing alignment has been analyzed"})},onError:h=>{s({title:"Check Failed",description:h.message,variant:"destructive"})}}),c=async()=>{try{const h=await fetch("/api/pricing-monitor/report");if(!h.ok)throw new Error("Failed to generate report");const m=await h.blob(),x=window.URL.createObjectURL(m),g=document.createElement("a");g.href=x,g.download=`pricing-report-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(x),document.body.removeChild(g),s({title:"Report Downloaded",description:"Pricing alignment report has been downloaded"})}catch{s({title:"Download Failed",description:"Could not download the pricing report",variant:"destructive"})}},d=async()=>{n(!0);try{await l.mutateAsync()}finally{n(!1)}};if(i)return e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(nr,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading pricing status..."})]});if(o||!(a!=null&&a.success))return e.jsxs(hs,{variant:"destructive",children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx(ps,{children:"Failed to load pricing status. Please try again later."})]});const{data:u}=a;return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Pricing Monitor"}),e.jsx("p",{className:"text-muted-foreground",children:"Automated monitoring of pricing alignment with industry standards"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{variant:"outline",onClick:c,className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-4 w-4"}),"Download Report"]}),e.jsxs(P,{onClick:d,disabled:r,className:"flex items-center gap-2",children:[e.jsx(nr,{className:`h-4 w-4 ${r?"animate-spin":""}`}),r?"Checking...":"Check Now"]})]})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[u.adjustmentsNeeded?e.jsx(Dt,{className:"h-5 w-5 text-orange-500"}):e.jsx(Ks,{className:"h-5 w-5 text-green-500"}),"Pricing Alignment Status"]}),e.jsxs(ee,{children:["Last checked: ",new Date(a.timestamp).toLocaleString()]})]}),e.jsx(H,{children:e.jsx(hs,{variant:u.adjustmentsNeeded?"destructive":"default",children:e.jsx(ps,{className:"text-base",children:u.summary})})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Current Pricing Analysis"}),e.jsx(ee,{children:"Comparison of current prices against industry benchmarks"})]}),e.jsx(H,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:u.currentPrices.map((h,m)=>e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:h.scenario}),e.jsxs(pe,{variant:"outline",children:["$",h.totalPrice.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Frame:"}),e.jsxs("span",{children:["$",h.breakdown.frame.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mat:"}),e.jsxs("span",{children:["$",h.breakdown.mat.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Glass:"}),e.jsxs("span",{children:["$",h.breakdown.glass.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Labor:"}),e.jsxs("span",{children:["$",h.breakdown.labor.toFixed(2)]})]})]})]},m))})})]}),u.recommendations.length>0&&e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx($o,{className:"h-5 w-5"}),"Pricing Adjustment Recommendations"]}),e.jsx(ee,{children:"Suggested changes to align with industry standards"})]}),e.jsx(H,{children:e.jsx("div",{className:"space-y-4",children:u.recommendations.map((h,m)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"font-semibold capitalize",children:[h.component," Adjustment"]}),e.jsxs(pe,{variant:h.adjustment>0?"destructive":"secondary",children:[h.adjustment>0?"+":"",Math.round(h.adjustment*100),"%"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:h.reason}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Current Factor: ",h.currentFactor.toFixed(3)]}),e.jsxs("div",{children:["Recommended Factor: ",h.recommendedFactor.toFixed(3)]})]})]},m))})})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsx(G,{children:"Automated Monitoring"}),e.jsx(ee,{children:"This system runs automatically every 6 hours to ensure pricing stays competitive"})]}),e.jsx(H,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Next Check"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled for 6 hours from last run"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Tolerance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"15% from industry targets"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold",children:"Action Required"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.adjustmentsNeeded?"Yes - Review recommendations":"No - All aligned"})]})]})})]})]})}function N8(){const[s,t]=p.useState(""),[r,n]=p.useState("16"),[a,i]=p.useState("20"),[o,l]=p.useState("3"),[c,d]=p.useState(""),[u,h]=p.useState("frame"),[m,x]=p.useState(null),[g,f]=p.useState(!1),v=async()=>{if(s){f(!0);try{const k=u==="frame"?"/api/larson-optimizer/optimize/frame":"/api/larson-optimizer/optimize/footage",S=u==="frame"?{itemNumber:s,artworkWidth:parseFloat(r),artworkHeight:parseFloat(a),matWidth:parseFloat(o)}:{itemNumber:s,footageNeeded:parseFloat(c)},D=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(D.ok){const T=await D.json();x(T)}else console.error("Failed to calculate optimization")}catch(k){console.error("Error calculating optimization:",k)}finally{f(!1)}}},y=k=>`$${k.toFixed(2)}`,j=k=>{switch(k){case"length":return e.jsx(Gs,{className:"h-4 w-4"});case"chop":return e.jsx(ha,{className:"h-4 w-4"});case"mixed":return e.jsx(hn,{className:"h-4 w-4"});default:return e.jsx(hn,{className:"h-4 w-4"})}},b=k=>{switch(k){case"length":return"bg-blue-500";case"chop":return"bg-green-500";case"mixed":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-5 w-5"}),"Larson-Juhl Order Optimizer"]}),e.jsx(ee,{children:"Determine the most cost-effective way to purchase frame moulding: full length sticks vs. chop pricing vs. mixed approach"})]}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"itemNumber",children:"Larson-Juhl Item Number"}),e.jsx(q,{id:"itemNumber",value:s,onChange:k=>t(k.target.value),placeholder:"e.g., 10-036M, 100750, etc."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{children:"Calculation Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:u==="frame"?"default":"outline",onClick:()=>h("frame"),size:"sm",children:"Frame Dimensions"}),e.jsx(P,{variant:u==="footage"?"default":"outline",onClick:()=>h("footage"),size:"sm",children:"Custom Footage"})]})]}),u==="frame"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"artworkWidth",children:"Artwork Width (in)"}),e.jsx(q,{id:"artworkWidth",type:"number",value:r,onChange:k=>n(k.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"artworkHeight",children:"Artwork Height (in)"}),e.jsx(q,{id:"artworkHeight",type:"number",value:a,onChange:k=>i(k.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"matWidth",children:"Mat Width (in)"}),e.jsx(q,{id:"matWidth",type:"number",value:o,onChange:k=>l(k.target.value)})]})]}),u==="footage"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{htmlFor:"customFootage",children:"Footage Needed (ft)"}),e.jsx(q,{id:"customFootage",type:"number",step:"0.1",value:c,onChange:k=>d(k.target.value),placeholder:"Enter exact footage needed"})]}),e.jsx(P,{onClick:v,disabled:g||!s||u==="footage"&&!c,className:"w-full",children:g?"Calculating...":"Optimize Order"})]})]}),m&&e.jsxs("div",{className:"space-y-4",children:[m.recommendation.alert&&e.jsxs(hs,{children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx(ps,{children:m.recommendation.alert})]}),e.jsxs(V,{children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[j(m.recommendation.method),"Recommendation: ",m.recommendation.method.toUpperCase()]}),e.jsx(ee,{children:m.recommendation.reason})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(pe,{className:b(m.recommendation.method),children:["Save ",y(m.recommendation.savings)]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.footageNeeded," ft needed"]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(V,{className:m.recommendation.method==="length"?"ring-2 ring-blue-500":"",children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2 text-base",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Length Pricing"]}),e.jsx(ee,{children:"Full 9.5' sticks"})]}),e.jsxs(H,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:y(m.lengthOption.totalCost)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:m.lengthOption.description})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total footage:"}),e.jsxs("span",{children:[m.lengthOption.totalFootage,"'"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Waste:"}),e.jsxs("span",{className:"text-red-600",children:[m.lengthOption.wasteFootage.toFixed(1),"'"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost per foot:"}),e.jsx("span",{children:y(m.lengthOption.costPerFoot)})]})]})]})]}),e.jsxs(V,{className:m.recommendation.method==="chop"?"ring-2 ring-green-500":"",children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2 text-base",children:[e.jsx(ha,{className:"h-4 w-4"}),"Chop Pricing"]}),e.jsx(ee,{children:"Cut to exact length"})]}),e.jsxs(H,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:y(m.chopOption.totalCost)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:m.chopOption.description})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Exact footage:"}),e.jsxs("span",{children:[m.chopOption.footageNeeded,"'"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Waste:"}),e.jsx("span",{className:"text-green-600",children:"0'"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cost per foot:"}),e.jsx("span",{children:y(m.chopOption.costPerFoot)})]})]})]})]}),m.mixedOption&&e.jsxs(V,{className:m.recommendation.method==="mixed"?"ring-2 ring-purple-500":"",children:[e.jsxs(K,{children:[e.jsxs(G,{className:"flex items-center gap-2 text-base",children:[e.jsx(hn,{className:"h-4 w-4"}),"Mixed Approach"]}),e.jsx(ee,{children:"Combination of full sticks + chop"})]}),e.jsxs(H,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:y(m.mixedOption.totalCost)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:m.mixedOption.description})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Full sticks:"}),e.jsx("span",{children:m.mixedOption.fullSticks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Chop footage:"}),e.jsxs("span",{children:[m.mixedOption.chopFootage.toFixed(1),"'"]})]})]})]})]})]})]})]})}function S8(){return e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Larson-Juhl Order Optimizer"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Optimize your frame moulding orders by comparing length vs. chop pricing to minimize costs and waste."})]}),e.jsx(N8,{})]})}const C8=()=>{const[s,t]=p.useState(16),[r,n]=p.useState(20),[a,i]=p.useState(2),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,h]=p.useState(""),[m,x]=p.useState(1),[g,f]=p.useState(null),[v,y]=p.useState(!1),[j,b]=p.useState(!0),{data:k=[]}=ue({queryKey:["/api/frames"]}),{data:S=[]}=ue({queryKey:["/api/mat-colors"]}),{data:D=[]}=ue({queryKey:["/api/glass-options"]}),T=async()=>{if(!(!o||!c||!u||s<=0||r<=0)){y(!0);try{const N=await(await le("POST","/api/pricing/calculate",{frameId:o,matColorId:c,glassOptionId:u,artworkWidth:s,artworkHeight:r,matWidth:a,quantity:m,includeWholesalePrices:!1})).json(),A=s+r,F=s+a*2,Z=r+a*2,Q={...N,unitedInches:A,finishedDimensions:{width:F,height:Z},breakdown:{materials:N.materialCost||N.framePrice+N.matPrice+N.glassPrice,labor:N.laborCost||0,markup:N.totalPrice-(N.materialCost||0)-(N.laborCost||0)}};f(Q)}catch(w){console.error("Error calculating estimate:",w)}finally{y(!1)}}};p.useEffect(()=>{if(j){const w=setTimeout(()=>{T()},500);return()=>clearTimeout(w)}},[o,c,u,s,r,a,m,j]);const C=k.find(w=>w.id===o),E=S.find(w=>w.id===c),I=D.find(w=>w.id===u);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsx(K,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"h-5 w-5"}),"Automated Cost Estimator",e.jsxs(pe,{variant:"secondary",className:"ml-2",children:[e.jsx(Fo,{className:"h-3 w-3 mr-1"}),"Real-time"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(nj,{className:"h-4 w-4"}),"Project Specifications"]})}),e.jsxs(H,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"artwork-width",children:"Artwork Width (inches)"}),e.jsx(q,{id:"artwork-width",type:"number",value:s,onChange:w=>t(Number(w.target.value)),min:"1",max:"200"})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"artwork-height",children:"Artwork Height (inches)"}),e.jsx(q,{id:"artwork-height",type:"number",value:r,onChange:w=>n(Number(w.target.value)),min:"1",max:"200"})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"mat-width",children:"Mat Width (inches)"}),e.jsx(q,{id:"mat-width",type:"number",value:a,onChange:w=>i(Number(w.target.value)),min:"0",max:"10",step:"0.25"})]}),e.jsxs("div",{children:[e.jsx(O,{children:"Frame Selection"}),e.jsxs(qe,{value:o,onValueChange:l,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select a frame"})}),e.jsx(Ue,{children:k.map(w=>e.jsx(te,{value:w.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xh,{className:"h-4 w-4"}),w.name," - ",w.material,e.jsxs(pe,{variant:"outline",children:["$",w.price,"/ft"]})]})},w.id))})]})]}),e.jsxs("div",{children:[e.jsx(O,{children:"Mat Color"}),e.jsxs(qe,{value:c,onValueChange:d,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select mat color"})}),e.jsx(Ue,{children:S.map(w=>e.jsx(te,{value:w.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:w.color}}),w.name,w.category&&e.jsx(pe,{variant:"outline",children:w.category})]})},w.id))})]})]}),e.jsxs("div",{children:[e.jsx(O,{children:"Glass Type"}),e.jsxs(qe,{value:u,onValueChange:h,children:[e.jsx(Ve,{children:e.jsx(ze,{placeholder:"Select glass type"})}),e.jsx(Ue,{children:D.map(w=>e.jsx(te,{value:w.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bo,{className:"h-4 w-4"}),w.name,e.jsxs(pe,{variant:"outline",children:["$",w.price,"/sq.in"]})]})},w.id))})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"quantity",children:"Quantity"}),e.jsx(q,{id:"quantity",type:"number",value:m,onChange:w=>x(Number(w.target.value)),min:"1",max:"100"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{onClick:T,disabled:v||!o||!c||!u,className:"flex-1",children:v?"Calculating...":"Calculate Cost"}),e.jsxs(P,{variant:"outline",onClick:()=>b(!j),className:j?"bg-green-50":"",children:[e.jsx(Fo,{className:"h-4 w-4"}),"Auto"]})]})]})]}),e.jsxs(V,{children:[e.jsx(K,{children:e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(kn,{className:"h-4 w-4"}),"Cost Estimate"]})}),e.jsx(H,{children:g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["$",g.totalPrice.toFixed(2)]}),e.jsx("div",{className:"text-sm text-blue-500",children:"Total Estimated Cost"}),m>1&&e.jsxs("div",{className:"text-sm text-gray-500",children:["$",(g.totalPrice/m).toFixed(2)," per unit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(O,{children:"Artwork Size"}),e.jsxs("div",{className:"font-medium",children:[s,'"  ',r,'"']})]}),e.jsxs("div",{children:[e.jsx(O,{children:"Finished Size"}),e.jsxs("div",{className:"font-medium",children:[g.finishedDimensions.width,'"  ',g.finishedDimensions.height,'"']})]}),e.jsxs("div",{children:[e.jsx(O,{children:"United Inches"}),e.jsxs("div",{className:"font-medium",children:[g.unitedInches,'"']})]}),e.jsxs("div",{children:[e.jsx(O,{children:"Mat Border"}),e.jsxs("div",{className:"font-medium",children:[a,'" all around']})]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Cost Breakdown"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xh,{className:"h-4 w-4"}),e.jsx("span",{children:"Frame"}),C&&e.jsx(pe,{variant:"outline",className:"text-xs",children:C.material})]}),e.jsxs("span",{className:"font-medium",children:["$",g.framePrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx("span",{children:"Mat"}),E&&e.jsx("div",{className:"w-3 h-3 rounded border",style:{backgroundColor:E.color}})]}),e.jsxs("span",{className:"font-medium",children:["$",g.matPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bo,{className:"h-4 w-4"}),e.jsx("span",{children:"Glass"}),I&&e.jsx(pe,{variant:"outline",className:"text-xs",children:I.name})]}),e.jsxs("span",{className:"font-medium",children:["$",g.glassPrice.toFixed(2)]})]}),g.laborCost>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X2,{className:"h-4 w-4"}),e.jsx("span",{children:"Labor & Assembly"})]}),e.jsxs("span",{className:"font-medium",children:["$",g.laborCost.toFixed(2)]})]}),e.jsx(Ot,{}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Materials"}),e.jsxs("span",{children:["$",g.breakdown.materials.toFixed(2)]})]}),g.breakdown.labor>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Labor"}),e.jsxs("span",{children:["$",g.breakdown.labor.toFixed(2)]})]}),g.breakdown.markup>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Markup & Services"}),e.jsxs("span",{children:["$",g.breakdown.markup.toFixed(2)]})]})]}),(C||E||I)&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Selected Materials"}),C&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Frame:"})," ",C.name," (",C.manufacturer,")"]}),E&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Mat:"})," ",E.name]}),I&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Glass:"})," ",I.name]})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select frame, mat, and glass options to see cost estimate"}),e.jsx("p",{className:"text-sm mt-2",children:j?"Estimates will update automatically":"Click Calculate to get estimate"})]})})]})]})]})},k8=()=>e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cost Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Get instant pricing estimates for custom framing projects"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(pe,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Fo,{className:"h-3 w-3"}),"Real-time"]}),e.jsxs(pe,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx($o,{className:"h-3 w-3"}),"Professional"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(V,{children:[e.jsx(K,{className:"pb-3",children:e.jsxs(G,{className:"text-sm flex items-center gap-2",children:[e.jsx(hn,{className:"h-4 w-4"}),"Instant Calculations"]})}),e.jsx(H,{children:e.jsx(ee,{children:"Get real-time pricing as you adjust dimensions and select materials"})})]}),e.jsxs(V,{children:[e.jsx(K,{className:"pb-3",children:e.jsxs(G,{className:"text-sm flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Time Saving"]})}),e.jsx(H,{children:e.jsx(ee,{children:"No more manual calculations or waiting for quotes"})})]}),e.jsxs(V,{children:[e.jsx(K,{className:"pb-3",children:e.jsxs(G,{className:"text-sm flex items-center gap-2",children:[e.jsx($o,{className:"h-4 w-4"}),"Professional Accuracy"]})}),e.jsx(H,{children:e.jsx(ee,{children:"Based on actual wholesale pricing and industry standards"})})]})]})]}),e.jsx(C8,{}),e.jsxs(V,{children:[e.jsx(K,{children:e.jsx(G,{className:"text-lg",children:"Tips for Accurate Estimates"})}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Dimension Guidelines"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Enter artwork dimensions in inches"}),e.jsx("li",{children:" Mat width is border around all sides"}),e.jsx("li",{children:' Standard mat widths: 2", 2.5", 3", 4"'}),e.jsx("li",{children:" Consider proportion to artwork size"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Material Selection"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Frame prices are per linear foot"}),e.jsx("li",{children:" Glass pricing varies by type and size"}),e.jsx("li",{children:" Mat colors affect final pricing"}),e.jsx("li",{children:" Premium materials cost more but last longer"})]})]})]})})]})]});class T8{constructor(){this.initialized=!1,this.appId="jays-frames-pos",this.unsubscribe=null}init(){if(!(typeof window>"u"||this.initialized))try{if(!window.jfNotifications){console.log("Unified notification system not available - continuing without external notifications"),this.initialized=!0;return}window.jfNotifications.init(this.appId,{onConnect:()=>{console.log("Connected to unified notification system")},onDisconnect:()=>{console.log("Disconnected from unified notification system")}}),this.unsubscribe=window.jfNotifications.onNotification(t=>{this.displayNotification(t)}),window.addEventListener("jf-notification",t=>{this.displayNotification(t.detail)}),this.initialized=!0,console.log("Notification service initialized")}catch(t){console.warn("Failed to initialize notification service:",t),this.initialized=!0}}async sendNotification(t,r,n="info",a={}){if(typeof window>"u"||!window.jfNotifications)return console.warn("Unified notification system not available"),!1;try{return!!await window.jfNotifications.sendNotification(t,r,n,{sourceId:a.sourceId||"",actionable:a.actionable||!1,link:a.link||"",smsEnabled:a.smsEnabled||!1,smsRecipient:a.smsRecipient||""})}catch(i){return console.error("Failed to send notification:",i),js({title:"Send Notification Error",description:`Failed to send notification: ${i.message||"Unknown error"}`,variant:"destructive"}),!1}}displayNotification(t){let r="default";t.type==="error"&&(r="destructive"),js({title:t.title,description:t.description,variant:r}),t.actionable&&t.link&&console.log("Actionable notification with link:",t.link)}cleanup(){this.unsubscribe&&this.unsubscribe(),typeof window<"u"&&window.removeEventListener("jf-notification",()=>{})}}const Hf=new T8;function P8(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(V,{className:"w-full max-w-md mx-4",children:e.jsxs(H,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx($t,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function E8(){return console.log("AppHealthCheck component rendered"),e.jsx("div",{style:{position:"fixed",top:"10px",right:"10px",background:"green",color:"white",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",zIndex:9999},children:"App Loading "})}function D8(s,t){var r;return s.name==="AxiosError"&&!s.response?{type:"network",message:"Unable to connect to the server. Please check your internet connection.",code:"NETWORK_ERROR",originalError:s}:s.response&&s.response.status>=500?{type:"server",message:"The server encountered an error. Please try again later.",code:`SERVER_${s.response.status}`,originalError:s}:s.response&&s.response.status===401?{type:"authentication",message:"You need to be logged in to perform this action.",code:"UNAUTHENTICATED",originalError:s}:s.response&&s.response.status===403?{type:"authorization",message:"You do not have permission to perform this action.",code:"UNAUTHORIZED",originalError:s}:s.response&&s.response.status===404?{type:"not_found",message:"The requested resource was not found.",code:"NOT_FOUND",originalError:s}:s.response&&(s.response.status===400||s.response.status===422)?{type:"validation",message:((r=s.response.data)==null?void 0:r.message)||"The submitted data is invalid.",code:"VALIDATION_ERROR",originalError:s}:s.code==="ECONNABORTED"||s.code==="ETIMEDOUT"||s.message&&(s.message.includes("timeout")||s.message.includes("Network Error"))?{type:"timeout",message:"The request took too long to complete. Please try again.",code:"REQUEST_TIMEOUT",originalError:s}:s.message&&(s.message.includes("image")||s.message.includes("file")||s.message.includes("upload"))?{type:"image_processing",message:"There was a problem processing your image. Please try again with a different file.",code:"IMAGE_PROCESSING_ERROR",originalError:s}:{type:"unknown",message:s.message||"An unexpected error occurred.",originalError:s}}function A8(s,t){const r=D8(s);return console.error(`Error ${`in ${t}`}:`,r),r}function qf(s,t){console.error("Error logged to server:",{error:s,componentStack:t})}function I8(){window.addEventListener("error",s=>{console.error("Global error:",s.error),qf(s.error,"Global Error")}),window.addEventListener("unhandledrejection",s=>{s.preventDefault();const t=s.reason instanceof Error?s.reason:new Error(String(s.reason));qf(t,"Unhandled Promise Rejection"),t.message&&!t.message.includes("AbortError")&&A8(t,"Unhandled Promise Rejection")})}class FT extends p.Component{constructor(t){super(t),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Error caught by boundary:",t,r),console.error("Production error:",{message:t.message,stack:t.stack,componentStack:r.componentStack}),this.setState({error:t,errorInfo:r})}render(){var t;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Something went wrong"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"The application encountered an unexpected error. You can try reloading the page or reset the error state."}),this.state.error&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer",children:"Technical Details"}),e.jsxs("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:[this.state.error.toString(),(t=this.state.errorInfo)==null?void 0:t.componentStack]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Try Again"}),e.jsx("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Reload Page"})]})]})}):this.props.children}}function _8(){const[s,t]=p.useState(!1);console.log("App component is rendering...",new Date().toISOString()),p.useEffect(()=>((async()=>{try{Hf.init()}catch(a){console.error("Error initializing app:",a)}})(),()=>{try{Hf.cleanup()}catch(a){console.error("Error during cleanup:",a)}}),[]),p.useEffect(()=>{const n=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;n==="dark"||!n&&a?(t(!0),document.documentElement.classList.add("dark")):(t(!1),document.documentElement.classList.remove("dark"))},[]),p.useEffect(()=>{I8();const n=a=>{console.error("Unhandled promise rejection caught:",a.reason),a.preventDefault()};return window.addEventListener("unhandledrejection",n),()=>{window.removeEventListener("unhandledrejection",n)}},[]);const r=()=>{const n=!s;t(n),n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsx(f2,{client:ut,children:e.jsx(gE,{children:e.jsxs(DT,{children:[e.jsx("div",{className:`min-h-screen ${s?"dark":""}`,children:e.jsxs(FT,{children:[e.jsx(E8,{}),e.jsx(b8,{}),e.jsx(bE,{darkMode:s,toggleTheme:r}),e.jsx("main",{className:"container pt-16 lg:pt-24 pb-10 px-3 lg:px-4",children:e.jsxs(MP,{children:[e.jsx(Ze,{path:"/",component:nA}),e.jsx(Ze,{path:"/orders",component:$A}),e.jsx(Ze,{path:"/dashboard",component:VA}),e.jsx(Ze,{path:"/production",component:RO}),e.jsx(Ze,{path:"/orders/:orderId",component:xV}),e.jsx(Ze,{path:"/orders/progress/:orderId",component:Sp}),e.jsx(Ze,{path:"/customer-portal",component:p.lazy(()=>yh(()=>import("./CustomerPortal-_fiLKhx1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))}),e.jsx(Ze,{path:"/customer-dashboard",component:p.lazy(()=>yh(()=>import("./CustomerDashboardPage-Bf48wOqq.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])))}),e.jsx(Ze,{path:"/materials",component:f5}),e.jsx(Ze,{path:"/materials-pick-list",component:b5}),e.jsx(Ze,{path:"/inventory",component:oV}),e.jsx(Ze,{path:"/inventory-tracking",component:cV}),e.jsx(Ze,{path:"/hub",component:QB}),e.jsx(Ze,{path:"/pricing",component:uV}),e.jsx(Ze,{path:"/cost-estimator",component:k8}),e.jsx(Ze,{path:"/vendor-settings",component:mV}),e.jsx(Ze,{path:"/mat-test",component:v6}),e.jsx(Ze,{path:"/checkout/:orderGroupId",component:E4}),e.jsx(Ze,{path:"/payment-status",component:D4}),e.jsx(Ze,{path:"/order-progress/:orderId",component:Sp}),e.jsx(Ze,{path:"/customers/:id",component:U4}),e.jsx(Ze,{path:"/customers",component:H4}),e.jsx(Ze,{path:"/payment-links",component:gV}),e.jsx(Ze,{path:"/payment/:token",component:jV}),e.jsx(Ze,{path:"/frame-education",component:j8}),e.jsx(Ze,{path:"/webhook-integration",component:g6}),e.jsx(Ze,{path:"/mat-border-demo",component:$V}),e.jsx(Ze,{path:"/system-health",component:VV}),e.jsx(Ze,{path:"/pricing-monitor",component:w8}),e.jsx(Ze,{path:"/larson-optimizer",component:S8}),e.jsx(Ze,{path:"/notifications",component:HV}),e.jsx(Ze,{path:"/kanban-test",component:qV}),e.jsx(Ze,{path:"/voice-calls",component:zV}),e.jsx(Ze,{path:"/automated-notifications",component:WV}),e.jsx(Ze,{component:P8})]})}),e.jsx(v8,{}),e.jsx(Al,{updateInterval:5e3,compact:!0})]})}),e.jsx(GP,{})]})})})}window.addEventListener("error",s=>{console.error("Global error caught:",s.error),console.error("Error details:",{message:s.message,filename:s.filename,lineno:s.lineno,colno:s.colno,error:s.error})});window.addEventListener("unhandledrejection",s=>{var t,r,n,a;console.error("Unhandled promise rejection:",s.reason),!((r=(t=s.reason)==null?void 0:t.message)!=null&&r.includes("vite"))&&!((a=(n=s.reason)==null?void 0:n.message)!=null&&a.includes("WebSocket"))&&s.preventDefault()});setTimeout(()=>{const s=document.querySelector(".loading-fallback");s&&s.style.display!=="none"&&(console.error("App failed to load within 10 seconds - likely JavaScript error"),s.innerHTML=`
      <div style="text-align: center; padding: 20px; font-family: Arial, sans-serif;">
        <h2 style="color: #dc3545;">App Loading Failed</h2>
        <p>The application failed to load. This could be due to:</p>
        <ul style="text-align: left; max-width: 400px; margin: 0 auto;">
          <li>JavaScript execution error</li>
          <li>Network connectivity issue</li>
          <li>Browser compatibility problem</li>
        </ul>
        <button onclick="window.location.reload()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 10px;">
          Reload Page
        </button>
        <br>
        <small>Check the browser console for error details</small>
      </div>
    `)},1e4);const R8=document.getElementById("root");if(R8)console.log("Root element found successfully");else{console.error("Root element not found");const s=document.createElement("div");s.id="root",document.body.appendChild(s),console.log("Created new root element")}try{const s=document.getElementById("root");if(!s)throw new Error("Could not find or create root element");ed.createRoot(s).render(e.jsx(Pe.StrictMode,{children:e.jsx(FT,{children:e.jsx(_8,{})})})),console.log("App initialized successfully")}catch(s){console.error("Failed to initialize app:",s);const t=document.getElementById("root")||document.body;t.innerHTML=`
    <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">
      <h1>Application Error</h1>
      <p>Failed to load the application. Please refresh the page.</p>
      <button onclick="window.location.reload()" style="padding: 10px 20px; margin-top: 10px;">Refresh Page</button>
      <div style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 4px;">
        <strong>Debug Info:</strong><br>
        Error: ${s instanceof Error?s.message:"Unknown error"}<br>
        Timestamp: ${new Date().toISOString()}
      </div>
    </div>
  `}export{P as B,V as C,q as I,Bt as T,Cs as a,K as b,G as c,ee as d,H as e,ht as f,le as g,Lt as h,ve as i,Ee as j,I4 as k,iU as l,Be as u};
