import{j as e}from"./ui-O3Y4hNsB.js";import{r}from"./vendor--0RGCJ5T.js";import{a as N,u as T,B as S,T as y,h as L,i as o,j as c,k,C as i,b as l,c as d,d as m,e as u,l as w}from"./index-DFZAn5tq.js";import{L as P,aP as A}from"./icons-DasMVMBh.js";import"./query-DSGfYlti.js";import"./utils-CJ8RBMVN.js";import"./charts-zhNjaY9P.js";import"./forms-BphQ7k6W.js";function M(){const[,t]=N(),{toast:a}=T(),[s,h]=r.useState(null),[x,f]=r.useState(""),[j,g]=r.useState(!0),[p,v]=r.useState("dashboard");r.useEffect(()=>{const C=localStorage.getItem("customerAuthToken"),n=localStorage.getItem("customerId"),I=localStorage.getItem("customerName");if(!C||!n){a({title:"Authentication required",description:"Please log in to access your dashboard",variant:"destructive"}),t("/customer-portal");return}h(parseInt(n,10)),f(I||"Customer"),g(!1)},[t,a]);const b=()=>{localStorage.removeItem("customerAuthToken"),localStorage.removeItem("customerEmail"),localStorage.removeItem("customerName"),localStorage.removeItem("customerId"),a({title:"Logged out",description:"You have been logged out successfully"}),t("/customer-portal")};return j?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(P,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome, ",x]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your framing orders and preferences"})]}),e.jsxs(S,{variant:"outline",onClick:b,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),e.jsxs(y,{defaultValue:"dashboard",value:p,onValueChange:v,className:"space-y-6",children:[e.jsxs(L,{className:"grid grid-cols-3 w-full max-w-md",children:[e.jsx(o,{value:"dashboard",children:"Dashboard"}),e.jsx(o,{value:"orders",children:"Orders"}),e.jsx(o,{value:"preferences",children:"Preferences"})]}),e.jsx(c,{value:"dashboard",children:s&&e.jsx(k,{customerId:s})}),e.jsx(c,{value:"orders",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Your Orders"}),e.jsx(m,{children:"Track the status of your framing orders"})]}),e.jsx(u,{children:s&&e.jsx(w,{customerId:s})})]})}),e.jsx(c,{value:"preferences",children:s&&e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Your Preferences"}),e.jsx(m,{children:"Manage your notification settings and framing preferences"})]}),e.jsx(u,{children:e.jsx("iframe",{src:`/customer-preferences-iframe?customerId=${s}`,className:"w-full min-h-[500px] border-0",title:"Customer Preferences"})})]})})]})]})}export{M as default};
