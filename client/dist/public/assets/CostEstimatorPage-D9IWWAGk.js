import{j as e}from"./ui-O3Y4hNsB.js";import{r as i}from"./vendor--0RGCJ5T.js";import{C as d,b as m,c as o,f as r,e as g,L as t,I as b,g as y,h as C,i as S,j as k,k as F,B as D,S as P,l as ae,d as E}from"./index-D9tp6WKo.js";import{u as I}from"./query-DSGfYlti.js";import{aP as M,l as A,j as ie,aQ as R,aL as H,u as te,aK as le,aR as re,J as L,o as ne}from"./icons-DNNJj53b.js";import"./utils-CJ8RBMVN.js";import"./charts-zhNjaY9P.js";import"./forms-BphQ7k6W.js";const ce=()=>{const[n,z]=i.useState(16),[c,K]=i.useState(20),[x,O]=i.useState(2),[h,Q]=i.useState(""),[j,V]=i.useState(""),[u,U]=i.useState(""),[N,J]=i.useState(1),[a,Z]=i.useState(null),[$,q]=i.useState(!1),[f,X]=i.useState(!0),{data:T=[]}=I({queryKey:["/api/frames"]}),{data:G=[]}=I({queryKey:["/api/mat-colors"]}),{data:W=[]}=I({queryKey:["/api/glass-options"]}),B=async()=>{if(!(!h||!j||!u||n<=0||c<=0)){q(!0);try{const l=await(await ae("POST","/api/pricing/calculate",{frameId:h,matColorId:j,glassOptionId:u,artworkWidth:n,artworkHeight:c,matWidth:x,quantity:N,includeWholesalePrices:!1})).json(),Y=n+c,_=n+x*2,ee=c+x*2,se={...l,unitedInches:Y,finishedDimensions:{width:_,height:ee},breakdown:{materials:l.materialCost||l.framePrice+l.matPrice+l.glassPrice,labor:l.laborCost||0,markup:l.totalPrice-(l.materialCost||0)-(l.laborCost||0)}};Z(se)}catch(s){console.error("Error calculating estimate:",s)}finally{q(!1)}}};i.useEffect(()=>{if(f){const s=setTimeout(()=>{B()},500);return()=>clearTimeout(s)}},[h,j,u,n,c,x,N,f]);const p=T.find(s=>s.id===h),v=G.find(s=>s.id===j),w=W.find(s=>s.id===u);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{children:e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Automated Cost Estimator",e.jsxs(r,{variant:"secondary",className:"ml-2",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"Real-time"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"Project Specifications"]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"artwork-width",children:"Artwork Width (inches)"}),e.jsx(b,{id:"artwork-width",type:"number",value:n,onChange:s=>z(Number(s.target.value)),min:"1",max:"200"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"artwork-height",children:"Artwork Height (inches)"}),e.jsx(b,{id:"artwork-height",type:"number",value:c,onChange:s=>K(Number(s.target.value)),min:"1",max:"200"})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"mat-width",children:"Mat Width (inches)"}),e.jsx(b,{id:"mat-width",type:"number",value:x,onChange:s=>O(Number(s.target.value)),min:"0",max:"10",step:"0.25"})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Frame Selection"}),e.jsxs(y,{value:h,onValueChange:Q,children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Select a frame"})}),e.jsx(k,{children:T.map(s=>e.jsx(F,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),s.name," - ",s.material,e.jsxs(r,{variant:"outline",children:["$",s.price,"/ft"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Mat Color"}),e.jsxs(y,{value:j,onValueChange:V,children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Select mat color"})}),e.jsx(k,{children:G.map(s=>e.jsx(F,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:s.color}}),s.name,s.category&&e.jsx(r,{variant:"outline",children:s.category})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Glass Type"}),e.jsxs(y,{value:u,onValueChange:U,children:[e.jsx(C,{children:e.jsx(S,{placeholder:"Select glass type"})}),e.jsx(k,{children:W.map(s=>e.jsx(F,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),s.name,e.jsxs(r,{variant:"outline",children:["$",s.price,"/sq.in"]})]})},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"quantity",children:"Quantity"}),e.jsx(b,{id:"quantity",type:"number",value:N,onChange:s=>J(Number(s.target.value)),min:"1",max:"100"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{onClick:B,disabled:$||!h||!j||!u,className:"flex-1",children:$?"Calculating...":"Calculate Cost"}),e.jsxs(D,{variant:"outline",onClick:()=>X(!f),className:f?"bg-green-50":"",children:[e.jsx(A,{className:"h-4 w-4"}),"Auto"]})]})]})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Cost Estimate"]})}),e.jsx(g,{children:a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["$",a.totalPrice.toFixed(2)]}),e.jsx("div",{className:"text-sm text-blue-500",children:"Total Estimated Cost"}),N>1&&e.jsxs("div",{className:"text-sm text-gray-500",children:["$",(a.totalPrice/N).toFixed(2)," per unit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Artwork Size"}),e.jsxs("div",{className:"font-medium",children:[n,'" × ',c,'"']})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Finished Size"}),e.jsxs("div",{className:"font-medium",children:[a.finishedDimensions.width,'" × ',a.finishedDimensions.height,'"']})]}),e.jsxs("div",{children:[e.jsx(t,{children:"United Inches"}),e.jsxs("div",{className:"font-medium",children:[a.unitedInches,'"']})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Mat Border"}),e.jsxs("div",{className:"font-medium",children:[x,'" all around']})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Cost Breakdown"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Frame"}),p&&e.jsx(r,{variant:"outline",className:"text-xs",children:p.material})]}),e.jsxs("span",{className:"font-medium",children:["$",a.framePrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Mat"}),v&&e.jsx("div",{className:"w-3 h-3 rounded border",style:{backgroundColor:v.color}})]}),e.jsxs("span",{className:"font-medium",children:["$",a.matPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Glass"}),w&&e.jsx(r,{variant:"outline",className:"text-xs",children:w.name})]}),e.jsxs("span",{className:"font-medium",children:["$",a.glassPrice.toFixed(2)]})]}),a.laborCost>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"Labor & Assembly"})]}),e.jsxs("span",{className:"font-medium",children:["$",a.laborCost.toFixed(2)]})]}),e.jsx(P,{}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Materials"}),e.jsxs("span",{children:["$",a.breakdown.materials.toFixed(2)]})]}),a.breakdown.labor>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Labor"}),e.jsxs("span",{children:["$",a.breakdown.labor.toFixed(2)]})]}),a.breakdown.markup>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"Markup & Services"}),e.jsxs("span",{children:["$",a.breakdown.markup.toFixed(2)]})]})]}),(p||v||w)&&e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Selected Materials"}),p&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Frame:"})," ",p.name," (",p.manufacturer,")"]}),v&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Mat:"})," ",v.name]}),w&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Glass:"})," ",w.name]})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select frame, mat, and glass options to see cost estimate"}),e.jsx("p",{className:"text-sm mt-2",children:f?"Estimates will update automatically":"Click Calculate to get estimate"})]})})]})]})]})},ge=()=>e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cost Estimator"}),e.jsx("p",{className:"text-muted-foreground",children:"Get instant pricing estimates for custom framing projects"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),"Real-time"]}),e.jsxs(r,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Professional"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Instant Calculations"]})}),e.jsx(g,{children:e.jsx(E,{children:"Get real-time pricing as you adjust dimensions and select materials"})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Time Saving"]})}),e.jsx(g,{children:e.jsx(E,{children:"No more manual calculations or waiting for quotes"})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsxs(o,{className:"text-sm flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Professional Accuracy"]})}),e.jsx(g,{children:e.jsx(E,{children:"Based on actual wholesale pricing and industry standards"})})]})]})]}),e.jsx(ce,{}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(o,{className:"text-lg",children:"Tips for Accurate Estimates"})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Dimension Guidelines"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Enter artwork dimensions in inches"}),e.jsx("li",{children:"• Mat width is border around all sides"}),e.jsx("li",{children:'• Standard mat widths: 2", 2.5", 3", 4"'}),e.jsx("li",{children:"• Consider proportion to artwork size"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Material Selection"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Frame prices are per linear foot"}),e.jsx("li",{children:"• Glass pricing varies by type and size"}),e.jsx("li",{children:"• Mat colors affect final pricing"}),e.jsx("li",{children:"• Premium materials cost more but last longer"})]})]})]})})]})]});export{ge as default};
