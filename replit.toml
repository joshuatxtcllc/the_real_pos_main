# Production deployment configuration for Cloud Run
modules = ["nodejs-20", "bash", "web", "postgresql-16"]

run = "npx tsx server/index.ts"
entrypoint = "server/index.ts"

[deployment]
build = ["node", "server-only-deploy.mjs"]
run = ["node", "dist/start.mjs"]
deploymentTarget = "autoscale"

[env]
NODE_ENV = "production"

[[ports]]
localPort = 8080
externalPort = 80